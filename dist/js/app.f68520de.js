(function(e){function t(t){for(var r,a,s=t[0],c=t[1],u=t[2],l=0,f=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},i={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0fb16724":"6ac5c91e","chunk-71b54450":"5eb9ba7a","chunk-7950d3ac":"c4f88aeb"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-0fb16724":1,"chunk-71b54450":1,"chunk-7950d3ac":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0fb16724":"246c8cb0","chunk-71b54450":"5ccd616b","chunk-7950d3ac":"fbf5284c"}[e]+".css",i=c.p+r,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===i))return t()}var f=document.getElementsByTagName("style");for(s=0;s<f.length;s++){u=f[s],l=u.getAttribute("data-href");if(l===r||l===i)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],d.parentNode.removeChild(d),n(o)},d.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){a[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e);var f=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",f.name="ChunkLoadError",f.type=r,f.request=a,n[1](f)}i[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var d=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0220":function(e,t,n){var r=n("970b").default,a=n("5bc3").default,i=n("6bc5"),o=i.abi,s=n("dc42"),c=function(){"use strict";function e(t){r(this,e),this.contractAddress=t}return a(e,[{key:"_connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x000000000000000000000000000000000000",n=arguments.length>2?arguments[2]:void 0;this.web3=e,this.contract=new e.eth.Contract(o,this.contractAddress,{from:t,gasPrice:n})}},{key:"isConnected",value:function(){return Boolean(this.web3)}},{key:"mint",value:function(e,t){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.mint(e,t).send().then((function(){return e}))}},{key:"mintAndCreateOrder",value:function(e,t,n){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.mintAndCreateOrder(e,t,this.web3.utils.toWei(n,"ether")).send().then(s)}},{key:"mintAndCreateListing",value:function(e,t){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.mintAndCreateListing(e,t).send().then(s)}},{key:"mintAndCreateAuction",value:function(e,t,n){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.mintAndCreateAuction(e,t,n).send().then(s)}}]),e}();c.isIntegrationClass=!0,e.exports=c},"034f":function(e,t,n){"use strict";n("85ec")},"07c2":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("div",{staticClass:"card",staticStyle:{width:"18rem"},attrs:{tag:"article"}},[n("a",{staticClass:"profileCard_Link",attrs:{href:"/view-user/"+e.user.id}},[n("img",{staticClass:"card-img-top",attrs:{src:e.user.coverImage?e.user.coverImage:e.defaultImg,alt:e.user.name}}),n("div",{staticClass:"card-body"},[n("img",{staticClass:"user-avatar",attrs:{src:e.user.profileImage?e.user.profileImage:e.defaultImg,alt:""}}),n("h4",{staticClass:"card-title"},[e._v(e._s(e.user.name?e.user.name:e.shortenAddress(e.user.id)))]),n("router-link",{staticClass:"username",attrs:{to:"#"}},[n("span",[e._v("@"+e._s(e.user.username?e.user.name:e.shortenAddress(e.user.id)))])]),n("span",{staticClass:"user-bio"},[e._v(e._s(e.user.bio?e.user.bio:"Lorem ipsum"))])],1)]),[n("div",{staticClass:"footer-slot card-footer"},[n("div",{staticClass:"followers"},[n("span",[e._v(" "+e._s(e.user.followerCount)+" ")]),e._v(" Followers ")]),n("div",{staticClass:"follow-btn ",on:{click:function(t){e.isFollowed?e.Unfollow:e.follow}}},[e._v(" "+e._s(e.isFollowed?"Unfollow":"Follow")+" ")])])]],2):e._e()},a=[],i=n("1da1"),o=(n("96cf"),n("d3b7"),n("7f45")),s=n.n(o),c={data:function(){return{isFollowed:null,defaultImg:"https://images.unsplash.com/photo-1542241647-9cbbada2b309?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=869&q=80"}},name:"ItemCard",props:{user:{type:Object,required:!0}},computed:{formatedDate:function(){return this.user.createdDate?s()(this.card.user.createdDate).format("MMM Do, YYYY"):""}},methods:{shortenAddress:function(e){return e.substring(0,6)+"..."+e.substring(e.length-4)},follow:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://artabia.com:3001/user/follow",{method:"post",body:{id:e},headers:{"Content-Type":"application/json",Authorization:JSON.parse(localStorage.getItem("userdata")).token}}).then((function(e){return e}));case 2:n.sent,t.isFollowed=!1;case 4:case"end":return n.stop()}}),n)})))()},Unfollow:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.axios.post("https://artabia.com:3001/user/unfollow",{id:e},{headers:{"Content-Type":"application/json",Authorization:JSON.parse(localStorage.getItem("userdata")).token}}).then((function(e){return e}));case 2:n.sent,t.isFollowed=!0;case 4:case"end":return n.stop()}}),n)})))()},isFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://artabia.com:3001/user/is-following/".concat(e),{headers:{"Content-Type":"application/json",Authorization:JSON.parse(localStorage.getItem("userdata")).token}}).then((function(e){return e.json()}));case 2:r=n.sent,1==r.follows?t.isFollowed=!0:t.isFollowed=!1;case 4:case"end":return n.stop()}}),n)})))()}}},u=c,l=(n("feb3"),n("2877")),f=Object(l["a"])(u,r,a,!1,null,"03936201",null);t["a"]=f.exports},"0ae5":function(e){e.exports=JSON.parse('{"id":"1","name":"John","username":"john-123","bio":"I am a web developer","email":"john@example.com","lang":"en","profileImage":"assets/images/icons/avatar.png","coverImage":"","createdAt":1631731957,"followerCount":10,"followingCount":20,"social":{"website":"http://google.com","discord":"john#0652","youtube":"","facebook":"johndoe","twitch":"","tiktok":"","snapchat":""}}')},1:function(e,t){},10:function(e,t){},11:function(e,t){},"11b5":function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"ERC721ListingMarketplace","sourceName":"contracts/ERC721Marketplace/ERC721ListingMarketplace.sol","abi":[{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"ListingCompleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"ListingCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"ListingOfferPlaced","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"ListingOfferWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"ListingRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"acceptListingOffer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_contractAddress","type":"address"}],"name":"addApprovedContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"approvedContracts","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16","name":"_fee","type":"uint16"}],"name":"changeFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"name":"changeFeeDestination","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"createListing","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"fee","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeDestination","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"listings","outputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint128","name":"offer","type":"uint128"},{"internalType":"address","name":"offeror","type":"address"},{"internalType":"uint128","name":"offerPlacedAt","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC721Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"placeOffer","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"removeListing","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"withdrawOffer","outputs":[],"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x60806040526003805461ffff60a01b1916607d60a21b17905534801561002457600080fd5b506040516119ef3803806119ef833981016040819052610043916100a2565b61004c33610052565b506100d2565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156100b457600080fd5b81516001600160a01b03811681146100cb57600080fd5b9392505050565b61190e806100e16000396000f3fe6080604052600436106100f35760003560e01c8063715018a61161008a578063c71f681811610059578063c71f68181461036e578063ddca3f4314610381578063de53fcd5146103b6578063f2fde38b146103d657600080fd5b8063715018a61461024357806385e1c724146102585780638da5cb5b14610286578063c18b8db4146102b857600080fd5b80633407facd116100c65780633407facd146101c3578063550ee133146101e35780635ff548691461020357806367bd3df21461022357600080fd5b8063135171be146100f8578063150b7a021461011a5780631e18cb891461016357806326749ad714610183575b600080fd5b34801561010457600080fd5b50610118610113366004611587565b6103f6565b005b34801561012657600080fd5b506101456101353660046115ba565b630a85bd0160e11b949350505050565b6040516001600160e01b031990911681526020015b60405180910390f35b34801561016f57600080fd5b5061011861017e366004611587565b610450565b34801561018f57600080fd5b506101b361019e366004611587565b60016020526000908152604090205460ff1681565b604051901515815260200161015a565b3480156101cf57600080fd5b506101186101de36600461169a565b61049c565b3480156101ef57600080fd5b506101186101fe3660046116be565b610531565b34801561020f57600080fd5b5061011861021e3660046116be565b6108b3565b34801561022f57600080fd5b5061011861023e3660046116be565b610a11565b34801561024f57600080fd5b50610118610f8e565b34801561026457600080fd5b506102786102733660046116d7565b610fc4565b60405190815260200161015a565b34801561029257600080fd5b506000546001600160a01b03165b6040516001600160a01b03909116815260200161015a565b3480156102c457600080fd5b506103226102d33660046116be565b60026020819052600091825260409091208054600182015492820154600383015460048401546005909401546001600160a01b039384169594928416936001600160801b039283169316911686565b604080516001600160a01b0397881681526020810196909652938616938501939093526001600160801b03918216606085015290931660808301529190911660a082015260c00161015a565b61011861037c3660046116be565b6111b5565b34801561038d57600080fd5b506003546103a390600160a01b900461ffff1681565b60405161ffff909116815260200161015a565b3480156103c257600080fd5b506003546102a0906001600160a01b031681565b3480156103e257600080fd5b506101186103f1366004611587565b611348565b6000546001600160a01b031633146104295760405162461bcd60e51b815260040161042090611703565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b0316331461047a5760405162461bcd60e51b815260040161042090611703565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146104c65760405162461bcd60e51b815260040161042090611703565b6102ee8161ffff16111561050f5760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b6044820152606401610420565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b6000818152600260208190526040909120015481906001600160a01b031633146105925760405162461bcd60e51b815260206004820152601260248201527137b7363c903634b9ba34b7339037bbb732b960711b6044820152606401610420565b333b15806105af57503360009081526001602052604090205460ff165b6105cb5760405162461bcd60e51b815260040161042090611738565b6000600260008481526020019081526020016000206040518060c00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b03168152602001600182015481526020016002820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016003820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016004820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016005820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000848152602001908152602001600020600080820160006101000a8154906001600160a01b03021916905560018201600090556002820160006101000a8154906001600160a01b0302191690556003820160006101000a8154906001600160801b0302191690556004820160006101000a8154906001600160a01b0302191690556005820160006101000a8154906001600160801b030219169055505060006001600160a01b031681608001516001600160a01b0316141580156107b5575060808101516001600160a01b03163b155b156108065780608001516001600160a01b03166108fc82606001516001600160801b03169081150290604051600060405180830381858888f19350505050158015610804573d6000803e3d6000fd5b505b80516020820151604051632142170760e11b815230600482015233602482015260448101919091526001600160a01b03909116906342842e0e90606401600060405180830381600087803b15801561085d57600080fd5b505af1158015610871573d6000803e3d6000fd5b505050507f50425cae216bd151d26c8e8bb9779cc899c99d72f78081f2ceec9a99f001ff79836040516108a691815260200190565b60405180910390a1505050565b60008181526002602052604090206004015481906001600160a01b0316331461090d5760405162461bcd60e51b815260206004820152600c60248201526b37b7363c9037b33332b937b960a11b6044820152606401610420565b60008281526002602052604090206005810154610936906001600160801b03166202a300611785565b6001600160801b031642116109845760405162461bcd60e51b81526020600482015260146024820152737769746864726177616c20746f6f206561726c7960601b6044820152606401610420565b6003810180546001600160801b03199081169091556004820180546001600160a01b0319169055600582018054909116905560405133906108fc9060009081818181818888f193505050501580156109e0573d6000803e3d6000fd5b506040518381527ff7c2501e0887f392db4213a4adf0460f214c4135536298ddb725b50d378a815f906020016108a6565b6000818152600260208190526040909120015481906001600160a01b03163314610a725760405162461bcd60e51b815260206004820152601260248201527137b7363c903634b9ba34b7339037bbb732b960711b6044820152606401610420565b60008281526002602052604090206004015482906001600160a01b0316610ad35760405162461bcd60e51b81526020600482015260156024820152743634b9ba34b733903bb4ba341037379037b33332b960591b6044820152606401610420565b333b1580610af057503360009081526001602052604090205460ff165b610b0c5760405162461bcd60e51b815260040161042090611738565b6000600260008581526020019081526020016000206040518060c00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b03168152602001600182015481526020016002820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016003820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016004820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016005820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000858152602001908152602001600020600080820160006101000a8154906001600160a01b03021916905560018201600090556002820160006101000a8154906001600160a01b0302191690556003820160006101000a8154906001600160801b0302191690556004820160006101000a8154906001600160a01b0302191690556005820160006101000a8154906001600160801b0302191690555050600080610ced63152a902d60e11b84600001516001600160a01b03166113e390919063ffffffff16565b15610d8b5782516020840151606085015160405163152a902d60e11b815260048101929092526001600160801b031660248201526001600160a01b0390911690632a55205a90604401604080518083038186803b158015610d4d57600080fd5b505afa158015610d61573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d8591906117b0565b90925090505b8015610dc9576040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015610dc7573d6000803e3d6000fd5b505b600354600160a01b900461ffff1615610e4d5760035460608401516001600160a01b038216916108fc9161271091610e0d91600160a01b90910461ffff16906117de565b610e17919061180d565b6001600160801b03169081150290604051600060405180830381858888f19350505050158015610e4b573d6000803e3d6000fd5b505b60035433906108fc90839061271090610e7190600160a01b900461ffff1682611841565b61ffff168760600151610e8491906117de565b610e8e919061180d565b6001600160801b0316610ea19190611864565b6040518115909202916000818181858888f19350505050158015610ec9573d6000803e3d6000fd5b5060808301516001600160a01b03163b610f5357825160808401516020850151604051632142170760e11b81523060048201526001600160a01b03928316602482015260448101919091529116906342842e0e90606401600060405180830381600087803b158015610f3a57600080fd5b505af1158015610f4e573d6000803e3d6000fd5b505050505b6040518681527fff26203f834d4e158eec2037d6515831e0fe8ac0bf1c95fca04ec8f48467e9819060200160405180910390a1505050505050565b6000546001600160a01b03163314610fb85760405162461bcd60e51b815260040161042090611703565b610fc26000611406565b565b6000333b1580610fe357503360009081526001602052604090205460ff165b610fff5760405162461bcd60e51b815260040161042090611738565b604051632142170760e11b8152326004820152306024820152604481018390526001600160a01b038416906342842e0e90606401600060405180830381600087803b15801561104d57600080fd5b505af1158015611061573d6000803e3d6000fd5b50506040516bffffffffffffffffffffffff19606087811b821660208401526034830187905232901b16605482015242606882015260009250608801905060408051808303601f19018152828252805160209182012060c0840183526001600160a01b038881168552828501888152328686019081526000606088018181526080890182815260a08a018381528784526002808a52938a90209a518b546001600160a01b0319908116918916919091178c55955160018c01559351928a018054861693871693909317909255516003890180546001600160801b03199081166001600160801b0393841617909155915160048a0180549095169516949094179092555160059096018054909116959091169490941790935590518281529192507fc40c5d31a64e8e78c2eeb93bf6c23dc289b41965cc46caf25ec99ae5d3f60cd0910160405180910390a190505b92915050565b333b15806111d257503360009081526001602052604090205460ff165b6111ee5760405162461bcd60e51b815260040161042090611738565b600081815260026020526040902060038101546001600160801b031634116112485760405162461bcd60e51b815260206004820152600d60248201526c6f6666657220746f6f206c6f7760981b6044820152606401610420565b60048101546001600160a01b031615801590611270575060048101546001600160a01b03163b155b156112c157600481015460038201546040516001600160a01b03909216916001600160801b0390911680156108fc02916000818181858888f193505050501580156112bf573d6000803e3d6000fd5b505b6004810180546001600160a01b031916331790556003810180546001600160801b033481166001600160801b03199283161790925560058301805442909316929091169190911790556040517f28785bef5b7a3b0190b82866b9e7d9fe1aae92fe285d15b79a990fe28b2691a09061133c9084815260200190565b60405180910390a15050565b6000546001600160a01b031633146113725760405162461bcd60e51b815260040161042090611703565b6001600160a01b0381166113d75760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608401610420565b6113e081611406565b50565b60006113ee83611456565b80156113ff57506113ff8383611489565b9392505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000611469826301ffc9a760e01b611489565b80156111af5750611482826001600160e01b0319611489565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b03871690617530906114f090869061187b565b6000604051808303818686fa925050503d806000811461152c576040519150601f19603f3d011682016040523d82523d6000602084013e611531565b606091505b509150915060208151101561154c57600093505050506111af565b81801561156857508080602001905181019061156891906118b6565b9695505050505050565b6001600160a01b03811681146113e057600080fd5b60006020828403121561159957600080fd5b81356113ff81611572565b634e487b7160e01b600052604160045260246000fd5b600080600080608085870312156115d057600080fd5b84356115db81611572565b935060208501356115eb81611572565b925060408501359150606085013567ffffffffffffffff8082111561160f57600080fd5b818701915087601f83011261162357600080fd5b813581811115611635576116356115a4565b604051601f8201601f19908116603f0116810190838211818310171561165d5761165d6115a4565b816040528281528a602084870101111561167657600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b6000602082840312156116ac57600080fd5b813561ffff811681146113ff57600080fd5b6000602082840312156116d057600080fd5b5035919050565b600080604083850312156116ea57600080fd5b82356116f581611572565b946020939093013593505050565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6020808252601e908201527f6f6e6c79206e6f6e20636f6e747261637473206f7220617070726f7665640000604082015260600190565b634e487b7160e01b600052601160045260246000fd5b60006001600160801b038083168185168083038211156117a7576117a761176f565b01949350505050565b600080604083850312156117c357600080fd5b82516117ce81611572565b6020939093015192949293505050565b60006001600160801b03808316818516818304811182151516156118045761180461176f565b02949350505050565b60006001600160801b038084168061183557634e487b7160e01b600052601260045260246000fd5b92169190910492915050565b600061ffff8381169083168181101561185c5761185c61176f565b039392505050565b6000828210156118765761187661176f565b500390565b6000825160005b8181101561189c5760208186018101518583015201611882565b818111156118ab576000828501525b509190910192915050565b6000602082840312156118c857600080fd5b815180151581146113ff57600080fdfea26469706673582212201233f232f9fb16d108bbad3a326f138c751a2b8f7dba2625daa7edf8f8b455ff64736f6c63430008090033","deployedBytecode":"0x6080604052600436106100f35760003560e01c8063715018a61161008a578063c71f681811610059578063c71f68181461036e578063ddca3f4314610381578063de53fcd5146103b6578063f2fde38b146103d657600080fd5b8063715018a61461024357806385e1c724146102585780638da5cb5b14610286578063c18b8db4146102b857600080fd5b80633407facd116100c65780633407facd146101c3578063550ee133146101e35780635ff548691461020357806367bd3df21461022357600080fd5b8063135171be146100f8578063150b7a021461011a5780631e18cb891461016357806326749ad714610183575b600080fd5b34801561010457600080fd5b50610118610113366004611587565b6103f6565b005b34801561012657600080fd5b506101456101353660046115ba565b630a85bd0160e11b949350505050565b6040516001600160e01b031990911681526020015b60405180910390f35b34801561016f57600080fd5b5061011861017e366004611587565b610450565b34801561018f57600080fd5b506101b361019e366004611587565b60016020526000908152604090205460ff1681565b604051901515815260200161015a565b3480156101cf57600080fd5b506101186101de36600461169a565b61049c565b3480156101ef57600080fd5b506101186101fe3660046116be565b610531565b34801561020f57600080fd5b5061011861021e3660046116be565b6108b3565b34801561022f57600080fd5b5061011861023e3660046116be565b610a11565b34801561024f57600080fd5b50610118610f8e565b34801561026457600080fd5b506102786102733660046116d7565b610fc4565b60405190815260200161015a565b34801561029257600080fd5b506000546001600160a01b03165b6040516001600160a01b03909116815260200161015a565b3480156102c457600080fd5b506103226102d33660046116be565b60026020819052600091825260409091208054600182015492820154600383015460048401546005909401546001600160a01b039384169594928416936001600160801b039283169316911686565b604080516001600160a01b0397881681526020810196909652938616938501939093526001600160801b03918216606085015290931660808301529190911660a082015260c00161015a565b61011861037c3660046116be565b6111b5565b34801561038d57600080fd5b506003546103a390600160a01b900461ffff1681565b60405161ffff909116815260200161015a565b3480156103c257600080fd5b506003546102a0906001600160a01b031681565b3480156103e257600080fd5b506101186103f1366004611587565b611348565b6000546001600160a01b031633146104295760405162461bcd60e51b815260040161042090611703565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b0316331461047a5760405162461bcd60e51b815260040161042090611703565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146104c65760405162461bcd60e51b815260040161042090611703565b6102ee8161ffff16111561050f5760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b6044820152606401610420565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b6000818152600260208190526040909120015481906001600160a01b031633146105925760405162461bcd60e51b815260206004820152601260248201527137b7363c903634b9ba34b7339037bbb732b960711b6044820152606401610420565b333b15806105af57503360009081526001602052604090205460ff165b6105cb5760405162461bcd60e51b815260040161042090611738565b6000600260008481526020019081526020016000206040518060c00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b03168152602001600182015481526020016002820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016003820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016004820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016005820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000848152602001908152602001600020600080820160006101000a8154906001600160a01b03021916905560018201600090556002820160006101000a8154906001600160a01b0302191690556003820160006101000a8154906001600160801b0302191690556004820160006101000a8154906001600160a01b0302191690556005820160006101000a8154906001600160801b030219169055505060006001600160a01b031681608001516001600160a01b0316141580156107b5575060808101516001600160a01b03163b155b156108065780608001516001600160a01b03166108fc82606001516001600160801b03169081150290604051600060405180830381858888f19350505050158015610804573d6000803e3d6000fd5b505b80516020820151604051632142170760e11b815230600482015233602482015260448101919091526001600160a01b03909116906342842e0e90606401600060405180830381600087803b15801561085d57600080fd5b505af1158015610871573d6000803e3d6000fd5b505050507f50425cae216bd151d26c8e8bb9779cc899c99d72f78081f2ceec9a99f001ff79836040516108a691815260200190565b60405180910390a1505050565b60008181526002602052604090206004015481906001600160a01b0316331461090d5760405162461bcd60e51b815260206004820152600c60248201526b37b7363c9037b33332b937b960a11b6044820152606401610420565b60008281526002602052604090206005810154610936906001600160801b03166202a300611785565b6001600160801b031642116109845760405162461bcd60e51b81526020600482015260146024820152737769746864726177616c20746f6f206561726c7960601b6044820152606401610420565b6003810180546001600160801b03199081169091556004820180546001600160a01b0319169055600582018054909116905560405133906108fc9060009081818181818888f193505050501580156109e0573d6000803e3d6000fd5b506040518381527ff7c2501e0887f392db4213a4adf0460f214c4135536298ddb725b50d378a815f906020016108a6565b6000818152600260208190526040909120015481906001600160a01b03163314610a725760405162461bcd60e51b815260206004820152601260248201527137b7363c903634b9ba34b7339037bbb732b960711b6044820152606401610420565b60008281526002602052604090206004015482906001600160a01b0316610ad35760405162461bcd60e51b81526020600482015260156024820152743634b9ba34b733903bb4ba341037379037b33332b960591b6044820152606401610420565b333b1580610af057503360009081526001602052604090205460ff165b610b0c5760405162461bcd60e51b815260040161042090611738565b6000600260008581526020019081526020016000206040518060c00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b03168152602001600182015481526020016002820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016003820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016004820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016005820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000858152602001908152602001600020600080820160006101000a8154906001600160a01b03021916905560018201600090556002820160006101000a8154906001600160a01b0302191690556003820160006101000a8154906001600160801b0302191690556004820160006101000a8154906001600160a01b0302191690556005820160006101000a8154906001600160801b0302191690555050600080610ced63152a902d60e11b84600001516001600160a01b03166113e390919063ffffffff16565b15610d8b5782516020840151606085015160405163152a902d60e11b815260048101929092526001600160801b031660248201526001600160a01b0390911690632a55205a90604401604080518083038186803b158015610d4d57600080fd5b505afa158015610d61573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d8591906117b0565b90925090505b8015610dc9576040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015610dc7573d6000803e3d6000fd5b505b600354600160a01b900461ffff1615610e4d5760035460608401516001600160a01b038216916108fc9161271091610e0d91600160a01b90910461ffff16906117de565b610e17919061180d565b6001600160801b03169081150290604051600060405180830381858888f19350505050158015610e4b573d6000803e3d6000fd5b505b60035433906108fc90839061271090610e7190600160a01b900461ffff1682611841565b61ffff168760600151610e8491906117de565b610e8e919061180d565b6001600160801b0316610ea19190611864565b6040518115909202916000818181858888f19350505050158015610ec9573d6000803e3d6000fd5b5060808301516001600160a01b03163b610f5357825160808401516020850151604051632142170760e11b81523060048201526001600160a01b03928316602482015260448101919091529116906342842e0e90606401600060405180830381600087803b158015610f3a57600080fd5b505af1158015610f4e573d6000803e3d6000fd5b505050505b6040518681527fff26203f834d4e158eec2037d6515831e0fe8ac0bf1c95fca04ec8f48467e9819060200160405180910390a1505050505050565b6000546001600160a01b03163314610fb85760405162461bcd60e51b815260040161042090611703565b610fc26000611406565b565b6000333b1580610fe357503360009081526001602052604090205460ff165b610fff5760405162461bcd60e51b815260040161042090611738565b604051632142170760e11b8152326004820152306024820152604481018390526001600160a01b038416906342842e0e90606401600060405180830381600087803b15801561104d57600080fd5b505af1158015611061573d6000803e3d6000fd5b50506040516bffffffffffffffffffffffff19606087811b821660208401526034830187905232901b16605482015242606882015260009250608801905060408051808303601f19018152828252805160209182012060c0840183526001600160a01b038881168552828501888152328686019081526000606088018181526080890182815260a08a018381528784526002808a52938a90209a518b546001600160a01b0319908116918916919091178c55955160018c01559351928a018054861693871693909317909255516003890180546001600160801b03199081166001600160801b0393841617909155915160048a0180549095169516949094179092555160059096018054909116959091169490941790935590518281529192507fc40c5d31a64e8e78c2eeb93bf6c23dc289b41965cc46caf25ec99ae5d3f60cd0910160405180910390a190505b92915050565b333b15806111d257503360009081526001602052604090205460ff165b6111ee5760405162461bcd60e51b815260040161042090611738565b600081815260026020526040902060038101546001600160801b031634116112485760405162461bcd60e51b815260206004820152600d60248201526c6f6666657220746f6f206c6f7760981b6044820152606401610420565b60048101546001600160a01b031615801590611270575060048101546001600160a01b03163b155b156112c157600481015460038201546040516001600160a01b03909216916001600160801b0390911680156108fc02916000818181858888f193505050501580156112bf573d6000803e3d6000fd5b505b6004810180546001600160a01b031916331790556003810180546001600160801b033481166001600160801b03199283161790925560058301805442909316929091169190911790556040517f28785bef5b7a3b0190b82866b9e7d9fe1aae92fe285d15b79a990fe28b2691a09061133c9084815260200190565b60405180910390a15050565b6000546001600160a01b031633146113725760405162461bcd60e51b815260040161042090611703565b6001600160a01b0381166113d75760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608401610420565b6113e081611406565b50565b60006113ee83611456565b80156113ff57506113ff8383611489565b9392505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000611469826301ffc9a760e01b611489565b80156111af5750611482826001600160e01b0319611489565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b03871690617530906114f090869061187b565b6000604051808303818686fa925050503d806000811461152c576040519150601f19603f3d011682016040523d82523d6000602084013e611531565b606091505b509150915060208151101561154c57600093505050506111af565b81801561156857508080602001905181019061156891906118b6565b9695505050505050565b6001600160a01b03811681146113e057600080fd5b60006020828403121561159957600080fd5b81356113ff81611572565b634e487b7160e01b600052604160045260246000fd5b600080600080608085870312156115d057600080fd5b84356115db81611572565b935060208501356115eb81611572565b925060408501359150606085013567ffffffffffffffff8082111561160f57600080fd5b818701915087601f83011261162357600080fd5b813581811115611635576116356115a4565b604051601f8201601f19908116603f0116810190838211818310171561165d5761165d6115a4565b816040528281528a602084870101111561167657600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b6000602082840312156116ac57600080fd5b813561ffff811681146113ff57600080fd5b6000602082840312156116d057600080fd5b5035919050565b600080604083850312156116ea57600080fd5b82356116f581611572565b946020939093013593505050565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6020808252601e908201527f6f6e6c79206e6f6e20636f6e747261637473206f7220617070726f7665640000604082015260600190565b634e487b7160e01b600052601160045260246000fd5b60006001600160801b038083168185168083038211156117a7576117a761176f565b01949350505050565b600080604083850312156117c357600080fd5b82516117ce81611572565b6020939093015192949293505050565b60006001600160801b03808316818516818304811182151516156118045761180461176f565b02949350505050565b60006001600160801b038084168061183557634e487b7160e01b600052601260045260246000fd5b92169190910492915050565b600061ffff8381169083168181101561185c5761185c61176f565b039392505050565b6000828210156118765761187661176f565b500390565b6000825160005b8181101561189c5760208186018101518583015201611882565b818111156118ab576000828501525b509190910192915050565b6000602082840312156118c857600080fd5b815180151581146113ff57600080fdfea26469706673582212201233f232f9fb16d108bbad3a326f138c751a2b8f7dba2625daa7edf8f8b455ff64736f6c63430008090033","linkReferences":{},"deployedLinkReferences":{}}')},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},19:function(e,t){},"1a7d":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"itemBox "+e.card.type},[e.card?n("div",{staticClass:"card",staticStyle:{width:"18rem"},attrs:{tag:"article","v-once":e.checkType(e.card.tokenUri.image)}},[n("a",{staticClass:"nft-cardClickable",attrs:{href:"/view-order/ethereum/"+(null!==e.card.orderId?e.card.orderId:"")}},[n("div",{staticClass:"flex-1 flex justify-center items-center preview"},[n("figure",{staticClass:"w-100"},["image"===e.ext?n("img",{staticClass:"h-80 card-img-top",attrs:{src:e.isAudio||!e.card.tokenUri.image?e.defaultImg:e.card.tokenUri.image,alt:"name"}}):e._e()]),"audio"===e.ext?n("figure",{staticClass:"bg-audio flex items-end justify-center w-100 audio_Div"},[n("audio",{attrs:{controls:""}},[n("source",{attrs:{src:e.isAudio||!e.card.tokenUri.image?e.defaultImg:e.card.tokenUri.image,type:"audio/ogg"}})])]):e._e(),n("figure",[n("model-gltf",{attrs:{src:"/"}})],1),"video"===e.ext?n("video",{staticClass:"h-80",attrs:{controls:""}},[n("source",{attrs:{src:e.isAudio||!e.card.tokenUri.image?e.defaultImg:e.card.tokenUri.image}})]):e._e()])]),n("div",{staticClass:"card-body"},[n("h6",{staticClass:"my-0"},[e._v(e._s(e.card.tokenUri.name))]),n("br"),n("div",{staticClass:"flex space-x-3 items-center mt-0"},[n("img",{staticClass:"user-avatar",attrs:{src:e.usernftprofile,alt:e.owernImage(e.card.result.owner)}}),e.nft_user?n("span",[e._v(" @ "+e._s(e.nft_user))]):e._e()])]),[n("a",{staticClass:"nft-cardClickable",attrs:{href:"/view-order/ethereum/"+(null!==e.card.orderId?e.card.orderId:"")}},[n("div",{staticClass:"footer-slot"},[n("div",{staticClass:"price price flex px-2 py-2.5 items-center"},[n("span",{staticClass:"flex flex-col text-left"},[n("span",{class:e.leftSideTextTopClass},[e._v("Current "+e._s(e.card.result.price?"Price":"Bid")+" ")]),e.card.result.price?n("span",[e._v(e._s(e.ethPrice(e.card.result.price)))]):e._e(),e.card.result.offer?n("span",[e._v(e._s(e.ethPrice(e.card.result.offer)))]):e._e()]),e.card.result.endsAt?n("span",{staticClass:"flex flex-col text-right"},[n("span",[e._v(" Ending in")]),n("span",[n("vue-countdown",{attrs:{time:""+e.biddingTime(parseInt(e.card.result.endsAt))},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.days,r=t.hours,a=t.minutes,i=t.seconds;return[e._v(" "+e._s(n)+" d, "+e._s(r)+" h, "+e._s(a)+" m, "+e._s(i)+" s ")]}}],null,!1,2796960206)})],1)]):e._e()])])])]],2):e._e()])},a=[],i=n("1da1"),o=(n("d3b7"),n("ac1f"),n("1276"),n("96cf"),n("407d")),s=n.n(o),c=n("2b29"),u={components:{VueCountdown:s.a,ModelGltf:c["ModelGltf"]},name:"ExploreNft",data:function(){return{nft_user:null,usernftprofile:null,defaultImg:"https://images.unsplash.com/photo-1542241647-9cbbada2b309?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=869&q=80",isAudio:!1,ext:null,extensions:{img:["jpg","png","gif","svg","webp"],audio:["mp3"],video:["mp4","wav","ogg"],model3d:["glb","gltf"]}}},props:{card:{type:null,required:!0},rightSide:{type:Boolean,default:!0},leftSideTextTop:String,leftSideTextTopClass:String,leftSideTextBottom:String},methods:{shortenAddress:function(e){return e.substring(0,6)+"..."+e.substring(e.length-4)},owernImage:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.axios.post("".concat(BACKEND_URL,"/user/id"),{id:e},{headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 2:r=n.sent,console.log(r,"nftOwnerDetail"),t.nft_user=r.data.user.username,t.usernftprofile=r.data.user.profile_image;case 6:case"end":return n.stop()}}),n)})))()},ethPrice:function(e){var t=im.web3.utils.fromWei(e,"ether");return t},biddingTime:function(e){return 1e3*e-Date.now()},checkType:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e,{method:"HEAD"}).then((function(e){return e.ok&&e.headers.get("content-type")})).catch((function(e){return console.log(e.message)}));case 3:r=n.sent,t.ext=r.split("/")[0],n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t.ext="model3d";case 10:return n.abrupt("return",e);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}},l=u,f=(n("ac3d"),n("2877")),d=Object(f["a"])(l,r,a,!1,null,"6d286d8e",null);t["a"]=d.exports},2:function(e,t){},20:function(e,t){},21:function(e,t){},"25e8":function(e,t,n){"use strict";n("623c")},"262c":function(e,t,n){var r=n("c973").default,a=n("970b").default,i=n("5bc3").default;n("96cf"),n("d3b7"),n("25f0");var o=n("a4bf"),s=o.abi,c=n("a92c"),u=function(){"use strict";function e(t){a(this,e),this.contractAddress=t}return i(e,[{key:"_connect",value:function(e,t,n){this.web3=e,this.contract=new e.eth.Contract(s,this.contractAddress,{from:t,gasPrice:n})}},{key:"isConnected",value:function(){return Boolean(this.web3)}},{key:"_getOrderPrice",value:function(e){return this.contract.methods.orders(e).call().then((function(e){return e.price}))}},{key:"createOrder",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.createOrder(t,n,r.toString(),this.web3.utils.toWei(a.toString(),"ether")).send();case 4:return i=e.sent,e.abrupt("return",i.events.OrderCreated.returnValues.id);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"getOrder",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.orders(t).call();case 4:if(n=e.sent,"0x0000000000000000000000000000000000000000"!==n.owner){e.next=7;break}return e.abrupt("return",Promise.resolve(null));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeOrder",value:function(e){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.removeOrder(e).send()}},{key:"buyOrder",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.orders(t).call().then((function(e){return e.price}));case 4:return n=e.sent,e.abrupt("return",this.contract.methods.buyOrder(t).send({value:n}));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"buyOrderGasEstimation",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._getOrderPrice(t);case 2:return n=e.sent,e.next=5,this.contract.methods.buyOrder(t).estimateGas({value:n}).then((function(e){return e.toString()}));case 5:return r=e.sent,e.next=8,c();case 8:return a=e.sent,i=a.gasPrice,o=a.waitTime,s=this.web3.utils.fromWei(new this.web3.utils.BN(r).mul(new this.web3.utils.BN(i)),"ether"),e.abrupt("return",{price:"".concat(n," ETH"),txFees:"".concat(s," ETH"),totalPrice:"".concat(new this.web3.utils.BN(n).add(new this.web3.utils.BN(s))," ETH"),waitTime:"".concat(o," minutes")});case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();u.isIntegrationClass=!0,e.exports=u},"2a04":function(e,t,n){},"2af9":function(e,t,n){},"2b29":function(e,t,n){(function(e){var r,a,i,o=n("c973").default,s=n("6374").default,c=n("9523").default,u=n("278c").default,l=n("6b58").default,f=n("8962").default,d=n("36c6").default,h=n("ded3").default,p=n("3c96").default,b=n("ed6d").default,m=n("2d0d").default,v=n("970b").default,g=n("5bc3").default,y=n("7037").default;n("96cf"),n("a4d3"),n("e01a"),n("d3b7"),n("944a"),n("0c47"),n("23dc"),n("ac1f"),n("466d"),n("7039"),n("fb6a"),n("e439"),n("4d63"),n("25f0"),n("5319"),n("a874f"),n("159b"),n("a630"),n("3ca3"),n("4e82"),n("99af"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("1276"),n("c740"),n("d81d"),n("daf2"),n("a15b"),n("ddb0"),n("b0c0"),n("caad"),n("2532"),n("498a"),n("c19f"),n("4de4"),n("7db0"),n("6c57"),n("b64b"),n("3410"),n("a434"),n("dca8"),n("38cf"),n("35b3"),n("a9e3"),n("4c53"),n("8f40"),n("acef"),n("bf19"),n("5cc6"),n("8a59"),n("8b09"),n("84c3"),n("143c"),n("fb2c"),n("cfc3"),n("4a9b"),n("8ba4"),n("10d1"),n("aff5"),n("90d7"),n("4ec9"),n("2af1"),n("841c"),n("eee7"),n("d28b"),n("2b3d"),n("9861"),n("5377"),n("07ac"),function(o,s){"object"===y(t)&&"object"===y(e)?e.exports=s(n("2b0e")):(a=[],r=s,i="function"===typeof r?r.apply(t,a):r,void 0===i||(e.exports=i))}("undefined"!==typeof self&&self,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===y(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"00ee":function(e,t,n){var r=n("b622"),a=r("toStringTag"),i={};i[a]="z",e.exports="[object z]"===String(i)},"0366":function(e,t,n){var r=n("1c0b");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},"04d1":function(e,t,n){var r=n("342f"),a=r.match(/firefox\/(\d+)/i);e.exports=!!a&&+a[1]},"057f":function(e,t,n){var r=n("fc6a"),a=n("241c").f,i={}.toString,o="object"==("undefined"===typeof window?"undefined":y(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return a(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==i.call(e)?s(e):a(r(e))}},"06cf":function(e,t,n){var r=n("83ab"),a=n("d1e7"),i=n("5c6c"),o=n("fc6a"),s=n("c04e"),c=n("5135"),u=n("0cfb"),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=o(e),t=s(t,!0),u)try{return l(e,t)}catch(n){}if(c(e,t))return i(!a.f.call(e,t),e[t])}},"0b25":function(e,t,n){var r=n("a691"),a=n("50c4");e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=a(t);if(t!==n)throw RangeError("Wrong length or index");return n}},"0cfb":function(e,t,n){var r=n("83ab"),a=n("d039"),i=n("cc12");e.exports=!r&&!a((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"107c":function(e,t,n){var r=n("d039");e.exports=r((function(){var e=RegExp("(?<a>b)",y("").charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1448:function(e,t,n){var r=n("ebb5").aTypedArrayConstructor,a=n("4840");e.exports=function(e,t){var n=a(e,e.constructor),i=0,o=t.length,s=new(r(n))(o);while(o>i)s[i]=t[i++];return s}},"145e":function(e,t,n){"use strict";var r=n("7b0b"),a=n("23cb"),i=n("50c4"),o=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=i(n.length),c=a(e,s),u=a(t,s),l=arguments.length>2?arguments[2]:void 0,f=o((void 0===l?s:a(l,s))-u,s-c),d=1;u<c&&c<u+f&&(d=-1,u+=f-1,c+=f-1);while(f-- >0)u in n?n[c]=n[u]:delete n[c],c+=d,u+=d;return n}},"159b":function(e,t,n){var r=n("da84"),a=n("fdbc"),i=n("17c2"),o=n("9112");for(var s in a){var c=r[s],u=c&&c.prototype;if(u&&u.forEach!==i)try{o(u,"forEach",i)}catch(l){u.forEach=i}}},"170b":function(e,t,n){"use strict";var r=n("ebb5"),a=n("50c4"),i=n("23cb"),o=n("4840"),s=r.aTypedArray,c=r.exportTypedArrayMethod;c("subarray",(function(e,t){var n=s(this),r=n.length,c=i(e,r);return new(o(n,n.constructor))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,a((void 0===t?r:i(t,r))-c))}))},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,a=n("a640"),i=a("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"182d":function(e,t,n){var r=n("f8cd");e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},"19aa":function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c7e":function(e,t,n){var r=n("b622"),a=r("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[a]=function(){return this},Array.from(s,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var r={};r[a]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1dde":function(e,t,n){var r=n("d039"),a=n("b622"),i=n("2d00"),o=a("species");e.exports=function(e){return i>=51||!r((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"219c":function(e,t,n){"use strict";var r=n("ebb5"),a=n("da84"),i=n("d039"),o=n("1c0b"),s=n("50c4"),c=n("addb"),u=n("04d1"),l=n("d998"),f=n("2d00"),d=n("512c"),h=r.aTypedArray,p=r.exportTypedArrayMethod,b=a.Uint16Array,m=b&&b.prototype.sort,v=!!m&&!i((function(){var e=new b(2);e.sort(null),e.sort({})})),g=!!m&&!i((function(){if(f)return f<74;if(u)return u<67;if(l)return!0;if(d)return d<602;var e,t,n=new b(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(n.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0})),y=function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!==n?-1:t!==t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}};p("sort",(function(e){var t=this;if(void 0!==e&&o(e),g)return m.call(t,e);h(t);var n,r=s(t.length),a=Array(r);for(n=0;n<r;n++)a[n]=t[n];for(a=c(t,y(e)),n=0;n<r;n++)t[n]=a[n];return t}),!g||v)},"23cb":function(e,t,n){var r=n("a691"),a=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?a(n+t,0):i(n,t)}},"23e7":function(e,t,n){var r=n("da84"),a=n("06cf").f,i=n("9112"),o=n("6eeb"),s=n("ce4e"),c=n("e893"),u=n("94ca");e.exports=function(e,t){var n,l,f,d,h,p,b=e.target,m=e.global,v=e.stat;if(l=m?r:v?r[b]||s(b,{}):(r[b]||{}).prototype,l)for(f in t){if(h=t[f],e.noTargetGet?(p=a(l,f),d=p&&p.value):d=l[f],n=u(m?f:b+(v?".":"#")+f,e.forced),!n&&void 0!==d){if(y(h)===y(d))continue;c(h,d)}(e.sham||d&&d.sham)&&i(h,"sham",!0),o(l,f,h,e)}}},"241c":function(e,t,n){var r=n("ca84"),a=n("7839"),i=a.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},"25a1":function(e,t,n){"use strict";var r=n("ebb5"),a=n("d58f").right,i=r.aTypedArray,o=r.exportTypedArrayMethod;o("reduceRight",(function(e){return a(i(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},2626:function(e,t,n){"use strict";var r=n("d066"),a=n("9bf2"),i=n("b622"),o=n("83ab"),s=i("species");e.exports=function(e){var t=r(e),n=a.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},2954:function(e,t,n){"use strict";var r=n("ebb5"),a=n("4840"),i=n("d039"),o=r.aTypedArray,s=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod,u=[].slice,l=i((function(){new Int8Array(1).slice()}));c("slice",(function(e,t){var n=u.call(o(this),e,t),r=a(this,this.constructor),i=0,c=n.length,l=new(s(r))(c);while(c>i)l[i]=n[i++];return l}),l)},"2a62":function(e,t,n){var r=n("825a");e.exports=function(e){var t=e["return"];if(void 0!==t)return r(t.call(e)).value}},"2d00":function(e,t,n){var r,a,i=n("da84"),o=n("342f"),s=i.process,c=s&&s.versions,u=c&&c.v8;u?(r=u.split("."),a=r[0]<4?1:r[0]+r[1]):o&&(r=o.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/),r&&(a=r[1]))),e.exports=a&&+a},3280:function(e,t,n){"use strict";var r=n("ebb5"),a=n("e58c"),i=r.aTypedArray,o=r.exportTypedArrayMethod;o("lastIndexOf",(function(e){return a.apply(i(this),arguments)}))},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"35a1":function(e,t,n){var r=n("f5df"),a=n("3f8c"),i=n("b622"),o=i("iterator");e.exports=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[r(e)]}},"37e8":function(e,t,n){var r=n("83ab"),a=n("9bf2"),i=n("825a"),o=n("df75");e.exports=r?Object.defineProperties:function(e,t){i(e);var n,r=o(t),s=r.length,c=0;while(s>c)a.f(e,n=r[c++],t[n]);return e}},"3a7b":function(e,t,n){"use strict";var r=n("ebb5"),a=n("b727").findIndex,i=r.aTypedArray,o=r.exportTypedArrayMethod;o("findIndex",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},"3bbe":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3c5d":function(e,t,n){"use strict";var r=n("ebb5"),a=n("50c4"),i=n("182d"),o=n("7b0b"),s=n("d039"),c=r.aTypedArray,u=r.exportTypedArrayMethod,l=s((function(){new Int8Array(1).set({})}));u("set",(function(e){c(this);var t=i(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=o(e),s=a(r.length),u=0;if(s+t>n)throw RangeError("Wrong length");while(u<s)this[t+u]=r[u++]}),l)},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,a=n("69f3"),i=n("7dd0"),o="String Iterator",s=a.set,c=a.getterFor(o);i(String,"String",(function(e){s(this,{type:o,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,a=t.index;return a>=n.length?{value:void 0,done:!0}:(e=r(n,a),t.index+=e.length,{value:e,done:!1})}))},"3f8c":function(e,t){e.exports={}},"3fcc":function(e,t,n){"use strict";var r=n("ebb5"),a=n("b727").map,i=n("4840"),o=r.aTypedArray,s=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod;c("map",(function(e){return a(o(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(s(i(e,e.constructor)))(t)}))}))},"428f":function(e,t,n){var r=n("da84");e.exports=r},"44ad":function(e,t,n){var r=n("d039"),a=n("c6b6"),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?i.call(e,""):Object(e)}:Object},"44d2":function(e,t,n){var r=n("b622"),a=n("7c73"),i=n("9bf2"),o=r("unscopables"),s=Array.prototype;void 0==s[o]&&i.f(s,o,{configurable:!0,value:a(null)}),e.exports=function(e){s[o][e]=!0}},4840:function(e,t,n){var r=n("825a"),a=n("1c0b"),i=n("b622"),o=i("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||void 0==(n=r(i)[o])?t:a(n)}},4930:function(e,t,n){var r=n("2d00"),a=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!a((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"4d64":function(e,t,n){var r=n("fc6a"),a=n("50c4"),i=n("23cb"),o=function(e){return function(t,n,o){var s,c=r(t),u=a(c.length),l=i(o,u);if(e&&n!=n){while(u>l)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},"4df4":function(e,t,n){"use strict";var r=n("0366"),a=n("7b0b"),i=n("9bdd"),o=n("e95a"),s=n("50c4"),c=n("8418"),u=n("35a1");e.exports=function(e){var t,n,l,f,d,h,p=a(e),b="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:void 0,g=void 0!==v,y=u(p),x=0;if(g&&(v=r(v,m>2?arguments[2]:void 0,2)),void 0==y||b==Array&&o(y))for(t=s(p.length),n=new b(t);t>x;x++)h=g?v(p[x],x):p[x],c(n,x,h);else for(f=y.call(p),d=f.next,n=new b;!(l=d.call(f)).done;x++)h=g?i(f,v,[l.value,x],!0):l.value,c(n,x,h);return n.length=x,n}},"50c4":function(e,t,n){var r=n("a691"),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},"512c":function(e,t,n){var r=n("342f"),a=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!a&&+a[1]},5135:function(e,t,n){var r=n("7b0b"),a={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return a.call(r(e),t)}},5692:function(e,t,n){var r=n("c430"),a=n("c6cd");(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.1",mode:r?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var r=n("d066"),a=n("241c"),i=n("7418"),o=n("825a");e.exports=r("Reflect","ownKeys")||function(e){var t=a.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},5899:function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5f96":function(e,t,n){"use strict";var r=n("ebb5"),a=r.aTypedArray,i=r.exportTypedArrayMethod,o=[].join;i("join",(function(e){return o.apply(a(this),arguments)}))},"60bd":function(e,t,n){"use strict";var r=n("da84"),a=n("ebb5"),i=n("e260"),o=n("b622"),s=o("iterator"),c=r.Uint8Array,u=i.values,l=i.keys,f=i.entries,d=a.aTypedArray,h=a.exportTypedArrayMethod,p=c&&c.prototype[s],b=!!p&&("values"==p.name||void 0==p.name),m=function(){return u.call(d(this))};h("entries",(function(){return f.call(d(this))})),h("keys",(function(){return l.call(d(this))})),h("values",m,!b),h(s,m,!b)},"60da":function(e,t,n){"use strict";var r=n("83ab"),a=n("d039"),i=n("df75"),o=n("7418"),s=n("d1e7"),c=n("7b0b"),u=n("44ad"),l=Object.assign,f=Object.defineProperty;e.exports=!l||a((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||i(l({},t)).join("")!=a}))?function(e,t){var n=c(e),a=arguments.length,l=1,f=o.f,d=s.f;while(a>l){var h,p=u(arguments[l++]),b=f?i(p).concat(f(p)):i(p),m=b.length,v=0;while(m>v)h=b[v++],r&&!d.call(p,h)||(n[h]=p[h])}return n}:l},"621a":function(e,t,n){"use strict";var r=n("da84"),a=n("83ab"),i=n("a981"),o=n("9112"),s=n("e2cc"),c=n("d039"),u=n("19aa"),l=n("a691"),f=n("50c4"),d=n("0b25"),h=n("77a7"),p=n("e163"),b=n("d2bb"),m=n("241c").f,v=n("9bf2").f,g=n("81d5"),y=n("d44e"),x=n("69f3"),w=x.get,_=x.set,M="ArrayBuffer",T="DataView",k="prototype",S="Wrong length",E="Wrong index",A=r[M],C=A,L=r[T],R=L&&L[k],P=Object.prototype,I=r.RangeError,N=h.pack,O=h.unpack,D=function(e){return[255&e]},F=function(e){return[255&e,e>>8&255]},B=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},z=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},U=function(e){return N(e,23,4)},H=function(e){return N(e,52,8)},G=function(e,t){v(e[k],t,{get:function(){return w(this)[t]}})},j=function(e,t,n,r){var a=d(n),i=w(e);if(a+t>i.byteLength)throw I(E);var o=w(i.buffer).bytes,s=a+i.byteOffset,c=o.slice(s,s+t);return r?c:c.reverse()},V=function(e,t,n,r,a,i){var o=d(n),s=w(e);if(o+t>s.byteLength)throw I(E);for(var c=w(s.buffer).bytes,u=o+s.byteOffset,l=r(+a),f=0;f<t;f++)c[u+f]=l[i?f:t-f-1]};if(i){if(!c((function(){A(1)}))||!c((function(){new A(-1)}))||c((function(){return new A,new A(1.5),new A(NaN),A.name!=M}))){C=function(e){return u(this,C),new A(d(e))};for(var W,q=C[k]=A[k],X=m(A),Y=0;X.length>Y;)(W=X[Y++])in C||o(C,W,A[W]);q.constructor=C}b&&p(R)!==P&&b(R,P);var Z=new L(new C(2)),J=R.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||s(R,{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},{unsafe:!0})}else C=function(e){u(this,C,M);var t=d(e);_(this,{bytes:g.call(new Array(t),0),byteLength:t}),a||(this.byteLength=t)},L=function(e,t,n){u(this,L,T),u(e,C,T);var r=w(e).byteLength,i=l(t);if(i<0||i>r)throw I("Wrong offset");if(n=void 0===n?r-i:f(n),i+n>r)throw I(S);_(this,{buffer:e,byteLength:n,byteOffset:i}),a||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},a&&(G(C,"byteLength"),G(L,"buffer"),G(L,"byteLength"),G(L,"byteOffset")),s(L[k],{getInt8:function(e){return j(this,1,e)[0]<<24>>24},getUint8:function(e){return j(this,1,e)[0]},getInt16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return z(j(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return z(j(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return O(j(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return O(j(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){V(this,1,e,D,t)},setUint8:function(e,t){V(this,1,e,D,t)},setInt16:function(e,t){V(this,2,e,F,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){V(this,2,e,F,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){V(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){V(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){V(this,4,e,U,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){V(this,8,e,H,t,arguments.length>2?arguments[2]:void 0)}});y(C,M),y(L,T),e.exports={ArrayBuffer:C,DataView:L}},"649e":function(e,t,n){"use strict";var r=n("ebb5"),a=n("b727").some,i=r.aTypedArray,o=r.exportTypedArrayMethod;o("some",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},6547:function(e,t,n){var r=n("a691"),a=n("1d80"),i=function(e){return function(t,n){var i,o,s=String(a(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===u||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):i:e?s.slice(c,c+2):o-56320+(i-55296<<10)+65536)}};e.exports={codeAt:i(!1),charAt:i(!0)}},"65f0":function(e,t,n){var r=n("861d"),a=n("e8b5"),i=n("b622"),o=i("species");e.exports=function(e,t){var n;return a(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?r(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},"69f3":function(e,t,n){var r,a,i,o=n("7f9a"),s=n("da84"),c=n("861d"),u=n("9112"),l=n("5135"),f=n("c6cd"),d=n("f772"),h=n("d012"),p="Object already initialized",b=s.WeakMap,m=function(e){return i(e)?a(e):r(e,{})},v=function(e){return function(t){var n;if(!c(t)||(n=a(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(o||f.state){var g=f.state||(f.state=new b),y=g.get,x=g.has,w=g.set;r=function(e,t){if(x.call(g,e))throw new TypeError(p);return t.facade=e,w.call(g,e,t),t},a=function(e){return y.call(g,e)||{}},i=function(e){return x.call(g,e)}}else{var _=d("state");h[_]=!0,r=function(e,t){if(l(e,_))throw new TypeError(p);return t.facade=e,u(e,_,t),t},a=function(e){return l(e,_)?e[_]:{}},i=function(e){return l(e,_)}}e.exports={set:r,get:a,has:i,enforce:m,getterFor:v}},"6eeb":function(e,t,n){var r=n("da84"),a=n("9112"),i=n("5135"),o=n("ce4e"),s=n("8925"),c=n("69f3"),u=c.get,l=c.enforce,f=String(String).split("String");(e.exports=function(e,t,n,s){var c,u=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||a(n,"name",t),c=l(n),c.source||(c.source=f.join("string"==typeof t?t:""))),e!==r?(u?!h&&e[t]&&(d=!0):delete e[t],d?e[t]=n:a(e,t,n)):d?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},7156:function(e,t,n){var r=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var i,o;return a&&"function"==typeof(i=t.constructor)&&i!==n&&r(o=i.prototype)&&o!==n.prototype&&a(e,o),e}},"72f7":function(e,t,n){"use strict";var r=n("ebb5").exportTypedArrayMethod,a=n("d039"),i=n("da84"),o=i.Uint8Array,s=o&&o.prototype||{},c=[].toString,u=[].join;a((function(){c.call({})}))&&(c=function(){return u.call(this)});var l=s.toString!=c;r("toString",c,l)},"735e":function(e,t,n){"use strict";var r=n("ebb5"),a=n("81d5"),i=r.aTypedArray,o=r.exportTypedArrayMethod;o("fill",(function(e){return a.apply(i(this),arguments)}))},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var r=n("428f"),a=n("5135"),i=n("e538"),o=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});a(t,e)||o(t,e,{value:i.f(e)})}},"74e8":function(e,t,n){"use strict";var r=n("23e7"),a=n("da84"),i=n("83ab"),o=n("8aa7"),s=n("ebb5"),c=n("621a"),u=n("19aa"),l=n("5c6c"),f=n("9112"),d=n("50c4"),h=n("0b25"),p=n("182d"),b=n("c04e"),m=n("5135"),v=n("f5df"),g=n("861d"),x=n("7c73"),w=n("d2bb"),_=n("241c").f,M=n("a078"),T=n("b727").forEach,k=n("2626"),S=n("9bf2"),E=n("06cf"),A=n("69f3"),C=n("7156"),L=A.get,R=A.set,P=S.f,I=E.f,N=Math.round,O=a.RangeError,D=c.ArrayBuffer,F=c.DataView,B=s.NATIVE_ARRAY_BUFFER_VIEWS,z=s.TYPED_ARRAY_TAG,U=s.TypedArray,H=s.TypedArrayPrototype,G=s.aTypedArrayConstructor,j=s.isTypedArray,V="BYTES_PER_ELEMENT",W="Wrong length",q=function(e,t){var n=0,r=t.length,a=new(G(e))(r);while(r>n)a[n]=t[n++];return a},X=function(e,t){P(e,t,{get:function(){return L(this)[t]}})},Y=function(e){var t;return e instanceof D||"ArrayBuffer"==(t=v(e))||"SharedArrayBuffer"==t},Z=function(e,t){return j(e)&&"symbol"!=y(t)&&t in e&&String(+t)==String(t)},J=function(e,t){return Z(e,t=b(t,!0))?l(2,e[t]):I(e,t)},K=function(e,t,n){return!(Z(e,t=b(t,!0))&&g(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?P(e,t,n):(e[t]=n.value,e)};i?(B||(E.f=J,S.f=K,X(H,"buffer"),X(H,"byteOffset"),X(H,"byteLength"),X(H,"length")),r({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:J,defineProperty:K}),e.exports=function(e,t,n){var i=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,l="set"+e,b=a[s],m=b,v=m&&m.prototype,y={},S=function(e,t){var n=L(e);return n.view[c](t*i+n.byteOffset,!0)},E=function(e,t,r){var a=L(e);n&&(r=(r=N(r))<0?0:r>255?255:255&r),a.view[l](t*i+a.byteOffset,r,!0)},A=function(e,t){P(e,t,{get:function(){return S(this,t)},set:function(e){return E(this,t,e)},enumerable:!0})};B?o&&(m=t((function(e,t,n,r){return u(e,m,s),C(function(){return g(t)?Y(t)?void 0!==r?new b(t,p(n,i),r):void 0!==n?new b(t,p(n,i)):new b(t):j(t)?q(m,t):M.call(m,t):new b(h(t))}(),e,m)})),w&&w(m,U),T(_(b),(function(e){e in m||f(m,e,b[e])})),m.prototype=v):(m=t((function(e,t,n,r){u(e,m,s);var a,o,c,l=0,f=0;if(g(t)){if(!Y(t))return j(t)?q(m,t):M.call(m,t);a=t,f=p(n,i);var b=t.byteLength;if(void 0===r){if(b%i)throw O(W);if(o=b-f,o<0)throw O(W)}else if(o=d(r)*i,o+f>b)throw O(W);c=o/i}else c=h(t),o=c*i,a=new D(o);R(e,{buffer:a,byteOffset:f,byteLength:o,length:c,view:new F(a)});while(l<c)A(e,l++)})),w&&w(m,U),v=m.prototype=x(H)),v.constructor!==m&&f(v,"constructor",m),z&&f(v,z,s),y[s]=m,r({global:!0,forced:m!=b,sham:!B},y),V in m||f(m,V,i),V in v||f(v,V,i),k(s)}):e.exports=function(){}},"77a7":function(e,t){var n=Math.abs,r=Math.pow,a=Math.floor,i=Math.log,o=Math.LN2,s=function(e,t,s){var c,u,l,f=new Array(s),d=8*s-t-1,h=(1<<d)-1,p=h>>1,b=23===t?r(2,-24)-r(2,-77):0,m=e<0||0===e&&1/e<0?1:0,v=0;for(e=n(e),e!=e||e===1/0?(u=e!=e?1:0,c=h):(c=a(i(e)/o),e*(l=r(2,-c))<1&&(c--,l*=2),e+=c+p>=1?b/l:b*r(2,1-p),e*l>=2&&(c++,l/=2),c+p>=h?(u=0,c=h):c+p>=1?(u=(e*l-1)*r(2,t),c+=p):(u=e*r(2,p-1)*r(2,t),c=0));t>=8;f[v++]=255&u,u/=256,t-=8);for(c=c<<t|u,d+=t;d>0;f[v++]=255&c,c/=256,d-=8);return f[--v]|=128*m,f},c=function(e,t){var n,a=e.length,i=8*a-t-1,o=(1<<i)-1,s=o>>1,c=i-7,u=a-1,l=e[u--],f=127&l;for(l>>=7;c>0;f=256*f+e[u],u--,c-=8);for(n=f&(1<<-c)-1,f>>=-c,c+=t;c>0;n=256*n+e[u],u--,c-=8);if(0===f)f=1-s;else{if(f===o)return n?NaN:l?-1/0:1/0;n+=r(2,t),f-=s}return(l?-1:1)*n*r(2,f-t)};e.exports={pack:s,unpack:c}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(e,t,n){var r=n("1d80");e.exports=function(e){return Object(r(e))}},"7c73":function(e,t,n){var r,a=n("825a"),i=n("37e8"),o=n("7839"),s=n("d012"),c=n("1be4"),u=n("cc12"),l=n("f772"),f=">",d="<",h="prototype",p="script",b=l("IE_PROTO"),m=function(){},v=function(e){return d+p+f+e+d+"/"+p+f},g=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=u("iframe"),n="java"+p+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(v("document.F=Object")),e.close(),e.F},x=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}x=r?g(r):y();var e=o.length;while(e--)delete x[h][o[e]];return x()};s[b]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(m[h]=a(e),n=new m,m[h]=null,n[b]=e):n=x(),void 0===t?n:i(n,t)}},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),a=n("9ed3"),i=n("e163"),o=n("d2bb"),s=n("d44e"),c=n("9112"),u=n("6eeb"),l=n("b622"),f=n("c430"),d=n("3f8c"),h=n("ae93"),p=h.IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,m=l("iterator"),v="keys",g="values",y="entries",x=function(){return this};e.exports=function(e,t,n,l,h,w,_){a(n,t,l);var M,T,k,S=function(e){if(e===h&&R)return R;if(!b&&e in C)return C[e];switch(e){case v:return function(){return new n(this,e)};case g:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",A=!1,C=e.prototype,L=C[m]||C["@@iterator"]||h&&C[h],R=!b&&L||S(h),P="Array"==t&&C.entries||L;if(P&&(M=i(P.call(new e)),p!==Object.prototype&&M.next&&(f||i(M)===p||(o?o(M,p):"function"!=typeof M[m]&&c(M,m,x)),s(M,E,!0,!0),f&&(d[E]=x))),h==g&&L&&L.name!==g&&(A=!0,R=function(){return L.call(this)}),f&&!_||C[m]===R||c(C,m,R),d[t]=R,h)if(T={values:S(g),keys:w?R:S(v),entries:S(y)},_)for(k in T)(b||A||!(k in C))&&u(C,k,T[k]);else r({target:t,proto:!0,forced:b||A},T);return T}},"7f9a":function(e,t,n){var r=n("da84"),a=n("8925"),i=r.WeakMap;e.exports="function"===typeof i&&/native code/.test(a(i))},"81d5":function(e,t,n){"use strict";var r=n("7b0b"),a=n("23cb"),i=n("50c4");e.exports=function(e){var t=r(this),n=i(t.length),o=arguments.length,s=a(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,u=void 0===c?n:a(c,n);while(u>s)t[s++]=e;return t}},"825a":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},"82f8":function(e,t,n){"use strict";var r=n("ebb5"),a=n("4d64").includes,i=r.aTypedArray,o=r.exportTypedArrayMethod;o("includes",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,n){"use strict";var r=n("c04e"),a=n("9bf2"),i=n("5c6c");e.exports=function(e,t,n){var o=r(t);o in e?a.f(e,o,i(0,n)):e[o]=n}},"861d":function(e,t){e.exports=function(e){return"object"===y(e)?null!==e:"function"===typeof e}},8875:function(e,t,n){var r,a,i;(function(n,o){a=[],r=o,i="function"===typeof r?r.apply(t,a):r,void 0===i||(e.exports=i)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(h){var n,r,a,i=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,o=/@([^@]*):(\d+):(\d+)\s*$/gi,s=i.exec(h.stack)||o.exec(h.stack),c=s&&s[1]||!1,u=s&&s[2]||!1,l=document.location.href.replace(document.location.hash,""),f=document.getElementsByTagName("script");c===l&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),a=n.replace(r,"$1").trim());for(var d=0;d<f.length;d++){if("interactive"===f[d].readyState)return f[d];if(f[d].src===c)return f[d];if(c===l&&f[d].innerHTML&&f[d].innerHTML.trim()===a)return f[d]}return null}}return e}))},8925:function(e,t,n){var r=n("c6cd"),a=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return a.call(e)}),e.exports=r.inspectSource},"8aa7":function(e,t,n){var r=n("da84"),a=n("d039"),i=n("1c7e"),o=n("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!o||!a((function(){c(1)}))||!a((function(){new c(-1)}))||!i((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||a((function(){return 1!==new c(new s(2),1,void 0).length}))},"8bbf":function(t,n){t.exports=e},"90e3":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},9112:function(e,t,n){var r=n("83ab"),a=n("9bf2"),i=n("5c6c");e.exports=r?function(e,t,n){return a.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},9263:function(e,t,n){"use strict";var r=n("ad6d"),a=n("9f7f"),i=n("5692"),o=n("7c73"),s=n("69f3").get,c=n("fce3"),u=n("107c"),l=RegExp.prototype.exec,f=i("native-string-replace",String.prototype.replace),d=l,h=function(){var e=/a/,t=/b*/g;return l.call(e,"a"),l.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),p=a.UNSUPPORTED_Y||a.BROKEN_CARET,b=void 0!==/()??/.exec("")[1],m=h||b||p||c||u;m&&(d=function(e){var t,n,a,i,c,u,m,v=this,g=s(v),y=g.raw;if(y)return y.lastIndex=v.lastIndex,t=d.call(y,e),v.lastIndex=y.lastIndex,t;var x=g.groups,w=p&&v.sticky,_=r.call(v),M=v.source,T=0,k=e;if(w&&(_=_.replace("y",""),-1===_.indexOf("g")&&(_+="g"),k=String(e).slice(v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&"\n"!==e[v.lastIndex-1])&&(M="(?: "+M+")",k=" "+k,T++),n=new RegExp("^(?:"+M+")",_)),b&&(n=new RegExp("^"+M+"$(?!\\s)",_)),h&&(a=v.lastIndex),i=l.call(w?n:v,k),w?i?(i.input=i.input.slice(T),i[0]=i[0].slice(T),i.index=v.lastIndex,v.lastIndex+=i[0].length):v.lastIndex=0:h&&i&&(v.lastIndex=v.global?i.index+i[0].length:a),b&&i&&i.length>1&&f.call(i[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(i[c]=void 0)})),i&&x)for(i.groups=u=o(null),c=0;c<x.length;c++)m=x[c],u[m[0]]=i[m[1]];return i}),e.exports=d},"94ca":function(e,t,n){var r=n("d039"),a=/#|\.prototype\./,i=function(e,t){var n=s[o(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},o=i.normalize=function(e){return String(e).replace(a,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},"9a8c":function(e,t,n){"use strict";var r=n("ebb5"),a=n("145e"),i=r.aTypedArray,o=r.exportTypedArrayMethod;o("copyWithin",(function(e,t){return a.call(i(this),e,t,arguments.length>2?arguments[2]:void 0)}))},"9bdd":function(e,t,n){var r=n("825a"),a=n("2a62");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(o){throw a(e),o}}},"9bf2":function(e,t,n){var r=n("83ab"),a=n("0cfb"),i=n("825a"),o=n("c04e"),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=o(t,!0),i(n),a)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,a=n("7c73"),i=n("5c6c"),o=n("d44e"),s=n("3f8c"),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=a(r,{next:i(1,n)}),o(e,u,!1,!0),s[u]=c,e}},"9f7f":function(e,t,n){var r=n("d039"),a=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=r((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a078:function(e,t,n){var r=n("7b0b"),a=n("50c4"),i=n("35a1"),o=n("e95a"),s=n("0366"),c=n("ebb5").aTypedArrayConstructor;e.exports=function(e){var t,n,u,l,f,d,h=r(e),p=arguments.length,b=p>1?arguments[1]:void 0,m=void 0!==b,v=i(h);if(void 0!=v&&!o(v)){f=v.call(h),d=f.next,h=[];while(!(l=d.call(f)).done)h.push(l.value)}for(m&&p>2&&(b=s(b,arguments[2],2)),n=a(h.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=m?b(h[t],t):h[t];return u}},a4d3:function(e,t,n){"use strict";var r=n("23e7"),a=n("da84"),i=n("d066"),o=n("c430"),s=n("83ab"),c=n("4930"),u=n("fdbf"),l=n("d039"),f=n("5135"),d=n("e8b5"),h=n("861d"),p=n("825a"),b=n("7b0b"),m=n("fc6a"),v=n("c04e"),g=n("5c6c"),x=n("7c73"),w=n("df75"),_=n("241c"),M=n("057f"),T=n("7418"),k=n("06cf"),S=n("9bf2"),E=n("d1e7"),A=n("9112"),C=n("6eeb"),L=n("5692"),R=n("f772"),P=n("d012"),I=n("90e3"),N=n("b622"),O=n("e538"),D=n("746f"),F=n("d44e"),B=n("69f3"),z=n("b727").forEach,U=R("hidden"),H="Symbol",G="prototype",j=N("toPrimitive"),V=B.set,W=B.getterFor(H),q=Object[G],X=a.Symbol,Y=i("JSON","stringify"),Z=k.f,J=S.f,K=M.f,Q=E.f,$=L("symbols"),ee=L("op-symbols"),te=L("string-to-symbol-registry"),ne=L("symbol-to-string-registry"),re=L("wks"),ae=a.QObject,ie=!ae||!ae[G]||!ae[G].findChild,oe=s&&l((function(){return 7!=x(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Z(q,t);r&&delete q[t],J(e,t,n),r&&e!==q&&J(q,t,r)}:J,se=function(e,t){var n=$[e]=x(X[G]);return V(n,{type:H,tag:e,description:t}),s||(n.description=t),n},ce=u?function(e){return"symbol"==y(e)}:function(e){return Object(e)instanceof X},ue=function(e,t,n){e===q&&ue(ee,t,n),p(e);var r=v(t,!0);return p(n),f($,r)?(n.enumerable?(f(e,U)&&e[U][r]&&(e[U][r]=!1),n=x(n,{enumerable:g(0,!1)})):(f(e,U)||J(e,U,g(1,{})),e[U][r]=!0),oe(e,r,n)):J(e,r,n)},le=function(e,t){p(e);var n=m(t),r=w(n).concat(be(n));return z(r,(function(t){s&&!de.call(n,t)||ue(e,t,n[t])})),e},fe=function(e,t){return void 0===t?x(e):le(x(e),t)},de=function(e){var t=v(e,!0),n=Q.call(this,t);return!(this===q&&f($,t)&&!f(ee,t))&&(!(n||!f(this,t)||!f($,t)||f(this,U)&&this[U][t])||n)},he=function(e,t){var n=m(e),r=v(t,!0);if(n!==q||!f($,r)||f(ee,r)){var a=Z(n,r);return!a||!f($,r)||f(n,U)&&n[U][r]||(a.enumerable=!0),a}},pe=function(e){var t=K(m(e)),n=[];return z(t,(function(e){f($,e)||f(P,e)||n.push(e)})),n},be=function(e){var t=e===q,n=K(t?ee:m(e)),r=[];return z(n,(function(e){!f($,e)||t&&!f(q,e)||r.push($[e])})),r};if(c||(X=function(){if(this instanceof X)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=I(e),n=function e(n){this===q&&e.call(ee,n),f(this,U)&&f(this[U],t)&&(this[U][t]=!1),oe(this,t,g(1,n))};return s&&ie&&oe(q,t,{configurable:!0,set:n}),se(t,e)},C(X[G],"toString",(function(){return W(this).tag})),C(X,"withoutSetter",(function(e){return se(I(e),e)})),E.f=de,S.f=ue,k.f=he,_.f=M.f=pe,T.f=be,O.f=function(e){return se(N(e),e)},s&&(J(X[G],"description",{configurable:!0,get:function(){return W(this).description}}),o||C(q,"propertyIsEnumerable",de,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:X}),z(w(re),(function(e){D(e)})),r({target:H,stat:!0,forced:!c},{for:function(e){var t=String(e);if(f(te,t))return te[t];var n=X(t);return te[t]=n,ne[n]=t,n},keyFor:function(e){if(!ce(e))throw TypeError(e+" is not a symbol");if(f(ne,e))return ne[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:fe,defineProperty:ue,defineProperties:le,getOwnPropertyDescriptor:he}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:pe,getOwnPropertySymbols:be}),r({target:"Object",stat:!0,forced:l((function(){T.f(1)}))},{getOwnPropertySymbols:function(e){return T.f(b(e))}}),Y){var me=!c||l((function(){var e=X();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))}));r({target:"JSON",stat:!0,forced:me},{stringify:function(e,t,n){var r,a=[e],i=1;while(arguments.length>i)a.push(arguments[i++]);if(r=t,(h(t)||void 0!==e)&&!ce(e))return d(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ce(t))return t}),a[1]=t,Y.apply(null,a)}})}X[G][j]||A(X[G],j,X[G].valueOf),F(X,H),P[U]=!0},a630:function(e,t,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),o=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:o},{from:a})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},a975:function(e,t,n){"use strict";var r=n("ebb5"),a=n("b727").every,i=r.aTypedArray,o=r.exportTypedArrayMethod;o("every",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},a981:function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),o=n("6eeb"),s=n("5135"),c=n("c6b6"),u=n("7156"),l=n("c04e"),f=n("d039"),d=n("7c73"),h=n("241c").f,p=n("06cf").f,b=n("9bf2").f,m=n("58a8").trim,v="Number",g=a[v],y=g.prototype,x=c(d(y))==v,w=function(e){var t,n,r,a,i,o,s,c,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=m(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(i=u.slice(2),o=i.length,s=0;s<o;s++)if(c=i.charCodeAt(s),c<48||c>a)return NaN;return parseInt(i,r)}return+u};if(i(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var _,M=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof M&&(x?f((function(){y.valueOf.call(n)})):c(n)!=v)?u(new g(w(t)),n,M):w(t)},T=r?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;T.length>k;k++)s(g,_=T[k])&&!s(M,_)&&b(M,_,p(g,_));M.prototype=y,y.constructor=M,o(a,v,M)}},ac1f:function(e,t,n){"use strict";var r=n("23e7"),a=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ace4:function(e,t,n){"use strict";var r=n("23e7"),a=n("d039"),i=n("621a"),o=n("825a"),s=n("23cb"),c=n("50c4"),u=n("4840"),l=i.ArrayBuffer,f=i.DataView,d=l.prototype.slice,h=a((function(){return!new l(2).slice(1,void 0).byteLength}));r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:h},{slice:function(e,t){if(void 0!==d&&void 0===t)return d.call(o(this),e);var n=o(this).byteLength,r=s(e,n),a=s(void 0===t?n:t,n),i=new(u(this,l))(c(a-r)),h=new f(this),p=new f(i),b=0;while(r<a)p.setUint8(b++,h.getUint8(r++));return i}})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},addb:function(e,t){var n=Math.floor,r=function e(t,r){var o=t.length,s=n(o/2);return o<8?a(t,r):i(e(t.slice(0,s),r),e(t.slice(s),r),r)},a=function(e,t){var n,r,a=e.length,i=1;while(i<a){r=i,n=e[i];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==i++&&(e[r]=n)}return e},i=function(e,t,n){var r=e.length,a=t.length,i=0,o=0,s=[];while(i<r||o<a)i<r&&o<a?s.push(n(e[i],t[o])<=0?e[i++]:t[o++]):s.push(i<r?e[i++]:t[o++]);return s};e.exports=r},ae93:function(e,t,n){"use strict";var r,a,i,o=n("d039"),s=n("e163"),c=n("9112"),u=n("5135"),l=n("b622"),f=n("c430"),d=l("iterator"),h=!1,p=function(){return this};[].keys&&(i=[].keys(),"next"in i?(a=s(s(i)),a!==Object.prototype&&(r=a)):h=!0);var b=void 0==r||o((function(){var e={};return r[d].call(e)!==e}));b&&(r={}),f&&!b||u(r,d)||c(r,d,p),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},b041:function(e,t,n){"use strict";var r=n("00ee"),a=n("f5df");e.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,i=Function.prototype,o=i.toString,s=/^\s*function ([^ (]*)/,c="name";r&&!(c in i)&&a(i,c,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(e){return""}}})},b39a:function(e,t,n){"use strict";var r=n("da84"),a=n("ebb5"),i=n("d039"),o=r.Int8Array,s=a.aTypedArray,c=a.exportTypedArrayMethod,u=[].toLocaleString,l=[].slice,f=!!o&&i((function(){u.call(new o(1))})),d=i((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!i((function(){o.prototype.toLocaleString.call([1,2])}));c("toLocaleString",(function(){return u.apply(f?l.call(s(this)):s(this),arguments)}),d)},b622:function(e,t,n){var r=n("da84"),a=n("5692"),i=n("5135"),o=n("90e3"),s=n("4930"),c=n("fdbf"),u=a("wks"),l=r.Symbol,f=c?l:l&&l.withoutSetter||o;e.exports=function(e){return i(u,e)&&(s||"string"==typeof u[e])||(s&&i(l,e)?u[e]=l[e]:u[e]=f("Symbol."+e)),u[e]}},b727:function(e,t,n){var r=n("0366"),a=n("44ad"),i=n("7b0b"),o=n("50c4"),s=n("65f0"),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,f=6==e,d=7==e,h=5==e||f;return function(p,b,m,v){for(var g,y,x=i(p),w=a(x),_=r(b,m,3),M=o(w.length),T=0,k=v||s,S=t?k(p,M):n||d?k(p,0):void 0;M>T;T++)if((h||T in w)&&(g=w[T],y=_(g,T,x),e))if(t)S[T]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return T;case 2:c.call(S,g)}else switch(e){case 4:return!1;case 7:c.call(S,g)}return f?-1:u||l?l:S}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},c04e:function(e,t,n){var r=n("861d");e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},c1ac:function(e,t,n){"use strict";var r=n("ebb5"),a=n("b727").filter,i=n("1448"),o=r.aTypedArray,s=r.exportTypedArrayMethod;s("filter",(function(e){var t=a(o(this),e,arguments.length>1?arguments[1]:void 0);return i(this,t)}))},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},c6cd:function(e,t,n){var r=n("da84"),a=n("ce4e"),i="__core-js_shared__",o=r[i]||a(i,{});e.exports=o},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===("undefined"===typeof window?"undefined":y(window))&&(n=window)}e.exports=n},ca84:function(e,t,n){var r=n("5135"),a=n("fc6a"),i=n("4d64").indexOf,o=n("d012");e.exports=function(e,t){var n,s=a(e),c=0,u=[];for(n in s)!r(o,n)&&r(s,n)&&u.push(n);while(t.length>c)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},ca91:function(e,t,n){"use strict";var r=n("ebb5"),a=n("d58f").left,i=r.aTypedArray,o=r.exportTypedArrayMethod;o("reduce",(function(e){return a(i(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},cc12:function(e,t,n){var r=n("da84"),a=n("861d"),i=r.document,o=a(i)&&a(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},cca6:function(e,t,n){var r=n("23e7"),a=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},cd26:function(e,t,n){"use strict";var r=n("ebb5"),a=r.aTypedArray,i=r.exportTypedArrayMethod,o=Math.floor;i("reverse",(function(){var e,t=this,n=a(t).length,r=o(n/2),i=0;while(i<r)e=t[i],t[i++]=t[--n],t[n]=e;return t}))},ce4e:function(e,t,n){var r=n("da84"),a=n("9112");e.exports=function(e,t){try{a(r,e,t)}catch(n){r[e]=t}return t}},cfc3:function(e,t,n){var r=n("74e8");r("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("428f"),a=n("da84"),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(a[e]):r[e]&&r[e][t]||a[e]&&a[e][t]}},d139:function(e,t,n){"use strict";var r=n("ebb5"),a=n("b727").find,i=r.aTypedArray,o=r.exportTypedArrayMethod;o("find",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,i=a&&!r.call({1:2},1);t.f=i?function(e){var t=a(this,e);return!!t&&t.enumerable}:r},d28b:function(e,t,n){var r=n("746f");r("iterator")},d2bb:function(e,t,n){var r=n("825a"),a=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(i){}return function(n,i){return r(n),a(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},d3b7:function(e,t,n){var r=n("00ee"),a=n("6eeb"),i=n("b041");r||a(Object.prototype,"toString",i,{unsafe:!0})},d44e:function(e,t,n){var r=n("9bf2").f,a=n("5135"),i=n("b622"),o=i("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},d58f:function(e,t,n){var r=n("1c0b"),a=n("7b0b"),i=n("44ad"),o=n("50c4"),s=function(e){return function(t,n,s,c){r(n);var u=a(t),l=i(u),f=o(u.length),d=e?f-1:0,h=e?-1:1;if(s<2)while(1){if(d in l){c=l[d],d+=h;break}if(d+=h,e?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:f>d;d+=h)d in l&&(c=n(c,l[d],d,u));return c}};e.exports={left:s(!1),right:s(!0)}},d5d6:function(e,t,n){"use strict";var r=n("ebb5"),a=n("b727").forEach,i=r.aTypedArray,o=r.exportTypedArrayMethod;o("forEach",(function(e){a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==("undefined"===typeof globalThis?"undefined":y(globalThis))&&globalThis)||n("object"==("undefined"===typeof window?"undefined":y(window))&&window)||n("object"==("undefined"===typeof self?"undefined":y(self))&&self)||n("object"==y(t)&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},ddb0:function(e,t,n){var r=n("da84"),a=n("fdbc"),i=n("e260"),o=n("9112"),s=n("b622"),c=s("iterator"),u=s("toStringTag"),l=i.values;for(var f in a){var d=r[f],h=d&&d.prototype;if(h){if(h[c]!==l)try{o(h,c,l)}catch(b){h[c]=l}if(h[u]||o(h,u,f),a[f])for(var p in i)if(h[p]!==i[p])try{o(h,p,i[p])}catch(b){h[p]=i[p]}}}},df75:function(e,t,n){var r=n("ca84"),a=n("7839");e.exports=Object.keys||function(e){return r(e,a)}},e01a:function(e,t,n){"use strict";var r=n("23e7"),a=n("83ab"),i=n("da84"),o=n("5135"),s=n("861d"),c=n("9bf2").f,u=n("e893"),l=i.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new l(e):void 0===e?l():l(e);return""===e&&(f[t]=!0),t};u(d,l);var h=d.prototype=l.prototype;h.constructor=d;var p=h.toString,b="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(o(f,e))return"";var n=b?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},e163:function(e,t,n){var r=n("5135"),a=n("7b0b"),i=n("f772"),o=n("e177"),s=i("IE_PROTO"),c=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=a(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,n){"use strict";var r=n("fc6a"),a=n("44d2"),i=n("3f8c"),o=n("69f3"),s=n("7dd0"),c="Array Iterator",u=o.set,l=o.getterFor(c);e.exports=s(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,a("keys"),a("values"),a("entries")},e2cc:function(e,t,n){var r=n("6eeb");e.exports=function(e,t,n){for(var a in t)r(e,a,t[a],n);return e}},e538:function(e,t,n){var r=n("b622");t.f=r},e58c:function(e,t,n){"use strict";var r=n("fc6a"),a=n("a691"),i=n("50c4"),o=n("a640"),s=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,l=o("lastIndexOf"),f=u||!l;e.exports=f?function(e){if(u)return c.apply(this,arguments)||0;var t=r(this),n=i(t.length),o=n-1;for(arguments.length>1&&(o=s(o,a(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:c},e893:function(e,t,n){var r=n("5135"),a=n("56ef"),i=n("06cf"),o=n("9bf2");e.exports=function(e,t){for(var n=a(t),s=o.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},e91f:function(e,t,n){"use strict";var r=n("ebb5"),a=n("4d64").indexOf,i=r.aTypedArray,o=r.exportTypedArrayMethod;o("indexOf",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},e95a:function(e,t,n){var r=n("b622"),a=n("3f8c"),i=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[i]===e)}},ebb5:function(e,t,n){"use strict";var r,a=n("a981"),i=n("83ab"),o=n("da84"),s=n("861d"),c=n("5135"),u=n("f5df"),l=n("9112"),f=n("6eeb"),d=n("9bf2").f,h=n("e163"),p=n("d2bb"),b=n("b622"),m=n("90e3"),v=o.Int8Array,g=v&&v.prototype,y=o.Uint8ClampedArray,x=y&&y.prototype,w=v&&h(v),_=g&&h(g),M=Object.prototype,T=M.isPrototypeOf,k=b("toStringTag"),S=m("TYPED_ARRAY_TAG"),E=a&&!!p&&"Opera"!==u(o.opera),A=!1,C={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},R=function(e){if(!s(e))return!1;var t=u(e);return"DataView"===t||c(C,t)||c(L,t)},P=function(e){if(!s(e))return!1;var t=u(e);return c(C,t)||c(L,t)},I=function(e){if(P(e))return e;throw TypeError("Target is not a typed array")},N=function(e){if(p){if(T.call(w,e))return e}else for(var t in C)if(c(C,r)){var n=o[t];if(n&&(e===n||T.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},O=function(e,t,n){if(i){if(n)for(var r in C){var a=o[r];if(a&&c(a.prototype,e))try{delete a.prototype[e]}catch(s){}}_[e]&&!n||f(_,e,n?t:E&&g[e]||t)}},D=function(e,t,n){var r,a;if(i){if(p){if(n)for(r in C)if(a=o[r],a&&c(a,e))try{delete a[e]}catch(s){}if(w[e]&&!n)return;try{return f(w,e,n?t:E&&w[e]||t)}catch(s){}}for(r in C)a=o[r],!a||a[e]&&!n||f(a,e,t)}};for(r in C)o[r]||(E=!1);if((!E||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},E))for(r in C)o[r]&&p(o[r],w);if((!E||!_||_===M)&&(_=w.prototype,E))for(r in C)o[r]&&p(o[r].prototype,_);if(E&&h(x)!==_&&p(x,_),i&&!c(_,k))for(r in A=!0,d(_,k,{get:function(){return s(this)?this[S]:void 0}}),C)o[r]&&l(o[r],S,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:E,TYPED_ARRAY_TAG:A&&S,aTypedArray:I,aTypedArrayConstructor:N,exportTypedArrayMethod:O,exportTypedArrayStaticMethod:D,isView:R,isTypedArray:P,TypedArray:w,TypedArrayPrototype:_}},f5df:function(e,t,n){var r=n("00ee"),a=n("c6b6"),i=n("b622"),o=i("toStringTag"),s="Arguments"==a(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=r?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),o))?n:s?a(t):"Object"==(r=a(t))&&"function"==typeof t.callee?"Arguments":r}},f772:function(e,t,n){var r=n("5692"),a=n("90e3"),i=r("keys");e.exports=function(e){return i[e]||(i[e]=a(e))}},f8cd:function(e,t,n){var r=n("a691");e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},fb15:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"install",(function(){return pw})),n.d(t,"ModelObj",(function(){return Bm})),n.d(t,"ModelFbx",(function(){return Zy})),n.d(t,"ModelThree",(function(){return $y})),n.d(t,"ModelJson",(function(){return fw})),n.d(t,"ModelStl",(function(){return ax})),n.d(t,"ModelPly",(function(){return ux})),n.d(t,"ModelCollada",(function(){return bx})),n.d(t,"ModelDae",(function(){return dw})),n.d(t,"ModelGltf",(function(){return lw}));var a={};if(n.r(a),n.d(a,"Deflate",(function(){return og})),n.d(a,"AsyncDeflate",(function(){return sg})),n.d(a,"deflate",(function(){return cg})),n.d(a,"deflateSync",(function(){return ug})),n.d(a,"Inflate",(function(){return lg})),n.d(a,"AsyncInflate",(function(){return fg})),n.d(a,"inflate",(function(){return dg})),n.d(a,"inflateSync",(function(){return hg})),n.d(a,"Gzip",(function(){return pg})),n.d(a,"AsyncGzip",(function(){return bg})),n.d(a,"gzip",(function(){return mg})),n.d(a,"gzipSync",(function(){return vg})),n.d(a,"Gunzip",(function(){return gg})),n.d(a,"AsyncGunzip",(function(){return yg})),n.d(a,"gunzip",(function(){return xg})),n.d(a,"gunzipSync",(function(){return wg})),n.d(a,"Zlib",(function(){return _g})),n.d(a,"AsyncZlib",(function(){return Mg})),n.d(a,"zlib",(function(){return Tg})),n.d(a,"zlibSync",(function(){return kg})),n.d(a,"Unzlib",(function(){return Sg})),n.d(a,"AsyncUnzlib",(function(){return Eg})),n.d(a,"unzlib",(function(){return Ag})),n.d(a,"unzlibSync",(function(){return Cg})),n.d(a,"compress",(function(){return mg})),n.d(a,"AsyncCompress",(function(){return bg})),n.d(a,"compressSync",(function(){return vg})),n.d(a,"Compress",(function(){return pg})),n.d(a,"Decompress",(function(){return Lg})),n.d(a,"AsyncDecompress",(function(){return Rg})),n.d(a,"decompress",(function(){return Pg})),n.d(a,"decompressSync",(function(){return Ig})),n.d(a,"DecodeUTF8",(function(){return zg})),n.d(a,"EncodeUTF8",(function(){return Ug})),n.d(a,"strToU8",(function(){return Hg})),n.d(a,"strFromU8",(function(){return Gg})),n.d(a,"ZipPassThrough",(function(){return Jg})),n.d(a,"ZipDeflate",(function(){return Kg})),n.d(a,"AsyncZipDeflate",(function(){return Qg})),n.d(a,"Zip",(function(){return $g})),n.d(a,"zip",(function(){return ey})),n.d(a,"zipSync",(function(){return ty})),n.d(a,"UnzipPassThrough",(function(){return ny})),n.d(a,"UnzipInflate",(function(){return ry})),n.d(a,"AsyncUnzipInflate",(function(){return ay})),n.d(a,"Unzip",(function(){return iy})),n.d(a,"unzip",(function(){return oy})),n.d(a,"unzipSync",(function(){return sy})),"undefined"!==typeof window){var i=window.document.currentScript,x=n("8875");i=x(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:x});var w=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);w&&(n.p=w[1])}n("159b"),n("b0c0");for(var _=n("8bbf"),M=n.n(_),T=(n("ac1f"),"129"),k={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},S={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},E=0,A=1,C=2,L=1,R=2,P=3,I=0,N=1,O=2,D=1,F=0,B=1,z=2,U=3,H=4,G=5,j=100,V=101,W=102,q=103,X=104,Y=200,Z=201,J=202,K=203,Q=204,$=205,ee=206,te=207,ne=208,re=209,ae=210,ie=0,oe=1,se=2,ce=3,ue=4,le=5,fe=6,de=7,he=0,pe=1,be=2,me=0,ve=1,ge=2,ye=3,xe=4,we=5,_e=300,Me=301,Te=302,ke=303,Se=304,Ee=306,Ae=307,Ce=1e3,Le=1001,Re=1002,Pe=1003,Ie=1004,Ne=1005,Oe=1006,De=1007,Fe=1008,Be=1009,ze=1010,Ue=1011,He=1012,Ge=1013,je=1014,Ve=1015,We=1016,qe=1017,Xe=1018,Ye=1019,Ze=1020,Je=1021,Ke=1022,Qe=1023,$e=1024,et=1025,tt=1026,nt=1027,rt=1028,at=1029,it=1030,ot=1031,st=1032,ct=1033,ut=33776,lt=33777,ft=33778,dt=33779,ht=35840,pt=35841,bt=35842,mt=35843,vt=36196,gt=37492,yt=37496,xt=37808,wt=37809,_t=37810,Mt=37811,Tt=37812,kt=37813,St=37814,Et=37815,At=37816,Ct=37817,Lt=37818,Rt=37819,Pt=37820,It=37821,Nt=36492,Ot=37840,Dt=37841,Ft=37842,Bt=37843,zt=37844,Ut=37845,Ht=37846,Gt=37847,jt=37848,Vt=37849,Wt=37850,qt=37851,Xt=37852,Yt=37853,Zt=2200,Jt=2201,Kt=2202,Qt=2300,$t=2301,en=2302,tn=2400,nn=2401,rn=2402,an=2500,on=2501,sn=0,cn=1,un=2,ln=3e3,fn=3001,dn=3007,hn=3002,pn=3003,bn=3004,mn=3005,vn=3006,gn=3200,yn=3201,xn=0,wn=1,_n=7680,Mn=519,Tn=35044,kn=35048,Sn="300 es",En=function(){function e(){v(this,e)}return g(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var a=r.indexOf(t);-1!==a&&r.splice(a,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var r=n.slice(0),a=0,i=r.length;a<i;a++)r[a].call(this,e);e.target=null}}}}]),e}(),An=[],Cn=0;Cn<256;Cn++)An[Cn]=(Cn<16?"0":"")+Cn.toString(16);var Ln=1234567,Rn=Math.PI/180,Pn=180/Math.PI;function In(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,a=An[255&e]+An[e>>8&255]+An[e>>16&255]+An[e>>24&255]+"-"+An[255&t]+An[t>>8&255]+"-"+An[t>>16&15|64]+An[t>>24&255]+"-"+An[63&n|128]+An[n>>8&255]+"-"+An[n>>16&255]+An[n>>24&255]+An[255&r]+An[r>>8&255]+An[r>>16&255]+An[r>>24&255];return a.toUpperCase()}function Nn(e,t,n){return Math.max(t,Math.min(n,e))}function On(e,t){return(e%t+t)%t}function Dn(e,t,n,r,a){return r+(e-t)*(a-r)/(n-t)}function Fn(e,t,n){return e!==t?(n-e)/(t-e):0}function Bn(e,t,n){return(1-n)*e+n*t}function zn(e,t,n,r){return Bn(e,t,1-Math.exp(-n*r))}function Un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(On(e,2*t)-t)}function Hn(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))}function Gn(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))}function jn(e,t){return e+Math.floor(Math.random()*(t-e+1))}function Vn(e,t){return e+Math.random()*(t-e)}function Wn(e){return e*(.5-Math.random())}function qn(e){return void 0!==e&&(Ln=e%2147483647),Ln=16807*Ln%2147483647,(Ln-1)/2147483646}function Xn(e){return e*Rn}function Yn(e){return e*Pn}function Zn(e){return 0===(e&e-1)&&0!==e}function Jn(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Kn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Qn(e,t,n,r,a){var i=Math.cos,o=Math.sin,s=i(n/2),c=o(n/2),u=i((t+r)/2),l=o((t+r)/2),f=i((t-r)/2),d=o((t-r)/2),h=i((r-t)/2),p=o((r-t)/2);switch(a){case"XYX":e.set(s*l,c*f,c*d,s*u);break;case"YZY":e.set(c*d,s*l,c*f,s*u);break;case"ZXZ":e.set(c*f,c*d,s*l,s*u);break;case"XZX":e.set(s*l,c*p,c*h,s*u);break;case"YXY":e.set(c*h,s*l,c*p,s*u);break;case"ZYZ":e.set(c*p,c*h,s*l,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}var $n=Object.freeze({__proto__:null,DEG2RAD:Rn,RAD2DEG:Pn,generateUUID:In,clamp:Nn,euclideanModulo:On,mapLinear:Dn,inverseLerp:Fn,lerp:Bn,damp:zn,pingpong:Un,smoothstep:Hn,smootherstep:Gn,randInt:jn,randFloat:Vn,randFloatSpread:Wn,seededRandom:qn,degToRad:Xn,radToDeg:Yn,isPowerOfTwo:Zn,ceilPowerOfTwo:Jn,floorPowerOfTwo:Kn,setQuaternionFromProperEuler:Qn}),er=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,e),this.x=t,this.y=n}return g(e,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=this.x-e.x,i=this.y-e.y;return this.x=a*n-i*r+e.x,this.y=a*r+i*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}}]),e}();er.prototype.isVector2=!0;var tr,nr=function(){function e(){v(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return g(e,[{key:"set",value:function(e,t,n,r,a,i,o,s,c){var u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=a,u[5]=s,u[6]=n,u[7]=i,u[8]=c,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[3],s=n[6],c=n[1],u=n[4],l=n[7],f=n[2],d=n[5],h=n[8],p=r[0],b=r[3],m=r[6],v=r[1],g=r[4],y=r[7],x=r[2],w=r[5],_=r[8];return a[0]=i*p+o*v+s*x,a[3]=i*b+o*g+s*w,a[6]=i*m+o*y+s*_,a[1]=c*p+u*v+l*x,a[4]=c*b+u*g+l*w,a[7]=c*m+u*y+l*_,a[2]=f*p+d*v+h*x,a[5]=f*b+d*g+h*w,a[8]=f*m+d*y+h*_,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],c=e[7],u=e[8];return t*i*u-t*o*c-n*a*u+n*o*s+r*a*c-r*i*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],c=e[7],u=e[8],l=u*i-o*c,f=o*s-u*a,d=c*a-i*s,h=t*l+n*f+r*d;if(0===h)return this.set(0,0,0,0,0,0,0,0,0);var p=1/h;return e[0]=l*p,e[1]=(r*c-u*n)*p,e[2]=(o*n-r*i)*p,e[3]=f*p,e[4]=(u*t-r*s)*p,e[5]=(r*a-o*t)*p,e[6]=d*p,e[7]=(n*s-c*t)*p,e[8]=(i*t-n*a)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,a,i,o){var s=Math.cos(a),c=Math.sin(a);return this.set(n*s,n*c,-n*(s*i+c*o)+i+e,-r*c,r*s,-r*(-c*i+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,a=r[0],i=r[3],o=r[6],s=r[1],c=r[4],u=r[7];return r[0]=t*a+n*s,r[3]=t*i+n*c,r[6]=t*o+n*u,r[1]=-n*a+t*s,r[4]=-n*i+t*c,r[7]=-n*o+t*u,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();nr.prototype.isMatrix3=!0;var rr=function(){function e(){v(this,e)}return g(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===tr&&(tr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),tr.width=e.width,tr.height=e.height;var n=tr.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=tr}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}]),e}(),ar=0,ir=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Le,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Oe,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fe,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Qe,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Be,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:ln;return v(this,n),e=t.call(this),Object.defineProperty(p(e),"id",{value:ar++}),e.uuid=In(),e.name="",e.image=r,e.mipmaps=[],e.mapping=a,e.wrapS=i,e.wrapT=o,e.magFilter=s,e.minFilter=c,e.anisotropy=f,e.format=u,e.internalFormat=null,e.type=l,e.offset=new er(0,0),e.repeat=new er(1,1),e.center=new er(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new nr,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=d,e.version=0,e.onUpdate=null,e}return g(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=In()),!t&&void 0===e.images[r.uuid]){var a;if(Array.isArray(r)){a=[];for(var i=0,o=r.length;i<o;i++)r[i].isDataTexture?a.push(or(r[i].image)):a.push(or(r[i]))}else a=or(r);e.images[r.uuid]={uuid:r.uuid,url:a}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==_e)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ce:e.x=e.x-Math.floor(e.x);break;case Le:e.x=e.x<0?0:1;break;case Re:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ce:e.y=e.y-Math.floor(e.y);break;case Le:e.y=e.y<0?0:1;break;case Re:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(En);function or(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?rr.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}ir.DEFAULT_IMAGE=void 0,ir.DEFAULT_MAPPING=_e,ir.prototype.isTexture=!0;var sr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;v(this,e),this.x=t,this.y=n,this.z=r,this.w=a}return g(e,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,a=this.w,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12]*a,this.y=i[1]*t+i[5]*n+i[9]*r+i[13]*a,this.z=i[2]*t+i[6]*n+i[10]*r+i[14]*a,this.w=i[3]*t+i[7]*n+i[11]*r+i[15]*a,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,a,i=.01,o=.1,s=e.elements,c=s[0],u=s[4],l=s[8],f=s[1],d=s[5],h=s[9],p=s[2],b=s[6],m=s[10];if(Math.abs(u-f)<i&&Math.abs(l-p)<i&&Math.abs(h-b)<i){if(Math.abs(u+f)<o&&Math.abs(l+p)<o&&Math.abs(h+b)<o&&Math.abs(c+d+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var v=(c+1)/2,g=(d+1)/2,y=(m+1)/2,x=(u+f)/4,w=(l+p)/4,_=(h+b)/4;return v>g&&v>y?v<i?(n=0,r=.707106781,a=.707106781):(n=Math.sqrt(v),r=x/n,a=w/n):g>y?g<i?(n=.707106781,r=0,a=.707106781):(r=Math.sqrt(g),n=x/r,a=_/r):y<i?(n=.707106781,r=.707106781,a=0):(a=Math.sqrt(y),n=w/a,r=_/a),this.set(n,r,a,t),this}var M=Math.sqrt((b-h)*(b-h)+(l-p)*(l-p)+(f-u)*(f-u));return Math.abs(M)<.001&&(M=1),this.x=(b-h)/M,this.y=(l-p)/M,this.z=(f-u)/M,this.w=Math.acos((c+d+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}]),e}();sr.prototype.isVector4=!0;var cr=function(e){b(n,e);var t=m(n);function n(e,r,a){var i;return v(this,n),i=t.call(this),i.width=e,i.height=r,i.depth=1,i.scissor=new sr(0,0,e,r),i.scissorTest=!1,i.viewport=new sr(0,0,e,r),a=a||{},i.texture=new ir(void 0,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),i.texture.image={},i.texture.image.width=e,i.texture.image.height=r,i.texture.image.depth=1,i.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,i.texture.minFilter=void 0!==a.minFilter?a.minFilter:Oe,i.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,i.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,i.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,i}return g(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=h({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(En);cr.prototype.isWebGLRenderTarget=!0;var ur=function(e){b(n,e);var t=m(n);function n(e,r,a){var i;v(this,n),i=t.call(this,e,r);var o=i.texture;i.texture=[];for(var s=0;s<a;s++)i.texture[s]=o.clone();return i}return g(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,a=this.texture.length;r<a;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(cr);ur.prototype.isWebGLMultipleRenderTargets=!0;var lr=function(e){b(n,e);var t=m(n);function n(e,r,a){var i;return v(this,n),i=t.call(this,e,r,a),i.samples=4,i}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this}}]),n}(cr);lr.prototype.isWebGLMultisampleRenderTarget=!0;var fr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;v(this,e),this._x=t,this._y=n,this._z=r,this._w=a}return g(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,a=e._z,i=e._order,o=Math.cos,s=Math.sin,c=o(n/2),u=o(r/2),l=o(a/2),f=s(n/2),d=s(r/2),h=s(a/2);switch(i){case"XYZ":this._x=f*u*l+c*d*h,this._y=c*d*l-f*u*h,this._z=c*u*h+f*d*l,this._w=c*u*l-f*d*h;break;case"YXZ":this._x=f*u*l+c*d*h,this._y=c*d*l-f*u*h,this._z=c*u*h-f*d*l,this._w=c*u*l+f*d*h;break;case"ZXY":this._x=f*u*l-c*d*h,this._y=c*d*l+f*u*h,this._z=c*u*h+f*d*l,this._w=c*u*l-f*d*h;break;case"ZYX":this._x=f*u*l-c*d*h,this._y=c*d*l+f*u*h,this._z=c*u*h-f*d*l,this._w=c*u*l+f*d*h;break;case"YZX":this._x=f*u*l+c*d*h,this._y=c*d*l+f*u*h,this._z=c*u*h-f*d*l,this._w=c*u*l-f*d*h;break;case"XZY":this._x=f*u*l-c*d*h,this._y=c*d*l-f*u*h,this._z=c*u*h+f*d*l,this._w=c*u*l+f*d*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],a=t[8],i=t[1],o=t[5],s=t[9],c=t[2],u=t[6],l=t[10],f=n+o+l;if(f>0){var d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-s)*d,this._y=(a-c)*d,this._z=(i-r)*d}else if(n>o&&n>l){var h=2*Math.sqrt(1+n-o-l);this._w=(u-s)/h,this._x=.25*h,this._y=(r+i)/h,this._z=(a+c)/h}else if(o>l){var p=2*Math.sqrt(1+o-n-l);this._w=(a-c)/p,this._x=(r+i)/p,this._y=.25*p,this._z=(s+u)/p}else{var b=2*Math.sqrt(1+l-n-o);this._w=(i-r)/b,this._x=(a+c)/b,this._y=(s+u)/b,this._z=.25*b}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Nn(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,a=e._z,i=e._w,o=t._x,s=t._y,c=t._z,u=t._w;return this._x=n*u+i*o+r*c-a*s,this._y=r*u+i*s+a*o-n*c,this._z=a*u+i*c+n*s-r*o,this._w=i*u-n*o-r*s-a*c,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,a=this._z,i=this._w,o=i*e._w+n*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=i,this._x=n,this._y=r,this._z=a,this;var s=1-o*o;if(s<=Number.EPSILON){var c=1-t;return this._w=c*i+t*this._w,this._x=c*n+t*this._x,this._y=c*r+t*this._y,this._z=c*a+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),l=Math.atan2(u,o),f=Math.sin((1-t)*l)/u,d=Math.sin(t*l)/u;return this._w=i*f+this._w*d,this._x=n*f+this._x*d,this._y=r*f+this._y*d,this._z=a*f+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,a,i,o){var s=n[r+0],c=n[r+1],u=n[r+2],l=n[r+3],f=a[i+0],d=a[i+1],h=a[i+2],p=a[i+3];if(0===o)return e[t+0]=s,e[t+1]=c,e[t+2]=u,void(e[t+3]=l);if(1===o)return e[t+0]=f,e[t+1]=d,e[t+2]=h,void(e[t+3]=p);if(l!==p||s!==f||c!==d||u!==h){var b=1-o,m=s*f+c*d+u*h+l*p,v=m>=0?1:-1,g=1-m*m;if(g>Number.EPSILON){var y=Math.sqrt(g),x=Math.atan2(y,m*v);b=Math.sin(b*x)/y,o=Math.sin(o*x)/y}var w=o*v;if(s=s*b+f*w,c=c*b+d*w,u=u*b+h*w,l=l*b+p*w,b===1-o){var _=1/Math.sqrt(s*s+c*c+u*u+l*l);s*=_,c*=_,u*=_,l*=_}}e[t]=s,e[t+1]=c,e[t+2]=u,e[t+3]=l}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,a,i){var o=n[r],s=n[r+1],c=n[r+2],u=n[r+3],l=a[i],f=a[i+1],d=a[i+2],h=a[i+3];return e[t]=o*h+u*l+s*d-c*f,e[t+1]=s*h+u*f+c*l-o*d,e[t+2]=c*h+u*d+o*f-s*l,e[t+3]=u*h-o*l-s*f-c*d,e}}]),e}();fr.prototype.isQuaternion=!0;var dr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v(this,e),this.x=t,this.y=n,this.z=r}return g(e,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(pr.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(pr.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*r,this.y=a[1]*t+a[4]*n+a[7]*r,this.z=a[2]*t+a[5]*n+a[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements,i=1/(a[3]*t+a[7]*n+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*r+a[12])*i,this.y=(a[1]*t+a[5]*n+a[9]*r+a[13])*i,this.z=(a[2]*t+a[6]*n+a[10]*r+a[14])*i,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.x,i=e.y,o=e.z,s=e.w,c=s*t+i*r-o*n,u=s*n+o*t-a*r,l=s*r+a*n-i*t,f=-a*t-i*n-o*r;return this.x=c*s+f*-a+u*-o-l*-i,this.y=u*s+f*-i+l*-a-c*-o,this.z=l*s+f*-o+c*-i-u*-a,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r,this.y=a[1]*t+a[5]*n+a[9]*r,this.z=a[2]*t+a[6]*n+a[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=t.x,o=t.y,s=t.z;return this.x=r*s-a*o,this.y=a*i-n*s,this.z=n*o-r*i,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return hr.copy(this).projectOnVector(e),this.sub(hr)}},{key:"reflect",value:function(e){return this.sub(hr.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Nn(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),e}();dr.prototype.isVector3=!0;var hr=new dr,pr=new fr,br=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dr(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr(-1/0,-1/0,-1/0);v(this,e),this.min=t,this.max=n}return g(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,i=-1/0,o=-1/0,s=0,c=e.length;s<c;s+=3){var u=e[s],l=e[s+1],f=e[s+2];u<t&&(t=u),l<n&&(n=l),f<r&&(r=f),u>a&&(a=u),l>i&&(i=l),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(a,i,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,i=-1/0,o=-1/0,s=0,c=e.count;s<c;s++){var u=e.getX(s),l=e.getY(s),f=e.getZ(s);u<t&&(t=u),l<n&&(n=l),f<r&&(r=f),u>a&&(a=u),l>i&&(i=l),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(a,i,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=vr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new dr),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new dr),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),gr.copy(t.boundingBox),gr.applyMatrix4(e.matrixWorld),this.union(gr));for(var n=e.children,r=0,a=n.length;r<a;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new dr),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,vr),vr.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(kr),Sr.subVectors(this.max,kr),yr.subVectors(e.a,kr),xr.subVectors(e.b,kr),wr.subVectors(e.c,kr),_r.subVectors(xr,yr),Mr.subVectors(wr,xr),Tr.subVectors(yr,wr);var t=[0,-_r.z,_r.y,0,-Mr.z,Mr.y,0,-Tr.z,Tr.y,_r.z,0,-_r.x,Mr.z,0,-Mr.x,Tr.z,0,-Tr.x,-_r.y,_r.x,0,-Mr.y,Mr.x,0,-Tr.y,Tr.x,0];return!!Cr(t,yr,xr,wr,Sr)&&(t=[1,0,0,0,1,0,0,0,1],!!Cr(t,yr,xr,wr,Sr)&&(Er.crossVectors(_r,Mr),t=[Er.x,Er.y,Er.z],Cr(t,yr,xr,wr,Sr)))}},{key:"clampPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new dr),t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=vr.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"getBoundingSphere",value:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(vr).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(mr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),mr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),mr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),mr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),mr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),mr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),mr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),mr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(mr)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();br.prototype.isBox3=!0;var mr=[new dr,new dr,new dr,new dr,new dr,new dr,new dr,new dr],vr=new dr,gr=new br,yr=new dr,xr=new dr,wr=new dr,_r=new dr,Mr=new dr,Tr=new dr,kr=new dr,Sr=new dr,Er=new dr,Ar=new dr;function Cr(e,t,n,r,a){for(var i=0,o=e.length-3;i<=o;i+=3){Ar.fromArray(e,i);var s=a.x*Math.abs(Ar.x)+a.y*Math.abs(Ar.y)+a.z*Math.abs(Ar.z),c=t.dot(Ar),u=n.dot(Ar),l=r.dot(Ar);if(Math.max(-Math.max(c,u,l),Math.min(c,u,l))>s)return!1}return!0}var Lr=new br,Rr=new dr,Pr=new dr,Ir=new dr,Nr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;v(this,e),this.center=t,this.radius=n}return g(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Lr.setFromPoints(e).getCenter(n);for(var r=0,a=0,i=e.length;a<i;a++)r=Math.max(r,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new dr),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new br),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){Ir.subVectors(e,this.center);var t=Ir.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(Ir.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return Pr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Rr.copy(e.center).add(Pr)),this.expandByPoint(Rr.copy(e.center).sub(Pr)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Or=new dr,Dr=new dr,Fr=new dr,Br=new dr,zr=new dr,Ur=new dr,Hr=new dr,Gr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr(0,0,-1);v(this,e),this.origin=t,this.direction=n}return g(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new dr),t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Or)),this}},{key:"closestPointToPoint",value:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new dr),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=Or.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Or.copy(this.direction).multiplyScalar(t).add(this.origin),Or.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){Dr.copy(e).add(t).multiplyScalar(.5),Fr.copy(t).sub(e).normalize(),Br.copy(this.origin).sub(Dr);var a,i,o,s,c=.5*e.distanceTo(t),u=-this.direction.dot(Fr),l=Br.dot(this.direction),f=-Br.dot(Fr),d=Br.lengthSq(),h=Math.abs(1-u*u);if(h>0)if(a=u*f-l,i=u*l-f,s=c*h,a>=0)if(i>=-s)if(i<=s){var p=1/h;a*=p,i*=p,o=a*(a+u*i+2*l)+i*(u*a+i+2*f)+d}else i=c,a=Math.max(0,-(u*i+l)),o=-a*a+i*(i+2*f)+d;else i=-c,a=Math.max(0,-(u*i+l)),o=-a*a+i*(i+2*f)+d;else i<=-s?(a=Math.max(0,-(-u*c+l)),i=a>0?-c:Math.min(Math.max(-c,-f),c),o=-a*a+i*(i+2*f)+d):i<=s?(a=0,i=Math.min(Math.max(-c,-f),c),o=i*(i+2*f)+d):(a=Math.max(0,-(u*c+l)),i=a>0?c:Math.min(Math.max(-c,-f),c),o=-a*a+i*(i+2*f)+d);else i=u>0?-c:c,a=Math.max(0,-(u*i+l)),o=-a*a+i*(i+2*f)+d;return n&&n.copy(this.direction).multiplyScalar(a).add(this.origin),r&&r.copy(Fr).multiplyScalar(i).add(Dr),o}},{key:"intersectSphere",value:function(e,t){Or.subVectors(e.center,this.origin);var n=Or.dot(this.direction),r=Or.dot(Or)-n*n,a=e.radius*e.radius;if(r>a)return null;var i=Math.sqrt(a-r),o=n-i,s=n+i;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0}},{key:"intersectBox",value:function(e,t){var n,r,a,i,o,s,c=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,f=this.origin;return c>=0?(n=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(n=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(a=(e.min.y-f.y)*u,i=(e.max.y-f.y)*u):(a=(e.max.y-f.y)*u,i=(e.min.y-f.y)*u),n>i||a>r?null:((a>n||n!==n)&&(n=a),(i<r||r!==r)&&(r=i),l>=0?(o=(e.min.z-f.z)*l,s=(e.max.z-f.z)*l):(o=(e.max.z-f.z)*l,s=(e.min.z-f.z)*l),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,Or)}},{key:"intersectTriangle",value:function(e,t,n,r,a){zr.subVectors(t,e),Ur.subVectors(n,e),Hr.crossVectors(zr,Ur);var i,o=this.direction.dot(Hr);if(o>0){if(r)return null;i=1}else{if(!(o<0))return null;i=-1,o=-o}Br.subVectors(this.origin,e);var s=i*this.direction.dot(Ur.crossVectors(Br,Ur));if(s<0)return null;var c=i*this.direction.dot(zr.cross(Br));if(c<0)return null;if(s+c>o)return null;var u=-i*Br.dot(Hr);return u<0?null:this.at(u/o,a)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),jr=function(){function e(){v(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return g(e,[{key:"set",value:function(e,t,n,r,a,i,o,s,c,u,l,f,d,h,p,b){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=a,m[5]=i,m[9]=o,m[13]=s,m[2]=c,m[6]=u,m[10]=l,m[14]=f,m[3]=d,m[7]=h,m[11]=p,m[15]=b,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/Vr.setFromMatrixColumn(e,0).length(),a=1/Vr.setFromMatrixColumn(e,1).length(),i=1/Vr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,a=e.z,i=Math.cos(n),o=Math.sin(n),s=Math.cos(r),c=Math.sin(r),u=Math.cos(a),l=Math.sin(a);if("XYZ"===e.order){var f=i*u,d=i*l,h=o*u,p=o*l;t[0]=s*u,t[4]=-s*l,t[8]=c,t[1]=d+h*c,t[5]=f-p*c,t[9]=-o*s,t[2]=p-f*c,t[6]=h+d*c,t[10]=i*s}else if("YXZ"===e.order){var b=s*u,m=s*l,v=c*u,g=c*l;t[0]=b+g*o,t[4]=v*o-m,t[8]=i*c,t[1]=i*l,t[5]=i*u,t[9]=-o,t[2]=m*o-v,t[6]=g+b*o,t[10]=i*s}else if("ZXY"===e.order){var y=s*u,x=s*l,w=c*u,_=c*l;t[0]=y-_*o,t[4]=-i*l,t[8]=w+x*o,t[1]=x+w*o,t[5]=i*u,t[9]=_-y*o,t[2]=-i*c,t[6]=o,t[10]=i*s}else if("ZYX"===e.order){var M=i*u,T=i*l,k=o*u,S=o*l;t[0]=s*u,t[4]=k*c-T,t[8]=M*c+S,t[1]=s*l,t[5]=S*c+M,t[9]=T*c-k,t[2]=-c,t[6]=o*s,t[10]=i*s}else if("YZX"===e.order){var E=i*s,A=i*c,C=o*s,L=o*c;t[0]=s*u,t[4]=L-E*l,t[8]=C*l+A,t[1]=l,t[5]=i*u,t[9]=-o*u,t[2]=-c*u,t[6]=A*l+C,t[10]=E-L*l}else if("XZY"===e.order){var R=i*s,P=i*c,I=o*s,N=o*c;t[0]=s*u,t[4]=-l,t[8]=c*u,t[1]=R*l+N,t[5]=i*u,t[9]=P*l-I,t[2]=I*l-P,t[6]=o*u,t[10]=N*l+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(qr,e,Xr)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return Jr.subVectors(e,t),0===Jr.lengthSq()&&(Jr.z=1),Jr.normalize(),Yr.crossVectors(n,Jr),0===Yr.lengthSq()&&(1===Math.abs(n.z)?Jr.x+=1e-4:Jr.z+=1e-4,Jr.normalize(),Yr.crossVectors(n,Jr)),Yr.normalize(),Zr.crossVectors(Jr,Yr),r[0]=Yr.x,r[4]=Zr.x,r[8]=Jr.x,r[1]=Yr.y,r[5]=Zr.y,r[9]=Jr.y,r[2]=Yr.z,r[6]=Zr.z,r[10]=Jr.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[4],s=n[8],c=n[12],u=n[1],l=n[5],f=n[9],d=n[13],h=n[2],p=n[6],b=n[10],m=n[14],v=n[3],g=n[7],y=n[11],x=n[15],w=r[0],_=r[4],M=r[8],T=r[12],k=r[1],S=r[5],E=r[9],A=r[13],C=r[2],L=r[6],R=r[10],P=r[14],I=r[3],N=r[7],O=r[11],D=r[15];return a[0]=i*w+o*k+s*C+c*I,a[4]=i*_+o*S+s*L+c*N,a[8]=i*M+o*E+s*R+c*O,a[12]=i*T+o*A+s*P+c*D,a[1]=u*w+l*k+f*C+d*I,a[5]=u*_+l*S+f*L+d*N,a[9]=u*M+l*E+f*R+d*O,a[13]=u*T+l*A+f*P+d*D,a[2]=h*w+p*k+b*C+m*I,a[6]=h*_+p*S+b*L+m*N,a[10]=h*M+p*E+b*R+m*O,a[14]=h*T+p*A+b*P+m*D,a[3]=v*w+g*k+y*C+x*I,a[7]=v*_+g*S+y*L+x*N,a[11]=v*M+g*E+y*R+x*O,a[15]=v*T+g*A+y*P+x*D,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],a=e[12],i=e[1],o=e[5],s=e[9],c=e[13],u=e[2],l=e[6],f=e[10],d=e[14],h=e[3],p=e[7],b=e[11],m=e[15];return h*(+a*s*l-r*c*l-a*o*f+n*c*f+r*o*d-n*s*d)+p*(+t*s*d-t*c*f+a*i*f-r*i*d+r*c*u-a*s*u)+b*(+t*c*l-t*o*d-a*i*l+n*i*d+a*o*u-n*c*u)+m*(-r*o*u-t*s*l+t*o*f+r*i*l-n*i*f+n*s*u)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],c=e[7],u=e[8],l=e[9],f=e[10],d=e[11],h=e[12],p=e[13],b=e[14],m=e[15],v=l*b*c-p*f*c+p*s*d-o*b*d-l*s*m+o*f*m,g=h*f*c-u*b*c-h*s*d+i*b*d+u*s*m-i*f*m,y=u*p*c-h*l*c+h*o*d-i*p*d-u*o*m+i*l*m,x=h*l*s-u*p*s-h*o*f+i*p*f+u*o*b-i*l*b,w=t*v+n*g+r*y+a*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _=1/w;return e[0]=v*_,e[1]=(p*f*a-l*b*a-p*r*d+n*b*d+l*r*m-n*f*m)*_,e[2]=(o*b*a-p*s*a+p*r*c-n*b*c-o*r*m+n*s*m)*_,e[3]=(l*s*a-o*f*a-l*r*c+n*f*c+o*r*d-n*s*d)*_,e[4]=g*_,e[5]=(u*b*a-h*f*a+h*r*d-t*b*d-u*r*m+t*f*m)*_,e[6]=(h*s*a-i*b*a-h*r*c+t*b*c+i*r*m-t*s*m)*_,e[7]=(i*f*a-u*s*a+u*r*c-t*f*c-i*r*d+t*s*d)*_,e[8]=y*_,e[9]=(h*l*a-u*p*a-h*n*d+t*p*d+u*n*m-t*l*m)*_,e[10]=(i*p*a-h*o*a+h*n*c-t*p*c-i*n*m+t*o*m)*_,e[11]=(u*o*a-i*l*a-u*n*c+t*l*c+i*n*d-t*o*d)*_,e[12]=x*_,e[13]=(u*p*r-h*l*r+h*n*f-t*p*f-u*n*b+t*l*b)*_,e[14]=(h*o*r-i*p*r-h*n*s+t*p*s+i*n*b-t*o*b)*_,e[15]=(i*l*r-u*o*r+u*n*s-t*l*s-i*n*f+t*o*f)*_,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,a=e.z;return t[0]*=n,t[4]*=r,t[8]*=a,t[1]*=n,t[5]*=r,t[9]*=a,t[2]*=n,t[6]*=r,t[10]*=a,t[3]*=n,t[7]*=r,t[11]*=a,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=1-n,i=e.x,o=e.y,s=e.z,c=a*i,u=a*o;return this.set(c*i+n,c*o-r*s,c*s+r*o,0,c*o+r*s,u*o+n,u*s-r*i,0,c*s-r*o,u*s+r*i,a*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,a,i){return this.set(1,n,a,0,e,1,i,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,a=t._x,i=t._y,o=t._z,s=t._w,c=a+a,u=i+i,l=o+o,f=a*c,d=a*u,h=a*l,p=i*u,b=i*l,m=o*l,v=s*c,g=s*u,y=s*l,x=n.x,w=n.y,_=n.z;return r[0]=(1-(p+m))*x,r[1]=(d+y)*x,r[2]=(h-g)*x,r[3]=0,r[4]=(d-y)*w,r[5]=(1-(f+m))*w,r[6]=(b+v)*w,r[7]=0,r[8]=(h+g)*_,r[9]=(b-v)*_,r[10]=(1-(f+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,a=Vr.set(r[0],r[1],r[2]).length(),i=Vr.set(r[4],r[5],r[6]).length(),o=Vr.set(r[8],r[9],r[10]).length(),s=this.determinant();s<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],Wr.copy(this);var c=1/a,u=1/i,l=1/o;return Wr.elements[0]*=c,Wr.elements[1]*=c,Wr.elements[2]*=c,Wr.elements[4]*=u,Wr.elements[5]*=u,Wr.elements[6]*=u,Wr.elements[8]*=l,Wr.elements[9]*=l,Wr.elements[10]*=l,t.setFromRotationMatrix(Wr),n.x=a,n.y=i,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,a,i){void 0===i&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*a/(t-e),c=2*a/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),f=-(i+a)/(i-a),d=-2*i*a/(i-a);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,a,i){var o=this.elements,s=1/(t-e),c=1/(n-r),u=1/(i-a),l=(t+e)*s,f=(n+r)*c,d=(i+a)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();jr.prototype.isMatrix4=!0;var Vr=new dr,Wr=new jr,qr=new dr(0,0,0),Xr=new dr(1,1,1),Yr=new dr,Zr=new dr,Jr=new dr,Kr=new jr,Qr=new fr,$r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;v(this,e),this._x=t,this._y=n,this._z=r,this._order=a}return g(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e,t,n){var r=e.elements,a=r[0],i=r[4],o=r[8],s=r[1],c=r[5],u=r[9],l=r[2],f=r[6],d=r[10];switch(t=t||this._order,t){case"XYZ":this._y=Math.asin(Nn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-i,a)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Nn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,c)):(this._y=Math.atan2(-l,a),this._z=0);break;case"ZXY":this._x=Math.asin(Nn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-l,d),this._z=Math.atan2(-i,c)):(this._y=0,this._z=Math.atan2(s,a));break;case"ZYX":this._y=Math.asin(-Nn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(s,a)):(this._x=0,this._z=Math.atan2(-i,c));break;case"YZX":this._z=Math.asin(Nn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Nn(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return Kr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Kr,t,n)}},{key:"setFromVector3",value:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)}},{key:"reorder",value:function(e){return Qr.setFromEuler(this),this.setFromQuaternion(Qr,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new dr(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();$r.prototype.isEuler=!0,$r.DefaultOrder="XYZ",$r.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var ea=function(){function e(){v(this,e),this.mask=1}return g(e,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}}]),e}(),ta=0,na=new dr,ra=new fr,aa=new jr,ia=new dr,oa=new dr,sa=new dr,ca=new fr,ua=new dr(1,0,0),la=new dr(0,1,0),fa=new dr(0,0,1),da={type:"added"},ha={type:"removed"},pa=function(e){b(n,e);var t=m(n);function n(){var e;v(this,n),e=t.call(this),Object.defineProperty(p(e),"id",{value:ta++}),e.uuid=In(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new dr,a=new $r,i=new fr,o=new dr(1,1,1);function s(){i.setFromEuler(a,!1)}function c(){a.setFromQuaternion(i,void 0,!1)}return a._onChange(s),i._onChange(c),Object.defineProperties(p(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new jr},normalMatrix:{value:new nr}}),e.matrix=new jr,e.matrixWorld=new jr,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new ea,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return g(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return ra.setFromAxisAngle(e,t),this.quaternion.multiply(ra),this}},{key:"rotateOnWorldAxis",value:function(e,t){return ra.setFromAxisAngle(e,t),this.quaternion.premultiply(ra),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(ua,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(la,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(fa,e)}},{key:"translateOnAxis",value:function(e,t){return na.copy(e).applyQuaternion(this.quaternion),this.position.add(na.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(ua,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(la,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(fa,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(aa.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?ia.copy(e):ia.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),oa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?aa.lookAt(oa,ia,this.up):aa.lookAt(ia,oa,this.up),this.quaternion.setFromRotationMatrix(aa),r&&(aa.extractRotation(r.matrixWorld),ra.setFromRotationMatrix(aa),this.quaternion.premultiply(ra.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(da)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(ha)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(ha)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),aa.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),aa.multiply(e.parent.matrixWorld)),e.applyMatrix4(aa),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var a=this.children[n],i=a.getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new dr),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new fr),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(oa,e,sa),e}},{key:"getWorldScale",value:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new dr),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(oa,ca,e),e}},{key:"getWorldDirection",value:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new dr),this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,a=0,i=r.length;a<i;a++)r[a].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function a(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);var i=this.geometry.parameters;if(void 0!==i&&void 0!==i.shapes){var o=i.shapes;if(Array.isArray(o))for(var s=0,c=o.length;s<c;s++){var u=o[s];a(e.shapes,u)}else a(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var l=[],f=0,d=this.material.length;f<d;f++)l.push(a(e.materials,this.material[f]));r.material=l}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(var h=0;h<this.children.length;h++)r.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var b=this.animations[p];r.animations.push(a(e.animations,b))}}if(t){var m=M(e.geometries),v=M(e.materials),g=M(e.textures),y=M(e.images),x=M(e.shapes),w=M(e.skeletons),_=M(e.animations);m.length>0&&(n.geometries=m),v.length>0&&(n.materials=v),g.length>0&&(n.textures=g),y.length>0&&(n.images=y),x.length>0&&(n.shapes=x),w.length>0&&(n.skeletons=w),_.length>0&&(n.animations=_)}return n.object=r,n;function M(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(En);pa.DefaultUp=new dr(0,1,0),pa.DefaultMatrixAutoUpdate=!0,pa.prototype.isObject3D=!0;var ba=new dr,ma=new dr,va=new nr,ga=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dr(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,e),this.normal=t,this.constant=n}return g(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=ba.subVectors(n,t).cross(ma.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new dr),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new dr);var n=e.delta(ba),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(n).multiplyScalar(a).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new dr),e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||va.getNormalMatrix(e),r=this.coplanarPoint(ba).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(a),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();ga.prototype.isPlane=!0;var ya=new dr,xa=new dr,wa=new dr,_a=new dr,Ma=new dr,Ta=new dr,ka=new dr,Sa=new dr,Ea=new dr,Aa=new dr,Ca=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new dr;v(this,e),this.a=t,this.b=n,this.c=r}return g(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return ya.subVectors(this.c,this.b),xa.subVectors(this.a,this.b),.5*ya.cross(xa).length()}},{key:"getMidpoint",value:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new dr),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new ga),e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,a,i){return e.getUV(t,this.a,this.b,this.c,n,r,a,i)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new dr);var n,r,a=this.a,i=this.b,o=this.c;Ma.subVectors(i,a),Ta.subVectors(o,a),Sa.subVectors(e,a);var s=Ma.dot(Sa),c=Ta.dot(Sa);if(s<=0&&c<=0)return t.copy(a);Ea.subVectors(e,i);var u=Ma.dot(Ea),l=Ta.dot(Ea);if(u>=0&&l<=u)return t.copy(i);var f=s*l-u*c;if(f<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(a).addScaledVector(Ma,n);Aa.subVectors(e,o);var d=Ma.dot(Aa),h=Ta.dot(Aa);if(h>=0&&d<=h)return t.copy(o);var p=d*c-s*h;if(p<=0&&c>=0&&h<=0)return r=c/(c-h),t.copy(a).addScaledVector(Ta,r);var b=u*h-d*l;if(b<=0&&l-u>=0&&d-h>=0)return ka.subVectors(o,i),r=(l-u)/(l-u+(d-h)),t.copy(i).addScaledVector(ka,r);var m=1/(b+p+f);return n=p*m,r=f*m,t.copy(a).addScaledVector(Ma,n).addScaledVector(Ta,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new dr),r.subVectors(n,t),ya.subVectors(e,t),r.cross(ya);var a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,a){ya.subVectors(r,t),xa.subVectors(n,t),wa.subVectors(e,t);var i=ya.dot(ya),o=ya.dot(xa),s=ya.dot(wa),c=xa.dot(xa),u=xa.dot(wa),l=i*c-o*o;if(void 0===a&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),a=new dr),0===l)return a.set(-2,-1,-1);var f=1/l,d=(c*s-o*u)*f,h=(i*u-o*s)*f;return a.set(1-d-h,h,d)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,_a),_a.x>=0&&_a.y>=0&&_a.x+_a.y<=1}},{key:"getUV",value:function(e,t,n,r,a,i,o,s){return this.getBarycoord(e,t,n,r,_a),s.set(0,0),s.addScaledVector(a,_a.x),s.addScaledVector(i,_a.y),s.addScaledVector(o,_a.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return ya.subVectors(n,t),xa.subVectors(e,t),ya.cross(xa).dot(r)<0}}]),e}(),La=0,Ra=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this),Object.defineProperty(p(e),"id",{value:La++}),e.uuid=In(),e.name="",e.type="Material",e.fog=!0,e.blending=B,e.side=I,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=Q,e.blendDst=$,e.blendEquation=j,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=ce,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=Mn,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=_n,e.stencilZFail=_n,e.stencilZPass=_n,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaTest=0,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e}return g(n,[{key:"onBuild",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===D;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==B&&(n.blending=this.blending),this.side!==I&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var a=r(e.textures),i=r(e.images);a.length>0&&(n.textures=a),i.length>0&&(n.images=i)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var a=0;a!==r;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(En);Ra.prototype.isMaterial=!0;var Pa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ia={h:0,s:0,l:0},Na={h:0,s:0,l:0};function Oa(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Da(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Fa(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Ba=function(){function e(t,n,r){return v(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return g(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=On(e,1),t=Nn(t,0,1),n=Nn(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=Oa(a,r,e+1/3),this.g=Oa(a,r,e),this.b=Oa(a,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,a=n[1],i=n[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(o,s,c)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var u=n[1],l=u.length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=Pa[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=Da(e.r),this.g=Da(e.g),this.b=Da(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Fa(e.r),this.g=Fa(e.g),this.b=Fa(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,a=this.g,i=this.b,o=Math.max(r,a,i),s=Math.min(r,a,i),c=(s+o)/2;if(s===o)t=0,n=0;else{var u=o-s;switch(n=c<=.5?u/(o+s):u/(2-o-s),o){case r:t=(a-i)/u+(a<i?6:0);break;case a:t=(i-r)/u+2;break;case i:t=(r-a)/u+4;break}t/=6}return e.h=t,e.s=n,e.l=c,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(Ia),Ia.h+=e,Ia.s+=t,Ia.l+=n,this.setHSL(Ia.h,Ia.s,Ia.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(Ia),e.getHSL(Na);var n=Bn(Ia.h,Na.h,t),r=Bn(Ia.s,Na.s,t),a=Bn(Ia.l,Na.l,t);return this.setHSL(n,r,a),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();Ba.NAMES=Pa,Ba.prototype.isColor=!0,Ba.prototype.r=1,Ba.prototype.g=1,Ba.prototype.b=1;var za=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="MeshBasicMaterial",r.color=new Ba(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=he,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this}}]),n}(Ra);za.prototype.isMeshBasicMaterial=!0;var Ua=new dr,Ha=new er,Ga=function(){function e(t,n,r){if(v(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=Tn,this.updateRange={offset:0,count:-1},this.version=0}return g(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Ba),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new er),t[n++]=i.x,t[n++]=i.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new dr),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new sr),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Ha.fromBufferAttribute(this,t),Ha.applyMatrix3(e),this.setXY(t,Ha.x,Ha.y);else if(3===this.itemSize)for(var r=0,a=this.count;r<a;r++)Ua.fromBufferAttribute(this,r),Ua.applyMatrix3(e),this.setXYZ(r,Ua.x,Ua.y,Ua.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Ua.x=this.getX(t),Ua.y=this.getY(t),Ua.z=this.getZ(t),Ua.applyMatrix4(e),this.setXYZ(t,Ua.x,Ua.y,Ua.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Ua.x=this.getX(t),Ua.y=this.getY(t),Ua.z=this.getZ(t),Ua.applyNormalMatrix(e),this.setXYZ(t,Ua.x,Ua.y,Ua.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Ua.x=this.getX(t),Ua.y=this.getY(t),Ua.z=this.getZ(t),Ua.transformDirection(e),this.setXYZ(t,Ua.x,Ua.y,Ua.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=a,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Tn&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();Ga.prototype.isBufferAttribute=!0;var ja=function(e){b(n,e);var t=m(n);function n(e,r,a){return v(this,n),t.call(this,new Uint16Array(e),r,a)}return n}(Ga),Va=function(e){b(n,e);var t=m(n);function n(e,r,a){return v(this,n),t.call(this,new Uint32Array(e),r,a)}return n}(Ga),Wa=function(e){b(n,e);var t=m(n);function n(e,r,a){return v(this,n),t.call(this,new Uint16Array(e),r,a)}return n}(Ga);Wa.prototype.isFloat16BufferAttribute=!0;var qa=function(e){b(n,e);var t=m(n);function n(e,r,a){return v(this,n),t.call(this,new Float32Array(e),r,a)}return n}(Ga);function Xa(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}var Ya={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Za(e,t){return new Ya[e](t)}var Ja=0,Ka=new jr,Qa=new pa,$a=new dr,ei=new br,ti=new br,ni=new dr,ri=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this),Object.defineProperty(p(e),"id",{value:Ja++}),e.uuid=In(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return g(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(Xa(e)>65535?Va:ja)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new nr).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Ka.makeRotationFromQuaternion(e),this.applyMatrix4(Ka),this}},{key:"rotateX",value:function(e){return Ka.makeRotationX(e),this.applyMatrix4(Ka),this}},{key:"rotateY",value:function(e){return Ka.makeRotationY(e),this.applyMatrix4(Ka),this}},{key:"rotateZ",value:function(e){return Ka.makeRotationZ(e),this.applyMatrix4(Ka),this}},{key:"translate",value:function(e,t,n){return Ka.makeTranslation(e,t,n),this.applyMatrix4(Ka),this}},{key:"scale",value:function(e,t,n){return Ka.makeScale(e,t,n),this.applyMatrix4(Ka),this}},{key:"lookAt",value:function(e){return Qa.lookAt(e),Qa.updateMatrix(),this.applyMatrix4(Qa.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter($a).negate(),this.translate($a.x,$a.y,$a.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new qa(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new br);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new dr(-1/0,-1/0,-1/0),new dr(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var a=t[n];ei.setFromBufferAttribute(a),this.morphTargetsRelative?(ni.addVectors(this.boundingBox.min,ei.min),this.boundingBox.expandByPoint(ni),ni.addVectors(this.boundingBox.max,ei.max),this.boundingBox.expandByPoint(ni)):(this.boundingBox.expandByPoint(ei.min),this.boundingBox.expandByPoint(ei.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Nr);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new dr,1/0);if(e){var n=this.boundingSphere.center;if(ei.setFromBufferAttribute(e),t)for(var r=0,a=t.length;r<a;r++){var i=t[r];ti.setFromBufferAttribute(i),this.morphTargetsRelative?(ni.addVectors(ei.min,ti.min),ei.expandByPoint(ni),ni.addVectors(ei.max,ti.max),ei.expandByPoint(ni)):(ei.expandByPoint(ti.min),ei.expandByPoint(ti.max))}ei.getCenter(n);for(var o=0,s=0,c=e.count;s<c;s++)ni.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(ni));if(t)for(var u=0,l=t.length;u<l;u++)for(var f=t[u],d=this.morphTargetsRelative,h=0,p=f.count;h<p;h++)ni.fromBufferAttribute(f,h),d&&($a.fromBufferAttribute(e,h),ni.add($a)),o=Math.max(o,n.distanceToSquared(ni));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeFaceNormals",value:function(){}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,a=t.normal.array,i=t.uv.array,o=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Ga(new Float32Array(4*o),4));for(var s=t.tangent.array,c=[],u=[],l=0;l<o;l++)c[l]=new dr,u[l]=new dr;var f=new dr,d=new dr,h=new dr,p=new er,b=new er,m=new er,v=new dr,g=new dr,y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(var x=0,w=y.length;x<w;++x)for(var _=y[x],M=_.start,T=_.count,k=M,S=M+T;k<S;k+=3)B(n[k+0],n[k+1],n[k+2]);for(var E=new dr,A=new dr,C=new dr,L=new dr,R=0,P=y.length;R<P;++R)for(var I=y[R],N=I.start,O=I.count,D=N,F=N+O;D<F;D+=3)z(n[D+0]),z(n[D+1]),z(n[D+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function B(e,t,n){f.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),p.fromArray(i,2*e),b.fromArray(i,2*t),m.fromArray(i,2*n),d.sub(f),h.sub(f),b.sub(p),m.sub(p);var a=1/(b.x*m.y-m.x*b.y);isFinite(a)&&(v.copy(d).multiplyScalar(m.y).addScaledVector(h,-b.y).multiplyScalar(a),g.copy(h).multiplyScalar(b.x).addScaledVector(d,-m.x).multiplyScalar(a),c[e].add(v),c[t].add(v),c[n].add(v),u[e].add(g),u[t].add(g),u[n].add(g))}function z(e){C.fromArray(a,3*e),L.copy(C);var t=c[e];E.copy(t),E.sub(C.multiplyScalar(C.dot(t))).normalize(),A.crossVectors(L,t);var n=A.dot(u[e]),r=n<0?-1:1;s[4*e]=E.x,s[4*e+1]=E.y,s[4*e+2]=E.z,s[4*e+3]=r}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new Ga(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,a=n.count;r<a;r++)n.setXYZ(r,0,0,0);var i=new dr,o=new dr,s=new dr,c=new dr,u=new dr,l=new dr,f=new dr,d=new dr;if(e)for(var h=0,p=e.count;h<p;h+=3){var b=e.getX(h+0),m=e.getX(h+1),v=e.getX(h+2);i.fromBufferAttribute(t,b),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,v),f.subVectors(s,o),d.subVectors(i,o),f.cross(d),c.fromBufferAttribute(n,b),u.fromBufferAttribute(n,m),l.fromBufferAttribute(n,v),c.add(f),u.add(f),l.add(f),n.setXYZ(b,c.x,c.y,c.z),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(v,l.x,l.y,l.z)}else for(var g=0,y=t.count;g<y;g+=3)i.fromBufferAttribute(t,g+0),o.fromBufferAttribute(t,g+1),s.fromBufferAttribute(t,g+2),f.subVectors(s,o),d.subVectors(i,o),f.cross(d),n.setXYZ(g+0,f.x,f.y,f.z),n.setXYZ(g+1,f.x,f.y,f.z),n.setXYZ(g+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var a=n[r],i=a.array,o=e.attributes[r],s=o.array,c=o.itemSize*t,u=Math.min(s.length,i.length-c),l=0,f=c;l<u;l++,f++)i[f]=s[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)ni.fromBufferAttribute(e,t),ni.normalize(),e.setXYZ(t,ni.x,ni.y,ni.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,a=e.normalized,i=new n.constructor(t.length*r),o=0,s=0,c=0,u=t.length;c<u;c++){o=t[c]*r;for(var l=0;l<r;l++)i[s++]=n[o++]}return new Ga(i,r,a)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,a=this.attributes;for(var i in a){var o=a[i],s=e(o,r);t.setAttribute(i,s)}var c=this.morphAttributes;for(var u in c){for(var l=[],f=c[u],d=0,h=f.length;d<h;d++){var p=f[d],b=e(p,r);l.push(b)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var m=this.groups,v=0,g=m.length;v<g;v++){var y=m[v];t.addGroup(y.start,y.count,y.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var a=this.attributes;for(var i in a){var o=a[i];e.data.attributes[i]=o.toJSON(e.data)}var s={},c=!1;for(var u in this.morphAttributes){for(var l=this.morphAttributes[u],f=[],d=0,h=l.length;d<h;d++){var p=l[d];f.push(p.toJSON(e.data))}f.length>0&&(s[u]=f,c=!0)}c&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var b=this.groups;b.length>0&&(e.data.groups=JSON.parse(JSON.stringify(b)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new n).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var a in r){var i=r[a];this.setAttribute(a,i.clone(t))}var o=e.morphAttributes;for(var s in o){for(var c=[],u=o[s],l=0,f=u.length;l<f;l++)c.push(u[l].clone(t));this.morphAttributes[s]=c}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,h=0,p=d.length;h<p;h++){var b=d[h];this.addGroup(b.start,b.count,b.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var v=e.boundingSphere;return null!==v&&(this.boundingSphere=v.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(En);ri.prototype.isBufferGeometry=!0;var ai=new jr,ii=new Gr,oi=new Nr,si=new dr,ci=new dr,ui=new dr,li=new dr,fi=new dr,di=new dr,hi=new dr,pi=new dr,bi=new dr,mi=new er,vi=new er,gi=new er,yi=new dr,xi=new dr,wi=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new za;return v(this,n),e=t.call(this),e.type="Mesh",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,a=this.material,i=this.matrixWorld;if(void 0!==a&&(null===r.boundingSphere&&r.computeBoundingSphere(),oi.copy(r.boundingSphere),oi.applyMatrix4(i),!1!==e.ray.intersectsSphere(oi)&&(ai.copy(i).invert(),ii.copy(e.ray).applyMatrix4(ai),null===r.boundingBox||!1!==ii.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,c=r.morphAttributes.position,u=r.morphTargetsRelative,l=r.attributes.uv,f=r.attributes.uv2,d=r.groups,h=r.drawRange;if(null!==o)if(Array.isArray(a))for(var p=0,b=d.length;p<b;p++)for(var m=d[p],v=a[m.materialIndex],g=Math.max(m.start,h.start),y=Math.min(m.start+m.count,h.start+h.count),x=g,w=y;x<w;x+=3){var _=o.getX(x),M=o.getX(x+1),T=o.getX(x+2);n=Mi(this,v,e,ii,s,c,u,l,f,_,M,T),n&&(n.faceIndex=Math.floor(x/3),n.face.materialIndex=m.materialIndex,t.push(n))}else for(var k=Math.max(0,h.start),S=Math.min(o.count,h.start+h.count),E=k,A=S;E<A;E+=3){var C=o.getX(E),L=o.getX(E+1),R=o.getX(E+2);n=Mi(this,a,e,ii,s,c,u,l,f,C,L,R),n&&(n.faceIndex=Math.floor(E/3),t.push(n))}else if(void 0!==s)if(Array.isArray(a))for(var P=0,I=d.length;P<I;P++)for(var N=d[P],O=a[N.materialIndex],D=Math.max(N.start,h.start),F=Math.min(N.start+N.count,h.start+h.count),B=D,z=F;B<z;B+=3){var U=B,H=B+1,G=B+2;n=Mi(this,O,e,ii,s,c,u,l,f,U,H,G),n&&(n.faceIndex=Math.floor(B/3),n.face.materialIndex=N.materialIndex,t.push(n))}else for(var j=Math.max(0,h.start),V=Math.min(s.count,h.start+h.count),W=j,q=V;W<q;W+=3){var X=W,Y=W+1,Z=W+2;n=Mi(this,a,e,ii,s,c,u,l,f,X,Y,Z),n&&(n.faceIndex=Math.floor(W/3),t.push(n))}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(pa);function _i(e,t,n,r,a,i,o,s){var c;if(c=t.side===N?r.intersectTriangle(o,i,a,!0,s):r.intersectTriangle(a,i,o,t.side!==O,s),null===c)return null;xi.copy(s),xi.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(xi);return u<n.near||u>n.far?null:{distance:u,point:xi.clone(),object:e}}function Mi(e,t,n,r,a,i,o,s,c,u,l,f){si.fromBufferAttribute(a,u),ci.fromBufferAttribute(a,l),ui.fromBufferAttribute(a,f);var d=e.morphTargetInfluences;if(t.morphTargets&&i&&d){hi.set(0,0,0),pi.set(0,0,0),bi.set(0,0,0);for(var h=0,p=i.length;h<p;h++){var b=d[h],m=i[h];0!==b&&(li.fromBufferAttribute(m,u),fi.fromBufferAttribute(m,l),di.fromBufferAttribute(m,f),o?(hi.addScaledVector(li,b),pi.addScaledVector(fi,b),bi.addScaledVector(di,b)):(hi.addScaledVector(li.sub(si),b),pi.addScaledVector(fi.sub(ci),b),bi.addScaledVector(di.sub(ui),b)))}si.add(hi),ci.add(pi),ui.add(bi)}e.isSkinnedMesh&&(e.boneTransform(u,si),e.boneTransform(l,ci),e.boneTransform(f,ui));var v=_i(e,t,n,r,si,ci,ui,yi);if(v){s&&(mi.fromBufferAttribute(s,u),vi.fromBufferAttribute(s,l),gi.fromBufferAttribute(s,f),v.uv=Ca.getUV(yi,si,ci,ui,mi,vi,gi,new er)),c&&(mi.fromBufferAttribute(c,u),vi.fromBufferAttribute(c,l),gi.fromBufferAttribute(c,f),v.uv2=Ca.getUV(yi,si,ci,ui,mi,vi,gi,new er));var g={a:u,b:l,c:f,normal:new dr,materialIndex:0};Ca.getNormal(si,ci,ui,g.normal),v.face=g}return v}wi.prototype.isMesh=!0;var Ti=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;v(this,n),e=t.call(this),e.type="BoxGeometry",e.parameters={width:r,height:a,depth:i,widthSegments:o,heightSegments:s,depthSegments:c};var u=p(e);o=Math.floor(o),s=Math.floor(s),c=Math.floor(c);var l=[],f=[],d=[],h=[],b=0,m=0;function g(e,t,n,r,a,i,o,s,c,p,v){for(var g=i/c,y=o/p,x=i/2,w=o/2,_=s/2,M=c+1,T=p+1,k=0,S=0,E=new dr,A=0;A<T;A++)for(var C=A*y-w,L=0;L<M;L++){var R=L*g-x;E[e]=R*r,E[t]=C*a,E[n]=_,f.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=s>0?1:-1,d.push(E.x,E.y,E.z),h.push(L/c),h.push(1-A/p),k+=1}for(var P=0;P<p;P++)for(var I=0;I<c;I++){var N=b+I+M*P,O=b+I+M*(P+1),D=b+(I+1)+M*(P+1),F=b+(I+1)+M*P;l.push(N,O,F),l.push(O,D,F),S+=6}u.addGroup(m,S,v),m+=S,b+=k}return g("z","y","x",-1,-1,i,a,r,c,s,0),g("z","y","x",1,-1,i,a,-r,c,s,1),g("x","z","y",1,1,r,i,a,o,c,2),g("x","z","y",1,-1,r,i,-a,o,c,3),g("x","y","z",1,-1,r,a,i,o,s,4),g("x","y","z",-1,-1,r,a,-i,o,s,5),e.setIndex(l),e.setAttribute("position",new qa(f,3)),e.setAttribute("normal",new qa(d,3)),e.setAttribute("uv",new qa(h,2)),e}return n}(ri);function ki(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var a=e[n][r];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?t[n][r]=a.clone():Array.isArray(a)?t[n][r]=a.slice():t[n][r]=a}return t}function Si(e){for(var t={},n=0;n<e.length;n++){var r=ki(e[n]);for(var a in r)t[a]=r[a]}return t}var Ei={clone:ki,merge:Si},Ai="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Ci="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",Li=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader=Ai,r.fragmentShader=Ci,r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.morphTargets=!1,r.morphNormals=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ki(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=f(d(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var a=this.uniforms[r],i=a.value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var o={};for(var s in this.extensions)!0===this.extensions[s]&&(o[s]=!0);return Object.keys(o).length>0&&(t.extensions=o),t}}]),n}(Ra);Li.prototype.isShaderMaterial=!0;var Ri=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this),e.type="Camera",e.matrixWorldInverse=new jr,e.projectionMatrix=new jr,e.projectionMatrixInverse=new jr,e}return g(n,[{key:"copy",value:function(e,t){return f(d(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new dr),this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){f(d(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){f(d(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(pa);Ri.prototype.isCamera=!0;var Pi=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return v(this,n),e=t.call(this),e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=i,e.far=o,e.focus=10,e.aspect=a,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return g(n,[{key:"copy",value:function(e,t){return f(d(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Pn*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Rn*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Pn*Math.atan(Math.tan(.5*Rn*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,a,i){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Rn*this.fov)/this.zoom,n=2*t,r=this.aspect*n,a=-.5*r,i=this.view;if(null!==this.view&&this.view.enabled){var o=i.fullWidth,s=i.fullHeight;a+=i.offsetX*r/o,t-=i.offsetY*n/s,r*=i.width/o,n*=i.height/s}var c=this.filmOffset;0!==c&&(a+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=f(d(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Ri);Pi.prototype.isPerspectiveCamera=!0;var Ii=90,Ni=1,Oi=function(e){b(n,e);var t=m(n);function n(e,r,a){var i;if(v(this,n),i=t.call(this),i.type="CubeCamera",!0!==a.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),l(i);i.renderTarget=a;var o=new Pi(Ii,Ni,e,r);o.layers=i.layers,o.up.set(0,-1,0),o.lookAt(new dr(1,0,0)),i.add(o);var s=new Pi(Ii,Ni,e,r);s.layers=i.layers,s.up.set(0,-1,0),s.lookAt(new dr(-1,0,0)),i.add(s);var c=new Pi(Ii,Ni,e,r);c.layers=i.layers,c.up.set(0,0,1),c.lookAt(new dr(0,1,0)),i.add(c);var u=new Pi(Ii,Ni,e,r);u.layers=i.layers,u.up.set(0,0,-1),u.lookAt(new dr(0,-1,0)),i.add(u);var f=new Pi(Ii,Ni,e,r);f.layers=i.layers,f.up.set(0,-1,0),f.lookAt(new dr(0,0,1)),i.add(f);var d=new Pi(Ii,Ni,e,r);return d.layers=i.layers,d.up.set(0,-1,0),d.lookAt(new dr(0,0,-1)),i.add(d),i}return g(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=u(this.children,6),a=r[0],i=r[1],o=r[2],s=r[3],c=r[4],l=r[5],f=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;var h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,a),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,c),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(d),e.xr.enabled=f}}]),n}(pa),Di=function(e){b(n,e);var t=m(n);function n(e,r,a,i,o,s,c,u,l,f){var d;return v(this,n),e=void 0!==e?e:[],r=void 0!==r?r:Me,c=void 0!==c?c:Ke,d=t.call(this,e,r,a,i,o,s,c,u,l,f),d._needsFlipEnvMap=!0,d.flipY=!1,d}return g(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(ir);Di.prototype.isCubeTexture=!0;var Fi=function(e){b(n,e);var t=m(n);function n(e,r,a){var i;return v(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=a),i=t.call(this,e,e,r),r=r||{},i.texture=new Di(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),i.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,i.texture.minFilter=void 0!==r.minFilter?r.minFilter:Oe,i.texture._needsFlipEnvMap=!1,i}return g(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=Qe,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Ti(5,5,5),a=new Li({name:"CubemapFromEquirect",uniforms:ki(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:N,blending:F});a.uniforms.tEquirect.value=t;var i=new wi(r,a),o=t.minFilter;t.minFilter===Fe&&(t.minFilter=Oe);var s=new Oi(1,10,this);return s.update(e,i),t.minFilter=o,i.geometry.dispose(),i.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var a=e.getRenderTarget(),i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(a)}}]),n}(cr);Fi.prototype.isWebGLCubeRenderTarget=!0;var Bi=new Nr,zi=new dr,Ui=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ga,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ga,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ga,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ga,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new ga,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new ga;v(this,e),this.planes=[t,n,r,a,i,o]}return g(e,[{key:"set",value:function(e,t,n,r,a,i){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(a),o[5].copy(i),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],c=n[5],u=n[6],l=n[7],f=n[8],d=n[9],h=n[10],p=n[11],b=n[12],m=n[13],v=n[14],g=n[15];return t[0].setComponents(o-r,l-s,p-f,g-b).normalize(),t[1].setComponents(o+r,l+s,p+f,g+b).normalize(),t[2].setComponents(o+a,l+c,p+d,g+m).normalize(),t[3].setComponents(o-a,l-c,p-d,g-m).normalize(),t[4].setComponents(o-i,l-u,p-h,g-v).normalize(),t[5].setComponents(o+i,l+u,p+h,g+v).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Bi.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Bi)}},{key:"intersectsSprite",value:function(e){return Bi.center.set(0,0,0),Bi.radius=.7071067811865476,Bi.applyMatrix4(e.matrixWorld),this.intersectsSphere(Bi)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,a=0;a<6;a++){var i=t[a].distanceToPoint(n);if(i<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(zi.x=r.normal.x>0?e.max.x:e.min.x,zi.y=r.normal.y>0?e.max.y:e.min.y,zi.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(zi)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function Hi(){var e=null,t=!1,n=null,r=null;function a(t,i){n(t,i),r=e.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(a),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Gi(e,t){var n=t.isWebGL2,r=new WeakMap;function a(t,r){var a=t.array,i=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,a,i),t.onUploadCallback();var s=5126;return a instanceof Float32Array?s=5126:a instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):a instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:a instanceof Int16Array?s=5122:a instanceof Uint32Array?s=5125:a instanceof Int32Array?s=5124:a instanceof Int8Array?s=5120:(a instanceof Uint8Array||a instanceof Uint8ClampedArray)&&(s=5121),{buffer:o,type:s,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}function i(t,r,a){var i=r.array,o=r.updateRange;e.bindBuffer(a,t),-1===o.count?e.bufferSubData(a,0,i):(n?e.bufferSubData(a,o.offset*i.BYTES_PER_ELEMENT,i,o.offset,o.count):e.bufferSubData(a,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}function o(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)}function s(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))}function c(e,t){if(e.isGLBufferAttribute){var n=r.get(e);(!n||n.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var o=r.get(e);void 0===o?r.set(e,a(e,t)):o.version<e.version&&(i(o.buffer,e,t),o.version=e.version)}}return{get:o,remove:s,update:c}}var ji=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;v(this,n),e=t.call(this),e.type="PlaneGeometry",e.parameters={width:r,height:a,widthSegments:i,heightSegments:o};for(var s=r/2,c=a/2,u=Math.floor(i),l=Math.floor(o),f=u+1,d=l+1,h=r/u,p=a/l,b=[],m=[],g=[],y=[],x=0;x<d;x++)for(var w=x*p-c,_=0;_<f;_++){var M=_*h-s;m.push(M,-w,0),g.push(0,0,1),y.push(_/u),y.push(1-x/l)}for(var T=0;T<l;T++)for(var k=0;k<u;k++){var S=k+f*T,E=k+f*(T+1),A=k+1+f*(T+1),C=k+1+f*T;b.push(S,E,C),b.push(E,A,C)}return e.setIndex(b),e.setAttribute("position",new qa(m,3)),e.setAttribute("normal",new qa(g,3)),e.setAttribute("uv",new qa(y,2)),e}return n}(ri),Vi="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",Wi="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",qi="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",Xi="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",Yi="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Zi="vec3 transformed = vec3( position );",Ji="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Ki="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",Qi="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",$i="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",eo="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",to="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",no="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",ro="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",ao="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",io="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",oo="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",so="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",co="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",uo="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",lo="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",fo="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",ho="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",po="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",bo="gl_FragColor = linearToOutputTexel( gl_FragColor );",mo="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",vo="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",go="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",yo="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",xo="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",wo="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",_o="#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",Mo="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",To="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",ko="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",So="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",Eo="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",Ao="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Co="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",Lo="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",Ro="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",Po="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",Io="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",No="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Oo="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",Do="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), rawDiffuseColor, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), rawDiffuseColor, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",Fo="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Bo="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",zo="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",Uo="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",Ho="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Go="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",jo="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Vo="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",Wo="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",qo="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Xo="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",Yo="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Zo="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Jo="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Ko="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",Qo="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",$o="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",es="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",ts="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",ns="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",rs="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",as="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",is="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",os="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",ss="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",cs="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",us="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",ls="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",fs="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",ds="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",hs="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",ps="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",bs="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",ms="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",vs="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",gs="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",ys="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",xs="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",ws="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",_s="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Ms="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Ts="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",ks="#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 f0 = vec3( pow( ior - 1.0, 2.0 ) / pow( ior + 1.0, 2.0 ) );\n\tvec3 f90 = vec3( 1.0 );\n\tvec3 f_transmission = totalTransmission * getIBLVolumeRefraction(\n\t\tnormal, v, viewDir, roughnessFactor, diffuseColor.rgb, f0, f90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance);\n\tdiffuseColor.rgb = mix( diffuseColor.rgb, f_transmission, totalTransmission );\n#endif",Ss="#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, vec3 viewDir, float perceptualRoughness, vec3 baseColor, vec3 f0, vec3 f90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\tfloat NdotV = saturate(dot(n, viewDir));\n\t\tvec2 brdf = integrateSpecularBRDF(NdotV, perceptualRoughness);\n\t\tvec3 specularColor = f0 * brdf.x + f90 * brdf.y;\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",Es="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",As="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",Cs="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",Ls="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Rs="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",Ps="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",Is="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",Ns="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Os="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Ds="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Fs="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Bs="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",zs="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Us="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Hs="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Gs="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",js="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Vs="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ws="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",qs="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Xs="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Ys="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Zs="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Js="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ks="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Qs="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",$s="#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ec="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",tc="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",nc="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef USE_TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t\tfloat thicknessFactor = thickness;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\tvec3 rawDiffuseColor = diffuseColor.rgb;\n\t#include <transmission_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",rc="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",ac="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",ic="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",oc="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",sc="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",cc="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",uc="#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",lc="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",fc="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",dc={alphamap_fragment:Vi,alphamap_pars_fragment:Wi,alphatest_fragment:qi,aomap_fragment:Xi,aomap_pars_fragment:Yi,begin_vertex:Zi,beginnormal_vertex:Ji,bsdfs:Ki,bumpmap_pars_fragment:Qi,clipping_planes_fragment:$i,clipping_planes_pars_fragment:eo,clipping_planes_pars_vertex:to,clipping_planes_vertex:no,color_fragment:ro,color_pars_fragment:ao,color_pars_vertex:io,color_vertex:oo,common:so,cube_uv_reflection_fragment:co,defaultnormal_vertex:uo,displacementmap_pars_vertex:lo,displacementmap_vertex:fo,emissivemap_fragment:ho,emissivemap_pars_fragment:po,encodings_fragment:bo,encodings_pars_fragment:mo,envmap_fragment:vo,envmap_common_pars_fragment:go,envmap_pars_fragment:yo,envmap_pars_vertex:xo,envmap_physical_pars_fragment:Ro,envmap_vertex:wo,fog_vertex:_o,fog_pars_vertex:Mo,fog_fragment:To,fog_pars_fragment:ko,gradientmap_pars_fragment:So,lightmap_fragment:Eo,lightmap_pars_fragment:Ao,lights_lambert_vertex:Co,lights_pars_begin:Lo,lights_toon_fragment:Po,lights_toon_pars_fragment:Io,lights_phong_fragment:No,lights_phong_pars_fragment:Oo,lights_physical_fragment:Do,lights_physical_pars_fragment:Fo,lights_fragment_begin:Bo,lights_fragment_maps:zo,lights_fragment_end:Uo,logdepthbuf_fragment:Ho,logdepthbuf_pars_fragment:Go,logdepthbuf_pars_vertex:jo,logdepthbuf_vertex:Vo,map_fragment:Wo,map_pars_fragment:qo,map_particle_fragment:Xo,map_particle_pars_fragment:Yo,metalnessmap_fragment:Zo,metalnessmap_pars_fragment:Jo,morphnormal_vertex:Ko,morphtarget_pars_vertex:Qo,morphtarget_vertex:$o,normal_fragment_begin:es,normal_fragment_maps:ts,normalmap_pars_fragment:ns,clearcoat_normal_fragment_begin:rs,clearcoat_normal_fragment_maps:as,clearcoat_pars_fragment:is,packing:os,premultiplied_alpha_fragment:ss,project_vertex:cs,dithering_fragment:us,dithering_pars_fragment:ls,roughnessmap_fragment:fs,roughnessmap_pars_fragment:ds,shadowmap_pars_fragment:hs,shadowmap_pars_vertex:ps,shadowmap_vertex:bs,shadowmask_pars_fragment:ms,skinbase_vertex:vs,skinning_pars_vertex:gs,skinning_vertex:ys,skinnormal_vertex:xs,specularmap_fragment:ws,specularmap_pars_fragment:_s,tonemapping_fragment:Ms,tonemapping_pars_fragment:Ts,transmission_fragment:ks,transmission_pars_fragment:Ss,uv_pars_fragment:Es,uv_pars_vertex:As,uv_vertex:Cs,uv2_pars_fragment:Ls,uv2_pars_vertex:Rs,uv2_vertex:Ps,worldpos_vertex:Is,background_frag:Ns,background_vert:Os,cube_frag:Ds,cube_vert:Fs,depth_frag:Bs,depth_vert:zs,distanceRGBA_frag:Us,distanceRGBA_vert:Hs,equirect_frag:Gs,equirect_vert:js,linedashed_frag:Vs,linedashed_vert:Ws,meshbasic_frag:qs,meshbasic_vert:Xs,meshlambert_frag:Ys,meshlambert_vert:Zs,meshmatcap_frag:Js,meshmatcap_vert:Ks,meshtoon_frag:Qs,meshtoon_vert:$s,meshphong_frag:ec,meshphong_vert:tc,meshphysical_frag:nc,meshphysical_vert:rc,normal_frag:ac,normal_vert:ic,points_frag:oc,points_vert:sc,shadow_frag:cc,shadow_vert:uc,sprite_frag:lc,sprite_vert:fc},hc={common:{diffuse:{value:new Ba(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new nr},uv2Transform:{value:new nr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new er(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ba(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ba(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new nr}},sprite:{diffuse:{value:new Ba(16777215)},opacity:{value:1},center:{value:new er(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new nr}}},pc={basic:{uniforms:Si([hc.common,hc.specularmap,hc.envmap,hc.aomap,hc.lightmap,hc.fog]),vertexShader:dc.meshbasic_vert,fragmentShader:dc.meshbasic_frag},lambert:{uniforms:Si([hc.common,hc.specularmap,hc.envmap,hc.aomap,hc.lightmap,hc.emissivemap,hc.fog,hc.lights,{emissive:{value:new Ba(0)}}]),vertexShader:dc.meshlambert_vert,fragmentShader:dc.meshlambert_frag},phong:{uniforms:Si([hc.common,hc.specularmap,hc.envmap,hc.aomap,hc.lightmap,hc.emissivemap,hc.bumpmap,hc.normalmap,hc.displacementmap,hc.fog,hc.lights,{emissive:{value:new Ba(0)},specular:{value:new Ba(1118481)},shininess:{value:30}}]),vertexShader:dc.meshphong_vert,fragmentShader:dc.meshphong_frag},standard:{uniforms:Si([hc.common,hc.envmap,hc.aomap,hc.lightmap,hc.emissivemap,hc.bumpmap,hc.normalmap,hc.displacementmap,hc.roughnessmap,hc.metalnessmap,hc.fog,hc.lights,{emissive:{value:new Ba(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:dc.meshphysical_vert,fragmentShader:dc.meshphysical_frag},toon:{uniforms:Si([hc.common,hc.aomap,hc.lightmap,hc.emissivemap,hc.bumpmap,hc.normalmap,hc.displacementmap,hc.gradientmap,hc.fog,hc.lights,{emissive:{value:new Ba(0)}}]),vertexShader:dc.meshtoon_vert,fragmentShader:dc.meshtoon_frag},matcap:{uniforms:Si([hc.common,hc.bumpmap,hc.normalmap,hc.displacementmap,hc.fog,{matcap:{value:null}}]),vertexShader:dc.meshmatcap_vert,fragmentShader:dc.meshmatcap_frag},points:{uniforms:Si([hc.points,hc.fog]),vertexShader:dc.points_vert,fragmentShader:dc.points_frag},dashed:{uniforms:Si([hc.common,hc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:dc.linedashed_vert,fragmentShader:dc.linedashed_frag},depth:{uniforms:Si([hc.common,hc.displacementmap]),vertexShader:dc.depth_vert,fragmentShader:dc.depth_frag},normal:{uniforms:Si([hc.common,hc.bumpmap,hc.normalmap,hc.displacementmap,{opacity:{value:1}}]),vertexShader:dc.normal_vert,fragmentShader:dc.normal_frag},sprite:{uniforms:Si([hc.sprite,hc.fog]),vertexShader:dc.sprite_vert,fragmentShader:dc.sprite_frag},background:{uniforms:{uvTransform:{value:new nr},t2D:{value:null}},vertexShader:dc.background_vert,fragmentShader:dc.background_frag},cube:{uniforms:Si([hc.envmap,{opacity:{value:1}}]),vertexShader:dc.cube_vert,fragmentShader:dc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:dc.equirect_vert,fragmentShader:dc.equirect_frag},distanceRGBA:{uniforms:Si([hc.common,hc.displacementmap,{referencePosition:{value:new dr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:dc.distanceRGBA_vert,fragmentShader:dc.distanceRGBA_frag},shadow:{uniforms:Si([hc.lights,hc.fog,{color:{value:new Ba(0)},opacity:{value:1}}]),vertexShader:dc.shadow_vert,fragmentShader:dc.shadow_frag}};function bc(e,t,n,r,a){var i,o,s=new Ba(0),c=0,u=null,l=0,f=null;function d(n,a){var d=!1,p=!0===a.isScene?a.background:null;p&&p.isTexture&&(p=t.get(p));var b=e.xr,m=b.getSession&&b.getSession();m&&"additive"===m.environmentBlendMode&&(p=null),null===p?h(s,c):p&&p.isColor&&(h(p,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Ee)?(void 0===o&&(o=new wi(new Ti(1,1,1),new Li({name:"BackgroundCubeMaterial",uniforms:ki(pc.cube.uniforms),vertexShader:pc.cube.vertexShader,fragmentShader:pc.cube.fragmentShader,side:N,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),o.material.uniforms.envMap.value=p,o.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p._needsFlipEnvMap?-1:1,u===p&&l===p.version&&f===e.toneMapping||(o.material.needsUpdate=!0,u=p,l=p.version,f=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):p&&p.isTexture&&(void 0===i&&(i=new wi(new ji(2,2),new Li({name:"BackgroundMaterial",uniforms:ki(pc.background.uniforms),vertexShader:pc.background.vertexShader,fragmentShader:pc.background.fragmentShader,side:I,depthTest:!1,depthWrite:!1,fog:!1})),i.geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(i)),i.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),i.material.uniforms.uvTransform.value.copy(p.matrix),u===p&&l===p.version&&f===e.toneMapping||(i.material.needsUpdate=!0,u=p,l=p.version,f=e.toneMapping),n.unshift(i,i.geometry,i.material,0,0,null))}function h(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,a)}return{getClearColor:function(){return s},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),c=t,h(s,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,h(s,c)},render:d}}function mc(e,t,n,r){var a=e.getParameter(34921),i=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==i,s={},c=b(null),u=c;function l(t,r,a,i,s){var c=!1;if(o){var l=p(i,a,r);u!==l&&(u=l,d(u.object)),c=m(i,s),c&&v(i,s)}else{var f=!0===r.wireframe;u.geometry===i.id&&u.program===a.id&&u.wireframe===f||(u.geometry=i.id,u.program=a.id,u.wireframe=f,c=!0)}!0===t.isInstancedMesh&&(c=!0),null!==s&&n.update(s,34963),c&&(M(t,r,a,i),null!==s&&e.bindBuffer(34963,n.get(s).buffer))}function f(){return r.isWebGL2?e.createVertexArray():i.createVertexArrayOES()}function d(t){return r.isWebGL2?e.bindVertexArray(t):i.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):i.deleteVertexArrayOES(t)}function p(e,t,n){var r=!0===n.wireframe,a=s[e.id];void 0===a&&(a={},s[e.id]=a);var i=a[t.id];void 0===i&&(i={},a[t.id]=i);var o=i[r];return void 0===o&&(o=b(f()),i[r]=o),o}function b(e){for(var t=[],n=[],r=[],i=0;i<a;i++)t[i]=0,n[i]=0,r[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function m(e,t){var n=u.attributes,r=e.attributes,a=0;for(var i in r){var o=n[i],s=r[i];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;a++}return u.attributesNum!==a||u.index!==t}function v(e,t){var n={},r=e.attributes,a=0;for(var i in r){var o=r[i],s={};s.attribute=o,o.data&&(s.data=o.data),n[i]=s,a++}u.attributes=n,u.attributesNum=a,u.index=t}function g(){for(var e=u.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function y(e){x(e,0)}function x(n,a){var i=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;if(i[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==a){var c=r.isWebGL2?e:t.get("ANGLE_instanced_arrays");c[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,a),s[n]=a}}function w(){for(var t=u.newAttributes,n=u.enabledAttributes,r=0,a=n.length;r<a;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function _(t,n,a,i,o,s){!0!==r.isWebGL2||5124!==a&&5125!==a?e.vertexAttribPointer(t,n,a,i,o,s):e.vertexAttribIPointer(t,n,a,o,s)}function M(a,i,o,s){if(!1!==r.isWebGL2||!a.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){g();var c=s.attributes,u=o.getAttributes(),l=i.defaultAttributeValues;for(var f in u){var d=u[f];if(d>=0){var h=c[f];if(void 0!==h){var p=h.normalized,b=h.itemSize,m=n.get(h);if(void 0===m)continue;var v=m.buffer,M=m.type,T=m.bytesPerElement;if(h.isInterleavedBufferAttribute){var k=h.data,S=k.stride,E=h.offset;k&&k.isInstancedInterleavedBuffer?(x(d,k.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=k.meshPerAttribute*k.count)):y(d),e.bindBuffer(34962,v),_(d,b,M,p,S*T,E*T)}else h.isInstancedBufferAttribute?(x(d,h.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=h.meshPerAttribute*h.count)):y(d),e.bindBuffer(34962,v),_(d,b,M,p,0,0)}else if("instanceMatrix"===f){var A=n.get(a.instanceMatrix);if(void 0===A)continue;var C=A.buffer,L=A.type;x(d+0,1),x(d+1,1),x(d+2,1),x(d+3,1),e.bindBuffer(34962,C),e.vertexAttribPointer(d+0,4,L,!1,64,0),e.vertexAttribPointer(d+1,4,L,!1,64,16),e.vertexAttribPointer(d+2,4,L,!1,64,32),e.vertexAttribPointer(d+3,4,L,!1,64,48)}else if("instanceColor"===f){var R=n.get(a.instanceColor);if(void 0===R)continue;var P=R.buffer,I=R.type;x(d,1),e.bindBuffer(34962,P),e.vertexAttribPointer(d,3,I,!1,12,0)}else if(void 0!==l){var N=l[f];if(void 0!==N)switch(N.length){case 2:e.vertexAttrib2fv(d,N);break;case 3:e.vertexAttrib3fv(d,N);break;case 4:e.vertexAttrib4fv(d,N);break;default:e.vertexAttrib1fv(d,N)}}}}w()}}function T(){for(var e in E(),s){var t=s[e];for(var n in t){var r=t[n];for(var a in r)h(r[a].object),delete r[a];delete t[n]}delete s[e]}}function k(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var a in r)h(r[a].object),delete r[a];delete t[n]}delete s[e.id]}}function S(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var a in r)h(r[a].object),delete r[a];delete n[e.id]}}}function E(){A(),u!==c&&(u=c,d(u.object))}function A(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:l,reset:E,resetDefaultState:A,dispose:T,releaseStatesOfGeometry:k,releaseStatesOfProgram:S,initAttributes:g,enableAttribute:y,disableUnusedAttributes:w}}function vc(e,t,n,r){var a,i=r.isWebGL2;function o(e){a=e}function s(t,r){e.drawArrays(a,t,r),n.update(r,a,1)}function c(r,o,s){if(0!==s){var c,u;if(i)c=e,u="drawArraysInstanced";else if(c=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[u](a,r,o,s),n.update(o,a,s)}}this.setMode=o,this.render=s,this.renderInstances=c}function gc(e,t,n){var r;function a(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",c=i(s);c!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",c,"instead."),s=c);var u=o||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,f=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),p=e.getParameter(34076),b=e.getParameter(34921),m=e.getParameter(36347),v=e.getParameter(36348),g=e.getParameter(36349),y=d>0,x=o||t.has("OES_texture_float"),w=y&&x,_=o?e.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:a,getMaxPrecision:i,precision:s,logarithmicDepthBuffer:l,maxTextures:f,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:b,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:w,maxSamples:_}}function yc(e){var t=this,n=null,r=0,a=!1,i=!1,o=new ga,s=new nr,c={value:null,needsUpdate:!1};function u(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function l(e,n,r,a){var i=null!==e?e.length:0,u=null;if(0!==i){if(u=c.value,!0!==a||null===u){var l=r+4*i,f=n.matrixWorldInverse;s.getNormalMatrix(f),(null===u||u.length<l)&&(u=new Float32Array(l));for(var d=0,h=r;d!==i;++d,h+=4)o.copy(e[d]).applyMatrix4(f,s),o.normal.toArray(u,h),u[h+3]=o.constant}c.value=u,c.needsUpdate=!0}return t.numPlanes=i,t.numIntersection=0,u}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,i){var o=0!==e.length||t||0!==r||a;return a=t,n=l(e,i,0),r=e.length,o},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,s){var f=t.clippingPlanes,d=t.clipIntersection,h=t.clipShadows,p=e.get(t);if(!a||null===f||0===f.length||i&&!h)i?l(null):u();else{var b=i?0:r,m=4*b,v=p.clippingState||null;c.value=v,v=l(f,o,m,s);for(var g=0;g!==m;++g)v[g]=n[g];p.clippingState=v,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=b}}}function xc(e){var t=new WeakMap;function n(e,t){return t===ke?e.mapping=Me:t===Se&&(e.mapping=Te),e}function r(r){if(r&&r.isTexture){var i=r.mapping;if(i===ke||i===Se){if(t.has(r)){var o=t.get(r).texture;return n(o,r.mapping)}var s=r.image;if(s&&s.height>0){var c=e.getRenderTarget(),u=new Fi(s.height/2);return u.fromEquirectangularTexture(e,r),t.set(r,u),e.setRenderTarget(c),r.addEventListener("dispose",a),n(u.texture,r.mapping)}return null}}return r}function a(e){var n=e.target;n.removeEventListener("dispose",a);var r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}function i(){t=new WeakMap}return{get:r,dispose:i}}function wc(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function _c(e,t,n,r){var a={},i=new WeakMap;function o(e){var s=e.target;for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);s.removeEventListener("dispose",o),delete a[s.id];var u=i.get(s);u&&(t.remove(u),i.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e,t){return!0===a[t.id]||(t.addEventListener("dispose",o),a[t.id]=!0,n.memory.geometries++),t}function c(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var a=e.morphAttributes;for(var i in a)for(var o=a[i],s=0,c=o.length;s<c;s++)t.update(o[s],34962)}function u(e){var n=[],r=e.index,a=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var c=0,u=s.length;c<u;c+=3){var l=s[c+0],f=s[c+1],d=s[c+2];n.push(l,f,f,d,d,l)}}else{var h=a.array;o=a.version;for(var p=0,b=h.length/3-1;p<b;p+=3){var m=p+0,v=p+1,g=p+2;n.push(m,v,v,g,g,m)}}var y=new(Xa(n)>65535?Va:ja)(n,1);y.version=o;var x=i.get(e);x&&t.remove(x),i.set(e,y)}function l(e){var t=i.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&u(e)}else u(e);return i.get(e)}return{get:s,update:c,getWireframeAttribute:l}}function Mc(e,t,n,r){var a,i,o,s=r.isWebGL2;function c(e){a=e}function u(e){i=e.type,o=e.bytesPerElement}function l(t,r){e.drawElements(a,r,i,t*o),n.update(r,a,1)}function f(r,c,u){if(0!==u){var l,f;if(s)l=e,f="drawElementsInstanced";else if(l=t.get("ANGLE_instanced_arrays"),f="drawElementsInstancedANGLE",null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[f](a,c,i,r*o,u),n.update(c,a,u)}}this.setMode=c,this.setIndex=u,this.render=l,this.renderInstances=f}function Tc(e){var t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(e,t,r){switch(n.calls++,t){case 4:n.triangles+=r*(e/3);break;case 1:n.lines+=r*(e/2);break;case 3:n.lines+=r*(e-1);break;case 2:n.lines+=r*e;break;case 0:n.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t);break}}function a(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:a,update:r}}function kc(e,t){return e[0]-t[0]}function Sc(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ec(e){for(var t={},n=new Float32Array(8),r=[],a=0;a<8;a++)r[a]=[a,0];function i(a,i,o,s){var c=a.morphTargetInfluences,u=void 0===c?0:c.length,l=t[i.id];if(void 0===l){l=[];for(var f=0;f<u;f++)l[f]=[f,0];t[i.id]=l}for(var d=0;d<u;d++){var h=l[d];h[0]=d,h[1]=c[d]}l.sort(Sc);for(var p=0;p<8;p++)p<u&&l[p][1]?(r[p][0]=l[p][0],r[p][1]=l[p][1]):(r[p][0]=Number.MAX_SAFE_INTEGER,r[p][1]=0);r.sort(kc);for(var b=o.morphTargets&&i.morphAttributes.position,m=o.morphNormals&&i.morphAttributes.normal,v=0,g=0;g<8;g++){var y=r[g],x=y[0],w=y[1];x!==Number.MAX_SAFE_INTEGER&&w?(b&&i.getAttribute("morphTarget"+g)!==b[x]&&i.setAttribute("morphTarget"+g,b[x]),m&&i.getAttribute("morphNormal"+g)!==m[x]&&i.setAttribute("morphNormal"+g,m[x]),n[g]=w,v+=w):(b&&!0===i.hasAttribute("morphTarget"+g)&&i.deleteAttribute("morphTarget"+g),m&&!0===i.hasAttribute("morphNormal"+g)&&i.deleteAttribute("morphNormal"+g),n[g]=0)}var _=i.morphTargetsRelative?1:1-v;s.getUniforms().setValue(e,"morphTargetBaseInfluence",_),s.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:i}}function Ac(e,t,n,r){var a=new WeakMap;function i(e){var i=r.render.frame,o=e.geometry,c=t.get(e,o);return a.get(c)!==i&&(t.update(c),a.set(c,i)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),c}function o(){a=new WeakMap}function s(e){var t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:i,dispose:o}}pc.physical={uniforms:Si([pc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new er(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ba(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new er},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ba(0)}}]),vertexShader:dc.meshphysical_vert,fragmentShader:dc.meshphysical_frag};var Cc=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return v(this,n),e=t.call(this,null),e.image={data:r,width:a,height:i,depth:o},e.magFilter=Pe,e.minFilter=Pe,e.wrapR=Le,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(ir);Cc.prototype.isDataTexture2DArray=!0;var Lc=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return v(this,n),e=t.call(this,null),e.image={data:r,width:a,height:i,depth:o},e.magFilter=Pe,e.minFilter=Pe,e.wrapR=Le,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(ir);Lc.prototype.isDataTexture3D=!0;var Rc=new ir,Pc=new Cc,Ic=new Lc,Nc=new Di,Oc=[],Dc=[],Fc=new Float32Array(16),Bc=new Float32Array(9),zc=new Float32Array(4);function Uc(e,t,n){var r=e[0];if(r<=0||r>0)return e;var a=t*n,i=Oc[a];if(void 0===i&&(i=new Float32Array(a),Oc[a]=i),0!==t){r.toArray(i,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(i,s)}return i}function Hc(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Gc(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function jc(e,t){var n=Dc[t];void 0===n&&(n=new Int32Array(t),Dc[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Vc(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Wc(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Hc(n,t))return;e.uniform2fv(this.addr,t),Gc(n,t)}}function qc(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Hc(n,t))return;e.uniform3fv(this.addr,t),Gc(n,t)}}function Xc(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Hc(n,t))return;e.uniform4fv(this.addr,t),Gc(n,t)}}function Yc(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Hc(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Gc(n,t)}else{if(Hc(n,r))return;zc.set(r),e.uniformMatrix2fv(this.addr,!1,zc),Gc(n,r)}}function Zc(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Hc(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Gc(n,t)}else{if(Hc(n,r))return;Bc.set(r),e.uniformMatrix3fv(this.addr,!1,Bc),Gc(n,r)}}function Jc(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Hc(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Gc(n,t)}else{if(Hc(n,r))return;Fc.set(r),e.uniformMatrix4fv(this.addr,!1,Fc),Gc(n,r)}}function Kc(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Qc(e,t){var n=this.cache;Hc(n,t)||(e.uniform2iv(this.addr,t),Gc(n,t))}function $c(e,t){var n=this.cache;Hc(n,t)||(e.uniform3iv(this.addr,t),Gc(n,t))}function eu(e,t){var n=this.cache;Hc(n,t)||(e.uniform4iv(this.addr,t),Gc(n,t))}function tu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function nu(e,t){var n=this.cache;Hc(n,t)||(e.uniform2uiv(this.addr,t),Gc(n,t))}function ru(e,t){var n=this.cache;Hc(n,t)||(e.uniform3uiv(this.addr,t),Gc(n,t))}function au(e,t){var n=this.cache;Hc(n,t)||(e.uniform4uiv(this.addr,t),Gc(n,t))}function iu(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.safeSetTexture2D(t||Rc,a)}function ou(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(t||Ic,a)}function su(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.safeSetTextureCube(t||Nc,a)}function cu(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(t||Pc,a)}function uu(e){switch(e){case 5126:return Vc;case 35664:return Wc;case 35665:return qc;case 35666:return Xc;case 35674:return Yc;case 35675:return Zc;case 35676:return Jc;case 5124:case 35670:return Kc;case 35667:case 35671:return Qc;case 35668:case 35672:return $c;case 35669:case 35673:return eu;case 5125:return tu;case 36294:return nu;case 36295:return ru;case 36296:return au;case 35678:case 36198:case 36298:case 36306:case 35682:return iu;case 35679:case 36299:case 36307:return ou;case 35680:case 36300:case 36308:case 36293:return su;case 36289:case 36303:case 36311:case 36292:return cu}}function lu(e,t){e.uniform1fv(this.addr,t)}function fu(e,t){var n=Uc(t,this.size,2);e.uniform2fv(this.addr,n)}function du(e,t){var n=Uc(t,this.size,3);e.uniform3fv(this.addr,n)}function hu(e,t){var n=Uc(t,this.size,4);e.uniform4fv(this.addr,n)}function pu(e,t){var n=Uc(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function bu(e,t){var n=Uc(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function mu(e,t){var n=Uc(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function vu(e,t){e.uniform1iv(this.addr,t)}function gu(e,t){e.uniform2iv(this.addr,t)}function yu(e,t){e.uniform3iv(this.addr,t)}function xu(e,t){e.uniform4iv(this.addr,t)}function wu(e,t){e.uniform1uiv(this.addr,t)}function _u(e,t){e.uniform2uiv(this.addr,t)}function Mu(e,t){e.uniform3uiv(this.addr,t)}function Tu(e,t){e.uniform4uiv(this.addr,t)}function ku(e,t,n){var r=t.length,a=jc(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.safeSetTexture2D(t[i]||Rc,a[i])}function Su(e,t,n){var r=t.length,a=jc(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.safeSetTextureCube(t[i]||Nc,a[i])}function Eu(e){switch(e){case 5126:return lu;case 35664:return fu;case 35665:return du;case 35666:return hu;case 35674:return pu;case 35675:return bu;case 35676:return mu;case 5124:case 35670:return vu;case 35667:case 35671:return gu;case 35668:case 35672:return yu;case 35669:case 35673:return xu;case 5125:return wu;case 36294:return _u;case 36295:return Mu;case 36296:return Tu;case 35678:case 36198:case 36298:case 36306:case 35682:return ku;case 35680:case 36300:case 36308:case 36293:return Su}}function Au(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=uu(t.type)}function Cu(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=Eu(t.type)}function Lu(e){this.id=e,this.seq=[],this.map={}}Cu.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Gc(t,e)},Lu.prototype.setValue=function(e,t,n){for(var r=this.seq,a=0,i=r.length;a!==i;++a){var o=r[a];o.setValue(e,t[o.id],n)}};var Ru=/(\w+)(\])?(\[|\.)?/g;function Pu(e,t){e.seq.push(t),e.map[t.id]=t}function Iu(e,t,n){var r=e.name,a=r.length;Ru.lastIndex=0;while(1){var i=Ru.exec(r),o=Ru.lastIndex,s=i[1],c="]"===i[2],u=i[3];if(c&&(s|=0),void 0===u||"["===u&&o+2===a){Pu(n,void 0===u?new Au(s,e,t):new Cu(s,e,t));break}var l=n.map,f=l[s];void 0===f&&(f=new Lu(s),Pu(n,f)),n=f}}function Nu(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var a=e.getActiveUniform(t,r),i=e.getUniformLocation(t,a.name);Iu(a,i,this)}}function Ou(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Nu.prototype.setValue=function(e,t,n,r){var a=this.map[t];void 0!==a&&a.setValue(e,n,r)},Nu.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Nu.upload=function(e,t,n,r){for(var a=0,i=t.length;a!==i;++a){var o=t[a],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},Nu.seqWithValue=function(e,t){for(var n=[],r=0,a=e.length;r!==a;++r){var i=e[r];i.id in t&&n.push(i)}return n};var Du=0;function Fu(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function Bu(e){switch(e){case ln:return["Linear","( value )"];case fn:return["sRGB","( value )"];case hn:return["RGBE","( value )"];case bn:return["RGBM","( value, 7.0 )"];case mn:return["RGBM","( value, 16.0 )"];case vn:return["RGBD","( value, 256.0 )"];case dn:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case pn:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function zu(e,t,n){var r=e.getShaderParameter(t,35713),a=e.getShaderInfoLog(t).trim();if(r&&""===a)return"";var i=e.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+a+Fu(i)}function Uu(e,t){var n=Bu(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Hu(e,t){var n=Bu(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Gu(e,t){var n;switch(t){case ve:n="Linear";break;case ge:n="Reinhard";break;case ye:n="OptimizedCineon";break;case xe:n="ACESFilmic";break;case we:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ju(e){var t=[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(qu).join("\n")}function Vu(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}function Wu(e,t){for(var n={},r=e.getProgramParameter(t,35721),a=0;a<r;a++){var i=e.getActiveAttrib(t,a),o=i.name;n[o]=e.getAttribLocation(t,o)}return n}function qu(e){return""!==e}function Xu(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Yu(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Zu=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ju(e){return e.replace(Zu,Ku)}function Ku(e,t){var n=dc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ju(n)}var Qu=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,$u=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function el(e){return e.replace($u,nl).replace(Qu,tl)}function tl(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),nl(e,t,n,r)}function nl(e,t,n,r){for(var a="",i=parseInt(t);i<parseInt(n);i++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return a}function rl(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function al(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===L?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===R?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===P&&(t="SHADOWMAP_TYPE_VSM"),t}function il(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Me:case Te:t="ENVMAP_TYPE_CUBE";break;case Ee:case Ae:t="ENVMAP_TYPE_CUBE_UV";break}return t}function ol(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Te:case Ae:t="ENVMAP_MODE_REFRACTION";break}return t}function sl(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case he:t="ENVMAP_BLENDING_MULTIPLY";break;case pe:t="ENVMAP_BLENDING_MIX";break;case be:t="ENVMAP_BLENDING_ADD";break}return t}function cl(e,t,n,r){var a,i,o=e.getContext(),s=n.defines,c=n.vertexShader,u=n.fragmentShader,l=al(n),f=il(n),d=ol(n),h=sl(n),p=e.gammaFactor>0?e.gammaFactor:1,b=n.isWebGL2?"":ju(n),m=Vu(s),v=o.createProgram(),g=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(a=[m].filter(qu).join("\n"),a.length>0&&(a+="\n"),i=[b,m].filter(qu).join("\n"),i.length>0&&(i+="\n")):(a=[rl(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(qu).join("\n"),i=[b,rl(n),"#define SHADER_NAME "+n.shaderName,m,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==me?"#define TONE_MAPPING":"",n.toneMapping!==me?dc["tonemapping_pars_fragment"]:"",n.toneMapping!==me?Gu("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",dc["encodings_pars_fragment"],n.map?Uu("mapTexelToLinear",n.mapEncoding):"",n.matcap?Uu("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Uu("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Uu("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Uu("lightMapTexelToLinear",n.lightMapEncoding):"",Hu("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(qu).join("\n")),c=Ju(c),c=Xu(c,n),c=Yu(c,n),u=Ju(u),u=Xu(u,n),u=Yu(u,n),c=el(c),u=el(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(g="#version 300 es\n",a=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,i=["#define varying in",n.glslVersion===Sn?"":"out highp vec4 pc_fragColor;",n.glslVersion===Sn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i);var y,x,w=g+a+c,_=g+i+u,M=Ou(o,35633,w),T=Ou(o,35632,_);if(o.attachShader(v,M),o.attachShader(v,T),void 0!==n.index0AttributeName?o.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(v,0,"position"),o.linkProgram(v),e.debug.checkShaderErrors){var k=o.getProgramInfoLog(v).trim(),S=o.getShaderInfoLog(M).trim(),E=o.getShaderInfoLog(T).trim(),A=!0,C=!0;if(!1===o.getProgramParameter(v,35714)){A=!1;var L=zu(o,M,"vertex"),R=zu(o,T,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(v,35715),"gl.getProgramInfoLog",k,L,R)}else""!==k?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",k):""!==S&&""!==E||(C=!1);C&&(this.diagnostics={runnable:A,programLog:k,vertexShader:{log:S,prefix:a},fragmentShader:{log:E,prefix:i}})}return o.deleteShader(M),o.deleteShader(T),this.getUniforms=function(){return void 0===y&&(y=new Nu(o,v)),y},this.getAttributes=function(){return void 0===x&&(x=Wu(o,v)),x},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Du++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=T,this}function ul(e,t,n,r,a,i){var o=[],s=r.isWebGL2,c=r.logarithmicDepthBuffer,u=r.floatVertexTextures,l=r.maxVertexUniforms,f=r.vertexTextures,d=r.precision,h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function b(e){var t=e.skeleton,n=t.bones;if(u)return 1024;var r=l,a=Math.floor((r-20)/4),i=Math.min(a,n.length);return i<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+i+"."),0):i}function m(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=ln,t}function v(a,o,l,p,v){var g,y,x=p.fog,w=a.isMeshStandardMaterial?p.environment:null,_=t.get(a.envMap||w),M=h[a.type],T=v.isSkinnedMesh?b(v):0;if(null!==a.precision&&(d=r.getMaxPrecision(a.precision),d!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead.")),M){var k=pc[M];g=k.vertexShader,y=k.fragmentShader}else g=a.vertexShader,y=a.fragmentShader;var S=e.getRenderTarget(),E={isWebGL2:s,shaderID:M,shaderName:a.type,vertexShader:g,fragmentShader:y,defines:a.defines,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:f,outputEncoding:null!==S?m(S.texture):e.outputEncoding,map:!!a.map,mapEncoding:m(a.map),matcap:!!a.matcap,matcapEncoding:m(a.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:m(_),envMapCubeUV:!!_&&(_.mapping===Ee||_.mapping===Ae),lightMap:!!a.lightMap,lightMapEncoding:m(a.lightMap),aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:m(a.emissiveMap),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===wn,tangentSpaceNormalMap:a.normalMapType===xn,clearcoatMap:!!a.clearcoatMap,clearcoatRoughnessMap:!!a.clearcoatRoughnessMap,clearcoatNormalMap:!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,gradientMap:!!a.gradientMap,sheen:!!a.sheen,transmission:!!a.transmission,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:a.normalMap&&a.vertexTangents,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&v.geometry&&v.geometry.attributes.color&&4===v.geometry.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.displacementMap||!!a.transmission||!!a.transmissionMap||!!a.thicknessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission||a.transmissionMap||a.thicknessMap)&&!!a.displacementMap,fog:!!x,useFog:a.fog,fogExp2:x&&x.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===v.isSkinnedMesh&&T>0,maxBones:T,useVertexTexture:u,morphTargets:a.morphTargets,morphNormals:a.morphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:i.numPlanes,numClipIntersection:i.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:me,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,alphaTest:a.alphaTest,doubleSided:a.side===O,flipSided:a.side===N,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()};return E}function g(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var a=0;a<p.length;a++)n.push(t[p[a]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()}function y(e){var t,n=h[e.type];if(n){var r=pc[n];t=Ei.clone(r.uniforms)}else t=e.uniforms;return t}function x(t,n){for(var r,i=0,s=o.length;i<s;i++){var c=o[i];if(c.cacheKey===n){r=c,++r.usedTimes;break}}return void 0===r&&(r=new cl(e,n,t,a),o.push(r)),r}function w(e){if(0===--e.usedTimes){var t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}}return{getParameters:v,getProgramCacheKey:g,getUniforms:y,acquireProgram:x,releaseProgram:w,programs:o}}function ll(){var e=new WeakMap;function t(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n}function n(t){e.delete(t)}function r(t,n,r){e.get(t)[n]=r}function a(){e=new WeakMap}return{get:t,remove:n,update:r,dispose:a}}function fl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function dl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function hl(e){var t=[],n=0,r=[],a=[],i=[],o={id:-1};function s(){n=0,r.length=0,a.length=0,i.length=0}function c(r,a,i,s,c,u){var l=t[n],f=e.get(i);return void 0===l?(l={id:r.id,object:r,geometry:a,material:i,program:f.program||o,groupOrder:s,renderOrder:r.renderOrder,z:c,group:u},t[n]=l):(l.id=r.id,l.object=r,l.geometry=a,l.material=i,l.program=f.program||o,l.groupOrder=s,l.renderOrder=r.renderOrder,l.z=c,l.group=u),n++,l}function u(e,t,n,o,s,u){var l=c(e,t,n,o,s,u);n.transmission>0?a.push(l):!0===n.transparent?i.push(l):r.push(l)}function l(e,t,n,o,s,u){var l=c(e,t,n,o,s,u);n.transmission>0?a.unshift(l):!0===n.transparent?i.unshift(l):r.unshift(l)}function f(e,t){r.length>1&&r.sort(e||fl),a.length>1&&a.sort(t||dl),i.length>1&&i.sort(t||dl)}function d(){for(var e=n,r=t.length;e<r;e++){var a=t[e];if(null===a.id)break;a.id=null,a.object=null,a.geometry=null,a.material=null,a.program=null,a.group=null}}return{opaque:r,transmissive:a,transparent:i,init:s,push:u,unshift:l,finish:d,sort:f}}function pl(e){var t=new WeakMap;function n(n,r){var a;return!1===t.has(n)?(a=new hl(e),t.set(n,[a])):r>=t.get(n).length?(a=new hl(e),t.get(n).push(a)):a=t.get(n)[r],a}function r(){t=new WeakMap}return{get:n,dispose:r}}function bl(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new dr,color:new Ba};break;case"SpotLight":n={position:new dr,direction:new dr,color:new Ba,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new dr,color:new Ba,distance:0,decay:0};break;case"HemisphereLight":n={direction:new dr,skyColor:new Ba,groundColor:new Ba};break;case"RectAreaLight":n={color:new Ba,position:new dr,halfWidth:new dr,halfHeight:new dr};break}return e[t.id]=n,n}}}function ml(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new er};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new er};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new er,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}var vl=0;function gl(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function yl(e,t){for(var n=new bl,r=ml(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)a.probe.push(new dr);var o=new dr,s=new jr,c=new jr;function u(i){for(var o=0,s=0,c=0,u=0;u<9;u++)a.probe[u].set(0,0,0);var l=0,f=0,d=0,h=0,p=0,b=0,m=0,v=0;i.sort(gl);for(var g=0,y=i.length;g<y;g++){var x=i[g],w=x.color,_=x.intensity,M=x.distance,T=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)o+=w.r*_,s+=w.g*_,c+=w.b*_;else if(x.isLightProbe)for(var k=0;k<9;k++)a.probe[k].addScaledVector(x.sh.coefficients[k],_);else if(x.isDirectionalLight){var S=n.get(x);if(S.color.copy(x.color).multiplyScalar(x.intensity),x.castShadow){var E=x.shadow,A=r.get(x);A.shadowBias=E.bias,A.shadowNormalBias=E.normalBias,A.shadowRadius=E.radius,A.shadowMapSize=E.mapSize,a.directionalShadow[l]=A,a.directionalShadowMap[l]=T,a.directionalShadowMatrix[l]=x.shadow.matrix,b++}a.directional[l]=S,l++}else if(x.isSpotLight){var C=n.get(x);if(C.position.setFromMatrixPosition(x.matrixWorld),C.color.copy(w).multiplyScalar(_),C.distance=M,C.coneCos=Math.cos(x.angle),C.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),C.decay=x.decay,x.castShadow){var L=x.shadow,R=r.get(x);R.shadowBias=L.bias,R.shadowNormalBias=L.normalBias,R.shadowRadius=L.radius,R.shadowMapSize=L.mapSize,a.spotShadow[d]=R,a.spotShadowMap[d]=T,a.spotShadowMatrix[d]=x.shadow.matrix,v++}a.spot[d]=C,d++}else if(x.isRectAreaLight){var P=n.get(x);P.color.copy(w).multiplyScalar(_),P.halfWidth.set(.5*x.width,0,0),P.halfHeight.set(0,.5*x.height,0),a.rectArea[h]=P,h++}else if(x.isPointLight){var I=n.get(x);if(I.color.copy(x.color).multiplyScalar(x.intensity),I.distance=x.distance,I.decay=x.decay,x.castShadow){var N=x.shadow,O=r.get(x);O.shadowBias=N.bias,O.shadowNormalBias=N.normalBias,O.shadowRadius=N.radius,O.shadowMapSize=N.mapSize,O.shadowCameraNear=N.camera.near,O.shadowCameraFar=N.camera.far,a.pointShadow[f]=O,a.pointShadowMap[f]=T,a.pointShadowMatrix[f]=x.shadow.matrix,m++}a.point[f]=I,f++}else if(x.isHemisphereLight){var D=n.get(x);D.skyColor.copy(x.color).multiplyScalar(_),D.groundColor.copy(x.groundColor).multiplyScalar(_),a.hemi[p]=D,p++}}h>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=hc.LTC_FLOAT_1,a.rectAreaLTC2=hc.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=hc.LTC_HALF_1,a.rectAreaLTC2=hc.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=o,a.ambient[1]=s,a.ambient[2]=c;var F=a.hash;F.directionalLength===l&&F.pointLength===f&&F.spotLength===d&&F.rectAreaLength===h&&F.hemiLength===p&&F.numDirectionalShadows===b&&F.numPointShadows===m&&F.numSpotShadows===v||(a.directional.length=l,a.spot.length=d,a.rectArea.length=h,a.point.length=f,a.hemi.length=p,a.directionalShadow.length=b,a.directionalShadowMap.length=b,a.pointShadow.length=m,a.pointShadowMap.length=m,a.spotShadow.length=v,a.spotShadowMap.length=v,a.directionalShadowMatrix.length=b,a.pointShadowMatrix.length=m,a.spotShadowMatrix.length=v,F.directionalLength=l,F.pointLength=f,F.spotLength=d,F.rectAreaLength=h,F.hemiLength=p,F.numDirectionalShadows=b,F.numPointShadows=m,F.numSpotShadows=v,a.version=vl++)}function l(e,t){for(var n=0,r=0,i=0,u=0,l=0,f=t.matrixWorldInverse,d=0,h=e.length;d<h;d++){var p=e[d];if(p.isDirectionalLight){var b=a.directional[n];b.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),b.direction.sub(o),b.direction.transformDirection(f),n++}else if(p.isSpotLight){var m=a.spot[i];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(f),m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(f),i++}else if(p.isRectAreaLight){var v=a.rectArea[u];v.position.setFromMatrixPosition(p.matrixWorld),v.position.applyMatrix4(f),c.identity(),s.copy(p.matrixWorld),s.premultiply(f),c.extractRotation(s),v.halfWidth.set(.5*p.width,0,0),v.halfHeight.set(0,.5*p.height,0),v.halfWidth.applyMatrix4(c),v.halfHeight.applyMatrix4(c),u++}else if(p.isPointLight){var g=a.point[r];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(f),r++}else if(p.isHemisphereLight){var y=a.hemi[l];y.direction.setFromMatrixPosition(p.matrixWorld),y.direction.transformDirection(f),y.direction.normalize(),l++}}}return{setup:u,setupView:l,state:a}}function xl(e,t){var n=new yl(e,t),r=[],a=[];function i(){r.length=0,a.length=0}function o(e){r.push(e)}function s(e){a.push(e)}function c(){n.setup(r)}function u(e){n.setupView(r,e)}var l={lightsArray:r,shadowsArray:a,lights:n};return{init:i,state:l,setupLights:c,setupLightsView:u,pushLight:o,pushShadow:s}}function wl(e,t){var n=new WeakMap;function r(r){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(a=new xl(e,t),n.set(r,[a])):i>=n.get(r).length?(a=new xl(e,t),n.get(r).push(a)):a=n.get(r)[i],a}function a(){n=new WeakMap}return{get:r,dispose:a}}var _l=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="MeshDepthMaterial",r.depthPacking=gn,r.morphTargets=!1,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Ra);_l.prototype.isMeshDepthMaterial=!0;var Ml=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="MeshDistanceMaterial",r.referencePosition=new dr,r.nearDistance=1,r.farDistance=1e3,r.morphTargets=!1,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Ra);Ml.prototype.isMeshDistanceMaterial=!0;var Tl="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",kl="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Sl(e,t,n){var r=new Ui,a=new er,i=new er,o=new sr,s=[],c=[],u={},l=n.maxTextureSize,f={0:N,1:I,2:O},d=new Li({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new er},radius:{value:4}},vertexShader:kl,fragmentShader:Tl}),h=d.clone();h.defines.HORIZONTAL_PASS=1;var p=new ri;p.setAttribute("position",new Ga(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var b=new wi(p,d),m=this;function v(n,r){var a=t.update(b);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,d,b,null),h.uniforms.shadow_pass.value=n.mapPass.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,h,b,null)}function g(e){var t=e<<0,n=s[t];return void 0===n&&(n=new _l({depthPacking:yn,morphTargets:e}),s[t]=n),n}function y(e){var t=e<<0,n=c[t];return void 0===n&&(n=new Ml({morphTargets:e}),c[t]=n),n}function x(t,n,r,a,i,o,s){var c=null,l=g,d=t.customDepthMaterial;if(!0===a.isPointLight&&(l=y,d=t.customDistanceMaterial),void 0===d){var h=!1;!0===r.morphTargets&&(h=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0),c=l(h)}else c=d;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var p=c.uuid,b=r.uuid,m=u[p];void 0===m&&(m={},u[p]=m);var v=m[b];void 0===v&&(v=c.clone(),m[b]=v),c=v}return c.visible=r.visible,c.wireframe=r.wireframe,c.side=s===P?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:f[r.side],c.clipShadows=r.clipShadows,c.clippingPlanes=r.clippingPlanes,c.clipIntersection=r.clipIntersection,c.wireframeLinewidth=r.wireframeLinewidth,c.linewidth=r.linewidth,!0===a.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(a.matrixWorld),c.nearDistance=i,c.farDistance=o),c}function w(n,a,i,o,s){if(!1!==n.visible){var c=n.layers.test(a.layers);if(c&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===P)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var f=u.groups,d=0,h=f.length;d<h;d++){var p=f[d],b=l[p.materialIndex];if(b&&b.visible){var m=x(n,u,b,o,i.near,i.far,s);e.renderBufferDirect(i,null,u,m,n,p)}}else if(l.visible){var v=x(n,u,l,o,i.near,i.far,s);e.renderBufferDirect(i,null,u,v,n,null)}}for(var g=n.children,y=0,_=g.length;y<_;y++)w(g[y],a,i,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=L,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var c=e.getRenderTarget(),u=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),d=e.state;d.setBlending(F),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var h=0,p=t.length;h<p;h++){var b=t[h],g=b.shadow;if(void 0!==g){if(!1!==g.autoUpdate||!1!==g.needsUpdate){a.copy(g.mapSize);var y=g.getFrameExtents();if(a.multiply(y),i.copy(g.mapSize),(a.x>l||a.y>l)&&(a.x>l&&(i.x=Math.floor(l/y.x),a.x=i.x*y.x,g.mapSize.x=i.x),a.y>l&&(i.y=Math.floor(l/y.y),a.y=i.y*y.y,g.mapSize.y=i.y)),null===g.map&&!g.isPointLightShadow&&this.type===P){var x={minFilter:Oe,magFilter:Oe,format:Qe};g.map=new cr(a.x,a.y,x),g.map.texture.name=b.name+".shadowMap",g.mapPass=new cr(a.x,a.y,x),g.camera.updateProjectionMatrix()}if(null===g.map){var _={minFilter:Pe,magFilter:Pe,format:Qe};g.map=new cr(a.x,a.y,_),g.map.texture.name=b.name+".shadowMap",g.camera.updateProjectionMatrix()}e.setRenderTarget(g.map),e.clear();for(var M=g.getViewportCount(),T=0;T<M;T++){var k=g.getViewport(T);o.set(i.x*k.x,i.y*k.y,i.x*k.z,i.y*k.w),d.viewport(o),g.updateMatrices(b,T),r=g.getFrustum(),w(n,s,g.camera,b,this.type)}g.isPointLightShadow||this.type!==P||v(g,s),g.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",b,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(c,u,f)}}}function El(e,t,n){var r,a,i=n.isWebGL2;function o(){var t=!1,n=new sr,r=null,a=new sr(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,i,o,s){!0===s&&(t*=o,r*=o,i*=o),n.set(t,r,i,o),!1===a.equals(n)&&(e.clearColor(t,r,i,o),a.copy(n))},reset:function(){t=!1,r=null,a.set(-1,0,0,0)}}}function s(){var t=!1,n=null,r=null,a=null;return{setTest:function(e){e?Te(2929):ke(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case ie:e.depthFunc(512);break;case oe:e.depthFunc(519);break;case se:e.depthFunc(513);break;case ce:e.depthFunc(515);break;case ue:e.depthFunc(514);break;case le:e.depthFunc(518);break;case fe:e.depthFunc(516);break;case de:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,n=null,r=null,a=null}}}function u(){var t=!1,n=null,r=null,a=null,i=null,o=null,s=null,c=null,u=null;return{setTest:function(e){t||(e?Te(2960):ke(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&a===n&&i===o||(e.stencilFunc(t,n,o),r=t,a=n,i=o)},setOp:function(t,n,r){o===t&&s===n&&c===r||(e.stencilOp(t,n,r),o=t,s=n,c=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,a=null,i=null,o=null,s=null,c=null,u=null}}}var l=new o,f=new s,d=new u,h={},p=null,b={},m=null,v=!1,g=null,y=null,x=null,w=null,_=null,M=null,T=null,k=!1,S=null,L=null,R=null,P=null,I=null,D=e.getParameter(35661),he=!1,pe=0,be=e.getParameter(7938);-1!==be.indexOf("WebGL")?(pe=parseFloat(/^WebGL (\d)/.exec(be)[1]),he=pe>=1):-1!==be.indexOf("OpenGL ES")&&(pe=parseFloat(/^OpenGL ES (\d)/.exec(be)[1]),he=pe>=2);var me=null,ve={},ge=e.getParameter(3088),ye=e.getParameter(2978),xe=(new sr).fromArray(ge),we=(new sr).fromArray(ye);function _e(t,n,r){var a=new Uint8Array(4),i=e.createTexture();e.bindTexture(t,i),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,a);return i}var Me={};function Te(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function ke(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}function Se(t){t!==p&&(e.bindFramebuffer(36160,t),p=t)}function Ee(t,n){return null===n&&null!==p&&(n=p),b[t]!==n&&(e.bindFramebuffer(t,n),b[t]=n,i&&(36009===t&&(b[36160]=n),36160===t&&(b[36009]=n)),!0)}function Ae(t){return m!==t&&(e.useProgram(t),m=t,!0)}Me[3553]=_e(3553,3553,1),Me[34067]=_e(34067,34069,6),l.setClear(0,0,0,1),f.setClear(1),d.setClear(0),Te(2929),f.setFunc(ce),Ne(!1),Oe(A),Te(2884),Pe(F);var Ce=(r={},c(r,j,32774),c(r,V,32778),c(r,W,32779),r);if(i)Ce[q]=32775,Ce[X]=32776;else{var Le=t.get("EXT_blend_minmax");null!==Le&&(Ce[q]=Le.MIN_EXT,Ce[X]=Le.MAX_EXT)}var Re=(a={},c(a,Y,0),c(a,Z,1),c(a,J,768),c(a,Q,770),c(a,ae,776),c(a,ne,774),c(a,ee,772),c(a,K,769),c(a,$,771),c(a,re,775),c(a,te,773),a);function Pe(t,n,r,a,i,o,s,c){if(t!==F){if(!1===v&&(Te(3042),v=!0),t===G)i=i||n,o=o||r,s=s||a,n===y&&i===_||(e.blendEquationSeparate(Ce[n],Ce[i]),y=n,_=i),r===x&&a===w&&o===M&&s===T||(e.blendFuncSeparate(Re[r],Re[a],Re[o],Re[s]),x=r,w=a,M=o,T=s),g=t,k=null;else if(t!==g||c!==k){if(y===j&&_===j||(e.blendEquation(32774),y=j,_=j),c)switch(t){case B:e.blendFuncSeparate(1,771,1,771);break;case z:e.blendFunc(1,1);break;case U:e.blendFuncSeparate(0,0,769,771);break;case H:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case B:e.blendFuncSeparate(770,771,1,771);break;case z:e.blendFunc(770,1);break;case U:e.blendFunc(0,769);break;case H:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}x=null,w=null,M=null,T=null,g=t,k=c}}else!0===v&&(ke(3042),v=!1)}function Ie(e,t){e.side===O?ke(2884):Te(2884);var n=e.side===N;t&&(n=!n),Ne(n),e.blending===B&&!1===e.transparent?Pe(F):Pe(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),f.setFunc(e.depthFunc),f.setTest(e.depthTest),f.setMask(e.depthWrite),l.setMask(e.colorWrite);var r=e.stencilWrite;d.setTest(r),r&&(d.setMask(e.stencilWriteMask),d.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),d.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Fe(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?Te(32926):ke(32926)}function Ne(t){S!==t&&(t?e.frontFace(2304):e.frontFace(2305),S=t)}function Oe(t){t!==E?(Te(2884),t!==L&&(t===A?e.cullFace(1029):t===C?e.cullFace(1028):e.cullFace(1032))):ke(2884),L=t}function De(t){t!==R&&(he&&e.lineWidth(t),R=t)}function Fe(t,n,r){t?(Te(32823),P===n&&I===r||(e.polygonOffset(n,r),P=n,I=r)):ke(32823)}function Be(e){e?Te(3089):ke(3089)}function ze(t){void 0===t&&(t=33984+D-1),me!==t&&(e.activeTexture(t),me=t)}function Ue(t,n){null===me&&ze();var r=ve[me];void 0===r&&(r={type:void 0,texture:void 0},ve[me]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||Me[t]),r.type=t,r.texture=n)}function He(){var t=ve[me];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)}function Ge(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function je(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ve(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function We(t){!1===xe.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),xe.copy(t))}function qe(t){!1===we.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),we.copy(t))}function Xe(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},me=null,ve={},p=null,b={},m=null,v=!1,g=null,y=null,x=null,w=null,_=null,M=null,T=null,k=!1,S=null,L=null,R=null,P=null,I=null,xe.set(0,0,e.canvas.width,e.canvas.height),we.set(0,0,e.canvas.width,e.canvas.height),l.reset(),f.reset(),d.reset()}return{buffers:{color:l,depth:f,stencil:d},enable:Te,disable:ke,bindFramebuffer:Ee,bindXRFramebuffer:Se,useProgram:Ae,setBlending:Pe,setMaterial:Ie,setFlipSided:Ne,setCullFace:Oe,setLineWidth:De,setPolygonOffset:Fe,setScissorTest:Be,activeTexture:ze,bindTexture:Ue,unbindTexture:He,compressedTexImage2D:Ge,texImage2D:je,texImage3D:Ve,scissor:We,viewport:qe,reset:Xe}}function Al(e,t,n,r,a,i,o){var s,u,l,f=a.isWebGL2,d=a.maxTextures,h=a.maxCubemapSize,p=a.maxTextureSize,b=a.maxSamples,m=new WeakMap,v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ne){}function g(e,t){return v?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(e,t,n,r){var a=1;if((e.width>r||e.height>r)&&(a=r/Math.max(e.width,e.height)),a<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var i=t?Kn:Math.floor,o=i(a*e.width),s=i(a*e.height);void 0===l&&(l=g(o,s));var c=n?g(o,s):l;c.width=o,c.height=s;var u=c.getContext("2d");return u.drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return Zn(e.width)&&Zn(e.height)}function w(e){return!f&&(e.wrapS!==Le||e.wrapT!==Le||e.minFilter!==Pe&&e.minFilter!==Oe)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==Pe&&e.minFilter!==Oe}function M(t,n,a,i){e.generateMipmap(t);var o=r.get(n);o.__maxMipLevel=Math.log2(Math.max(a,i))}function T(n,r,a){if(!1===f)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var i=r;return 6403===r&&(5126===a&&(i=33326),5131===a&&(i=33325),5121===a&&(i=33321)),6407===r&&(5126===a&&(i=34837),5131===a&&(i=34843),5121===a&&(i=32849)),6408===r&&(5126===a&&(i=34836),5131===a&&(i=34842),5121===a&&(i=32856)),33325!==i&&33326!==i&&34842!==i&&34836!==i||t.get("EXT_color_buffer_float"),i}function k(e){return e===Pe||e===Ie||e===Ne?9728:9729}function S(e){var t=e.target;t.removeEventListener("dispose",S),A(t),t.isVideoTexture&&m.delete(t),o.memory.textures--}function E(e){var t=e.target;t.removeEventListener("dispose",E),C(t)}function A(t){var n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}function C(t){var n=t.texture,a=r.get(t),i=r.get(n);if(t){if(void 0!==i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(a.__webglFramebuffer[s]),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer[s]);else e.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer),a.__webglMultisampledFramebuffer&&e.deleteFramebuffer(a.__webglMultisampledFramebuffer),a.__webglColorRenderbuffer&&e.deleteRenderbuffer(a.__webglColorRenderbuffer),a.__webglDepthRenderbuffer&&e.deleteRenderbuffer(a.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var c=0,u=n.length;c<u;c++){var l=r.get(n[c]);l.__webglTexture&&(e.deleteTexture(l.__webglTexture),o.memory.textures--),r.remove(n[c])}r.remove(n),r.remove(t)}}var L=0;function R(){L=0}function P(){var e=L;return e>=d&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+d),L+=1,e}function I(e,t){var a=r.get(e);if(e.isVideoTexture&&K(e),e.version>0&&a.__version!==e.version){var i=e.image;if(void 0===i)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==i.complete)return void H(a,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,a.__webglTexture)}function N(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?H(a,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,a.__webglTexture))}function O(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?H(a,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,a.__webglTexture))}function D(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?G(a,e,t):(n.activeTexture(33984+t),n.bindTexture(34067,a.__webglTexture))}var F=(s={},c(s,Ce,10497),c(s,Le,33071),c(s,Re,33648),s),B=(u={},c(u,Pe,9728),c(u,Ie,9984),c(u,Ne,9986),c(u,Oe,9729),c(u,De,9985),c(u,Fe,9987),u);function z(n,i,o){if(o?(e.texParameteri(n,10242,F[i.wrapS]),e.texParameteri(n,10243,F[i.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,F[i.wrapR]),e.texParameteri(n,10240,B[i.magFilter]),e.texParameteri(n,10241,B[i.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),i.wrapS===Le&&i.wrapT===Le||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,k(i.magFilter)),e.texParameteri(n,10241,k(i.minFilter)),i.minFilter!==Pe&&i.minFilter!==Oe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(i.type===Ve&&!1===t.has("OES_texture_float_linear"))return;if(!1===f&&i.type===We&&!1===t.has("OES_texture_half_float_linear"))return;(i.anisotropy>1||r.get(i).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,a.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function U(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S),t.__webglTexture=e.createTexture(),o.memory.textures++)}function H(t,r,a){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),U(t,r),n.activeTexture(33984+a),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var s,c=w(r)&&!1===x(r.image),u=y(r.image,c,!1,p),l=x(u)||f,d=i.convert(r.format),h=i.convert(r.type),b=T(r.internalFormat,d,h);z(o,r,l);var m=r.mipmaps;if(r.isDepthTexture)b=6402,f?b=r.type===Ve?36012:r.type===je?33190:r.type===Ze?35056:33189:r.type===Ve&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===tt&&6402===b&&r.type!==He&&r.type!==je&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=He,h=i.convert(r.type)),r.format===nt&&6402===b&&(b=34041,r.type!==Ze&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ze,h=i.convert(r.type))),n.texImage2D(3553,0,b,u.width,u.height,0,d,h,null);else if(r.isDataTexture)if(m.length>0&&l){for(var v=0,g=m.length;v<g;v++)s=m[v],n.texImage2D(3553,v,b,s.width,s.height,0,d,h,s.data);r.generateMipmaps=!1,t.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,b,u.width,u.height,0,d,h,u.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var k=0,S=m.length;k<S;k++)s=m[k],r.format!==Qe&&r.format!==Ke?null!==d?n.compressedTexImage2D(3553,k,b,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,k,b,s.width,s.height,0,d,h,s.data);t.__maxMipLevel=m.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,b,u.width,u.height,u.depth,0,d,h,u.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,b,u.width,u.height,u.depth,0,d,h,u.data),t.__maxMipLevel=0;else if(m.length>0&&l){for(var E=0,A=m.length;E<A;E++)s=m[E],n.texImage2D(3553,E,b,d,h,s);r.generateMipmaps=!1,t.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,b,d,h,u),t.__maxMipLevel=0;_(r,l)&&M(o,r,u.width,u.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function G(t,r,a){if(6===r.image.length){U(t,r),n.activeTexture(33984+a),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,c=[],u=0;u<6;u++)c[u]=o||s?s?r.image[u].image:r.image[u]:y(r.image[u],!1,!0,h);var l,d=c[0],p=x(d)||f,b=i.convert(r.format),m=i.convert(r.type),v=T(r.internalFormat,b,m);if(z(34067,r,p),o){for(var g=0;g<6;g++){l=c[g].mipmaps;for(var w=0;w<l.length;w++){var k=l[w];r.format!==Qe&&r.format!==Ke?null!==b?n.compressedTexImage2D(34069+g,w,v,k.width,k.height,0,k.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+g,w,v,k.width,k.height,0,b,m,k.data)}}t.__maxMipLevel=l.length-1}else{l=r.mipmaps;for(var S=0;S<6;S++)if(s){n.texImage2D(34069+S,0,v,c[S].width,c[S].height,0,b,m,c[S].data);for(var E=0;E<l.length;E++){var A=l[E],C=A.image[S].image;n.texImage2D(34069+S,E+1,v,C.width,C.height,0,b,m,C.data)}}else{n.texImage2D(34069+S,0,v,b,m,c[S]);for(var L=0;L<l.length;L++){var R=l[L];n.texImage2D(34069+S,L+1,v,b,m,R.image[S])}}t.__maxMipLevel=l.length}_(r,p)&&M(34067,r,d.width,d.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}}function j(t,a,o,s,c){var u=i.convert(o.format),l=i.convert(o.type),f=T(o.internalFormat,u,l);32879===c||35866===c?n.texImage3D(c,0,f,a.width,a.height,a.depth,0,u,l,null):n.texImage2D(c,0,f,a.width,a.height,0,u,l,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,c,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function V(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var a=33189;if(r){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Ve?a=36012:o.type===je&&(a=33190));var s=J(n);e.renderbufferStorageMultisample(36161,s,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var c=J(n);e.renderbufferStorageMultisample(36161,c,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var u=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,l=i.convert(u.format),f=i.convert(u.type),d=T(u.internalFormat,l,f);if(r){var h=J(n);e.renderbufferStorageMultisample(36161,h,d,n.width,n.height)}else e.renderbufferStorage(36161,d,n.width,n.height)}e.bindRenderbuffer(36161,null)}function W(t,a){var i=a&&a.isWebGLCubeRenderTarget;if(i)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!a.depthTexture||!a.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(a.depthTexture).__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),I(a.depthTexture,0);var o=r.get(a.depthTexture).__webglTexture;if(a.depthTexture.format===tt)e.framebufferTexture2D(36160,36096,3553,o,0);else{if(a.depthTexture.format!==nt)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,o,0)}}function q(t){var a=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");W(a.__webglFramebuffer,t)}else if(i){a.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,a.__webglFramebuffer[o]),a.__webglDepthbuffer[o]=e.createRenderbuffer(),V(a.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,a.__webglFramebuffer),a.__webglDepthbuffer=e.createRenderbuffer(),V(a.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function X(t){var s=t.texture,c=r.get(t),u=r.get(s);t.addEventListener("dispose",E),!0!==t.isWebGLMultipleRenderTargets&&(u.__webglTexture=e.createTexture(),u.__version=s.version,o.memory.textures++);var l=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,h=!0===t.isWebGLMultisampleRenderTarget,p=s.isDataTexture3D||s.isDataTexture2DArray,b=x(t)||f;if(!f||s.format!==Ke||s.type!==Ve&&s.type!==We||(s.format=Qe,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){c.__webglFramebuffer=[];for(var m=0;m<6;m++)c.__webglFramebuffer[m]=e.createFramebuffer()}else if(c.__webglFramebuffer=e.createFramebuffer(),d)if(a.drawBuffers)for(var v=t.texture,g=0,y=v.length;g<y;g++){var w=r.get(v[g]);void 0===w.__webglTexture&&(w.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(h)if(f){c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer);var k=i.convert(s.format),S=i.convert(s.type),A=T(s.internalFormat,k,S),C=J(t);e.renderbufferStorageMultisample(36161,C,A,t.width,t.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),V(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,u.__webglTexture),z(34067,s,b);for(var L=0;L<6;L++)j(c.__webglFramebuffer[L],t,s,36064,34069+L);_(s,b)&&M(34067,s,t.width,t.height),n.bindTexture(34067,null)}else if(d){for(var R=t.texture,P=0,I=R.length;P<I;P++){var N=R[P],O=r.get(N);n.bindTexture(3553,O.__webglTexture),z(3553,N,b),j(c.__webglFramebuffer,t,N,36064+P,3553),_(N,b)&&M(3553,N,t.width,t.height)}n.bindTexture(3553,null)}else{var D=3553;if(p)if(f){var F=s.isDataTexture3D;D=F?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(D,u.__webglTexture),z(D,s,b),j(c.__webglFramebuffer,t,s,36064,D),_(s,b)&&M(3553,s,t.width,t.height),n.bindTexture(3553,null)}t.depthBuffer&&q(t)}function Y(e){for(var t=x(e)||f,a=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],i=0,o=a.length;i<o;i++){var s=a[i];if(_(s,t)){var c=e.isWebGLCubeRenderTarget?34067:3553,u=r.get(s).__webglTexture;n.bindTexture(c,u),M(c,s,e.width,e.height),n.bindTexture(c,null)}}}function Z(t){if(t.isWebGLMultisampleRenderTarget)if(f){var a=t.width,i=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024);var s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,a,i,0,0,a,i,o,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function J(e){return f&&e.isWebGLMultisampleRenderTarget?Math.min(b,e.samples):0}function K(e){var t=o.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}var Q=!1,$=!1;function ee(e,t){e&&e.isWebGLRenderTarget&&(!1===Q&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Q=!0),e=e.texture),I(e,t)}function te(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===$&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),$=!0),e=e.texture),D(e,t)}this.allocateTextureUnit=P,this.resetTextureUnits=R,this.setTexture2D=I,this.setTexture2DArray=N,this.setTexture3D=O,this.setTextureCube=D,this.setupRenderTarget=X,this.updateRenderTargetMipmap=Y,this.updateMultisampleRenderTarget=Z,this.safeSetTexture2D=ee,this.safeSetTextureCube=te}function Cl(e,t,n){var r=n.isWebGL2;function a(e){var n;if(e===Be)return 5121;if(e===qe)return 32819;if(e===Xe)return 32820;if(e===Ye)return 33635;if(e===ze)return 5120;if(e===Ue)return 5122;if(e===He)return 5123;if(e===Ge)return 5124;if(e===je)return 5125;if(e===Ve)return 5126;if(e===We)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===Je)return 6406;if(e===Ke)return 6407;if(e===Qe)return 6408;if(e===$e)return 6409;if(e===et)return 6410;if(e===tt)return 6402;if(e===nt)return 34041;if(e===rt)return 6403;if(e===at)return 36244;if(e===it)return 33319;if(e===ot)return 33320;if(e===st)return 36248;if(e===ct)return 36249;if(e===ut||e===lt||e===ft||e===dt){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===ut)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===lt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===ft)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===dt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===ht||e===pt||e===bt||e===mt){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===ht)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===pt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===bt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===mt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===vt)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===gt||e===yt)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===gt)return n.COMPRESSED_RGB8_ETC2;if(e===yt)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===xt||e===wt||e===_t||e===Mt||e===Tt||e===kt||e===St||e===Et||e===At||e===Ct||e===Lt||e===Rt||e===Pt||e===It||e===Ot||e===Dt||e===Ft||e===Bt||e===zt||e===Ut||e===Ht||e===Gt||e===jt||e===Vt||e===Wt||e===qt||e===Xt||e===Yt?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===Nt?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===Ze?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}return{convert:a}}var Ll=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return v(this,n),e=t.call(this),e.cameras=r,e}return n}(Pi);Ll.prototype.isArrayCamera=!0;var Rl=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this),e.type="Group",e}return n}(pa);Rl.prototype.isGroup=!0;var Pl={type:"move"},Il=function(){function e(){v(this,e),this._targetRay=null,this._grip=null,this._hand=null}return g(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Rl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Rl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new dr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new dr),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Rl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new dr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new dr),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,a=null,i=null,o=this._targetRay,c=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Pl))),u&&e.hand){i=!0;var l,f=s(e.hand.values());try{for(f.s();!(l=f.n()).done;){var d=l.value,h=t.getJointPose(d,n);if(void 0===u.joints[d.jointName]){var p=new Rl;p.matrixAutoUpdate=!1,p.visible=!1,u.joints[d.jointName]=p,u.add(p)}var b=u.joints[d.jointName];null!==h&&(b.matrix.fromArray(h.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.jointRadius=h.radius),b.visible=null!==h}}catch(w){f.e(w)}finally{f.f()}var m=u.joints["index-finger-tip"],v=u.joints["thumb-tip"],g=m.position.distanceTo(v.position),y=.02,x=.005;u.inputState.pinching&&g>y+x?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=y-x&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),null!==a&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==r),null!==c&&(c.visible=null!==a),null!==u&&(u.visible=null!==i),this}}]),e}(),Nl=function(e){b(n,e);var t=m(n);function n(e,r){var a;v(this,n),a=t.call(this);var i=p(a),s=e.state,c=null,u=1,l=null,f="local-floor",d=null,h=[],b=new Map,m=new Pi;m.layers.enable(1),m.viewport=new sr;var g=new Pi;g.layers.enable(2),g.viewport=new sr;var y=[m,g],x=new Ll;x.layers.enable(1),x.layers.enable(2);var w=null,_=null;function M(e){var t=b.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function T(){b.forEach((function(e,t){e.disconnect(t)})),b.clear(),w=null,_=null,s.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),P.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function k(e){for(var t=c.inputSources,n=0;n<h.length;n++)b.set(t[n],h[n]);for(var r=0;r<e.removed.length;r++){var a=e.removed[r],i=b.get(a);i&&(i.dispatchEvent({type:"disconnected",data:a}),b.delete(a))}for(var o=0;o<e.added.length;o++){var s=e.added[o],u=b.get(s);u&&u.dispatchEvent({type:"connected",data:s})}}a.cameraAutoUpdate=!0,a.enabled=!1,a.isPresenting=!1,a.getController=function(e){var t=h[e];return void 0===t&&(t=new Il,h[e]=t),t.getTargetRaySpace()},a.getControllerGrip=function(e){var t=h[e];return void 0===t&&(t=new Il,h[e]=t),t.getGripSpace()},a.getHand=function(e){var t=h[e];return void 0===t&&(t=new Il,h[e]=t),t.getHandSpace()},a.setFramebufferScaleFactor=function(e){u=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},a.setReferenceSpaceType=function(e){f=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},a.getReferenceSpace=function(){return l},a.getSession=function(){return c},a.setSession=function(){var e=o(regeneratorRuntime.mark((function e(t){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=t,null===c){e.next=24;break}if(c.addEventListener("select",M),c.addEventListener("selectstart",M),c.addEventListener("selectend",M),c.addEventListener("squeeze",M),c.addEventListener("squeezestart",M),c.addEventListener("squeezeend",M),c.addEventListener("end",T),c.addEventListener("inputsourceschange",k),n=r.getContextAttributes(),!0===n.xrCompatible){e.next=14;break}return e.next=14,r.makeXRCompatible();case 14:return a={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:u},o=new XRWebGLLayer(c,r,a),c.updateRenderState({baseLayer:o}),e.next=19,c.requestReferenceSpace(f);case 19:l=e.sent,P.setContext(c),P.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var S=new dr,E=new dr;function A(e,t,n){S.setFromMatrixPosition(t.matrixWorld),E.setFromMatrixPosition(n.matrixWorld);var r=S.distanceTo(E),a=t.projectionMatrix.elements,i=n.projectionMatrix.elements,o=a[14]/(a[10]-1),s=a[14]/(a[10]+1),c=(a[9]+1)/a[5],u=(a[9]-1)/a[5],l=(a[8]-1)/a[0],f=(i[8]+1)/i[0],d=o*l,h=o*f,p=r/(-l+f),b=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(b),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,v=s+p,g=d-b,y=h+(r-b),x=c*s/v*m,w=u*s/v*m;e.projectionMatrix.makePerspective(g,y,x,w,m,v)}function C(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}a.updateCamera=function(e){if(null!==c){x.near=g.near=m.near=e.near,x.far=g.far=m.far=e.far,w===x.near&&_===x.far||(c.updateRenderState({depthNear:x.near,depthFar:x.far}),w=x.near,_=x.far);var t=e.parent,n=x.cameras;C(x,t);for(var r=0;r<n.length;r++)C(n[r],t);e.matrixWorld.copy(x.matrixWorld),e.matrix.copy(x.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);for(var a=e.children,i=0,o=a.length;i<o;i++)a[i].updateMatrixWorld(!0);2===n.length?A(x,m,g):x.projectionMatrix.copy(m.projectionMatrix)}},a.getCamera=function(){return x};var L=null;function R(e,t){if(d=t.getViewerPose(l),null!==d){var n=d.views,r=c.renderState.baseLayer;s.bindXRFramebuffer(r.framebuffer);var a=!1;n.length!==x.cameras.length&&(x.cameras.length=0,a=!0);for(var i=0;i<n.length;i++){var o=n[i],u=r.getViewport(o),f=y[i];f.matrix.fromArray(o.transform.matrix),f.projectionMatrix.fromArray(o.projectionMatrix),f.viewport.set(u.x,u.y,u.width,u.height),0===i&&x.matrix.copy(f.matrix),!0===a&&x.cameras.push(f)}}for(var p=c.inputSources,b=0;b<h.length;b++){var m=h[b],v=p[b];m.update(v,t,l)}L&&L(e,t)}var P=new Hi;return P.setAnimationLoop(R),a.setAnimationLoop=function(e){L=e},a.dispose=function(){},a}return n}(En);function Ol(e){function t(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function n(e,t,n,v,g){t.isMeshBasicMaterial?r(e,t):t.isMeshLambertMaterial?(r(e,t),c(e,t)):t.isMeshToonMaterial?(r(e,t),l(e,t)):t.isMeshPhongMaterial?(r(e,t),u(e,t)):t.isMeshStandardMaterial?(r(e,t),t.isMeshPhysicalMaterial?d(e,t,g):f(e,t)):t.isMeshMatcapMaterial?(r(e,t),h(e,t)):t.isMeshDepthMaterial?(r(e,t),p(e,t)):t.isMeshDistanceMaterial?(r(e,t),b(e,t)):t.isMeshNormalMaterial?(r(e,t),m(e,t)):t.isLineBasicMaterial?(a(e,t),t.isLineDashedMaterial&&i(e,t)):t.isPointsMaterial?o(e,t,n,v):t.isSpriteMaterial?s(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}function r(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);var r,a,i=e.get(n).envMap;if(i){t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture&&i._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;var o=e.get(i).__maxMipLevel;void 0!==o&&(t.maxMipLevel.value=o)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function a(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}function i(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function o(e,t,n,r){var a;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?a=t.map:t.alphaMap&&(a=t.alphaMap),void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}function s(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function c(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function u(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===N&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===N&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function l(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===N&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===N&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function f(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===N&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===N&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);var r=e.get(n).envMap;r&&(t.envMapIntensity.value=n.envMapIntensity)}function d(e,t,n){f(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===N&&e.clearcoatNormalScale.value.negate()),e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),t.transmission>0&&(e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)}function h(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===N&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===N&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function p(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function b(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function m(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===N&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===N&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function Dl(){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}function Fl(e){e=e||{};var t=void 0!==e.canvas?e.canvas:Dl(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,a=void 0===e.depth||e.depth,i=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",l=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,f=null,d=null,h=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=ln,this.physicallyCorrectLights=!1,this.toneMapping=me,this.toneMappingExposure=1;var b=this,m=!1,v=0,g=0,y=null,x=-1,w=null,_=new sr,M=new sr,T=null,k=t.width,S=t.height,E=1,A=null,C=null,L=new sr(0,0,k,S),R=new sr(0,0,k,S),P=!1,I=[],N=new Ui,O=!1,D=!1,F=null,B=new jr,z=new dr,U={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===y?E:1}var G,j,V,W,q,X,Y,Z,J,K,Q,$,ee,te,ne,re,ae,ie,oe,se,ce,ue,le=n;function fe(e,n){for(var r=0;r<e.length;r++){var a=e[r],i=t.getContext(a,n);if(null!==i)return i}return null}try{var de={alpha:r,depth:a,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:l};if(t.addEventListener("webglcontextlost",ve,!1),t.addEventListener("webglcontextrestored",ge,!1),null===le){var he=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&he.shift(),le=fe(he,de),null===le)throw fe(he)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===le.getShaderPrecisionFormat&&(le.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(He){throw console.error("THREE.WebGLRenderer: "+He.message),He}function pe(){G=new wc(le),j=new gc(le,G,e),G.init(j),ce=new Cl(le,G,j),V=new El(le,G,j),I[0]=1029,W=new Tc(le),q=new ll,X=new Al(le,G,V,q,j,ce,W),Y=new xc(b),Z=new Gi(le,j),ue=new mc(le,G,Z,j),J=new _c(le,Z,W,ue),K=new Ac(le,J,Z,W),ie=new Ec(le),ne=new yc(q),Q=new ul(b,Y,G,j,ue,ne),$=new Ol(q),ee=new pl(q),te=new wl(G,j),ae=new bc(b,Y,V,K,s),re=new Sl(b,K,j),oe=new vc(le,G,W,j),se=new Mc(le,G,W,j),W.programs=Q.programs,b.capabilities=j,b.extensions=G,b.properties=q,b.renderLists=ee,b.shadowMap=re,b.state=V,b.info=W}pe();var be=new Nl(b,le);function ve(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=W.autoReset,t=re.enabled,n=re.autoUpdate,r=re.needsUpdate,a=re.type;pe(),W.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=r,re.type=a}function ye(e){var t=e.target;t.removeEventListener("dispose",ye),xe(t)}function xe(e){we(e),q.remove(e)}function we(e){var t=q.get(e).programs;void 0!==t&&t.forEach((function(e){Q.releaseProgram(e)}))}function _e(e,t){e.render((function(e){b.renderBufferImmediate(e,t)}))}this.xr=be,this.getContext=function(){return le},this.getContextAttributes=function(){return le.getContextAttributes()},this.forceContextLoss=function(){var e=G.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=G.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(e){void 0!==e&&(E=e,this.setSize(k,S,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new er),e.set(k,S)},this.setSize=function(e,n,r){be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=e,S=n,t.width=Math.floor(e*E),t.height=Math.floor(n*E),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new er),e.set(k*E,S*E).floor()},this.setDrawingBufferSize=function(e,n,r){k=e,S=n,E=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new sr),e.copy(_)},this.getViewport=function(e){return e.copy(L)},this.setViewport=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),V.viewport(_.copy(L).multiplyScalar(E).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),V.scissor(M.copy(R).multiplyScalar(E).floor())},this.getScissorTest=function(){return P},this.setScissorTest=function(e){V.setScissorTest(P=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){C=e},this.getClearColor=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),e=new Ba),e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),le.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ve,!1),t.removeEventListener("webglcontextrestored",ge,!1),ee.dispose(),te.dispose(),q.dispose(),Y.dispose(),K.dispose(),ue.dispose(),be.dispose(),be.removeEventListener("sessionstart",ke),be.removeEventListener("sessionend",Se),F&&(F.dispose(),F=null),Ee.stop()},this.renderBufferImmediate=function(e,t){ue.initAttributes();var n=q.get(e);e.hasPositions&&!n.position&&(n.position=le.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=le.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=le.createBuffer()),e.hasColors&&!n.color&&(n.color=le.createBuffer());var r=t.getAttributes();e.hasPositions&&(le.bindBuffer(34962,n.position),le.bufferData(34962,e.positionArray,35048),ue.enableAttribute(r.position),le.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(le.bindBuffer(34962,n.normal),le.bufferData(34962,e.normalArray,35048),ue.enableAttribute(r.normal),le.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(le.bindBuffer(34962,n.uv),le.bufferData(34962,e.uvArray,35048),ue.enableAttribute(r.uv),le.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(le.bindBuffer(34962,n.color),le.bufferData(34962,e.colorArray,35048),ue.enableAttribute(r.color),le.vertexAttribPointer(r.color,3,5126,!1,0,0)),ue.disableUnusedAttributes(),le.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,a,i){null===t&&(t=U);var o=a.isMesh&&a.matrixWorld.determinant()<0,s=De(e,t,r,a);V.setMaterial(r,o);var c=n.index,u=n.attributes.position;if(null===c){if(void 0===u||0===u.count)return}else if(0===c.count)return;var l,f=1;!0===r.wireframe&&(c=J.getWireframeAttribute(n),f=2),(r.morphTargets||r.morphNormals)&&ie.update(a,n,r,s),ue.setup(a,r,s,n,c);var d=oe;null!==c&&(l=Z.get(c),d=se,d.setIndex(l));var h=null!==c?c.count:u.count,p=n.drawRange.start*f,b=n.drawRange.count*f,m=null!==i?i.start*f:0,v=null!==i?i.count*f:1/0,g=Math.max(p,m),y=Math.min(h,p+b,m+v)-1,x=Math.max(0,y-g+1);if(0!==x){if(a.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*H()),d.setMode(1)):d.setMode(4);else if(a.isLine){var w=r.linewidth;void 0===w&&(w=1),V.setLineWidth(w*H()),a.isLineSegments?d.setMode(1):a.isLineLoop?d.setMode(2):d.setMode(3)}else a.isPoints?d.setMode(0):a.isSprite&&d.setMode(4);if(a.isInstancedMesh)d.renderInstances(g,x,a.count);else if(n.isInstancedBufferGeometry){var _=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(g,x,_)}else d.render(g,x)}},this.compile=function(e,t){d=te.get(e),d.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){var a=n[r];Ne(a,e,t)}else Ne(n,e,t)}))};var Me=null;function Te(e){Me&&Me(e)}function ke(){Ee.stop()}function Se(){Ee.start()}var Ee=new Hi;function Ae(e,t,n,r){if(!1!==e.visible){var a=e.layers.test(t.layers);if(a)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var i=K.update(e),o=e.material;o.visible&&f.push(e,i,o,n,z.z,null)}}else if(e.isImmediateRenderObject)r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B),f.push(e,null,e.material,n,z.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||N.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var s=K.update(e),c=e.material;if(Array.isArray(c))for(var u=s.groups,l=0,h=u.length;l<h;l++){var p=u[l],b=c[p.materialIndex];b&&b.visible&&f.push(e,s,b,n,z.z,p)}else c.visible&&f.push(e,s,c,n,z.z,null)}for(var m=e.children,v=0,g=m.length;v<g;v++)Ae(m[v],t,n,r)}}function Ce(e,t,n,r){null===F&&(F=new cr(1024,1024,{generateMipmaps:!0,minFilter:Fe,magFilter:Pe,wrapS:Le,wrapT:Le}));var a=b.getRenderTarget();b.setRenderTarget(F),b.clear(),Re(e,n,r),X.updateRenderTargetMipmap(F),b.setRenderTarget(a),Re(t,n,r)}function Re(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,a=0,i=e.length;a<i;a++){var o=e[a],s=o.object,c=o.geometry,u=null===r?o.material:r,l=o.group;if(n.isArrayCamera)for(var f=n.cameras,h=0,p=f.length;h<p;h++){var b=f[h];s.layers.test(b.layers)&&(V.viewport(_.copy(b.viewport)),d.setupLightsView(b),Ie(s,t,b,c,u,l))}else Ie(s,t,n,c,u,l)}}function Ie(e,t,n,r,a,i){if(e.onBeforeRender(b,t,n,r,a,i),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=De(n,t,a,e);V.setMaterial(a),ue.reset(),_e(e,o)}else b.renderBufferDirect(n,t,r,a,e,i);e.onAfterRender(b,t,n,r,a,i)}function Ne(e,t,n){!0!==t.isScene&&(t=U);var r=q.get(e),a=d.state.lights,i=d.state.shadowsArray,o=a.state.version,s=Q.getParameters(e,a.state,i,t,n),c=Q.getProgramCacheKey(s),u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=Y.get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",ye),u=new Map,r.programs=u);var l=u.get(c);if(void 0!==l){if(r.currentProgram===l&&r.lightsStateVersion===o)return Oe(e,s),l}else s.uniforms=Q.getUniforms(e),e.onBuild(s,b),e.onBeforeCompile(s,b),l=Q.acquireProgram(s,c),u.set(c,l),r.uniforms=s.uniforms;var f=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(f.clippingPlanes=ne.uniform),Oe(e,s),r.needsLights=Ue(e),r.lightsStateVersion=o,r.needsLights&&(f.ambientLightColor.value=a.state.ambient,f.lightProbe.value=a.state.probe,f.directionalLights.value=a.state.directional,f.directionalLightShadows.value=a.state.directionalShadow,f.spotLights.value=a.state.spot,f.spotLightShadows.value=a.state.spotShadow,f.rectAreaLights.value=a.state.rectArea,f.ltc_1.value=a.state.rectAreaLTC1,f.ltc_2.value=a.state.rectAreaLTC2,f.pointLights.value=a.state.point,f.pointLightShadows.value=a.state.pointShadow,f.hemisphereLights.value=a.state.hemi,f.directionalShadowMap.value=a.state.directionalShadowMap,f.directionalShadowMatrix.value=a.state.directionalShadowMatrix,f.spotShadowMap.value=a.state.spotShadowMap,f.spotShadowMatrix.value=a.state.spotShadowMatrix,f.pointShadowMap.value=a.state.pointShadowMap,f.pointShadowMatrix.value=a.state.pointShadowMatrix);var h=l.getUniforms(),p=Nu.seqWithValue(h.seq,f);return r.currentProgram=l,r.uniformsList=p,l}function Oe(e,t){var n=q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas}function De(e,t,n,r){!0!==t.isScene&&(t=U),X.resetTextureUnits();var a=t.fog,i=n.isMeshStandardMaterial?t.environment:null,o=null===y?b.outputEncoding:y.texture.encoding,s=Y.get(n.envMap||i),c=!0===n.vertexColors&&r.geometry&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,u=q.get(n),l=d.state.lights;if(!0===O&&(!0===D||e!==w)){var f=e===w&&n.id===x;ne.setState(n,e,f)}var h=!1;n.version===u.__version?u.needsLights&&u.lightsStateVersion!==l.state.version||u.outputEncoding!==o||r.isInstancedMesh&&!1===u.instancing?h=!0:r.isInstancedMesh||!0!==u.instancing?r.isSkinnedMesh&&!1===u.skinning?h=!0:r.isSkinnedMesh||!0!==u.skinning?u.envMap!==s||n.fog&&u.fog!==a?h=!0:void 0===u.numClippingPlanes||u.numClippingPlanes===ne.numPlanes&&u.numIntersection===ne.numIntersection?u.vertexAlphas!==c&&(h=!0):h=!0:h=!0:h=!0:(h=!0,u.__version=n.version);var p=u.currentProgram;!0===h&&(p=Ne(n,t,r));var m=!1,v=!1,g=!1,_=p.getUniforms(),M=u.uniforms;if(V.useProgram(p.program)&&(m=!0,v=!0,g=!0),n.id!==x&&(x=n.id,v=!0),m||w!==e){if(_.setValue(le,"projectionMatrix",e.projectionMatrix),j.logarithmicDepthBuffer&&_.setValue(le,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,v=!0,g=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var T=_.map.cameraPosition;void 0!==T&&T.setValue(le,z.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&_.setValue(le,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&_.setValue(le,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){_.setOptional(le,r,"bindMatrix"),_.setOptional(le,r,"bindMatrixInverse");var k=r.skeleton;k&&(j.floatVertexTextures?(null===k.boneTexture&&k.computeBoneTexture(),_.setValue(le,"boneTexture",k.boneTexture,X),_.setValue(le,"boneTextureSize",k.boneTextureSize)):_.setOptional(le,k,"boneMatrices"))}return(v||u.receiveShadow!==r.receiveShadow)&&(u.receiveShadow=r.receiveShadow,_.setValue(le,"receiveShadow",r.receiveShadow)),v&&(_.setValue(le,"toneMappingExposure",b.toneMappingExposure),u.needsLights&&ze(M,g),a&&n.fog&&$.refreshFogUniforms(M,a),$.refreshMaterialUniforms(M,n,E,S,F),Nu.upload(le,u.uniformsList,M,X)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Nu.upload(le,u.uniformsList,M,X),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&_.setValue(le,"center",r.center),_.setValue(le,"modelViewMatrix",r.modelViewMatrix),_.setValue(le,"normalMatrix",r.normalMatrix),_.setValue(le,"modelMatrix",r.matrixWorld),p}function ze(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Ue(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Ee.setAnimationLoop(Te),"undefined"!==typeof window&&Ee.setContext(window),this.setAnimationLoop=function(e){Me=e,be.setAnimationLoop(e),null===e?Ee.stop():Ee.start()},be.addEventListener("sessionstart",ke),be.addEventListener("sessionend",Se),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,y),d=te.get(e,p.length),d.init(),p.push(d),B.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),N.setFromProjectionMatrix(B),D=this.localClippingEnabled,O=ne.init(this.clippingPlanes,D,t),f=ee.get(e,h.length),f.init(),h.push(f),Ae(e,t,0,b.sortObjects),f.finish(),!0===b.sortObjects&&f.sort(A,C),!0===O&&ne.beginShadows();var n=d.state.shadowsArray;re.render(n,e,t),d.setupLights(),d.setupLightsView(t),!0===O&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(f,e);var r=f.opaque,a=f.transmissive,i=f.transparent;r.length>0&&Re(r,e,t),a.length>0&&Ce(r,a,e,t),i.length>0&&Re(i,e,t),null!==y&&(X.updateRenderTargetMipmap(y),X.updateMultisampleRenderTarget(y)),!0===e.isScene&&e.onAfterRender(b,e,t),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),ue.resetDefaultState(),x=-1,w=null,p.pop(),d=p.length>0?p[p.length-1]:null,h.pop(),f=h.length>0?h[h.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return g},this.getRenderTarget=function(){return y},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;y=e,v=t,g=n,e&&void 0===q.get(e).__webglFramebuffer&&X.setupRenderTarget(e);var r=null,a=!1,i=!1;if(e){var o=e.texture;(o.isDataTexture3D||o.isDataTexture2DArray)&&(i=!0);var s=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=s[t],a=!0):r=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:s,_.copy(e.viewport),M.copy(e.scissor),T=e.scissorTest}else _.copy(L).multiplyScalar(E).floor(),M.copy(R).multiplyScalar(E).floor(),T=P;var c=V.bindFramebuffer(36160,r);if(c&&j.drawBuffers){var u=!1;if(e)if(e.isWebGLMultipleRenderTargets){var l=e.texture;if(I.length!==l.length||36064!==I[0]){for(var f=0,d=l.length;f<d;f++)I[f]=36064+f;I.length=l.length,u=!0}}else 1===I.length&&36064===I[0]||(I[0]=36064,I.length=1,u=!0);else 1===I.length&&1029===I[0]||(I[0]=1029,I.length=1,u=!0);u&&(j.isWebGL2?le.drawBuffers(I):G.get("WEBGL_draw_buffers").drawBuffersWEBGL(I))}if(V.viewport(_),V.scissor(M),V.setScissorTest(T),a){var h=q.get(e.texture);le.framebufferTexture2D(36160,36064,34069+t,h.__webglTexture,n)}else if(i){var p=q.get(e.texture),b=t||0;le.framebufferTextureLayer(36160,36064,p.__webglTexture,n||0,b)}},this.readRenderTargetPixels=function(e,t,n,r,a,i,o){if(e&&e.isWebGLRenderTarget){var s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){V.bindFramebuffer(36160,s);try{var c=e.texture,u=c.format,l=c.type;if(u!==Qe&&ce.convert(u)!==le.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var f=l===We&&(G.has("EXT_color_buffer_half_float")||j.isWebGL2&&G.has("EXT_color_buffer_float"));if(l!==Be&&ce.convert(l)!==le.getParameter(35738)&&(l!==Ve||!(j.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float")))&&!f)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===le.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-a&&le.readPixels(t,n,r,a,ce.convert(u),ce.convert(l),i):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var d=null!==y?q.get(y).__webglFramebuffer:null;V.bindFramebuffer(36160,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),a=Math.floor(t.image.width*r),i=Math.floor(t.image.height*r),o=ce.convert(t.format);j.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),X.setTexture2D(t,0),le.copyTexImage2D(3553,n,o,e.x,e.y,a,i,0),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.image.width,i=t.image.height,o=ce.convert(n.format),s=ce.convert(n.type);X.setTexture2D(n,0),le.pixelStorei(37440,n.flipY),le.pixelStorei(37441,n.premultiplyAlpha),le.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?le.texSubImage2D(3553,r,e.x,e.y,a,i,o,s,t.image.data):t.isCompressedTexture?le.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):le.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&le.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(b.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var i,o=n.image,s=o.width,c=o.height,u=o.data,l=ce.convert(r.format),f=ce.convert(r.type);if(r.isDataTexture3D)X.setTexture3D(r,0),i=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(r,0),i=35866}le.pixelStorei(37440,r.flipY),le.pixelStorei(37441,r.premultiplyAlpha),le.pixelStorei(3317,r.unpackAlignment);var d=le.getParameter(3314),h=le.getParameter(32878),p=le.getParameter(3316),m=le.getParameter(3315),v=le.getParameter(32877);le.pixelStorei(3314,s),le.pixelStorei(32878,c),le.pixelStorei(3316,e.min.x),le.pixelStorei(3315,e.min.y),le.pixelStorei(32877,e.min.z),le.texSubImage3D(i,a,t.x,t.y,t.z,e.max.x-e.min.x+1,e.max.y-e.min.y+1,e.max.z-e.min.z+1,l,f,u),le.pixelStorei(3314,d),le.pixelStorei(32878,h),le.pixelStorei(3316,p),le.pixelStorei(3315,m),le.pixelStorei(32877,v),0===a&&r.generateMipmaps&&le.generateMipmap(i),V.unbindTexture()}},this.initTexture=function(e){X.setTexture2D(e,0),V.unbindTexture()},this.resetState=function(){v=0,g=0,y=null,V.reset(),ue.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var Bl=function(e){b(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return n}(Fl);Bl.prototype.isWebGL1Renderer=!0;var zl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;v(this,e),this.name="",this.color=new Ba(t),this.density=n}return g(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();zl.prototype.isFogExp2=!0;var Ul=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;v(this,e),this.name="",this.color=new Ba(t),this.near=n,this.far=r}return g(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();Ul.prototype.isFog=!0;var Hl=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this),e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:p(e)})),e}return g(n,[{key:"copy",value:function(e,t){return f(d(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=f(d(n.prototype),"toJSON",this).call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(pa);Hl.prototype.isScene=!0;var Gl=function(){function e(t,n){v(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Tn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=In()}return g(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=In()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=In()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();Gl.prototype.isInterleavedBuffer=!0;var jl=new dr,Vl=function(){function e(t,n,r,a){v(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===a}return g(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)jl.x=this.getX(t),jl.y=this.getY(t),jl.z=this.getZ(t),jl.applyMatrix4(e),this.setXYZ(t,jl.x,jl.y,jl.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)jl.x=this.getX(t),jl.y=this.getY(t),jl.z=this.getZ(t),jl.applyNormalMatrix(e),this.setXYZ(t,jl.x,jl.y,jl.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)jl.x=this.getX(t),jl.y=this.getY(t),jl.z=this.getZ(t),jl.transformDirection(e),this.setXYZ(t,jl.x,jl.y,jl.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=a,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var a=r*this.data.stride+this.offset,i=0;i<this.itemSize;i++)n.push(this.data.array[a+i]);return new Ga(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,a=0;a<this.itemSize;a++)t.push(this.data.array[r+a]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();Vl.prototype.isInterleavedBufferAttribute=!0;var Wl,ql=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="SpriteMaterial",r.color=new Ba(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Ra);ql.prototype.isSpriteMaterial=!0;var Xl=new dr,Yl=new dr,Zl=new dr,Jl=new er,Kl=new er,Ql=new jr,$l=new dr,ef=new dr,tf=new dr,nf=new er,rf=new er,af=new er,of=function(e){b(n,e);var t=m(n);function n(e){var r;if(v(this,n),r=t.call(this),r.type="Sprite",void 0===Wl){Wl=new ri;var a=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Gl(a,5);Wl.setIndex([0,1,2,0,2,3]),Wl.setAttribute("position",new Vl(i,3,0,!1)),Wl.setAttribute("uv",new Vl(i,2,3,!1))}return r.geometry=Wl,r.material=void 0!==e?e:new ql,r.center=new er(.5,.5),r}return g(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Yl.setFromMatrixScale(this.matrixWorld),Ql.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Zl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Yl.multiplyScalar(-Zl.z);var n,r,a=this.material.rotation;0!==a&&(r=Math.cos(a),n=Math.sin(a));var i=this.center;sf($l.set(-.5,-.5,0),Zl,i,Yl,n,r),sf(ef.set(.5,-.5,0),Zl,i,Yl,n,r),sf(tf.set(.5,.5,0),Zl,i,Yl,n,r),nf.set(0,0),rf.set(1,0),af.set(1,1);var o=e.ray.intersectTriangle($l,ef,tf,!1,Xl);if(null!==o||(sf(ef.set(-.5,.5,0),Zl,i,Yl,n,r),rf.set(0,1),o=e.ray.intersectTriangle($l,tf,ef,!1,Xl),null!==o)){var s=e.ray.origin.distanceTo(Xl);s<e.near||s>e.far||t.push({distance:s,point:Xl.clone(),uv:Ca.getUV(Xl,$l,ef,tf,nf,rf,af,new er),face:null,object:this})}}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(pa);function sf(e,t,n,r,a,i){Jl.subVectors(e,n).addScalar(.5).multiply(r),void 0!==a?(Kl.x=i*Jl.x-a*Jl.y,Kl.y=a*Jl.x+i*Jl.y):Kl.copy(Jl),e.copy(t),e.x+=Kl.x,e.y+=Kl.y,e.applyMatrix4(Ql)}of.prototype.isSprite=!0;var cf=new dr,uf=new dr,lf=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this),e._currentLevel=0,e.type="LOD",Object.defineProperties(p(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return g(n,[{key:"copy",value:function(e){f(d(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,r=0,a=t.length;r<a;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n,r=this.levels;for(n=0;n<r.length;n++)if(t<r[n].distance)break;return r.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r;n++)if(e<t[n].distance)break;return t[n-1].object}return null}},{key:"raycast",value:function(e,t){var n=this.levels;if(n.length>0){cf.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(cf);this.getObjectForDistance(r).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){cf.setFromMatrixPosition(e.matrixWorld),uf.setFromMatrixPosition(this.matrixWorld);var n,r,a=cf.distanceTo(uf)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r;n++){if(!(a>=t[n].distance))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=f(d(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,a=0,i=r.length;a<i;a++){var o=r[a];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}]),n}(pa),ff=new dr,df=new sr,hf=new sr,pf=new dr,bf=new jr,mf=function(e){b(n,e);var t=m(n);function n(e,r){var a;return v(this,n),a=t.call(this,e,r),a.type="SkinnedMesh",a.bindMode="attached",a.bindMatrix=new jr,a.bindMatrixInverse=new jr,a}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new sr,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){f(d(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;df.fromBufferAttribute(r.attributes.skinIndex,e),hf.fromBufferAttribute(r.attributes.skinWeight,e),ff.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var a=0;a<4;a++){var i=hf.getComponent(a);if(0!==i){var o=df.getComponent(a);bf.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(pf.copy(ff).applyMatrix4(bf),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(wi);mf.prototype.isSkinnedMesh=!0;var vf=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this),e.type="Bone",e}return n}(pa);vf.prototype.isBone=!0;var gf=function(e){b(n,e);var t=m(n);function n(e,r,a,i,o,s,c,u,l,f,d,h){var p;return v(this,n),p=t.call(this,null,s,c,u,l,f,i,o,d,h),p.image={data:e||null,width:r||1,height:a||1},p.magFilter=void 0!==l?l:Pe,p.minFilter=void 0!==f?f:Pe,p.generateMipmaps=!1,p.flipY=!1,p.unpackAlignment=1,p.needsUpdate=!0,p}return n}(ir);gf.prototype.isDataTexture=!0;var yf=new jr,xf=new jr,wf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];v(this,e),this.uuid=In(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return g(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new jr)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new jr;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,a=this.bones.length;r<a;r++){var i=this.bones[r];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,a=0,i=e.length;a<i;a++){var o=e[a]?e[a].matrixWorld:xf;yf.multiplyMatrices(o,t[a]),yf.toArray(n,16*a)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=Jn(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new gf(t,e,e,Qe,Ve);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var a=e.bones[n],i=t[a];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),i=new vf),this.bones.push(i),this.boneInverses.push((new jr).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,a=t.length;r<a;r++){var i=t[r];e.bones.push(i.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),_f=new jr,Mf=new jr,Tf=[],kf=new wi,Sf=function(e){b(n,e);var t=m(n);function n(e,r,a){var i;return v(this,n),i=t.call(this,e,r),i.instanceMatrix=new Ga(new Float32Array(16*a),16),i.instanceColor=null,i.count=a,i.frustumCulled=!1,i}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(kf.geometry=this.geometry,kf.material=this.material,void 0!==kf.material)for(var a=0;a<r;a++){this.getMatrixAt(a,_f),Mf.multiplyMatrices(n,_f),kf.matrixWorld=Mf,kf.raycast(e,Tf);for(var i=0,o=Tf.length;i<o;i++){var s=Tf[i];s.instanceId=a,s.object=this,t.push(s)}Tf.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new Ga(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(wi);Sf.prototype.isInstancedMesh=!0;var Ef=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="LineBasicMaterial",r.color=new Ba(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.morphTargets=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}]),n}(Ra);Ef.prototype.isLineBasicMaterial=!0;var Af=new dr,Cf=new dr,Lf=new jr,Rf=new Gr,Pf=new Nr,If=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ef;return v(this,n),e=t.call(this),e.type="Line",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,a=t.count;r<a;r++)Af.fromBufferAttribute(t,r-1),Cf.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Af.distanceTo(Cf);e.setAttribute("lineDistance",new qa(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Pf.copy(n.boundingSphere),Pf.applyMatrix4(r),Pf.radius+=a,!1!==e.ray.intersectsSphere(Pf)){Lf.copy(r).invert(),Rf.copy(e.ray).applyMatrix4(Lf);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,c=new dr,u=new dr,l=new dr,f=new dr,d=this.isLineSegments?2:1;if(n.isBufferGeometry){var h=n.index,p=n.attributes,b=p.position;if(null!==h)for(var m=Math.max(0,i.start),v=Math.min(h.count,i.start+i.count),g=m,y=v-1;g<y;g+=d){var x=h.getX(g),w=h.getX(g+1);c.fromBufferAttribute(b,x),u.fromBufferAttribute(b,w);var _=Rf.distanceSqToSegment(c,u,f,l);if(!(_>s)){f.applyMatrix4(this.matrixWorld);var M=e.ray.origin.distanceTo(f);M<e.near||M>e.far||t.push({distance:M,point:l.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else for(var T=Math.max(0,i.start),k=Math.min(b.count,i.start+i.count),S=T,E=k-1;S<E;S+=d){c.fromBufferAttribute(b,S),u.fromBufferAttribute(b,S+1);var A=Rf.distanceSqToSegment(c,u,f,l);if(!(A>s)){f.applyMatrix4(this.matrixWorld);var C=e.ray.origin.distanceTo(f);C<e.near||C>e.far||t.push({distance:C,point:l.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(pa);If.prototype.isLine=!0;var Nf=new dr,Of=new dr,Df=function(e){b(n,e);var t=m(n);function n(e,r){var a;return v(this,n),a=t.call(this,e,r),a.type="LineSegments",a}return g(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,a=t.count;r<a;r+=2)Nf.fromBufferAttribute(t,r),Of.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Nf.distanceTo(Of);e.setAttribute("lineDistance",new qa(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(If);Df.prototype.isLineSegments=!0;var Ff=function(e){b(n,e);var t=m(n);function n(e,r){var a;return v(this,n),a=t.call(this,e,r),a.type="LineLoop",a}return n}(If);Ff.prototype.isLineLoop=!0;var Bf=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="PointsMaterial",r.color=new Ba(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.morphTargets=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}]),n}(Ra);Bf.prototype.isPointsMaterial=!0;var zf=new jr,Uf=new Gr,Hf=new Nr,Gf=new dr,jf=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bf;return v(this,n),e=t.call(this),e.type="Points",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Hf.copy(n.boundingSphere),Hf.applyMatrix4(r),Hf.radius+=a,!1!==e.ray.intersectsSphere(Hf)){zf.copy(r).invert(),Uf.copy(e.ray).applyMatrix4(zf);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var c=n.index,u=n.attributes,l=u.position;if(null!==c)for(var f=Math.max(0,i.start),d=Math.min(c.count,i.start+i.count),h=f,p=d;h<p;h++){var b=c.getX(h);Gf.fromBufferAttribute(l,b),Vf(Gf,b,s,r,e,t,this)}else for(var m=Math.max(0,i.start),v=Math.min(l.count,i.start+i.count),g=m,y=v;g<y;g++)Gf.fromBufferAttribute(l,g),Vf(Gf,g,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(pa);function Vf(e,t,n,r,a,i,o){var s=Uf.distanceSqToPoint(e);if(s<n){var c=new dr;Uf.closestPointToPoint(e,c),c.applyMatrix4(r);var u=a.ray.origin.distanceTo(c);if(u<a.near||u>a.far)return;i.push({distance:u,distanceToRay:Math.sqrt(s),point:c,index:t,face:null,object:o})}}jf.prototype.isPoints=!0;var Wf=function(e){b(n,e);var t=m(n);function n(e,r,a,i,o,s,c,u,l){var f;v(this,n),f=t.call(this,e,r,a,i,o,s,c,u,l),f.format=void 0!==c?c:Ke,f.minFilter=void 0!==s?s:Oe,f.magFilter=void 0!==o?o:Oe,f.generateMipmaps=!1;var d=p(f);function h(){d.needsUpdate=!0,e.requestVideoFrameCallback(h)}return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h),f}return g(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image,t="requestVideoFrameCallback"in e;!1===t&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(ir);Wf.prototype.isVideoTexture=!0;var qf=function(e){b(n,e);var t=m(n);function n(e,r,a,i,o,s,c,u,l,f,d,h){var p;return v(this,n),p=t.call(this,null,s,c,u,l,f,i,o,d,h),p.image={width:r,height:a},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return n}(ir);qf.prototype.isCompressedTexture=!0;var Xf=function(e){b(n,e);var t=m(n);function n(e,r,a,i,o,s,c,u,l){var f;return v(this,n),f=t.call(this,e,r,a,i,o,s,c,u,l),f.needsUpdate=!0,f}return n}(ir);Xf.prototype.isCanvasTexture=!0;var Yf=function(e){b(n,e);var t=m(n);function n(e,r,a,i,o,s,c,u,l,f){var d;if(v(this,n),f=void 0!==f?f:tt,f!==tt&&f!==nt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===a&&f===tt&&(a=He),void 0===a&&f===nt&&(a=Ze),d=t.call(this,null,i,o,s,c,u,f,a,l),d.image={width:e,height:r},d.magFilter=void 0!==c?c:Pe,d.minFilter=void 0!==u?u:Pe,d.flipY=!1,d.generateMipmaps=!1,d}return n}(ir);Yf.prototype.isDepthTexture=!0;var Zf=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;v(this,n),e=t.call(this),e.type="CircleGeometry",e.parameters={radius:r,segments:a,thetaStart:i,thetaLength:o},a=Math.max(3,a);var s=[],c=[],u=[],l=[],f=new dr,d=new er;c.push(0,0,0),u.push(0,0,1),l.push(.5,.5);for(var h=0,p=3;h<=a;h++,p+=3){var b=i+h/a*o;f.x=r*Math.cos(b),f.y=r*Math.sin(b),c.push(f.x,f.y,f.z),u.push(0,0,1),d.x=(c[p]/r+1)/2,d.y=(c[p+1]/r+1)/2,l.push(d.x,d.y)}for(var m=1;m<=a;m++)s.push(m,m+1,0);return e.setIndex(s),e.setAttribute("position",new qa(c,3)),e.setAttribute("normal",new qa(u,3)),e.setAttribute("uv",new qa(l,2)),e}return n}(ri),Jf=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;v(this,n),e=t.call(this),e.type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:a,height:i,radialSegments:o,heightSegments:s,openEnded:c,thetaStart:u,thetaLength:l};var f=p(e);o=Math.floor(o),s=Math.floor(s);var d=[],h=[],b=[],m=[],g=0,y=[],x=i/2,w=0;function _(){for(var e=new dr,t=new dr,n=0,c=(a-r)/i,p=0;p<=s;p++){for(var v=[],_=p/s,M=_*(a-r)+r,T=0;T<=o;T++){var k=T/o,S=k*l+u,E=Math.sin(S),A=Math.cos(S);t.x=M*E,t.y=-_*i+x,t.z=M*A,h.push(t.x,t.y,t.z),e.set(E,c,A).normalize(),b.push(e.x,e.y,e.z),m.push(k,1-_),v.push(g++)}y.push(v)}for(var C=0;C<o;C++)for(var L=0;L<s;L++){var R=y[L][C],P=y[L+1][C],I=y[L+1][C+1],N=y[L][C+1];d.push(R,P,N),d.push(P,I,N),n+=6}f.addGroup(w,n,0),w+=n}function M(e){for(var t=g,n=new er,i=new dr,s=0,c=!0===e?r:a,p=!0===e?1:-1,v=1;v<=o;v++)h.push(0,x*p,0),b.push(0,p,0),m.push(.5,.5),g++;for(var y=g,_=0;_<=o;_++){var M=_/o,T=M*l+u,k=Math.cos(T),S=Math.sin(T);i.x=c*S,i.y=x*p,i.z=c*k,h.push(i.x,i.y,i.z),b.push(0,p,0),n.x=.5*k+.5,n.y=.5*S*p+.5,m.push(n.x,n.y),g++}for(var E=0;E<o;E++){var A=t+E,C=y+E;!0===e?d.push(C,C+1,A):d.push(C+1,C,A),s+=3}f.addGroup(w,s,!0===e?1:2),w+=s}return _(),!1===c&&(r>0&&M(!0),a>0&&M(!1)),e.setIndex(d),e.setAttribute("position",new qa(h,3)),e.setAttribute("normal",new qa(b,3)),e.setAttribute("uv",new qa(m,2)),e}return n}(ri),Kf=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return v(this,n),e=t.call(this,0,r,a,i,o,s,c,u),e.type="ConeGeometry",e.parameters={radius:r,height:a,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:c,thetaLength:u},e}return n}(Jf),Qf=function(e){b(n,e);var t=m(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;v(this,n),a=t.call(this),a.type="PolyhedronGeometry",a.parameters={vertices:e,indices:r,radius:i,detail:o};var s=[],c=[];function u(e){for(var t=new dr,n=new dr,a=new dr,i=0;i<r.length;i+=3)b(r[i+0],t),b(r[i+1],n),b(r[i+2],a),l(t,n,a,e)}function l(e,t,n,r){for(var a=r+1,i=[],o=0;o<=a;o++){i[o]=[];for(var s=e.clone().lerp(n,o/a),c=t.clone().lerp(n,o/a),u=a-o,l=0;l<=u;l++)i[o][l]=0===l&&o===a?s:s.clone().lerp(c,l/u)}for(var f=0;f<a;f++)for(var d=0;d<2*(a-f)-1;d++){var h=Math.floor(d/2);d%2===0?(p(i[f][h+1]),p(i[f+1][h]),p(i[f][h])):(p(i[f][h+1]),p(i[f+1][h+1]),p(i[f+1][h]))}}function f(e){for(var t=new dr,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}function d(){for(var e=new dr,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=y(e)/2/Math.PI+.5,r=x(e)/Math.PI+.5;c.push(n,1-r)}m(),h()}function h(){for(var e=0;e<c.length;e+=6){var t=c[e+0],n=c[e+2],r=c[e+4],a=Math.max(t,n,r),i=Math.min(t,n,r);a>.9&&i<.1&&(t<.2&&(c[e+0]+=1),n<.2&&(c[e+2]+=1),r<.2&&(c[e+4]+=1))}}function p(e){s.push(e.x,e.y,e.z)}function b(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function m(){for(var e=new dr,t=new dr,n=new dr,r=new dr,a=new er,i=new er,o=new er,u=0,l=0;u<s.length;u+=9,l+=6){e.set(s[u+0],s[u+1],s[u+2]),t.set(s[u+3],s[u+4],s[u+5]),n.set(s[u+6],s[u+7],s[u+8]),a.set(c[l+0],c[l+1]),i.set(c[l+2],c[l+3]),o.set(c[l+4],c[l+5]),r.copy(e).add(t).add(n).divideScalar(3);var f=y(r);g(a,l+0,e,f),g(i,l+2,t,f),g(o,l+4,n,f)}}function g(e,t,n,r){r<0&&1===e.x&&(c[t]=e.x-1),0===n.x&&0===n.z&&(c[t]=r/2/Math.PI+.5)}function y(e){return Math.atan2(e.z,-e.x)}function x(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return u(o),f(i),d(),a.setAttribute("position",new qa(s,3)),a.setAttribute("normal",new qa(s.slice(),3)),a.setAttribute("uv",new qa(c,2)),0===o?a.computeVertexNormals():a.normalizeNormals(),a}return n}(ri),$f=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,n);var i=(1+Math.sqrt(5))/2,o=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-i,0,-o,i,0,o,-i,0,o,i,-o,-i,0,-o,i,0,o,-i,0,o,i,0,-i,0,-o,i,0,-o,-i,0,o,i,0,o],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return e=t.call(this,s,c,r,a),e.type="DodecahedronGeometry",e.parameters={radius:r,detail:a},e}return n}(Qf),ed=new dr,td=new dr,nd=new dr,rd=new Ca,ad=function(e){b(n,e);var t=m(n);function n(e,r){var a;if(v(this,n),a=t.call(this),a.type="EdgesGeometry",a.parameters={thresholdAngle:r},r=void 0!==r?r:1,!0===e.isGeometry)return console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),l(a);for(var i=4,o=Math.pow(10,i),s=Math.cos(Rn*r),c=e.getIndex(),u=e.getAttribute("position"),f=c?c.count:u.count,d=[0,0,0],h=["a","b","c"],p=new Array(3),b={},m=[],g=0;g<f;g+=3){c?(d[0]=c.getX(g),d[1]=c.getX(g+1),d[2]=c.getX(g+2)):(d[0]=g,d[1]=g+1,d[2]=g+2);var y=rd.a,x=rd.b,w=rd.c;if(y.fromBufferAttribute(u,d[0]),x.fromBufferAttribute(u,d[1]),w.fromBufferAttribute(u,d[2]),rd.getNormal(nd),p[0]="".concat(Math.round(y.x*o),",").concat(Math.round(y.y*o),",").concat(Math.round(y.z*o)),p[1]="".concat(Math.round(x.x*o),",").concat(Math.round(x.y*o),",").concat(Math.round(x.z*o)),p[2]="".concat(Math.round(w.x*o),",").concat(Math.round(w.y*o),",").concat(Math.round(w.z*o)),p[0]!==p[1]&&p[1]!==p[2]&&p[2]!==p[0])for(var _=0;_<3;_++){var M=(_+1)%3,T=p[_],k=p[M],S=rd[h[_]],E=rd[h[M]],A="".concat(T,"_").concat(k),C="".concat(k,"_").concat(T);C in b&&b[C]?(nd.dot(b[C].normal)<=s&&(m.push(S.x,S.y,S.z),m.push(E.x,E.y,E.z)),b[C]=null):A in b||(b[A]={index0:d[_],index1:d[M],normal:nd.clone()})}}for(var L in b)if(b[L]){var R=b[L],P=R.index0,I=R.index1;ed.fromBufferAttribute(u,P),td.fromBufferAttribute(u,I),m.push(ed.x,ed.y,ed.z),m.push(td.x,td.y,td.z)}return a.setAttribute("position",new qa(m,3)),a}return n}(ri),id={triangulate:function(e,t,n){n=n||2;var r,a,i,o,s,c,u,l=t&&t.length,f=l?t[0]*n:e.length,d=od(e,0,f,n,!0),h=[];if(!d||d.next===d.prev)return h;if(l&&(d=hd(e,t,d,n)),e.length>80*n){r=i=e[0],a=o=e[1];for(var p=n;p<f;p+=n)s=e[p],c=e[p+1],s<r&&(r=s),c<a&&(a=c),s>i&&(i=s),c>o&&(o=c);u=Math.max(i-r,o-a),u=0!==u?1/u:0}return cd(d,h,n,r,a,u),h}};function od(e,t,n,r,a){var i,o;if(a===Dd(e,t,n,r)>0)for(i=t;i<n;i+=r)o=Id(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=Id(i,e[i],e[i+1],o);return o&&kd(o,o.next)&&(Nd(o),o=o.next),o}function sd(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!kd(r,r.next)&&0!==Td(r.prev,r,r.next))r=r.next;else{if(Nd(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function cd(e,t,n,r,a,i,o){if(e){!o&&i&&gd(e,r,a,i);var s,c,u=e;while(e.prev!==e.next)if(s=e.prev,c=e.next,i?ld(e,r,a,i):ud(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),Nd(e),e=c.next,u=c.next;else if(e=c,e===u){o?1===o?(e=fd(sd(e),t,n),cd(e,t,n,r,a,i,2)):2===o&&dd(e,t,n,r,a,i):cd(sd(e),t,n,r,a,i,1);break}}}function ud(e){var t=e.prev,n=e,r=e.next;if(Td(t,n,r)>=0)return!1;var a=e.next.next;while(a!==e.prev){if(_d(t.x,t.y,n.x,n.y,r.x,r.y,a.x,a.y)&&Td(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function ld(e,t,n,r){var a=e.prev,i=e,o=e.next;if(Td(a,i,o)>=0)return!1;var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,c=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,l=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,f=xd(s,c,t,n,r),d=xd(u,l,t,n,r),h=e.prevZ,p=e.nextZ;while(h&&h.z>=f&&p&&p.z<=d){if(h!==e.prev&&h!==e.next&&_d(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&Td(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==e.prev&&p!==e.next&&_d(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&Td(p.prev,p,p.next)>=0)return!1;p=p.nextZ}while(h&&h.z>=f){if(h!==e.prev&&h!==e.next&&_d(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&Td(h.prev,h,h.next)>=0)return!1;h=h.prevZ}while(p&&p.z<=d){if(p!==e.prev&&p!==e.next&&_d(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&Td(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function fd(e,t,n){var r=e;do{var a=r.prev,i=r.next.next;!kd(a,i)&&Sd(a,r,r.next,i)&&Ld(a,i)&&Ld(i,a)&&(t.push(a.i/n),t.push(r.i/n),t.push(i.i/n),Nd(r),Nd(r.next),r=e=i),r=r.next}while(r!==e);return sd(r)}function dd(e,t,n,r,a,i){var o=e;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&Md(o,s)){var c=Pd(o,s);return o=sd(o,o.next),c=sd(c,c.next),cd(o,t,n,r,a,i),void cd(c,t,n,r,a,i)}s=s.next}o=o.next}while(o!==e)}function hd(e,t,n,r){var a,i,o,s,c,u=[];for(a=0,i=t.length;a<i;a++)o=t[a]*r,s=a<i-1?t[a+1]*r:e.length,c=od(e,o,s,r,!1),c===c.next&&(c.steiner=!0),u.push(wd(c));for(u.sort(pd),a=0;a<u.length;a++)bd(u[a],n),n=sd(n,n.next);return n}function pd(e,t){return e.x-t.x}function bd(e,t){if(t=md(e,t),t){var n=Pd(t,e);sd(t,t.next),sd(n,n.next)}}function md(e,t){var n,r=t,a=e.x,i=e.y,o=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>o){if(o=s,s===a){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(a===o)return n;var c,u=n,l=n.x,f=n.y,d=1/0;r=n;do{a>=r.x&&r.x>=l&&a!==r.x&&_d(i<f?a:o,i,l,f,i<f?o:a,i,r.x,r.y)&&(c=Math.abs(i-r.y)/(a-r.x),Ld(r,e)&&(c<d||c===d&&(r.x>n.x||r.x===n.x&&vd(n,r)))&&(n=r,d=c)),r=r.next}while(r!==u);return n}function vd(e,t){return Td(e.prev,e,t.prev)<0&&Td(t.next,e,e.next)<0}function gd(e,t,n,r){var a=e;do{null===a.z&&(a.z=xd(a.x,a.y,t,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,yd(a)}function yd(e){var t,n,r,a,i,o,s,c,u=1;do{n=e,e=null,i=null,o=0;while(n){for(o++,r=n,s=0,t=0;t<u;t++)if(s++,r=r.nextZ,!r)break;c=u;while(s>0||c>0&&r)0!==s&&(0===c||!r||n.z<=r.z)?(a=n,n=n.nextZ,s--):(a=r,r=r.nextZ,c--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;n=r}i.nextZ=null,u*=2}while(o>1);return e}function xd(e,t,n,r,a){return e=32767*(e-n)*a,t=32767*(t-r)*a,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function wd(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function _d(e,t,n,r,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(i-s)-(a-o)*(r-s)>=0}function Md(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Cd(e,t)&&(Ld(e,t)&&Ld(t,e)&&Rd(e,t)&&(Td(e.prev,e,t.prev)||Td(e,t.prev,t))||kd(e,t)&&Td(e.prev,e,e.next)>0&&Td(t.prev,t,t.next)>0)}function Td(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function kd(e,t){return e.x===t.x&&e.y===t.y}function Sd(e,t,n,r){var a=Ad(Td(e,t,n)),i=Ad(Td(e,t,r)),o=Ad(Td(n,r,e)),s=Ad(Td(n,r,t));return a!==i&&o!==s||(!(0!==a||!Ed(e,n,t))||(!(0!==i||!Ed(e,r,t))||(!(0!==o||!Ed(n,e,r))||!(0!==s||!Ed(n,t,r)))))}function Ed(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ad(e){return e>0?1:e<0?-1:0}function Cd(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Sd(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Ld(e,t){return Td(e.prev,e,e.next)<0?Td(e,t,e.next)>=0&&Td(e,e.prev,t)>=0:Td(e,t,e.prev)<0||Td(e,e.next,t)<0}function Rd(e,t){var n=e,r=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!==n.next.y>i&&n.next.y!==n.y&&a<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function Pd(e,t){var n=new Od(e.i,e.x,e.y),r=new Od(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function Id(e,t,n,r){var a=new Od(e,t,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function Nd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Od(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dd(e,t,n,r){for(var a=0,i=t,o=n-r;i<n;i+=r)a+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return a}var Fd=function(){function e(){v(this,e)}return g(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,a=0;a<t;r=a++)n+=e[r].x*e[a].y-e[a].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],a=[];Bd(e),zd(n,e);var i=e.length;t.forEach(Bd);for(var o=0;o<t.length;o++)r.push(i),i+=t[o].length,zd(n,t[o]);for(var s=id.triangulate(n,r),c=0;c<s.length;c+=3)a.push(s.slice(c,c+3));return a}}]),e}();function Bd(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function zd(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var Ud=function(e){b(n,e);var t=m(n);function n(e,r){var a;v(this,n),a=t.call(this),a.type="ExtrudeGeometry",a.parameters={shapes:e,options:r},e=Array.isArray(e)?e:[e];for(var i=p(a),o=[],s=[],c=0,u=e.length;c<u;c++){var l=e[c];f(l)}function f(e){var t=[],n=void 0!==r.curveSegments?r.curveSegments:12,a=void 0!==r.steps?r.steps:1,c=void 0!==r.depth?r.depth:100,u=void 0===r.bevelEnabled||r.bevelEnabled,l=void 0!==r.bevelThickness?r.bevelThickness:6,f=void 0!==r.bevelSize?r.bevelSize:l-2,d=void 0!==r.bevelOffset?r.bevelOffset:0,h=void 0!==r.bevelSegments?r.bevelSegments:3,p=r.extrudePath,b=void 0!==r.UVGenerator?r.UVGenerator:Hd;void 0!==r.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=r.amount);var m,v,g,y,x,w=!1;p&&(m=p.getSpacedPoints(a),w=!0,u=!1,v=p.computeFrenetFrames(a,!1),g=new dr,y=new dr,x=new dr),u||(h=0,l=0,f=0,d=0);var _=e.extractPoints(n),M=_.shape,T=_.holes,k=!Fd.isClockWise(M);if(k){M=M.reverse();for(var S=0,E=T.length;S<E;S++){var A=T[S];Fd.isClockWise(A)&&(T[S]=A.reverse())}}for(var C=Fd.triangulateShape(M,T),L=M,R=0,P=T.length;R<P;R++){var I=T[R];M=M.concat(I)}function N(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var O=M.length,D=C.length;function F(e,t,n){var r,a,i,o=e.x-t.x,s=e.y-t.y,c=n.x-e.x,u=n.y-e.y,l=o*o+s*s,f=o*u-s*c;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(l),h=Math.sqrt(c*c+u*u),p=t.x-s/d,b=t.y+o/d,m=n.x-u/h,v=n.y+c/h,g=((m-p)*u-(v-b)*c)/(o*u-s*c);r=p+o*g-e.x,a=b+s*g-e.y;var y=r*r+a*a;if(y<=2)return new er(r,a);i=Math.sqrt(y/2)}else{var x=!1;o>Number.EPSILON?c>Number.EPSILON&&(x=!0):o<-Number.EPSILON?c<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(u)&&(x=!0),x?(r=-s,a=o,i=Math.sqrt(l)):(r=o,a=s,i=Math.sqrt(l/2))}return new er(r/i,a/i)}for(var B=[],z=0,U=L.length,H=U-1,G=z+1;z<U;z++,H++,G++)H===U&&(H=0),G===U&&(G=0),B[z]=F(L[z],L[H],L[G]);for(var j,V=[],W=B.concat(),q=0,X=T.length;q<X;q++){var Y=T[q];j=[];for(var Z=0,J=Y.length,K=J-1,Q=Z+1;Z<J;Z++,K++,Q++)K===J&&(K=0),Q===J&&(Q=0),j[Z]=F(Y[Z],Y[K],Y[Q]);V.push(j),W=W.concat(j)}for(var $=0;$<h;$++){for(var ee=$/h,te=l*Math.cos(ee*Math.PI/2),ne=f*Math.sin(ee*Math.PI/2)+d,re=0,ae=L.length;re<ae;re++){var ie=N(L[re],B[re],ne);Ne(ie.x,ie.y,-te)}for(var oe=0,se=T.length;oe<se;oe++){var ce=T[oe];j=V[oe];for(var ue=0,le=ce.length;ue<le;ue++){var fe=N(ce[ue],j[ue],ne);Ne(fe.x,fe.y,-te)}}}for(var de=f+d,he=0;he<O;he++){var pe=u?N(M[he],W[he],de):M[he];w?(y.copy(v.normals[0]).multiplyScalar(pe.x),g.copy(v.binormals[0]).multiplyScalar(pe.y),x.copy(m[0]).add(y).add(g),Ne(x.x,x.y,x.z)):Ne(pe.x,pe.y,0)}for(var be=1;be<=a;be++)for(var me=0;me<O;me++){var ve=u?N(M[me],W[me],de):M[me];w?(y.copy(v.normals[be]).multiplyScalar(ve.x),g.copy(v.binormals[be]).multiplyScalar(ve.y),x.copy(m[be]).add(y).add(g),Ne(x.x,x.y,x.z)):Ne(ve.x,ve.y,c/a*be)}for(var ge=h-1;ge>=0;ge--){for(var ye=ge/h,xe=l*Math.cos(ye*Math.PI/2),we=f*Math.sin(ye*Math.PI/2)+d,_e=0,Me=L.length;_e<Me;_e++){var Te=N(L[_e],B[_e],we);Ne(Te.x,Te.y,c+xe)}for(var ke=0,Se=T.length;ke<Se;ke++){var Ee=T[ke];j=V[ke];for(var Ae=0,Ce=Ee.length;Ae<Ce;Ae++){var Le=N(Ee[Ae],j[Ae],we);w?Ne(Le.x,Le.y+m[a-1].y,m[a-1].x+xe):Ne(Le.x,Le.y,c+xe)}}}function Re(){var e=o.length/3;if(u){for(var t=0,n=O*t,r=0;r<D;r++){var s=C[r];Oe(s[2]+n,s[1]+n,s[0]+n)}t=a+2*h,n=O*t;for(var c=0;c<D;c++){var l=C[c];Oe(l[0]+n,l[1]+n,l[2]+n)}}else{for(var f=0;f<D;f++){var d=C[f];Oe(d[2],d[1],d[0])}for(var p=0;p<D;p++){var b=C[p];Oe(b[0]+O*a,b[1]+O*a,b[2]+O*a)}}i.addGroup(e,o.length/3-e,0)}function Pe(){var e=o.length/3,t=0;Ie(L,t),t+=L.length;for(var n=0,r=T.length;n<r;n++){var a=T[n];Ie(a,t),t+=a.length}i.addGroup(e,o.length/3-e,1)}function Ie(e,t){var n=e.length;while(--n>=0){var r=n,i=n-1;i<0&&(i=e.length-1);for(var o=0,s=a+2*h;o<s;o++){var c=O*o,u=O*(o+1),l=t+r+c,f=t+i+c,d=t+i+u,p=t+r+u;De(l,f,d,p)}}}function Ne(e,n,r){t.push(e),t.push(n),t.push(r)}function Oe(e,t,n){Fe(e),Fe(t),Fe(n);var r=o.length/3,a=b.generateTopUV(i,o,r-3,r-2,r-1);Be(a[0]),Be(a[1]),Be(a[2])}function De(e,t,n,r){Fe(e),Fe(t),Fe(r),Fe(t),Fe(n),Fe(r);var a=o.length/3,s=b.generateSideWallUV(i,o,a-6,a-3,a-2,a-1);Be(s[0]),Be(s[1]),Be(s[3]),Be(s[1]),Be(s[2]),Be(s[3])}function Fe(e){o.push(t[3*e+0]),o.push(t[3*e+1]),o.push(t[3*e+2])}function Be(e){s.push(e.x),s.push(e.y)}Re(),Pe()}return a.setAttribute("position",new qa(o,3)),a.setAttribute("uv",new qa(s,2)),a.computeVertexNormals(),a}return g(n,[{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this),t=this.parameters.shapes,r=this.parameters.options;return Gd(t,r,e)}}]),n}(ri),Hd={generateTopUV:function(e,t,n,r,a){var i=t[3*n],o=t[3*n+1],s=t[3*r],c=t[3*r+1],u=t[3*a],l=t[3*a+1];return[new er(i,o),new er(s,c),new er(u,l)]},generateSideWallUV:function(e,t,n,r,a,i){var o=t[3*n],s=t[3*n+1],c=t[3*n+2],u=t[3*r],l=t[3*r+1],f=t[3*r+2],d=t[3*a],h=t[3*a+1],p=t[3*a+2],b=t[3*i],m=t[3*i+1],v=t[3*i+2];return Math.abs(s-l)<Math.abs(o-u)?[new er(o,1-c),new er(u,1-f),new er(d,1-p),new er(b,1-v)]:[new er(s,1-c),new er(l,1-f),new er(h,1-p),new er(m,1-v)]}};function Gd(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,a=e.length;r<a;r++){var i=e[r];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}var jd=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,n);var i=(1+Math.sqrt(5))/2,o=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return e=t.call(this,o,s,r,a),e.type="IcosahedronGeometry",e.parameters={radius:r,detail:a},e}return n}(Qf),Vd=function(e){b(n,e);var t=m(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;v(this,n),r=t.call(this),r.type="LatheGeometry",r.parameters={points:e,segments:a,phiStart:i,phiLength:o},a=Math.floor(a),o=Nn(o,0,2*Math.PI);for(var s=[],c=[],u=[],l=1/a,f=new dr,d=new er,h=0;h<=a;h++)for(var p=i+h*l*o,b=Math.sin(p),m=Math.cos(p),g=0;g<=e.length-1;g++)f.x=e[g].x*b,f.y=e[g].y,f.z=e[g].x*m,c.push(f.x,f.y,f.z),d.x=h/a,d.y=g/(e.length-1),u.push(d.x,d.y);for(var y=0;y<a;y++)for(var x=0;x<e.length-1;x++){var w=x+y*e.length,_=w,M=w+e.length,T=w+e.length+1,k=w+1;s.push(_,M,k),s.push(M,T,k)}if(r.setIndex(s),r.setAttribute("position",new qa(c,3)),r.setAttribute("uv",new qa(u,2)),r.computeVertexNormals(),o===2*Math.PI)for(var S=r.attributes.normal.array,E=new dr,A=new dr,C=new dr,L=a*e.length*3,R=0,P=0;R<e.length;R++,P+=3)E.x=S[P+0],E.y=S[P+1],E.z=S[P+2],A.x=S[L+P+0],A.y=S[L+P+1],A.z=S[L+P+2],C.addVectors(E,A).normalize(),S[P+0]=S[L+P+0]=C.x,S[P+1]=S[L+P+1]=C.y,S[P+2]=S[L+P+2]=C.z;return r}return n}(ri),Wd=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,n);var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return e=t.call(this,i,o,r,a),e.type="OctahedronGeometry",e.parameters={radius:r,detail:a},e}return n}(Qf),qd=function(e){b(n,e);var t=m(n);function n(e,r,a){var i;v(this,n),i=t.call(this),i.type="ParametricGeometry",i.parameters={func:e,slices:r,stacks:a};var o=[],s=[],c=[],u=[],l=1e-5,f=new dr,d=new dr,h=new dr,p=new dr,b=new dr;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var m=r+1,g=0;g<=a;g++)for(var y=g/a,x=0;x<=r;x++){var w=x/r;e(w,y,d),s.push(d.x,d.y,d.z),w-l>=0?(e(w-l,y,h),p.subVectors(d,h)):(e(w+l,y,h),p.subVectors(h,d)),y-l>=0?(e(w,y-l,h),b.subVectors(d,h)):(e(w,y+l,h),b.subVectors(h,d)),f.crossVectors(p,b).normalize(),c.push(f.x,f.y,f.z),u.push(w,y)}for(var _=0;_<a;_++)for(var M=0;M<r;M++){var T=_*m+M,k=_*m+M+1,S=(_+1)*m+M+1,E=(_+1)*m+M;o.push(T,k,E),o.push(k,S,E)}return i.setIndex(o),i.setAttribute("position",new qa(s,3)),i.setAttribute("normal",new qa(c,3)),i.setAttribute("uv",new qa(u,2)),i}return n}(ri),Xd=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;v(this,n),e=t.call(this),e.type="RingGeometry",e.parameters={innerRadius:r,outerRadius:a,thetaSegments:i,phiSegments:o,thetaStart:s,thetaLength:c},i=Math.max(3,i),o=Math.max(1,o);for(var u=[],l=[],f=[],d=[],h=r,p=(a-r)/o,b=new dr,m=new er,g=0;g<=o;g++){for(var y=0;y<=i;y++){var x=s+y/i*c;b.x=h*Math.cos(x),b.y=h*Math.sin(x),l.push(b.x,b.y,b.z),f.push(0,0,1),m.x=(b.x/a+1)/2,m.y=(b.y/a+1)/2,d.push(m.x,m.y)}h+=p}for(var w=0;w<o;w++)for(var _=w*(i+1),M=0;M<i;M++){var T=M+_,k=T,S=T+i+1,E=T+i+2,A=T+1;u.push(k,S,A),u.push(S,E,A)}return e.setIndex(u),e.setAttribute("position",new qa(l,3)),e.setAttribute("normal",new qa(f,3)),e.setAttribute("uv",new qa(d,2)),e}return n}(ri),Yd=function(e){b(n,e);var t=m(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;v(this,n),r=t.call(this),r.type="ShapeGeometry",r.parameters={shapes:e,curveSegments:a};var i=[],o=[],s=[],c=[],u=0,l=0;if(!1===Array.isArray(e))d(e);else for(var f=0;f<e.length;f++)d(e[f]),r.addGroup(u,l,f),u+=l,l=0;function d(e){var t=o.length/3,n=e.extractPoints(a),r=n.shape,u=n.holes;!1===Fd.isClockWise(r)&&(r=r.reverse());for(var f=0,d=u.length;f<d;f++){var h=u[f];!0===Fd.isClockWise(h)&&(u[f]=h.reverse())}for(var p=Fd.triangulateShape(r,u),b=0,m=u.length;b<m;b++){var v=u[b];r=r.concat(v)}for(var g=0,y=r.length;g<y;g++){var x=r[g];o.push(x.x,x.y,0),s.push(0,0,1),c.push(x.x,x.y)}for(var w=0,_=p.length;w<_;w++){var M=p[w],T=M[0]+t,k=M[1]+t,S=M[2]+t;i.push(T,k,S),l+=3}}return r.setIndex(i),r.setAttribute("position",new qa(o,3)),r.setAttribute("normal",new qa(s,3)),r.setAttribute("uv",new qa(c,2)),r}return g(n,[{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this),t=this.parameters.shapes;return Zd(t,e)}}]),n}(ri);function Zd(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var a=e[n];t.shapes.push(a.uuid)}else t.shapes.push(e.uuid);return t}var Jd=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;v(this,n),e=t.call(this),e.type="SphereGeometry",e.parameters={radius:r,widthSegments:a,heightSegments:i,phiStart:o,phiLength:s,thetaStart:c,thetaLength:u},a=Math.max(3,Math.floor(a)),i=Math.max(2,Math.floor(i));for(var l=Math.min(c+u,Math.PI),f=0,d=[],h=new dr,p=new dr,b=[],m=[],g=[],y=[],x=0;x<=i;x++){var w=[],_=x/i,M=0;0==x&&0==c?M=.5/a:x==i&&l==Math.PI&&(M=-.5/a);for(var T=0;T<=a;T++){var k=T/a;h.x=-r*Math.cos(o+k*s)*Math.sin(c+_*u),h.y=r*Math.cos(c+_*u),h.z=r*Math.sin(o+k*s)*Math.sin(c+_*u),m.push(h.x,h.y,h.z),p.copy(h).normalize(),g.push(p.x,p.y,p.z),y.push(k+M,1-_),w.push(f++)}d.push(w)}for(var S=0;S<i;S++)for(var E=0;E<a;E++){var A=d[S][E+1],C=d[S][E],L=d[S+1][E],R=d[S+1][E+1];(0!==S||c>0)&&b.push(A,C,R),(S!==i-1||l<Math.PI)&&b.push(C,L,R)}return e.setIndex(b),e.setAttribute("position",new qa(m,3)),e.setAttribute("normal",new qa(g,3)),e.setAttribute("uv",new qa(y,2)),e}return n}(ri),Kd=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,n);var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];return e=t.call(this,i,o,r,a),e.type="TetrahedronGeometry",e.parameters={radius:r,detail:a},e}return n}(Qf),Qd=function(e){b(n,e);var t=m(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,n);var i=a.font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),l(r,new ri);var o=i.generateShapes(e,a.size);return a.depth=void 0!==a.height?a.height:50,void 0===a.bevelThickness&&(a.bevelThickness=10),void 0===a.bevelSize&&(a.bevelSize=8),void 0===a.bevelEnabled&&(a.bevelEnabled=!1),r=t.call(this,o,a),r.type="TextGeometry",r}return n}(Ud),$d=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;v(this,n),e=t.call(this),e.type="TorusGeometry",e.parameters={radius:r,tube:a,radialSegments:i,tubularSegments:o,arc:s},i=Math.floor(i),o=Math.floor(o);for(var c=[],u=[],l=[],f=[],d=new dr,h=new dr,p=new dr,b=0;b<=i;b++)for(var m=0;m<=o;m++){var g=m/o*s,y=b/i*Math.PI*2;h.x=(r+a*Math.cos(y))*Math.cos(g),h.y=(r+a*Math.cos(y))*Math.sin(g),h.z=a*Math.sin(y),u.push(h.x,h.y,h.z),d.x=r*Math.cos(g),d.y=r*Math.sin(g),p.subVectors(h,d).normalize(),l.push(p.x,p.y,p.z),f.push(m/o),f.push(b/i)}for(var x=1;x<=i;x++)for(var w=1;w<=o;w++){var _=(o+1)*x+w-1,M=(o+1)*(x-1)+w-1,T=(o+1)*(x-1)+w,k=(o+1)*x+w;c.push(_,M,k),c.push(M,T,k)}return e.setIndex(c),e.setAttribute("position",new qa(u,3)),e.setAttribute("normal",new qa(l,3)),e.setAttribute("uv",new qa(f,2)),e}return n}(ri),eh=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;v(this,n),e=t.call(this),e.type="TorusKnotGeometry",e.parameters={radius:r,tube:a,tubularSegments:i,radialSegments:o,p:s,q:c},i=Math.floor(i),o=Math.floor(o);for(var u=[],l=[],f=[],d=[],h=new dr,p=new dr,b=new dr,m=new dr,g=new dr,y=new dr,x=new dr,w=0;w<=i;++w){var _=w/i*s*Math.PI*2;I(_,s,c,r,b),I(_+.01,s,c,r,m),y.subVectors(m,b),x.addVectors(m,b),g.crossVectors(y,x),x.crossVectors(g,y),g.normalize(),x.normalize();for(var M=0;M<=o;++M){var T=M/o*Math.PI*2,k=-a*Math.cos(T),S=a*Math.sin(T);h.x=b.x+(k*x.x+S*g.x),h.y=b.y+(k*x.y+S*g.y),h.z=b.z+(k*x.z+S*g.z),l.push(h.x,h.y,h.z),p.subVectors(h,b).normalize(),f.push(p.x,p.y,p.z),d.push(w/i),d.push(M/o)}}for(var E=1;E<=i;E++)for(var A=1;A<=o;A++){var C=(o+1)*(E-1)+(A-1),L=(o+1)*E+(A-1),R=(o+1)*E+A,P=(o+1)*(E-1)+A;u.push(C,L,P),u.push(L,R,P)}function I(e,t,n,r,a){var i=Math.cos(e),o=Math.sin(e),s=n/t*e,c=Math.cos(s);a.x=r*(2+c)*.5*i,a.y=r*(2+c)*o*.5,a.z=r*Math.sin(s)*.5}return e.setIndex(u),e.setAttribute("position",new qa(l,3)),e.setAttribute("normal",new qa(f,3)),e.setAttribute("uv",new qa(d,2)),e}return n}(ri),th=function(e){b(n,e);var t=m(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];v(this,n),r=t.call(this),r.type="TubeGeometry",r.parameters={path:e,tubularSegments:a,radius:i,radialSegments:o,closed:s};var c=e.computeFrenetFrames(a,s);r.tangents=c.tangents,r.normals=c.normals,r.binormals=c.binormals;var u=new dr,l=new dr,f=new er,d=new dr,h=[],p=[],b=[],m=[];function g(){for(var e=0;e<a;e++)y(e);y(!1===s?a:0),w(),x()}function y(t){d=e.getPointAt(t/a,d);for(var n=c.normals[t],r=c.binormals[t],s=0;s<=o;s++){var f=s/o*Math.PI*2,b=Math.sin(f),m=-Math.cos(f);l.x=m*n.x+b*r.x,l.y=m*n.y+b*r.y,l.z=m*n.z+b*r.z,l.normalize(),p.push(l.x,l.y,l.z),u.x=d.x+i*l.x,u.y=d.y+i*l.y,u.z=d.z+i*l.z,h.push(u.x,u.y,u.z)}}function x(){for(var e=1;e<=a;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),r=(o+1)*e+(t-1),i=(o+1)*e+t,s=(o+1)*(e-1)+t;m.push(n,r,s),m.push(r,i,s)}}function w(){for(var e=0;e<=a;e++)for(var t=0;t<=o;t++)f.x=e/a,f.y=t/o,b.push(f.x,f.y)}return g(),r.setIndex(m),r.setAttribute("position",new qa(h,3)),r.setAttribute("normal",new qa(p,3)),r.setAttribute("uv",new qa(b,2)),r}return g(n,[{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}]),n}(ri),nh=function(e){b(n,e);var t=m(n);function n(e){var r;if(v(this,n),r=t.call(this),r.type="WireframeGeometry",!0===e.isGeometry)return console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),l(r);var a=[],i=[0,0],o={},s=new dr;if(null!==e.index){var c=e.attributes.position,u=e.index,f=e.groups;0===f.length&&(f=[{start:0,count:u.count,materialIndex:0}]);for(var d=0,h=f.length;d<h;++d)for(var p=f[d],b=p.start,m=p.count,g=b,y=b+m;g<y;g+=3)for(var x=0;x<3;x++){var w=u.getX(g+x),_=u.getX(g+(x+1)%3);i[0]=Math.min(w,_),i[1]=Math.max(w,_);var M=i[0]+","+i[1];void 0===o[M]&&(o[M]={index1:i[0],index2:i[1]})}for(var T in o){var k=o[T];s.fromBufferAttribute(c,k.index1),a.push(s.x,s.y,s.z),s.fromBufferAttribute(c,k.index2),a.push(s.x,s.y,s.z)}}else for(var S=e.attributes.position,E=0,A=S.count/3;E<A;E++)for(var C=0;C<3;C++){var L=3*E+C;s.fromBufferAttribute(S,L),a.push(s.x,s.y,s.z);var R=3*E+(C+1)%3;s.fromBufferAttribute(S,R),a.push(s.x,s.y,s.z)}return r.setAttribute("position",new qa(a,3)),r}return n}(ri),rh=Object.freeze({__proto__:null,BoxGeometry:Ti,BoxBufferGeometry:Ti,CircleGeometry:Zf,CircleBufferGeometry:Zf,ConeGeometry:Kf,ConeBufferGeometry:Kf,CylinderGeometry:Jf,CylinderBufferGeometry:Jf,DodecahedronGeometry:$f,DodecahedronBufferGeometry:$f,EdgesGeometry:ad,ExtrudeGeometry:Ud,ExtrudeBufferGeometry:Ud,IcosahedronGeometry:jd,IcosahedronBufferGeometry:jd,LatheGeometry:Vd,LatheBufferGeometry:Vd,OctahedronGeometry:Wd,OctahedronBufferGeometry:Wd,ParametricGeometry:qd,ParametricBufferGeometry:qd,PlaneGeometry:ji,PlaneBufferGeometry:ji,PolyhedronGeometry:Qf,PolyhedronBufferGeometry:Qf,RingGeometry:Xd,RingBufferGeometry:Xd,ShapeGeometry:Yd,ShapeBufferGeometry:Yd,SphereGeometry:Jd,SphereBufferGeometry:Jd,TetrahedronGeometry:Kd,TetrahedronBufferGeometry:Kd,TextGeometry:Qd,TextBufferGeometry:Qd,TorusGeometry:$d,TorusBufferGeometry:$d,TorusKnotGeometry:eh,TorusKnotBufferGeometry:eh,TubeGeometry:th,TubeBufferGeometry:th,WireframeGeometry:nh}),ah=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="ShadowMaterial",r.color=new Ba(0),r.transparent=!0,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n}(Ra);ah.prototype.isShadowMaterial=!0;var ih=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this,e),r.type="RawShaderMaterial",r}return n}(Li);ih.prototype.isRawShaderMaterial=!0;var oh=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new Ba(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Ba(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=xn,r.normalScale=new er(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.vertexTangents=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this}}]),n}(Ra);oh.prototype.isMeshStandardMaterial=!0;var sh=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoat=0,r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new er(1,1),r.clearcoatNormalMap=null,r.reflectivity=.5,Object.defineProperty(p(r),"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Nn(2.5*(e-1)/(e+1),0,1)}}),r.sheen=null,r.transmission=0,r.transmissionMap=null,r.thickness=.01,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new Ba(1,1,1),r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Ba).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this}}]),n}(oh);sh.prototype.isMeshPhysicalMaterial=!0;var ch=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="MeshPhongMaterial",r.color=new Ba(16777215),r.specular=new Ba(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Ba(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=xn,r.normalScale=new er(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=he,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}]),n}(Ra);ch.prototype.isMeshPhongMaterial=!0;var uh=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.defines={TOON:""},r.type="MeshToonMaterial",r.color=new Ba(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Ba(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=xn,r.normalScale=new er(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}]),n}(Ra);uh.prototype.isMeshToonMaterial=!0;var lh=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=xn,r.normalScale=new er(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}]),n}(Ra);lh.prototype.isMeshNormalMaterial=!0;var fh=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="MeshLambertMaterial",r.color=new Ba(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Ba(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=he,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}]),n}(Ra);fh.prototype.isMeshLambertMaterial=!0;var dh=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new Ba(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=xn,r.normalScale=new er(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}]),n}(Ra);dh.prototype.isMeshMatcapMaterial=!0;var hh=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(Ef);hh.prototype.isLineDashedMaterial=!0;var ph=Object.freeze({__proto__:null,ShadowMaterial:ah,SpriteMaterial:ql,RawShaderMaterial:ih,ShaderMaterial:Li,PointsMaterial:Bf,MeshPhysicalMaterial:sh,MeshStandardMaterial:oh,MeshPhongMaterial:ch,MeshToonMaterial:uh,MeshNormalMaterial:lh,MeshLambertMaterial:fh,MeshDepthMaterial:_l,MeshDistanceMaterial:Ml,MeshBasicMaterial:za,MeshMatcapMaterial:dh,LineDashedMaterial:hh,LineBasicMaterial:Ef,Material:Ra}),bh={arraySlice:function(e,t,n){return bh.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,r=new Array(n),a=0;a!==n;++a)r[a]=a;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,a=new e.constructor(r),i=0,o=0;o!==r;++i)for(var s=n[i]*t,c=0;c!==t;++c)a[o++]=e[s+c];return a},flattenJSON:function(e,t,n,r){var a=1,i=e[0];while(void 0!==i&&void 0===i[r])i=e[a++];if(void 0!==i){var o=i[r];if(void 0!==o)if(Array.isArray(o))do{o=i[r],void 0!==o&&(t.push(i.time),n.push.apply(n,o)),i=e[a++]}while(void 0!==i);else if(void 0!==o.toArray)do{o=i[r],void 0!==o&&(t.push(i.time),o.toArray(n,n.length)),i=e[a++]}while(void 0!==i);else do{o=i[r],void 0!==o&&(t.push(i.time),n.push(o)),i=e[a++]}while(void 0!==i)}},subclip:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,i=e.clone();i.name=t;for(var o=[],s=0;s<i.tracks.length;++s){for(var c=i.tracks[s],u=c.getValueSize(),l=[],f=[],d=0;d<c.times.length;++d){var h=c.times[d]*a;if(!(h<n||h>=r)){l.push(c.times[d]);for(var p=0;p<u;++p)f.push(c.values[d*u+p])}}0!==l.length&&(c.times=bh.convertArray(l,c.times.constructor),c.values=bh.convertArray(f,c.values.constructor),o.push(c))}i.tracks=o;for(var b=1/0,m=0;m<i.tracks.length;++m)b>i.tracks[m].times[0]&&(b=i.tracks[m].times[0]);for(var v=0;v<i.tracks.length;++v)i.tracks[v].shift(-1*b);return i.resetDuration(),i},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var a=n.tracks.length,i=t/r,o=function(t){var r=n.tracks[t],a=r.ValueTypeName;if("bool"===a||"string"===a)return"continue";var o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===a}));if(void 0===o)return"continue";var s=0,c=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=c/3);var u=0,l=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=l/3);var f=r.times.length-1,d=void 0;if(i<=r.times[0]){var h=s,p=c-s;d=bh.arraySlice(r.values,h,p)}else if(i>=r.times[f]){var b=f*c+s,m=b+c-s;d=bh.arraySlice(r.values,b,m)}else{var v=r.createInterpolant(),g=s,y=c-s;v.evaluate(i),d=bh.arraySlice(v.resultBuffer,g,y)}if("quaternion"===a){var x=(new fr).fromArray(d).normalize().conjugate();x.toArray(d)}for(var w=o.times.length,_=0;_<w;++_){var M=_*l+u;if("quaternion"===a)fr.multiplyQuaternionsFlat(o.values,M,d,0,o.values,M);else for(var T=l-2*u,k=0;k<T;++k)o.values[M+k]-=d[k]}},s=0;s<a;++s)o(s);return e.blendMode=on,e}},mh=function(){function e(t,n,r,a){v(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return g(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],a=t[n-1];e:{t:{var i;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<a)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,a)}if(n===o)break;if(a=r,r=t[++n],e<r)break t}i=t.length;break n}if(e>=a)break e;var s=t[1];e<s&&(n=2,a=s);for(var c=n-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===c)break;if(r=a,a=t[--n-1],e>=a)break t}i=n,n=0}while(n<i){var u=n+i>>>1;e<t[u]?i=u:n=u+1}if(r=t[n],a=t[n-1],void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,a,e)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r,i=0;i!==r;++i)t[i]=n[a+i];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();mh.prototype.beforeStart_=mh.prototype.copySampleValue_,mh.prototype.afterEnd_=mh.prototype.copySampleValue_;var vh=function(e){b(n,e);var t=m(n);function n(e,r,a,i){var o;return v(this,n),o=t.call(this,e,r,a,i),o._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:tn,endingEnd:tn},o}return g(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,a=e-2,i=e+1,o=r[a],s=r[i];if(void 0===o)switch(this.getSettings_().endingStart){case nn:a=e,o=2*t-n;break;case rn:a=r.length-2,o=t+r[a]-r[a+1];break;default:a=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case nn:i=e,s=2*n-t;break;case rn:i=1,s=n+r[1]-r[0];break;default:i=e-1,s=t}var c=.5*(n-t),u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(s-n),this._offsetPrev=a*u,this._offsetNext=i*u}},{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,u=this._offsetPrev,l=this._offsetNext,f=this._weightPrev,d=this._weightNext,h=(n-t)/(r-t),p=h*h,b=p*h,m=-f*b+2*f*p-f*h,v=(1+f)*b+(-1.5-2*f)*p+(-.5+f)*h+1,g=(-1-d)*b+(1.5+d)*p+.5*h,y=d*b-d*p,x=0;x!==o;++x)a[x]=m*i[u+x]+v*i[c+x]+g*i[s+x]+y*i[l+x];return a}}]),n}(mh),gh=function(e){b(n,e);var t=m(n);function n(e,r,a,i){return v(this,n),t.call(this,e,r,a,i)}return g(n,[{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,u=(n-t)/(r-t),l=1-u,f=0;f!==o;++f)a[f]=i[c+f]*l+i[s+f]*u;return a}}]),n}(mh),yh=function(e){b(n,e);var t=m(n);function n(e,r,a,i){return v(this,n),t.call(this,e,r,a,i)}return g(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(mh),xh=function(){function e(t,n,r,a){if(v(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=bh.convertArray(n,this.TimeBufferType),this.values=bh.convertArray(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}return g(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new yh(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new gh(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new vh(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Qt:t=this.InterpolantFactoryMethodDiscrete;break;case $t:t=this.InterpolantFactoryMethodLinear;break;case en:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Qt;case this.InterpolantFactoryMethodLinear:return $t;case this.InterpolantFactoryMethodSmooth:return en}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){var n=this.times,r=n.length,a=0,i=r-1;while(a!==r&&n[a]<e)++a;while(-1!==i&&n[i]>t)--i;if(++i,0!==a||i!==r){a>=i&&(i=Math.max(i,1),a=i-1);var o=this.getValueSize();this.times=bh.arraySlice(n,a,i),this.values=bh.arraySlice(this.values,a*o,i*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var i=null,o=0;o!==a;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==i&&i>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,i),e=!1;break}i=s}if(void 0!==r&&bh.isTypedArray(r))for(var c=0,u=r.length;c!==u;++c){var l=r[c];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,l),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=bh.arraySlice(this.times),t=bh.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===en,a=e.length-1,i=1,o=1;o<a;++o){var s=!1,c=e[o],u=e[o+1];if(c!==u&&(1!==o||c!==e[0]))if(r)s=!0;else for(var l=o*n,f=l-n,d=l+n,h=0;h!==n;++h){var p=t[l+h];if(p!==t[f+h]||p!==t[d+h]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];for(var b=o*n,m=i*n,v=0;v!==n;++v)t[m+v]=t[b+v]}++i}}if(a>0){e[i]=e[a];for(var g=a*n,y=i*n,x=0;x!==n;++x)t[y+x]=t[g+x];++i}return i!==e.length?(this.times=bh.arraySlice(e,0,i),this.values=bh.arraySlice(t,0,i*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=bh.arraySlice(this.times,0),t=bh.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:bh.convertArray(e.times,Array),values:bh.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();xh.prototype.TimeBufferType=Float32Array,xh.prototype.ValueBufferType=Float32Array,xh.prototype.DefaultInterpolation=$t;var wh=function(e){b(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return n}(xh);wh.prototype.ValueTypeName="bool",wh.prototype.ValueBufferType=Array,wh.prototype.DefaultInterpolation=Qt,wh.prototype.InterpolantFactoryMethodLinear=void 0,wh.prototype.InterpolantFactoryMethodSmooth=void 0;var _h=function(e){b(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return n}(xh);_h.prototype.ValueTypeName="color";var Mh=function(e){b(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return n}(xh);Mh.prototype.ValueTypeName="number";var Th=function(e){b(n,e);var t=m(n);function n(e,r,a,i){return v(this,n),t.call(this,e,r,a,i)}return g(n,[{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),c=e*o,u=c+o;c!==u;c+=4)fr.slerpFlat(a,0,i,c-o,i,c,s);return a}}]),n}(mh),kh=function(e){b(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Th(this.times,this.values,this.getValueSize(),e)}}]),n}(xh);kh.prototype.ValueTypeName="quaternion",kh.prototype.DefaultInterpolation=$t,kh.prototype.InterpolantFactoryMethodSmooth=void 0;var Sh=function(e){b(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return n}(xh);Sh.prototype.ValueTypeName="string",Sh.prototype.ValueBufferType=Array,Sh.prototype.DefaultInterpolation=Qt,Sh.prototype.InterpolantFactoryMethodLinear=void 0,Sh.prototype.InterpolantFactoryMethodSmooth=void 0;var Eh=function(e){b(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return n}(xh);Eh.prototype.ValueTypeName="vector";var Ah=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:an;v(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=a,this.uuid=In(),this.duration<0&&this.resetDuration()}return g(e,[{key:"resetDuration",value:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),a=0,i=n.length;a!==i;++a)t.push(Lh(n[a]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},a=0,i=n.length;a!==i;++a)t.push(xh.toJSON(n[a]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var a=t.length,i=[],o=0;o<a;o++){var s=[],c=[];s.push((o+a-1)%a,o,(o+1)%a),c.push(0,1,0);var u=bh.getKeyframeOrder(s);s=bh.sortedArray(s,1,u),c=bh.sortedArray(c,1,u),r||0!==s[0]||(s.push(a),c.push(c[0])),i.push(new Mh(".morphTargetInfluences["+t[o].name+"]",s,c).scale(1/n))}return new this(e,-1,i)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},a=/^([\w-]*?)([\d]+)$/,i=0,o=e.length;i<o;i++){var s=e[i],c=s.name.match(a);if(c&&c.length>1){var u=c[1],l=r[u];l||(r[u]=l=[]),l.push(s)}}var f=[];for(var d in r)f.push(this.CreateFromMorphTargetSequence(d,r[d],t,n));return f}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,a){if(0!==n.length){var i=[],o=[];bh.flattenJSON(n,i,o,r),0!==i.length&&a.push(new e(t,i,o))}},r=[],a=e.name||"default",i=e.fps||30,o=e.blendMode,s=e.length||-1,c=e.hierarchy||[],u=0;u<c.length;u++){var l=c[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){var f={},d=void 0;for(d=0;d<l.length;d++)if(l[d].morphTargets)for(var h=0;h<l[d].morphTargets.length;h++)f[l[d].morphTargets[h]]=-1;for(var p in f){for(var b=[],m=[],v=0;v!==l[d].morphTargets.length;++v){var g=l[d];b.push(g.time),m.push(g.morphTarget===p?1:0)}r.push(new Mh(".morphTargetInfluence["+p+"]",b,m))}s=f.length*(i||1)}else{var y=".bones["+t[u].name+"]";n(Eh,y+".position",l,"pos",r),n(kh,y+".quaternion",l,"rot",r),n(Eh,y+".scale",l,"scl",r)}}if(0===r.length)return null;var x=new this(a,s,r,o);return x}}]),e}();function Ch(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Mh;case"vector":case"vector2":case"vector3":case"vector4":return Eh;case"color":return _h;case"quaternion":return kh;case"bool":case"boolean":return wh;case"string":return Sh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Lh(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Ch(e.type);if(void 0===e.times){var n=[],r=[];bh.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Rh={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Ph=function e(t,n,r){v(this,e);var a=this,i=!1,o=0,s=0,c=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===i&&void 0!==a.onStart&&a.onStart(e,o,s),i=!0},this.itemEnd=function(e){o++,void 0!==a.onProgress&&a.onProgress(e,o,s),o===s&&(i=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(e){void 0!==a.onError&&a.onError(e)},this.resolveURL=function(e){return c?c(e):e},this.setURLModifier=function(e){return c=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var r=u[t],a=u[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return a}return null}},Ih=new Ph,Nh=function(){function e(t){v(this,e),this.manager=void 0!==t?t:Ih,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return g(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,a){n.load(e,r,t,a)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),Oh={},Dh=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=Rh.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;if(void 0===Oh[e]){var o,s=/^data:(.*?)(;base64)?,(.*)$/,c=e.match(s);if(c){var u=c[1],l=!!c[2],f=c[3];f=decodeURIComponent(f),l&&(f=atob(f));try{var d,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var p=new Uint8Array(f.length),b=0;b<f.length;b++)p[b]=f.charCodeAt(b);d="blob"===h?new Blob([p.buffer],{type:u}):p.buffer;break;case"document":var m=new DOMParser;d=m.parseFromString(f,u);break;case"json":d=JSON.parse(f);break;default:d=f;break}setTimeout((function(){t&&t(d),a.manager.itemEnd(e)}),0)}catch(g){setTimeout((function(){r&&r(g),a.manager.itemError(e),a.manager.itemEnd(e)}),0)}}else{for(var v in Oh[e]=[],Oh[e].push({onLoad:t,onProgress:n,onError:r}),o=new XMLHttpRequest,o.open("GET",e,!0),o.addEventListener("load",(function(t){var n=this.response,r=Oh[e];if(delete Oh[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Rh.add(e,n);for(var i=0,o=r.length;i<o;i++){var s=r[i];s.onLoad&&s.onLoad(n)}a.manager.itemEnd(e)}else{for(var c=0,u=r.length;c<u;c++){var l=r[c];l.onError&&l.onError(t)}a.manager.itemError(e),a.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){for(var n=Oh[e],r=0,a=n.length;r<a;r++){var i=n[r];i.onProgress&&i.onProgress(t)}}),!1),o.addEventListener("error",(function(t){var n=Oh[e];delete Oh[e];for(var r=0,i=n.length;r<i;r++){var o=n[r];o.onError&&o.onError(t)}a.manager.itemError(e),a.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){var n=Oh[e];delete Oh[e];for(var r=0,i=n.length;r<i;r++){var o=n[r];o.onError&&o.onError(t)}a.manager.itemError(e),a.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)o.setRequestHeader(v,this.requestHeader[v]);o.send(null)}return a.manager.itemStart(e),o}Oh[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Nh),Fh=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=[],o=new qf,s=new Dh(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(a.withCredentials);var c=0;function u(u){s.load(e[u],(function(e){var n=a.parse(e,!0);i[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(o.minFilter=Oe),o.image=i,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(var l=0,f=e.length;l<f;++l)u(l);else s.load(e,(function(e){var n=a.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){i[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)i[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),i[s].format=n.format,i[s].width=n.width,i[s].height=n.height}o.image=i}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Oe),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}]),n}(Nh),Bh=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=Rh.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),Rh.add(e,this),t&&t(this),a.manager.itemEnd(e)}function c(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}]),n}(Nh),zh=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=new Di,i=new Bh(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);var o=0;function s(n){i.load(e[n],(function(e){a.images[n]=e,o++,6===o&&(a.needsUpdate=!0,t&&t(a))}),void 0,r)}for(var c=0;c<e.length;++c)s(c);return a}}]),n}(Nh),Uh=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new gf,o=new Dh(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,(function(e){var n=a.parse(e);n&&(void 0!==n.image?i.image=n.image:void 0!==n.data&&(i.image.width=n.width,i.image.height=n.height,i.image.data=n.data),i.wrapS=void 0!==n.wrapS?n.wrapS:Le,i.wrapT=void 0!==n.wrapT?n.wrapT:Le,i.magFilter=void 0!==n.magFilter?n.magFilter:Oe,i.minFilter=void 0!==n.minFilter?n.minFilter:Oe,i.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(i.encoding=n.encoding),void 0!==n.flipY&&(i.flipY=n.flipY),void 0!==n.format&&(i.format=n.format),void 0!==n.type&&(i.type=n.type),void 0!==n.mipmaps&&(i.mipmaps=n.mipmaps,i.minFilter=Fe),1===n.mipmapCount&&(i.minFilter=Oe),void 0!==n.generateMipmaps&&(i.generateMipmaps=n.generateMipmaps),i.needsUpdate=!0,t&&t(i,n))}),n,r),i}}]),n}(Nh),Hh=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=new ir,i=new Bh(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,(function(n){a.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);a.format=r?Ke:Qe,a.needsUpdate=!0,void 0!==t&&t(a)}),n,r),a}}]),n}(Nh),Gh=function(){function e(){v(this,e),this.type="Curve",this.arcLengthDivisions=200}return g(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),a=0;n.push(0);for(var i=1;i<=e;i++)t=this.getPoint(i/e),a+=t.distanceTo(r),n.push(a),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),a=0,i=r.length;n=t||e*r[i-1];var o,s=0,c=i-1;while(s<=c)if(a=Math.floor(s+(c-s)/2),o=r[a]-n,o<0)s=a+1;else{if(!(o>0)){c=a;break}c=a-1}if(a=c,r[a]===n)return a/(i-1);var u=r[a],l=r[a+1],f=l-u,d=(n-u)/f,h=(a+d)/(i-1);return h}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,a=e+n;r<0&&(r=0),a>1&&(a=1);var i=this.getPoint(r),o=this.getPoint(a),s=t||(i.isVector2?new er:new dr);return s.copy(o).sub(i).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new dr,r=[],a=[],i=[],o=new dr,s=new jr,c=0;c<=e;c++){var u=c/e;r[c]=this.getTangentAt(u,new dr),r[c].normalize()}a[0]=new dr,i[0]=new dr;var l=Number.MAX_VALUE,f=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);f<=l&&(l=f,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),h<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),a[0].crossVectors(r[0],o),i[0].crossVectors(r[0],a[0]);for(var p=1;p<=e;p++){if(a[p]=a[p-1].clone(),i[p]=i[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var b=Math.acos(Nn(r[p-1].dot(r[p]),-1,1));a[p].applyMatrix4(s.makeRotationAxis(o,b))}i[p].crossVectors(r[p],a[p])}if(!0===t){var m=Math.acos(Nn(a[0].dot(a[e]),-1,1));m/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(m=-m);for(var v=1;v<=e;v++)a[v].applyMatrix4(s.makeRotationAxis(r[v],m*v)),i[v].crossVectors(r[v],a[v])}return{tangents:r,normals:a,binormals:i}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),jh=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return v(this,n),e=t.call(this),e.type="EllipseCurve",e.aX=r,e.aY=a,e.xRadius=i,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=c,e.aClockwise=u,e.aRotation=l,e}return g(n,[{key:"getPoint",value:function(e,t){var n=t||new er,r=2*Math.PI,a=this.aEndAngle-this.aStartAngle,i=Math.abs(a)<Number.EPSILON;while(a<0)a+=r;while(a>r)a-=r;a<Number.EPSILON&&(a=i?0:r),!0!==this.aClockwise||i||(a===r?a=-r:a-=r);var o=this.aStartAngle+e*a,s=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),f=s-this.aX,d=c-this.aY;s=f*u-d*l+this.aX,c=f*l+d*u+this.aY}return n.set(s,c)}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return f(d(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(Gh);jh.prototype.isEllipseCurve=!0;var Vh=function(e){b(n,e);var t=m(n);function n(e,r,a,i,o,s){var c;return v(this,n),c=t.call(this,e,r,a,a,i,o,s),c.type="ArcCurve",c}return n}(jh);function Wh(){var e=0,t=0,n=0,r=0;function a(a,i,o,s){e=a,t=o,n=-3*a+3*i-2*o-s,r=2*a-2*i+o+s}return{initCatmullRom:function(e,t,n,r,i){a(t,n,i*(n-e),i*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,i,o,s){var c=(t-e)/i-(n-e)/(i+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+s)+(r-n)/s;c*=o,u*=o,a(t,n,c,u)},calc:function(a){var i=a*a,o=i*a;return e+t*a+n*i+r*o}}}Vh.prototype.isArcCurve=!0;var qh=new dr,Xh=new Wh,Yh=new Wh,Zh=new Wh,Jh=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return v(this,n),e=t.call(this),e.type="CatmullRomCurve3",e.points=r,e.closed=a,e.curveType=i,e.tension=o,e}return g(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr,a=r,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e,c=Math.floor(s),u=s-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/o)+1)*o:0===u&&c===o-1&&(c=o-2,u=1),this.closed||c>0?t=i[(c-1)%o]:(qh.subVectors(i[0],i[1]).add(i[0]),t=qh);var l=i[c%o],f=i[(c+1)%o];if(this.closed||c+2<o?n=i[(c+2)%o]:(qh.subVectors(i[o-1],i[o-2]).add(i[o-1]),n=qh),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,h=Math.pow(t.distanceToSquared(l),d),p=Math.pow(l.distanceToSquared(f),d),b=Math.pow(f.distanceToSquared(n),d);p<1e-4&&(p=1),h<1e-4&&(h=p),b<1e-4&&(b=p),Xh.initNonuniformCatmullRom(t.x,l.x,f.x,n.x,h,p,b),Yh.initNonuniformCatmullRom(t.y,l.y,f.y,n.y,h,p,b),Zh.initNonuniformCatmullRom(t.z,l.z,f.z,n.z,h,p,b)}else"catmullrom"===this.curveType&&(Xh.initCatmullRom(t.x,l.x,f.x,n.x,this.tension),Yh.initCatmullRom(t.y,l.y,f.y,n.y,this.tension),Zh.initCatmullRom(t.z,l.z,f.z,n.z,this.tension));return a.set(Xh.calc(u),Yh.calc(u),Zh.calc(u)),a}},{key:"copy",value:function(e){f(d(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){f(d(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push((new dr).fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(Gh);function Kh(e,t,n,r,a){var i=.5*(r-t),o=.5*(a-n),s=e*e,c=e*s;return(2*n-2*r+i+o)*c+(-3*n+3*r-2*i-o)*s+i*e+n}function Qh(e,t){var n=1-e;return n*n*t}function $h(e,t){return 2*(1-e)*e*t}function ep(e,t){return e*e*t}function tp(e,t,n,r){return Qh(e,t)+$h(e,n)+ep(e,r)}function np(e,t){var n=1-e;return n*n*n*t}function rp(e,t){var n=1-e;return 3*n*n*e*t}function ap(e,t){return 3*(1-e)*e*e*t}function ip(e,t){return e*e*e*t}function op(e,t,n,r,a){return np(e,t)+rp(e,n)+ap(e,r)+ip(e,a)}Jh.prototype.isCatmullRomCurve3=!0;var sp=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new er,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new er,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new er,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new er;return v(this,n),e=t.call(this),e.type="CubicBezierCurve",e.v0=r,e.v1=a,e.v2=i,e.v3=o,e}return g(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new er,n=t,r=this.v0,a=this.v1,i=this.v2,o=this.v3;return n.set(op(e,r.x,a.x,i.x,o.x),op(e,r.y,a.y,i.y,o.y)),n}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return f(d(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Gh);sp.prototype.isCubicBezierCurve=!0;var cp=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dr,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new dr,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new dr;return v(this,n),e=t.call(this),e.type="CubicBezierCurve3",e.v0=r,e.v1=a,e.v2=i,e.v3=o,e}return g(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr,n=t,r=this.v0,a=this.v1,i=this.v2,o=this.v3;return n.set(op(e,r.x,a.x,i.x,o.x),op(e,r.y,a.y,i.y,o.y),op(e,r.z,a.z,i.z,o.z)),n}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return f(d(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Gh);cp.prototype.isCubicBezierCurve3=!0;var up=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new er,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new er;return v(this,n),e=t.call(this),e.type="LineCurve",e.v1=r,e.v2=a,e}return g(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new er,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new er;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return f(d(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Gh);up.prototype.isLineCurve=!0;var lp=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dr,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr;return v(this,n),e=t.call(this),e.type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=a,e}return g(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return f(d(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Gh),fp=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new er,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new er,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new er;return v(this,n),e=t.call(this),e.type="QuadraticBezierCurve",e.v0=r,e.v1=a,e.v2=i,e}return g(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new er,n=t,r=this.v0,a=this.v1,i=this.v2;return n.set(tp(e,r.x,a.x,i.x),tp(e,r.y,a.y,i.y)),n}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return f(d(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Gh);fp.prototype.isQuadraticBezierCurve=!0;var dp=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dr,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new dr;return v(this,n),e=t.call(this),e.type="QuadraticBezierCurve3",e.v0=r,e.v1=a,e.v2=i,e}return g(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr,n=t,r=this.v0,a=this.v1,i=this.v2;return n.set(tp(e,r.x,a.x,i.x),tp(e,r.y,a.y,i.y),tp(e,r.z,a.z,i.z)),n}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return f(d(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Gh);dp.prototype.isQuadraticBezierCurve3=!0;var hp=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return v(this,n),e=t.call(this),e.type="SplineCurve",e.points=r,e}return g(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new er,n=t,r=this.points,a=(r.length-1)*e,i=Math.floor(a),o=a-i,s=r[0===i?i:i-1],c=r[i],u=r[i>r.length-2?r.length-1:i+1],l=r[i>r.length-3?r.length-1:i+2];return n.set(Kh(o,s.x,c.x,u.x,l.x),Kh(o,s.y,c.y,u.y,l.y)),n}},{key:"copy",value:function(e){f(d(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push(a.clone())}return this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var a=this.points[t];e.points.push(a.toArray())}return e}},{key:"fromJSON",value:function(e){f(d(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push((new er).fromArray(a))}return this}}]),n}(Gh);hp.prototype.isSplineCurve=!0;var pp=Object.freeze({__proto__:null,ArcCurve:Vh,CatmullRomCurve3:Jh,CubicBezierCurve:sp,CubicBezierCurve3:cp,EllipseCurve:jh,LineCurve:up,LineCurve3:lp,QuadraticBezierCurve:fp,QuadraticBezierCurve3:dp,SplineCurve:hp}),bp=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this),e.type="CurvePath",e.curves=[],e.autoClose=!1,e}return g(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new up(t,e))}},{key:"getPoint",value:function(e){var t=e*this.getLength(),n=this.getCurveLengths(),r=0;while(r<n.length){if(n[r]>=t){var a=n[r]-t,i=this.curves[r],o=i.getLength(),s=0===o?0:1-a/o;return i.getPointAt(s)}r++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,a=this.curves;r<a.length;r++)for(var i=a[r],o=i&&i.isEllipseCurve?2*t:i&&(i.isLineCurve||i.isLineCurve3)?1:i&&i.isSplineCurve?t*i.points.length:t,s=i.getPoints(o),c=0;c<s.length;c++){var u=s[c];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){f(d(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var a=this.curves[t];e.curves.push(a.toJSON())}return e}},{key:"fromJSON",value:function(e){f(d(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var a=e.curves[t];this.curves.push((new pp[a.type]).fromJSON(a))}return this}}]),n}(Gh),mp=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="Path",r.currentPoint=new er,e&&r.setFromPoints(e),r}return g(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new up(this.currentPoint.clone(),new er(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var a=new fp(this.currentPoint.clone(),new er(e,t),new er(n,r));return this.curves.push(a),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,a,i){var o=new sp(this.currentPoint.clone(),new er(e,t),new er(n,r),new er(a,i));return this.curves.push(o),this.currentPoint.set(a,i),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new hp(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,a,i){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,a,i),this}},{key:"absarc",value:function(e,t,n,r,a,i){return this.absellipse(e,t,n,n,r,a,i),this}},{key:"ellipse",value:function(e,t,n,r,a,i,o,s){var c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,n,r,a,i,o,s),this}},{key:"absellipse",value:function(e,t,n,r,a,i,o,s){var c=new jh(e,t,n,r,a,i,o,s);if(this.curves.length>0){var u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);var l=c.getPoint(1);return this.currentPoint.copy(l),this}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return f(d(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(bp),vp=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this,e),r.uuid=In(),r.type="Shape",r.holes=[],r}return g(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){f(d(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var a=e.holes[t];this.holes.push(a.clone())}return this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var a=this.holes[t];e.holes.push(a.toJSON())}return e}},{key:"fromJSON",value:function(e){f(d(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var a=e.holes[t];this.holes.push((new mp).fromJSON(a))}return this}}]),n}(mp),gp=function(e){b(n,e);var t=m(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return v(this,n),r=t.call(this),r.type="Light",r.color=new Ba(e),r.intensity=a,r}return g(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=f(d(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(pa);gp.prototype.isLight=!0;var yp=function(e){b(n,e);var t=m(n);function n(e,r,a){var i;return v(this,n),i=t.call(this,e,a),i.type="HemisphereLight",i.position.copy(pa.DefaultUp),i.updateMatrix(),i.groundColor=new Ba(r),i}return g(n,[{key:"copy",value:function(e){return gp.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(gp);yp.prototype.isHemisphereLight=!0;var xp=new jr,wp=new dr,_p=new dr,Mp=function(){function e(t){v(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new er(512,512),this.map=null,this.mapPass=null,this.matrix=new jr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ui,this._frameExtents=new er(1,1),this._viewportCount=1,this._viewports=[new sr(0,0,1,1)]}return g(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;wp.setFromMatrixPosition(e.matrixWorld),t.position.copy(wp),_p.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_p),t.updateMatrixWorld(),xp.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xp),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Tp=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this,new Pi(50,1,.5,500)),e.focus=1,e}return g(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*Pn*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&a===t.aspect&&i===t.far||(t.fov=r,t.aspect=a,t.far=i,t.updateProjectionMatrix()),f(d(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(Mp);Tp.prototype.isSpotLightShadow=!0;var kp=function(e){b(n,e);var t=m(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return v(this,n),a=t.call(this,e,r),a.type="SpotLight",a.position.copy(pa.DefaultUp),a.updateMatrix(),a.target=new pa,a.distance=i,a.angle=o,a.penumbra=s,a.decay=c,a.shadow=new Tp,a}return g(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(gp);kp.prototype.isSpotLight=!0;var Sp=new jr,Ep=new dr,Ap=new dr,Cp=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this,new Pi(90,1,.5,500)),e._frameExtents=new er(4,2),e._viewportCount=6,e._viewports=[new sr(2,1,1,1),new sr(0,1,1,1),new sr(3,1,1,1),new sr(1,1,1,1),new sr(3,0,1,1),new sr(1,0,1,1)],e._cubeDirections=[new dr(1,0,0),new dr(-1,0,0),new dr(0,0,1),new dr(0,0,-1),new dr(0,1,0),new dr(0,-1,0)],e._cubeUps=[new dr(0,1,0),new dr(0,1,0),new dr(0,1,0),new dr(0,1,0),new dr(0,0,1),new dr(0,0,-1)],e}return g(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),Ep.setFromMatrixPosition(e.matrixWorld),n.position.copy(Ep),Ap.copy(n.position),Ap.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Ap),n.updateMatrixWorld(),r.makeTranslation(-Ep.x,-Ep.y,-Ep.z),Sp.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Sp)}}]),n}(Mp);Cp.prototype.isPointLightShadow=!0;var Lp=function(e){b(n,e);var t=m(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return v(this,n),a=t.call(this,e,r),a.type="PointLight",a.distance=i,a.decay=o,a.shadow=new Cp,a}return g(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(gp);Lp.prototype.isPointLight=!0;var Rp=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return v(this,n),e=t.call(this),e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=a,e.top=i,e.bottom=o,e.near=s,e.far=c,e.updateProjectionMatrix(),e}return g(n,[{key:"copy",value:function(e,t){return f(d(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,a,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,a=n-e,i=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=c*this.view.offsetX,i=a+c*this.view.width,o-=u*this.view.offsetY,s=o-u*this.view.height}this.projectionMatrix.makeOrthographic(a,i,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=f(d(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Ri);Rp.prototype.isOrthographicCamera=!0;var Pp=function(e){b(n,e);var t=m(n);function n(){return v(this,n),t.call(this,new Rp(-5,5,5,-5,.5,500))}return n}(Mp);Pp.prototype.isDirectionalLightShadow=!0;var Ip=function(e){b(n,e);var t=m(n);function n(e,r){var a;return v(this,n),a=t.call(this,e,r),a.type="DirectionalLight",a.position.copy(pa.DefaultUp),a.updateMatrix(),a.target=new pa,a.shadow=new Pp,a}return g(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(gp);Ip.prototype.isDirectionalLight=!0;var Np=function(e){b(n,e);var t=m(n);function n(e,r){var a;return v(this,n),a=t.call(this,e,r),a.type="AmbientLight",a}return n}(gp);Np.prototype.isAmbientLight=!0;var Op=function(e){b(n,e);var t=m(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return v(this,n),a=t.call(this,e,r),a.type="RectAreaLight",a.width=i,a.height=o,a}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=f(d(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(gp);Op.prototype.isRectAreaLight=!0;var Dp=function(){function e(){v(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new dr)}return g(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.282095),t.addScaledVector(i[1],.488603*r),t.addScaledVector(i[2],.488603*a),t.addScaledVector(i[3],.488603*n),t.addScaledVector(i[4],n*r*1.092548),t.addScaledVector(i[5],r*a*1.092548),t.addScaledVector(i[6],.315392*(3*a*a-1)),t.addScaledVector(i[7],n*a*1.092548),t.addScaledVector(i[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.886227),t.addScaledVector(i[1],1.023328*r),t.addScaledVector(i[2],1.023328*a),t.addScaledVector(i[3],1.023328*n),t.addScaledVector(i[4],.858086*n*r),t.addScaledVector(i[5],.858086*r*a),t.addScaledVector(i[6],.743125*a*a-.247708),t.addScaledVector(i[7],.858086*n*a),t.addScaledVector(i[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-r*r)}}]),e}();Dp.prototype.isSphericalHarmonics3=!0;var Fp=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dp,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return v(this,n),e=t.call(this,void 0,a),e.sh=r,e}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=f(d(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(gp);Fp.prototype.isLightProbe=!0;var Bp=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this,e),r.textures={},r}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new Dh(a.manager);i.setPath(a.path),i.setRequestHeader(a.requestHeader),i.setWithCredentials(a.withCredentials),i.load(e,(function(n){try{t(a.parse(JSON.parse(n)))}catch(i){r?r(i):console.error(i),a.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new ph[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new Ba).setHex(e.sheen)),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var i=e.uniforms[a];switch(r.uniforms[a]={},i.type){case"t":r.uniforms[a].value=n(i.value);break;case"c":r.uniforms[a].value=(new Ba).setHex(i.value);break;case"v2":r.uniforms[a].value=(new er).fromArray(i.value);break;case"v3":r.uniforms[a].value=(new dr).fromArray(i.value);break;case"v4":r.uniforms[a].value=(new sr).fromArray(i.value);break;case"m3":r.uniforms[a].value=(new nr).fromArray(i.value);break;case"m4":r.uniforms[a].value=(new jr).fromArray(i.value);break;default:r.uniforms[a].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)r.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new er).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new er).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),r}},{key:"setTextures",value:function(e){return this.textures=e,this}}]),n}(Nh),zp=function(){function e(){v(this,e)}return g(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(a){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}]),e}(),Up=function(e){b(n,e);var t=m(n);function n(){var e;return v(this,n),e=t.call(this),e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(ri);Up.prototype.isInstancedBufferGeometry=!0;var Hp=function(e){b(n,e);var t=m(n);function n(e,r,a,i){var o;return v(this,n),"number"===typeof a&&(i=a,a=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),o=t.call(this,e,r,a),o.meshPerAttribute=i||1,o}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=f(d(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(Ga);Hp.prototype.isInstancedBufferAttribute=!0;var Gp=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new Dh(a.manager);i.setPath(a.path),i.setRequestHeader(a.requestHeader),i.setWithCredentials(a.withCredentials),i.load(e,(function(n){try{t(a.parse(JSON.parse(n)))}catch(i){r?r(i):console.error(i),a.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t={},n={};function r(e,n){if(void 0!==t[n])return t[n];var r=e.interleavedBuffers,i=r[n],o=a(e,i.buffer),s=Za(i.type,o),c=new Gl(s,i.stride);return c.uuid=i.uuid,t[n]=c,c}function a(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers,a=r[t],i=new Uint32Array(a).buffer;return n[t]=i,i}var i=e.isInstancedBufferGeometry?new Up:new ri,o=e.data.index;if(void 0!==o){var s=Za(o.type,o.array);i.setIndex(new Ga(s,1))}var c=e.data.attributes;for(var u in c){var l=c[u],f=void 0;if(l.isInterleavedBufferAttribute){var d=r(e.data,l.data);f=new Vl(d,l.itemSize,l.offset,l.normalized)}else{var h=Za(l.type,l.array),p=l.isInstancedBufferAttribute?Hp:Ga;f=new p(h,l.itemSize,l.normalized)}void 0!==l.name&&(f.name=l.name),void 0!==l.usage&&f.setUsage(l.usage),void 0!==l.updateRange&&(f.updateRange.offset=l.updateRange.offset,f.updateRange.count=l.updateRange.count),i.setAttribute(u,f)}var b=e.data.morphAttributes;if(b)for(var m in b){for(var v=b[m],g=[],y=0,x=v.length;y<x;y++){var w=v[y],_=void 0;if(w.isInterleavedBufferAttribute){var M=r(e.data,w.data);_=new Vl(M,w.itemSize,w.offset,w.normalized)}else{var T=Za(w.type,w.array);_=new Ga(T,w.itemSize,w.normalized)}void 0!==w.name&&(_.name=w.name),g.push(_)}i.morphAttributes[m]=g}var k=e.data.morphTargetsRelative;k&&(i.morphTargetsRelative=!0);var S=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==S)for(var E=0,A=S.length;E!==A;++E){var C=S[E];i.addGroup(C.start,C.count,C.materialIndex)}var L=e.data.boundingSphere;if(void 0!==L){var R=new dr;void 0!==L.center&&R.fromArray(L.center),i.boundingSphere=new Nr(R,L.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}]),n}(Nh),jp=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=""===this.path?zp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;var o=new Dh(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var i=null;try{i=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=i.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?a.parse(i,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),i=this.parseImages(e.images,(function(){void 0!==t&&t(c)})),o=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,a,s,n),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),void 0!==t){var l=!1;for(var f in i)if(i[f]instanceof HTMLImageElement){l=!0;break}!1===l&&t(c)}return c}},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var a=(new vp).fromJSON(e[n]);t[a.uuid]=a}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(var a=0,i=e.length;a<i;a++){var o=(new wf).fromJSON(e[a],r);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n,r={};if(void 0!==e)for(var a=new Gp,i=0,o=e.length;i<o;i++){var s=void 0,c=e[i];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new rh[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":s=new rh[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new rh[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new rh[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new rh[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new rh[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new rh[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new rh[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new rh[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new rh[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new rh[c.type]((new pp[c.path.type]).fromJSON(c.path),c.tubularSegments,c.radius,c.radialSegments,c.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new rh[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new rh[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(var u=0,l=c.shapes.length;u<l;u++){var f=t[c.shapes[u]];n.push(f)}s=new rh[c.type](n,c.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(var d=0,h=c.shapes.length;d<h;d++){var p=t[c.shapes[d]];n.push(p)}var b=c.options.extrudePath;void 0!==b&&(c.options.extrudePath=(new pp[b.type]).fromJSON(b)),s=new rh[c.type](n,c.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=a.parse(c);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),!0===s.isBufferGeometry&&void 0!==c.userData&&(s.userData=c.userData),r[c.uuid]=s}return r}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var a=new Bp;a.setTextures(t);for(var i=0,o=e.length;i<o;i++){var s=e[i];if("MultiMaterial"===s.type){for(var c=[],u=0;u<s.materials.length;u++){var l=s.materials[u];void 0===n[l.uuid]&&(n[l.uuid]=a.parse(l)),c.push(n[l.uuid])}r[s.uuid]=c}else void 0===n[s.uuid]&&(n[s.uuid]=a.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],a=Ah.parse(r);t[a.uuid]=a}return t}},{key:"parseImages",value:function(e,t){var n,r=this,a={};function i(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}function o(e){if("string"===typeof e){var t=e,n=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t;return i(n)}return e.data?{data:Za(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var s=new Ph(t);n=new Bh(s),n.setCrossOrigin(this.crossOrigin);for(var c=0,u=e.length;c<u;c++){var l=e[c],f=l.url;if(Array.isArray(f)){a[l.uuid]=[];for(var d=0,h=f.length;d<h;d++){var p=f[d],b=o(p);null!==b&&(b instanceof HTMLImageElement?a[l.uuid].push(b):a[l.uuid].push(new gf(b.data,b.width,b.height)))}}else{var m=o(l.url);null!==m&&(a[l.uuid]=m)}}}return a}},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var a=0,i=e.length;a<i;a++){var o=e[a];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=void 0,c=t[o.image];Array.isArray(c)?(s=new Di(c),6===c.length&&(s.needsUpdate=!0)):(s=c&&c.data?new gf(c.data,c.width,c.height):new ir(c),c&&(s.needsUpdate=!0)),s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,Vp)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],Wp),s.wrapT=n(o.wrap[1],Wp)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,qp)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,qp)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),r[o.uuid]=s}return r}},{key:"parseObject",value:function(e,t,n,r){var a,i,o;function s(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,a=e.length;r<a;r++){var i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":a=new Hl,void 0!==e.background&&Number.isInteger(e.background)&&(a.background=new Ba(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new Ul(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new zl(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new Pi(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Rp(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Np(e.color,e.intensity);break;case"DirectionalLight":a=new Ip(e.color,e.intensity);break;case"PointLight":a=new Lp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Op(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new kp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new yp(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new Fp).fromJSON(e);break;case"SkinnedMesh":i=s(e.geometry),o=c(e.material),a=new mf(i,o),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":i=s(e.geometry),o=c(e.material),a=new wi(i,o);break;case"InstancedMesh":i=s(e.geometry),o=c(e.material);var u=e.count,l=e.instanceMatrix,f=e.instanceColor;a=new Sf(i,o,u),a.instanceMatrix=new Ga(new Float32Array(l.array),16),void 0!==f&&(a.instanceColor=new Ga(new Float32Array(f.array),f.itemSize));break;case"LOD":a=new lf;break;case"Line":a=new If(s(e.geometry),c(e.material));break;case"LineLoop":a=new Ff(s(e.geometry),c(e.material));break;case"LineSegments":a=new Df(s(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new jf(s(e.geometry),c(e.material));break;case"Sprite":a=new of(c(e.material));break;case"Group":a=new Rl;break;case"Bone":a=new vf;break;default:a=new pa}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var d=e.children,h=0;h<d.length;h++)a.add(this.parseObject(d[h],t,n,r));if(void 0!==e.animations)for(var p=e.animations,b=0;b<p.length;b++){var m=p[b];a.animations.push(r[m])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var v=e.levels,g=0;g<v.length;g++){var y=v[g],x=a.getObjectByProperty("uuid",y.object);void 0!==x&&a.addLevel(x,y.distance)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}},{key:"setTexturePath",value:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}]),n}(Nh),Vp={UVMapping:_e,CubeReflectionMapping:Me,CubeRefractionMapping:Te,EquirectangularReflectionMapping:ke,EquirectangularRefractionMapping:Se,CubeUVReflectionMapping:Ee,CubeUVRefractionMapping:Ae},Wp={RepeatWrapping:Ce,ClampToEdgeWrapping:Le,MirroredRepeatWrapping:Re},qp={NearestFilter:Pe,NearestMipmapNearestFilter:Ie,NearestMipmapLinearFilter:Ne,LinearFilter:Oe,LinearMipmapNearestFilter:De,LinearMipmapLinearFilter:Fe},Xp=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this,e),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return g(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=Rh.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(a.options,{colorSpaceConversion:"none"}))})).then((function(n){Rh.add(e,n),t&&t(n),a.manager.itemEnd(e)})).catch((function(t){r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)})),a.manager.itemStart(e)}}]),n}(Nh);Xp.prototype.isImageBitmapLoader=!0;var Yp=function(){function e(){v(this,e),this.type="ShapePath",this.color=new Ba,this.subPaths=[],this.currentPath=null}return g(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new mp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,a,i){return this.currentPath.bezierCurveTo(e,t,n,r,a,i),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n],i=new vp;i.curves=a.curves,t.push(i)}return t}function r(e,t){for(var n=t.length,r=!1,a=n-1,i=0;i<n;a=i++){var o=t[a],s=t[i],c=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[i],c=-c,s=t[a],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var l=u*(e.x-o.x)-c*(e.y-o.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var a,i,o,s=Fd.isClockWise,c=this.subPaths;if(0===c.length)return[];if(!0===t)return n(c);var u=[];if(1===c.length)return i=c[0],o=new vp,o.curves=i.curves,u.push(o),u;var l=!s(c[0].getPoints());l=e?!l:l;var f,d,h=[],p=[],b=[],m=0;p[m]=void 0,b[m]=[];for(var v=0,g=c.length;v<g;v++)i=c[v],f=i.getPoints(),a=s(f),a=e?!a:a,a?(!l&&p[m]&&m++,p[m]={s:new vp,p:f},p[m].s.curves=i.curves,l&&m++,b[m]=[]):b[m].push({h:i,p:f[0]});if(!p[0])return n(c);if(p.length>1){for(var y=!1,x=[],w=0,_=p.length;w<_;w++)h[w]=[];for(var M=0,T=p.length;M<T;M++)for(var k=b[M],S=0;S<k.length;S++){for(var E=k[S],A=!0,C=0;C<p.length;C++)r(E.p,p[C].p)&&(M!==C&&x.push({froms:M,tos:C,hole:S}),A?(A=!1,h[C].push(E)):y=!0);A&&h[M].push(E)}x.length>0&&(y||(b=h))}for(var L=0,R=p.length;L<R;L++){o=p[L].s,u.push(o),d=b[L];for(var P=0,I=d.length;P<I;P++)o.holes.push(d[P].h)}return u}}]),e}(),Zp=function(){function e(t){v(this,e),this.type="Font",this.data=t}return g(e,[{key:"generateShapes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=Jp(e,t,this.data),a=0,i=r.length;a<i;a++)Array.prototype.push.apply(n,r[a].toShapes());return n}}]),e}();function Jp(e,t,n){for(var r=Array.from(e),a=t/n.resolution,i=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*a,o=[],s=0,c=0,u=0;u<r.length;u++){var l=r[u];if("\n"===l)s=0,c-=i;else{var f=Kp(l,a,s,c,n);s+=f.offsetX,o.push(f.path)}}return o}function Kp(e,t,n,r,a){var i=a.glyphs[e]||a.glyphs["?"];if(i){var o,s,c,u,l,f,d,h,p=new Yp;if(i.o)for(var b=i._cachedOutline||(i._cachedOutline=i.o.split(" ")),m=0,v=b.length;m<v;){var g=b[m++];switch(g){case"m":o=b[m++]*t+n,s=b[m++]*t+r,p.moveTo(o,s);break;case"l":o=b[m++]*t+n,s=b[m++]*t+r,p.lineTo(o,s);break;case"q":c=b[m++]*t+n,u=b[m++]*t+r,l=b[m++]*t+n,f=b[m++]*t+r,p.quadraticCurveTo(l,f,c,u);break;case"b":c=b[m++]*t+n,u=b[m++]*t+r,l=b[m++]*t+n,f=b[m++]*t+r,d=b[m++]*t+n,h=b[m++]*t+r,p.bezierCurveTo(l,f,d,h,c,u);break}}return{offsetX:i.ha*t,path:p}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+a.familyName+".")}Zp.prototype.isFont=!0;var Qp,$p={getContext:function(){return void 0===Qp&&(Qp=new(window.AudioContext||window.webkitAudioContext)),Qp},setContext:function(e){Qp=e}},eb=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new Dh(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(n){try{var i=n.slice(0),o=$p.getContext();o.decodeAudioData(i,(function(e){t(e)}))}catch(s){r?r(s):console.error(s),a.manager.itemError(e)}}),n,r)}}]),n}(Nh),tb=function(e){b(n,e);var t=m(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;v(this,n),a=t.call(this,void 0,i);var o=(new Ba).set(e),s=(new Ba).set(r),c=new dr(o.r,o.g,o.b),u=new dr(s.r,s.g,s.b),l=Math.sqrt(Math.PI),f=l*Math.sqrt(.75);return a.sh.coefficients[0].copy(c).add(u).multiplyScalar(l),a.sh.coefficients[1].copy(c).sub(u).multiplyScalar(f),a}return n}(Fp);tb.prototype.isHemisphereLightProbe=!0;var nb=function(e){b(n,e);var t=m(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;v(this,n),r=t.call(this,void 0,a);var i=(new Ba).set(e);return r.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return n}(Fp);nb.prototype.isAmbientLightProbe=!0;var rb=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return g(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(pa),ab=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;v(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return g(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),ib=function(){function e(t,n,r){var a,i,o;switch(v(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":a=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":a=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:a=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return g(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,a=e*r+r,i=this.cumulativeWeight;if(0===i){for(var o=0;o!==r;++o)n[a+o]=n[o];i=t}else{i+=t;var s=t/i;this._mixBufferRegion(n,a,0,s,r)}this.cumulativeWeight=i}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,a=this.cumulativeWeight,i=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-a,t)}i>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var c=t,u=t+t;c!==u;++c)if(n[c]!==n[c+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var a=n,i=r;a!==i;++a)t[a]=t[r+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,a){if(r>=.5)for(var i=0;i!==a;++i)e[t+i]=e[n+i]}},{key:"_slerp",value:function(e,t,n,r){fr.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,a){var i=this._workIndex*a;fr.multiplyQuaternionsFlat(e,i,e,t,e,n),fr.slerpFlat(e,t,e,t,e,i,r)}},{key:"_lerp",value:function(e,t,n,r,a){for(var i=1-r,o=0;o!==a;++o){var s=t+o;e[s]=e[s]*i+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,a){for(var i=0;i!==a;++i){var o=t+i;e[o]=e[o]+e[n+i]*r}}}]),e}(),ob="\\[\\]\\.:\\/",sb=new RegExp("["+ob+"]","g"),cb="[^"+ob+"]",ub="[^"+ob.replace("\\.","")+"]",lb=/((?:WC+[\/:])*)/.source.replace("WC",cb),fb=/(WCOD+)?/.source.replace("WCOD",ub),db=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",cb),hb=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",cb),pb=new RegExp("^"+lb+fb+db+hb+"$"),bb=["material","materials","bones"],mb=function(){function e(t,n,r){v(this,e);var a=r||vb.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,a)}return g(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),vb=function(){function e(t,n,r){v(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return g(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.node[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,a=n.propertyName,i=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var c=t[a];if(void 0!==c){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===a){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}l=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=i}else void 0!==c.fromArray&&void 0!==c.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(l=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=a;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else{var f=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+a+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(sb,"")}},{key:"parseTrackName",value:function(e){var t=pb.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var a=n.nodeName.substring(r+1);-1!==bb.indexOf(a)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=a)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var a=n[r];if(a.name===t||a.uuid===t)return a;var i=e(a.children);if(i)return i}return null},a=r(e.children);if(a)return a}return null}}]),e}();vb.Composite=mb,vb.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},vb.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},vb.prototype.GetterByBindingType=[vb.prototype._getValue_direct,vb.prototype._getValue_array,vb.prototype._getValue_arrayElement,vb.prototype._getValue_toArray],vb.prototype.SetterByBindingTypeAndVersioning=[[vb.prototype._setValue_direct,vb.prototype._setValue_direct_setNeedsUpdate,vb.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vb.prototype._setValue_array,vb.prototype._setValue_array_setNeedsUpdate,vb.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vb.prototype._setValue_arrayElement,vb.prototype._setValue_arrayElement_setNeedsUpdate,vb.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vb.prototype._setValue_fromArray,vb.prototype._setValue_fromArray_setNeedsUpdate,vb.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var gb=function(){function e(){v(this,e),this.uuid=In(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}return g(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,a=this._bindings,i=a.length,o=void 0,s=e.length,c=this.nCachedObjects_,u=0,l=arguments.length;u!==l;++u){var f=arguments[u],d=f.uuid,h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(f);for(var p=0,b=i;p!==b;++p)a[p].push(new vb(f,n[p],r[p]))}else if(h<c){o=e[h];var m=--c,v=e[m];t[v.uuid]=h,e[h]=v,t[d]=m,e[m]=f;for(var g=0,y=i;g!==y;++g){var x=a[g],w=x[m],_=x[h];x[h]=w,void 0===_&&(_=new vb(f,n[g],r[g])),x[m]=_}}else e[h]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,a=this.nCachedObjects_,i=0,o=arguments.length;i!==o;++i){var s=arguments[i],c=s.uuid,u=t[c];if(void 0!==u&&u>=a){var l=a++,f=e[l];t[f.uuid]=u,e[u]=f,t[c]=l,e[l]=s;for(var d=0,h=r;d!==h;++d){var p=n[d],b=p[l],m=p[u];p[u]=b,p[l]=m}}}this.nCachedObjects_=a}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,a=this.nCachedObjects_,i=e.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o],u=c.uuid,l=t[u];if(void 0!==l)if(delete t[u],l<a){var f=--a,d=e[f],h=--i,p=e[h];t[d.uuid]=l,e[l]=d,t[p.uuid]=f,e[f]=p,e.pop();for(var b=0,m=r;b!==m;++b){var v=n[b],g=v[f],y=v[h];v[l]=g,v[f]=y,v.pop()}}else{var x=--i,w=e[x];x>0&&(t[w.uuid]=l),e[l]=w,e.pop();for(var _=0,M=r;_!==M;++_){var T=n[_];T[l]=T[x],T.pop()}}}this.nCachedObjects_=a}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],a=this._bindings;if(void 0!==r)return a[r];var i=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,u=this.nCachedObjects_,l=new Array(c);r=a.length,n[e]=r,i.push(e),o.push(t),a.push(l);for(var f=u,d=s.length;f!==d;++f){var h=s[f];l[f]=new vb(h,e,t)}return l}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,a=this._parsedPaths,i=this._bindings,o=i.length-1,s=i[o],c=e[o];t[c]=n,i[n]=s,i.pop(),a[n]=a[o],a.pop(),r[n]=r[o],r.pop()}}}]),e}();gb.prototype.isAnimationObjectGroup=!0;var yb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;v(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=a;for(var i=n.tracks,o=i.length,s=new Array(o),c={endingStart:tn,endingEnd:tn},u=0;u!==o;++u){var l=i[u].createInterpolant(null);s[u]=l,l.settings=c}this._interpolantSettings=c,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Jt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return g(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,a=e._clip.duration,i=a/r,o=r/a;e.warp(1,i,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,a=r.time,i=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=a,s[1]=a+n,c[0]=e/i,c[1]=t/i,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var a=this._startTime;if(null!==a){var i=(e-a)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case on:for(var l=0,f=c.length;l!==f;++l)c[l].evaluate(o),u[l].accumulateAdditive(s);break;case an:default:for(var d=0,h=c.length;d!==h;++d)c[d].evaluate(o),u[d].accumulate(r,s)}}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,a=this._loopCount,i=n===Kt;if(0===e)return-1===a?r:i&&1===(1&a)?t-r:r;if(n===Zt){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===a&&(e>=0?(a=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);var s=this.repetitions-a;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,i)}else this._setEndings(!1,!1,i);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(i&&1===(1&a))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=nn,r.endingEnd=nn):(r.endingStart=e?this.zeroSlopeAtStart?nn:tn:rn,r.endingEnd=t?this.zeroSlopeAtEnd?nn:tn:rn)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,a=r.time,i=this._weightInterpolant;null===i&&(i=r._lendControlInterpolant(),this._weightInterpolant=i);var o=i.parameterPositions,s=i.sampleValues;return o[0]=a,s[0]=t,o[1]=a+e,s[1]=n,this}}]),e}(),xb=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return g(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,a=r.length,i=e._propertyBindings,o=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,u=c[s];void 0===u&&(u={},c[s]=u);for(var l=0;l!==a;++l){var f=r[l],d=f.name,h=u[d];if(void 0!==h)i[l]=h;else{if(h=i[l],void 0!==h){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,s,d));continue}var p=t&&t._propertyBindings[l].binding.parsedPath;h=new ib(vb.create(n,d,p),f.ValueTypeName,f.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,s,d),i[l]=h}o[l].resultBuffer=h.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var a=e._propertyBindings,i=0,o=a.length;i!==o;++i){var s=a[i];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];0===--a.useCount&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,a=this._actionsByClip,i=a[t];if(void 0===i)i={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=i;else{var o=i.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),i.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var a=e._clip.uuid,i=this._actionsByClip,o=i[a],s=o.knownActions,c=s[s.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,s[u]=c,s.pop(),e._byClipCacheIndex=null;var l=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete l[f],0===s.length&&delete i[a],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];0===--a.referenceCount&&this._removeInactiveBinding(a)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,a=this._bindings,i=r[t];void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,a=n.path,i=this._bindingsByRootAndName,o=i[r],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete o[a],0===Object.keys(o).length&&delete i[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new gh(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=n,t[n]=a}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,a=r.uuid,i="string"===typeof e?Ah.findByName(r,e):e,o=null!==i?i.uuid:e,s=this._actionsByClip[o],c=null;if(void 0===n&&(n=null!==i?i.blendMode:an),void 0!==s){var u=s.actionByRoot[a];if(void 0!==u&&u.blendMode===n)return u;c=s.knownActions[0],null===i&&(i=c._clip)}if(null===i)return null;var l=new yb(this,i,t,n);return this._bindAction(l,c),this._addInactiveAction(l,o,a),l}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,a="string"===typeof e?Ah.findByName(n,e):e,i=a?a.uuid:e,o=this._actionsByClip[i];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions,n=t-1;n>=0;--n)e[n].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,a=Math.sign(e),i=this._accuIndex^=1,o=0;o!==n;++o){var s=t[o];s._update(r,e,a,i)}for(var c=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)c[l].apply(i);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,a=r[n];if(void 0!==a){for(var i=a.knownActions,o=0,s=i.length;o!==s;++o){var c=i[o];this._deactivateAction(c);var u=c._cacheIndex,l=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,l._cacheIndex=u,t[u]=l,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var a=n[r].actionByRoot,i=a[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName,s=o[t];if(void 0!==s)for(var c in s){var u=s[c];u.restoreOriginalState(),this._removeInactiveBinding(u)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(En);xb.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var wb=function(){function e(t){v(this,e),"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return g(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),_b=function(e){b(n,e);var t=m(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return v(this,n),a=t.call(this,e,r),a.meshPerAttribute=i||1,a}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=f(d(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=f(d(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(Gl);_b.prototype.isInstancedInterleavedBuffer=!0;var Mb=function(){function e(t,n,r,a,i){v(this,e),this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=a,this.count=i,this.version=0}return g(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}();Mb.prototype.isGLBufferAttribute=!0;var Tb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;v(this,e),this.ray=new Gr(t,n),this.near=r,this.far=a,this.camera=null,this.layers=new ea,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return g(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Sb(e,this,n,t),n.sort(kb),n}},{key:"intersectObjects",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,a=e.length;r<a;r++)Sb(e[r],this,n,t);return n.sort(kb),n}}]),e}();function kb(e,t){return e.distance-t.distance}function Sb(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var a=e.children,i=0,o=a.length;i<o;i++)Sb(a[i],t,n,!0)}var Eb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v(this,e),this.radius=t,this.phi=n,this.theta=r,this}return g(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Nn(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Ab=new er,Cb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new er(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new er(-1/0,-1/0);v(this,e),this.min=t,this.max=n}return g(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Ab.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new er),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new er),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new er),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new er),t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=Ab.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();Cb.prototype.isBox2=!0;var Lb=new dr,Rb=new dr,Pb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr;v(this,e),this.start=t,this.end=n}return g(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new dr),e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new dr),e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new dr),this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){Lb.subVectors(e,this.start),Rb.subVectors(this.end,this.start);var n=Rb.dot(Rb),r=Rb.dot(Lb),a=r/n;return t&&(a=Nn(a,0,1)),a}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new dr),this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Ib=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this),r.material=e,r.render=function(){},r.hasPositions=!1,r.hasNormals=!1,r.hasColors=!1,r.hasUvs=!1,r.positionArray=null,r.normalArray=null,r.colorArray=null,r.uvArray=null,r.count=0,r}return n}(pa);Ib.prototype.isImmediateRenderObject=!0;var Nb=new dr,Ob=new jr,Db=new jr,Fb=function(e){b(n,e);var t=m(n);function n(e){var r;v(this,n);for(var a=Bb(e),i=new ri,o=[],s=[],c=new Ba(0,0,1),u=new Ba(0,1,0),l=0;l<a.length;l++){var f=a[l];f.parent&&f.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(c.r,c.g,c.b),s.push(u.r,u.g,u.b))}i.setAttribute("position",new qa(o,3)),i.setAttribute("color",new qa(s,3));var d=new Ef({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return r=t.call(this,i,d),r.type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=a,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return g(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,a=r.getAttribute("position");Db.copy(this.root.matrixWorld).invert();for(var i=0,o=0;i<t.length;i++){var s=t[i];s.parent&&s.parent.isBone&&(Ob.multiplyMatrices(Db,s.matrixWorld),Nb.setFromMatrixPosition(Ob),a.setXYZ(o,Nb.x,Nb.y,Nb.z),Ob.multiplyMatrices(Db,s.parent.matrixWorld),Nb.setFromMatrixPosition(Ob),a.setXYZ(o+1,Nb.x,Nb.y,Nb.z),o+=2)}r.getAttribute("position").needsUpdate=!0,f(d(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Df);function Bb(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Bb(e.children[n]));return t}var zb=function(e){b(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;v(this,n),i=new Ba(i),o=new Ba(o);for(var s=a/2,c=r/a,u=r/2,l=[],f=[],d=0,h=0,p=-u;d<=a;d++,p+=c){l.push(-u,0,p,u,0,p),l.push(p,0,-u,p,0,u);var b=d===s?i:o;b.toArray(f,h),h+=3,b.toArray(f,h),h+=3,b.toArray(f,h),h+=3,b.toArray(f,h),h+=3}var m=new ri;m.setAttribute("position",new qa(l,3)),m.setAttribute("color",new qa(f,3));var g=new Ef({vertexColors:!0,toneMapped:!1});return e=t.call(this,m,g),e.type="GridHelper",e}return n}(Df);var Ub=new Float32Array(1),Hb=(new Int32Array(Ub.buffer),4),Gb=8,jb=(Math.pow(2,Gb),[.125,.215,.35,.446,.526,.582]),Vb=Gb-Hb+1+jb.length,Wb=(r={},c(r,ln,0),c(r,fn,1),c(r,hn,2),c(r,bn,3),c(r,mn,4),c(r,vn,5),c(r,dn,6),new za({side:N,depthWrite:!1,depthTest:!1})),qb=(new wi(new Ti,Wb),Xb());qb._lodPlanes,qb._sizeLods,qb._sigmas,Math.sqrt(5);function Xb(){for(var e=[],t=[],n=[],r=Gb,a=0;a<Vb;a++){var i=Math.pow(2,r);t.push(i);var o=1/i;a>Gb-Hb?o=jb[a-Gb+Hb-1]:0==a&&(o=0),n.push(o);for(var s=1/(i-1),c=-s/2,u=1+s/2,l=[c,c,u,c,u,u,c,c,u,u,c,u],f=6,d=6,h=3,p=2,b=1,m=new Float32Array(h*d*f),v=new Float32Array(p*d*f),g=new Float32Array(b*d*f),y=0;y<f;y++){var x=y%3*2/3-1,w=y>2?0:-1,_=[x,w,0,x+2/3,w,0,x+2/3,w+1,0,x,w,0,x+2/3,w+1,0,x,w+1,0];m.set(_,h*d*y),v.set(l,p*d*y);var M=[y,y,y,y,y,y];g.set(M,b*d*y)}var T=new ri;T.setAttribute("position",new Ga(m,h)),T.setAttribute("uv",new Ga(v,p)),T.setAttribute("faceIndex",new Ga(g,b)),e.push(T),r>Hb&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}Gh.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Gh.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},mp.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},zb.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Fb.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Nh.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),zp.extractUrlBase(e)},Nh.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Cb.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},Cb.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Cb.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Cb.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},br.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},br.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},br.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},br.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},br.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Nr.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ui.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Pb.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},nr.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},nr.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},nr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},nr.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},nr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},nr.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},jr.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},jr.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},jr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new dr).setFromMatrixColumn(this,3)},jr.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},jr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},jr.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},jr.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},jr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},jr.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},jr.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},jr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},jr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},jr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},jr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},jr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},jr.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},jr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},jr.prototype.makeFrustum=function(e,t,n,r,a,i){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,a,i)},jr.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},ga.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},fr.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},fr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Gr.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Gr.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},Gr.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Ca.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Ca.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Ca.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Ca.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Ca.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Ca.barycoordFromPoint=function(e,t,n,r,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ca.getBarycoord(e,t,n,r,a)},Ca.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ca.getNormal(e,t,n,r)},vp.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},vp.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ud(this,e)},vp.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Yd(this,e)},er.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},er.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},er.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},dr.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},dr.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},dr.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},dr.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},dr.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},dr.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},dr.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},dr.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},dr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},sr.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},sr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},pa.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},pa.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},pa.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},pa.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},pa.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(pa.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),wi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(wi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),sn},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),mf.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Pi.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(gp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Ga.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===kn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(kn)}}}),Ga.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?kn:Tn),this},Ga.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Ga.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ri.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},ri.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Ga(arguments[1],arguments[2])))},ri.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},ri.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},ri.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},ri.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},ri.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(ri.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Gl.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?kn:Tn),this},Gl.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ud.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Ud.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Ud.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Hl.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},wb.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ra.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ba}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===D}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Li.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Fl.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Fl.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Fl.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Fl.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Fl.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Fl.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Fl.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Fl.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Fl.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Fl.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Fl.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Fl.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Fl.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Fl.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Fl.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Fl.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Fl.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Fl.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Fl.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Fl.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Fl.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Fl.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Fl.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Fl.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Fl.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Fl.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?fn:ln}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Sl.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(cr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),rb.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this,n=new eb;return n.load(e,(function(e){t.setBuffer(e)})),this},ab.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Oi.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Oi.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},rr.crossOrigin=void 0,rr.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var a=new Hh;a.setCrossOrigin(this.crossOrigin);var i=a.load(e,n,void 0,r);return t&&(i.mapping=t),i},rr.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var a=new zh;a.setCrossOrigin(this.crossOrigin);var i=a.load(e,n,void 0,r);return t&&(i.mapping=t),i},rr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},rr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:T}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=T);var Yb=/^[og]\s*(.+)?/,Zb=/^mtllib /,Jb=/^usemtl /,Kb=/^usemap /,Qb=new dr,$b=new dr,em=new dr,tm=new dr,nm=new dr;function rm(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"===typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,a=this.object.geometry.vertices;a.push(r[e+0],r[e+1],r[e+2]),a.push(r[t+0],r[t+1],r[t+2]),a.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var r=this.normals,a=this.object.geometry.normals;a.push(r[e+0],r[e+1],r[e+2]),a.push(r[t+0],r[t+1],r[t+2]),a.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){var r=this.vertices,a=this.object.geometry.normals;Qb.fromArray(r,e),$b.fromArray(r,t),em.fromArray(r,n),nm.subVectors(em,$b),tm.subVectors(Qb,$b),nm.cross(tm),nm.normalize(),a.push(nm.x,nm.y,nm.z),a.push(nm.x,nm.y,nm.z),a.push(nm.x,nm.y,nm.z)},addColor:function(e,t,n){var r=this.colors,a=this.object.geometry.colors;void 0!==r[e]&&a.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&a.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&a.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){var r=this.uvs,a=this.object.geometry.uvs;a.push(r[e+0],r[e+1]),a.push(r[t+0],r[t+1]),a.push(r[n+0],r[n+1])},addDefaultUV:function(){var e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){var t=this.uvs,n=this.object.geometry.uvs;n.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,a,i,o,s,c){var u=this.vertices.length,l=this.parseVertexIndex(e,u),f=this.parseVertexIndex(t,u),d=this.parseVertexIndex(n,u);if(this.addVertex(l,f,d),this.addColor(l,f,d),void 0!==o&&""!==o){var h=this.normals.length;l=this.parseNormalIndex(o,h),f=this.parseNormalIndex(s,h),d=this.parseNormalIndex(c,h),this.addNormal(l,f,d)}else this.addFaceNormal(l,f,d);if(void 0!==r&&""!==r){var p=this.uvs.length;l=this.parseUVIndex(r,p),f=this.parseUVIndex(a,p),d=this.parseUVIndex(i,p),this.addUV(l,f,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++){var a=this.parseVertexIndex(e[n],t);this.addVertexPoint(a),this.addColor(a)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,a=0,i=e.length;a<i;a++)this.addVertexLine(this.parseVertexIndex(e[a],n));for(var o=0,s=t.length;o<s;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return e.startObject("",!1),e}var am=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this,e),r.materials=null,r}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new Dh(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(n){try{t(a.parse(n))}catch(i){r?r(i):console.error(i),a.manager.itemError(e)}}),n,r)}},{key:"setMaterials",value:function(e){return this.materials=e,this}},{key:"parse",value:function(e){var t=new rm;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var n=e.split("\n"),r="",a="",i=0,o=[],s="function"===typeof"".trimLeft,c=0,u=n.length;c<u;c++)if(r=n[c],r=s?r.trimLeft():r.trim(),i=r.length,0!==i&&(a=r.charAt(0),"#"!==a))if("v"===a){var l=r.split(/\s+/);switch(l[0]){case"v":t.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])),l.length>=7?t.colors.push(parseFloat(l[4]),parseFloat(l[5]),parseFloat(l[6])):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));break;case"vt":t.uvs.push(parseFloat(l[1]),parseFloat(l[2]));break}}else if("f"===a){for(var f=r.substr(1).trim(),d=f.split(/\s+/),h=[],p=0,b=d.length;p<b;p++){var m=d[p];if(m.length>0){var v=m.split("/");h.push(v)}}for(var g=h[0],y=1,x=h.length-1;y<x;y++){var w=h[y],_=h[y+1];t.addFace(g[0],w[0],_[0],g[1],w[1],_[1],g[2],w[2],_[2])}}else if("l"===a){var M=r.substring(1).trim().split(" "),T=[],k=[];if(-1===r.indexOf("/"))T=M;else for(var S=0,E=M.length;S<E;S++){var A=M[S].split("/");""!==A[0]&&T.push(A[0]),""!==A[1]&&k.push(A[1])}t.addLineGeometry(T,k)}else if("p"===a){var C=r.substr(1).trim(),L=C.split(" ");t.addPointGeometry(L)}else if(null!==(o=Yb.exec(r))){var R=(" "+o[0].substr(1).trim()).substr(1);t.startObject(R)}else if(Jb.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(Zb.test(r))t.materialLibraries.push(r.substring(7).trim());else if(Kb.test(r))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===a){if(o=r.split(" "),o.length>1){var P=o[1].trim().toLowerCase();t.object.smooth="0"!==P&&"off"!==P}else t.object.smooth=!0;var I=t.object.currentMaterial();I&&(I.smooth=t.object.smooth)}else{if("\0"===r)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}t.finalize();var N=new Rl;N.materialLibraries=[].concat(t.materialLibraries);var O=!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length);if(!0===O)for(var D=0,F=t.objects.length;D<F;D++){var B=t.objects[D],z=B.geometry,U=B.materials,H="Line"===z.type,G="Points"===z.type,j=!1;if(0!==z.vertices.length){var V=new ri;V.setAttribute("position",new qa(z.vertices,3)),z.normals.length>0&&V.setAttribute("normal",new qa(z.normals,3)),z.colors.length>0&&(j=!0,V.setAttribute("color",new qa(z.colors,3))),!0===z.hasUVIndices&&V.setAttribute("uv",new qa(z.uvs,2));for(var W=[],q=0,X=U.length;q<X;q++){var Y=U[q],Z=Y.name+"_"+Y.smooth+"_"+j,J=t.materials[Z];if(null!==this.materials)if(J=this.materials.create(Y.name),!H||!J||J instanceof Ef){if(G&&J&&!(J instanceof Bf)){var K=new Bf({size:10,sizeAttenuation:!1});Ra.prototype.copy.call(K,J),K.color.copy(J.color),K.map=J.map,J=K}}else{var Q=new Ef;Ra.prototype.copy.call(Q,J),Q.color.copy(J.color),J=Q}void 0===J&&(J=H?new Ef:G?new Bf({size:1,sizeAttenuation:!1}):new ch,J.name=Y.name,J.flatShading=!Y.smooth,J.vertexColors=j,t.materials[Z]=J),W.push(J)}var $=void 0;if(W.length>1){for(var ee=0,te=U.length;ee<te;ee++){var ne=U[ee];V.addGroup(ne.groupStart,ne.groupCount,ee)}$=H?new Df(V,W):G?new jf(V,W):new wi(V,W)}else $=H?new Df(V,W[0]):G?new jf(V,W[0]):new wi(V,W[0]);$.name=B.name,N.add($)}}else if(t.vertices.length>0){var re=new Bf({size:1,sizeAttenuation:!1}),ae=new ri;ae.setAttribute("position",new qa(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(ae.setAttribute("color",new qa(t.colors,3)),re.vertexColors=!0);var ie=new jf(ae,re);N.add(ie)}return N}}]),n}(Nh),im=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=""===this.path?zp.extractUrlBase(e):this.path,o=new Dh(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(a.parse(n,i))}catch(o){r?r(o):console.error(o),a.manager.itemError(e)}}),n,r)}},{key:"setMaterialOptions",value:function(e){return this.materialOptions=e,this}},{key:"parse",value:function(e,t){for(var n=e.split("\n"),r={},a=/\s+/,i={},o=0;o<n.length;o++){var s=n[o];if(s=s.trim(),0!==s.length&&"#"!==s.charAt(0)){var c=s.indexOf(" "),u=c>=0?s.substring(0,c):s;u=u.toLowerCase();var l=c>=0?s.substring(c+1):"";if(l=l.trim(),"newmtl"===u)r={name:l},i[l]=r;else if("ka"===u||"kd"===u||"ks"===u||"ke"===u){var f=l.split(a,3);r[u]=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2])]}else r[u]=l}}var d=new om(this.resourcePath||t,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(i),d}}]),n}(Nh),om=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,e),this.baseUrl=t,this.options=n,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:I,this.wrap=void 0!==this.options.wrap?this.options.wrap:Ce}return g(e,[{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setManager",value:function(e){this.manager=e}},{key:"setMaterials",value:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}},{key:"convert",value:function(e){if(!this.options)return e;var t={};for(var n in e){var r=e[n],a={};for(var i in t[n]=a,r){var o=!0,s=r[i],c=i.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(o=!1);break;default:break}o&&(a[c]=s)}}return t}},{key:"preload",value:function(){for(var e in this.materialsInfo)this.create(e)}},{key:"getIndex",value:function(e){return this.nameLookup[e]}},{key:"getAsArray",value:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}},{key:"create",value:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]}},{key:"createMaterial_",value:function(e){var t=this,n=this.materialsInfo[e],r={name:e,side:this.side};function a(e,t){return"string"!==typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t}function i(e,n){if(!r[e]){var i=t.getTextureParams(n,r),o=t.loadTexture(a(t.baseUrl,i.url));o.repeat.copy(i.scale),o.offset.copy(i.offset),o.wrapS=t.wrap,o.wrapT=t.wrap,r[e]=o}}for(var o in n){var s=n[o],c=void 0;if(""!==s)switch(o.toLowerCase()){case"kd":r.color=(new Ba).fromArray(s);break;case"ks":r.specular=(new Ba).fromArray(s);break;case"ke":r.emissive=(new Ba).fromArray(s);break;case"map_kd":i("map",s);break;case"map_ks":i("specularMap",s);break;case"map_ke":i("emissiveMap",s);break;case"norm":i("normalMap",s);break;case"map_bump":case"bump":i("bumpMap",s);break;case"map_d":i("alphaMap",s),r.transparent=!0;break;case"ns":r.shininess=parseFloat(s);break;case"d":c=parseFloat(s),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(s),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0);break;default:break}}return this.materials[e]=new ch(r),this.materials[e]}},{key:"getTextureParams",value:function(e,t){var n,r={scale:new er(1,1),offset:new er(0,0)},a=e.split(/\s+/);return n=a.indexOf("-bm"),n>=0&&(t.bumpScale=parseFloat(a[n+1]),a.splice(n,2)),n=a.indexOf("-s"),n>=0&&(r.scale.set(parseFloat(a[n+1]),parseFloat(a[n+2])),a.splice(n,4)),n=a.indexOf("-o"),n>=0&&(r.offset.set(parseFloat(a[n+1]),parseFloat(a[n+2])),a.splice(n,4)),r.url=a.join(" ").trim(),r}},{key:"loadTexture",value:function(e,t,n,r,a){var i=void 0!==this.manager?this.manager:Ih,o=i.getHandler(e);null===o&&(o=new Hh(i)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);var s=o.load(e,n,r,a);return void 0!==t&&(s.mapping=t),s}}]),e}(),sm=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"parse",value:function(e,t){var n={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},r=542327876,a=131072,i=512,o=1024,s=2048,c=4096,u=8192,l=16384,f=32768,d=4;function h(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function p(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}function b(e,t,n,r){for(var a=n*r*4,i=new Uint8Array(e,t,a),o=new Uint8Array(a),s=0,c=0,u=0;u<r;u++)for(var l=0;l<n;l++){var f=i[c];c++;var d=i[c];c++;var h=i[c];c++;var p=i[c];c++,o[s]=h,s++,o[s]=d,s++,o[s]=f,s++,o[s]=p,s++}return o}var m,v=h("DXT1"),g=h("DXT3"),y=h("DXT5"),x=h("ETC1"),w=31,_=0,M=1,T=2,k=3,S=4,E=7,A=20,C=21,L=22,R=23,P=24,I=25,N=26,O=28,D=new Int32Array(e,0,w);if(D[_]!==r)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),n;if(!D[A]&d)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),n;var F=D[C],B=!1;switch(F){case v:m=8,n.format=ut;break;case g:m=16,n.format=ft;break;case y:m=16,n.format=dt;break;case x:m=8,n.format=vt;break;default:if(!(32===D[L]&&16711680&D[R]&&65280&D[P]&&255&D[I]&&4278190080&D[N]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",p(F)),n;B=!0,m=64,n.format=Qe}n.mipmapCount=1,D[T]&a&&!1!==t&&(n.mipmapCount=Math.max(1,D[E]));var z=D[O];if(n.isCubemap=!!(z&i),n.isCubemap&&(!(z&o)||!(z&s)||!(z&c)||!(z&u)||!(z&l)||!(z&f)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),n;n.width=D[S],n.height=D[k];for(var U=D[M]+4,H=n.isCubemap?6:1,G=0;G<H;G++)for(var j=n.width,V=n.height,W=0;W<n.mipmapCount;W++){var q=void 0,X=void 0;B?(q=b(e,U,j,V),X=q.length):(X=Math.max(4,j)/4*Math.max(4,V)/4*m,q=new Uint8Array(e,U,X));var Y={data:q,width:j,height:V};n.mipmaps.push(Y),U+=X,j=Math.max(j>>1,1),V=Math.max(V>>1,1)}return n}}]),n}(Fh),cm=function e(t,n,r){v(this,e);var a=this,i=!1,o=0,s=0,c=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===i&&void 0!==a.onStart&&a.onStart(e,o,s),i=!0},this.itemEnd=function(e){o++,void 0!==a.onProgress&&a.onProgress(e,o,s),o===s&&(i=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(e){void 0!==a.onError&&a.onError(e)},this.resolveURL=function(e){return c?c(e):e},this.setURLModifier=function(e){return c=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var r=u[t],a=u[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return a}return null}},um=(new cm,n("e260"),n("ace4"),n("d3b7"),n("cfc3"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("fb2c"),new br);function lm(e){return um.setFromObject(e),um.getSize(new dr)}function fm(e){return um.setFromObject(e),um.getCenter(new dr)}function dm(e){var t,n,r=e.getAttribute("position").array,a=void 0!==e.getAttribute("uv");a&&(t=e.getAttribute("uv").array);var i=void 0!==e.getAttribute("normal");i&&(n=e.getAttribute("normal").array);for(var o,s,c,u,l=[],f=[],d=[],h=[],p=new dr,b=new dr,m=new dr,v=new dr,g=new dr,y=new dr,x=new er,w=new er,_=new er,M=0;M<r.length;M+=9)p.x=r[M],p.y=r[M+1],p.z=r[M+2],b.x=r[M+3],b.y=r[M+4],b.z=r[M+5],m.x=r[M+6],m.y=r[M+7],m.z=r[M+8],o=[p,b,m],i&&(v.x=n[M],v.y=n[M+1],v.z=n[M+2],g.x=n[M+3],g.y=n[M+4],g.z=n[M+5],y.x=n[M+6],y.y=n[M+7],y.z=n[M+8],s=[v,g,y]),a&&(x.x=t[M],x.y=t[M+1],w.x=t[M+2],w.y=t[M+3],_.x=t[M+4],_.y=t[M+5],c=[x,w,_]),u=[],o.forEach((function(e,t){var n=L(e,f);-1===n&&(n=f.length,f.push(e.clone()),i&&d.push(s[t].clone()),a&&h.push(c[t].clone())),u.push(n)})),l.push(u[0],u[1],u[2]);var T,k,S=new Float32Array(3*f.length);i&&(T=new Float32Array(3*f.length)),a&&(k=new Float32Array(2*f.length));for(var E=0,A=0,C=0;C<f.length;C++)A=3*C,S[A]=f[C].x,S[A+1]=f[C].y,S[A+2]=f[C].z,i&&(T[A]=d[C].x,T[A+1]=d[C].y,T[A+2]=d[C].z),a&&(E=2*C,k[E]=h[C].x,k[E+1]=h[C].y);return e.addAttribute("position",new Ga(S,3)),i&&e.addAttribute("normal",new Ga(T,3)),a&&e.addAttribute("uv",new Ga(k,2)),e.setIndex(new Ga(new Uint32Array(l),1)),e;function L(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}}var hm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%",height:"100%",margin:"0",border:"0",padding:"0"}},[e.suportWebGL?n("canvas",{ref:"canvas",staticStyle:{width:"100%",height:"100%"}}):n("div",[e._t("default",(function(){return[e._v(" Your browser does not seem to support "),n("a",{staticStyle:{color:"#000"},attrs:{href:"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation"}},[e._v("WebGL")]),e._v("."),n("br"),e._v("' ")]}))],2)])},pm=[];function bm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mm(e){if(Array.isArray(e))return bm(e)}n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function vm(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a");function gm(e,t){if(e){if("string"===typeof e)return bm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bm(e,t):void 0}}function ym(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xm(e){return mm(e)||vm(e)||gm(e)||ym()}n("a9e3"),n("cca6");var wm={type:"change"},_m={type:"start"},Mm={type:"end"},Tm=function(e){b(n,e);var t=m(n);function n(e,r){var a;v(this,n),a=t.call(this),void 0===r&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),a.object=e,a.domElement=r,a.enabled=!0,a.target=new dr,a.minDistance=0,a.maxDistance=1/0,a.minZoom=0,a.maxZoom=1/0,a.minPolarAngle=0,a.maxPolarAngle=Math.PI,a.minAzimuthAngle=-1/0,a.maxAzimuthAngle=1/0,a.enableDamping=!1,a.dampingFactor=.05,a.enableZoom=!0,a.zoomSpeed=1,a.enableRotate=!0,a.rotateSpeed=1,a.enablePan=!0,a.panSpeed=1,a.screenSpacePanning=!0,a.keyPanSpeed=7,a.autoRotate=!1,a.autoRotateSpeed=2,a.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},a.mouseButtons={LEFT:k.ROTATE,MIDDLE:k.DOLLY,RIGHT:k.PAN},a.touches={ONE:S.ROTATE,TWO:S.DOLLY_PAN},a.target0=a.target.clone(),a.position0=a.object.position.clone(),a.zoom0=a.object.zoom,a._domElementKeyEvents=null,a.getPolarAngle=function(){return u.phi},a.getAzimuthalAngle=function(){return u.theta},a.listenToKeyEvents=function(e){e.addEventListener("keydown",ue),this._domElementKeyEvents=e},a.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},a.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(wm),i.update(),s=o.NONE},a.update=function(){var t=new dr,n=(new fr).setFromUnitVectors(e.up,new dr(0,1,0)),r=n.clone().invert(),a=new dr,p=new fr,b=2*Math.PI;return function(){var e=i.object.position;t.copy(e).sub(i.target),t.applyQuaternion(n),u.setFromVector3(t),i.autoRotate&&s===o.NONE&&C(E()),i.enableDamping?(u.theta+=l.theta*i.dampingFactor,u.phi+=l.phi*i.dampingFactor):(u.theta+=l.theta,u.phi+=l.phi);var m=i.minAzimuthAngle,v=i.maxAzimuthAngle;return isFinite(m)&&isFinite(v)&&(m<-Math.PI?m+=b:m>Math.PI&&(m-=b),v<-Math.PI?v+=b:v>Math.PI&&(v-=b),u.theta=m<=v?Math.max(m,Math.min(v,u.theta)):u.theta>(m+v)/2?Math.max(m,u.theta):Math.min(v,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=f,u.radius=Math.max(i.minDistance,Math.min(i.maxDistance,u.radius)),!0===i.enableDamping?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),t.setFromSpherical(u),t.applyQuaternion(r),e.copy(i.target).add(t),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),f=1,!!(h||a.distanceToSquared(i.object.position)>c||8*(1-p.dot(i.object.quaternion))>c)&&(i.dispatchEvent(wm),a.copy(i.object.position),p.copy(i.object.quaternion),h=!1,!0)}}(),a.dispose=function(){i.domElement.removeEventListener("contextmenu",he),i.domElement.removeEventListener("pointerdown",ne),i.domElement.removeEventListener("wheel",ce),i.domElement.removeEventListener("touchstart",le),i.domElement.removeEventListener("touchend",de),i.domElement.removeEventListener("touchmove",fe),i.domElement.ownerDocument.removeEventListener("pointermove",re),i.domElement.ownerDocument.removeEventListener("pointerup",ae),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",ue)};var i=p(a),o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=o.NONE,c=1e-6,u=new Eb,l=new Eb,f=1,d=new dr,h=!1,b=new er,m=new er,g=new er,y=new er,x=new er,w=new er,_=new er,M=new er,T=new er;function E(){return 2*Math.PI/60/60*i.autoRotateSpeed}function A(){return Math.pow(.95,i.zoomSpeed)}function C(e){l.theta-=e}function L(e){l.phi-=e}var R=function(){var e=new dr;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}}(),P=function(){var e=new dr;return function(t,n){!0===i.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(i.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),I=function(){var e=new dr;return function(t,n){var r=i.domElement;if(i.object.isPerspectiveCamera){var a=i.object.position;e.copy(a).sub(i.target);var o=e.length();o*=Math.tan(i.object.fov/2*Math.PI/180),R(2*t*o/r.clientHeight,i.object.matrix),P(2*n*o/r.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(R(t*(i.object.right-i.object.left)/i.object.zoom/r.clientWidth,i.object.matrix),P(n*(i.object.top-i.object.bottom)/i.object.zoom/r.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function N(e){i.object.isPerspectiveCamera?f/=e:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*e)),i.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O(e){i.object.isPerspectiveCamera?f*=e:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/e)),i.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function D(e){b.set(e.clientX,e.clientY)}function F(e){_.set(e.clientX,e.clientY)}function B(e){y.set(e.clientX,e.clientY)}function z(e){m.set(e.clientX,e.clientY),g.subVectors(m,b).multiplyScalar(i.rotateSpeed);var t=i.domElement;C(2*Math.PI*g.x/t.clientHeight),L(2*Math.PI*g.y/t.clientHeight),b.copy(m),i.update()}function U(e){M.set(e.clientX,e.clientY),T.subVectors(M,_),T.y>0?N(A()):T.y<0&&O(A()),_.copy(M),i.update()}function H(e){x.set(e.clientX,e.clientY),w.subVectors(x,y).multiplyScalar(i.panSpeed),I(w.x,w.y),y.copy(x),i.update()}function G(){}function j(e){e.deltaY<0?O(A()):e.deltaY>0&&N(A()),i.update()}function V(e){var t=!1;switch(e.code){case i.keys.UP:I(0,i.keyPanSpeed),t=!0;break;case i.keys.BOTTOM:I(0,-i.keyPanSpeed),t=!0;break;case i.keys.LEFT:I(i.keyPanSpeed,0),t=!0;break;case i.keys.RIGHT:I(-i.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),i.update())}function W(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,n)}}function q(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,n)}}function X(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);_.set(0,r)}function Y(e){i.enableZoom&&X(e),i.enablePan&&q(e)}function Z(e){i.enableZoom&&X(e),i.enableRotate&&W(e)}function J(e){if(1==e.touches.length)m.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);m.set(t,n)}g.subVectors(m,b).multiplyScalar(i.rotateSpeed);var r=i.domElement;C(2*Math.PI*g.x/r.clientHeight),L(2*Math.PI*g.y/r.clientHeight),b.copy(m)}function K(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,n)}w.subVectors(x,y).multiplyScalar(i.panSpeed),I(w.x,w.y),y.copy(x)}function Q(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);M.set(0,r),T.set(0,Math.pow(M.y/_.y,i.zoomSpeed)),N(T.y),_.copy(M)}function $(e){i.enableZoom&&Q(e),i.enablePan&&K(e)}function ee(e){i.enableZoom&&Q(e),i.enableRotate&&J(e)}function te(){}function ne(e){if(!1!==i.enabled)switch(e.pointerType){case"mouse":case"pen":ie(e);break}}function re(e){if(!1!==i.enabled)switch(e.pointerType){case"mouse":case"pen":oe(e);break}}function ae(e){switch(e.pointerType){case"mouse":case"pen":se(e);break}}function ie(e){var t;switch(e.preventDefault(),i.domElement.focus?i.domElement.focus():window.focus(),e.button){case 0:t=i.mouseButtons.LEFT;break;case 1:t=i.mouseButtons.MIDDLE;break;case 2:t=i.mouseButtons.RIGHT;break;default:t=-1}switch(t){case k.DOLLY:if(!1===i.enableZoom)return;F(e),s=o.DOLLY;break;case k.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===i.enablePan)return;B(e),s=o.PAN}else{if(!1===i.enableRotate)return;D(e),s=o.ROTATE}break;case k.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===i.enableRotate)return;D(e),s=o.ROTATE}else{if(!1===i.enablePan)return;B(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&(i.domElement.ownerDocument.addEventListener("pointermove",re),i.domElement.ownerDocument.addEventListener("pointerup",ae),i.dispatchEvent(_m))}function oe(e){if(!1!==i.enabled)switch(e.preventDefault(),s){case o.ROTATE:if(!1===i.enableRotate)return;z(e);break;case o.DOLLY:if(!1===i.enableZoom)return;U(e);break;case o.PAN:if(!1===i.enablePan)return;H(e);break}}function se(e){i.domElement.ownerDocument.removeEventListener("pointermove",re),i.domElement.ownerDocument.removeEventListener("pointerup",ae),!1!==i.enabled&&(G(e),i.dispatchEvent(Mm),s=o.NONE)}function ce(e){!1===i.enabled||!1===i.enableZoom||s!==o.NONE&&s!==o.ROTATE||(e.preventDefault(),i.dispatchEvent(_m),j(e),i.dispatchEvent(Mm))}function ue(e){!1!==i.enabled&&!1!==i.enablePan&&V(e)}function le(e){if(!1!==i.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(i.touches.ONE){case S.ROTATE:if(!1===i.enableRotate)return;W(e),s=o.TOUCH_ROTATE;break;case S.PAN:if(!1===i.enablePan)return;q(e),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(i.touches.TWO){case S.DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;Y(e),s=o.TOUCH_DOLLY_PAN;break;case S.DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;Z(e),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&i.dispatchEvent(_m)}}function fe(e){if(!1!==i.enabled)switch(e.preventDefault(),s){case o.TOUCH_ROTATE:if(!1===i.enableRotate)return;J(e),i.update();break;case o.TOUCH_PAN:if(!1===i.enablePan)return;K(e),i.update();break;case o.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;$(e),i.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;ee(e),i.update();break;default:s=o.NONE}}function de(e){!1!==i.enabled&&(te(e),i.dispatchEvent(Mm),s=o.NONE)}function he(e){!1!==i.enabled&&e.preventDefault()}return i.domElement.addEventListener("contextmenu",he),i.domElement.addEventListener("pointerdown",ne),i.domElement.addEventListener("wheel",ce,{passive:!1}),i.domElement.addEventListener("touchstart",le,{passive:!1}),i.domElement.addEventListener("touchend",de),i.domElement.addEventListener("touchmove",fe,{passive:!1}),a.update(),a}return n}(En),km=function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}(),Sm={antialias:!0,alpha:!0},Em={props:{src:{type:String},width:{type:Number},height:{type:Number},position:{type:Object,default:function(){return{x:0,y:0,z:0}}},rotation:{type:Object,default:function(){return{x:0,y:0,z:0}}},scale:{type:Object,default:function(){return{x:1,y:1,z:1}}},lights:{type:Array,default:function(){return[]}},cameraPosition:{type:Object,default:function(){return{x:0,y:0,z:0}}},cameraRotation:{type:Object,default:function(){return{x:0,y:0,z:0}}},cameraUp:{type:Object},cameraLookAt:{type:Object},backgroundColor:{default:16777215},backgroundAlpha:{type:Number,default:1},controlsOptions:{type:Object},crossOrigin:{default:"anonymous"},requestHeader:{default:function(){}},outputEncoding:{type:Number,default:ln},glOptions:{type:Object}},data:function(){return{suportWebGL:km,size:{width:this.width,height:this.height},object:null,raycaster:new Tb,mouse:new er,camera:new Pi(45,1,.01,1e5),scene:new Hl,wrapper:new pa,renderer:null,controls:null,allLights:[],clock:"undefined"===typeof performance?Date:performance,reqId:null}},computed:{hasListener:function(){var e=this._events,t={};return["on-mousemove","on-mouseup","on-mousedown","on-click"].forEach((function(n){t[n]=!!e[n]&&e[n].length>0})),t}},mounted:function(){void 0!==this.width&&void 0!==this.height||(this.size={width:this.$el.offsetWidth,height:this.$el.offsetHeight});var e=Object.assign({},Sm,this.glOptions,{canvas:this.$refs.canvas});this.renderer=new Fl(e),this.renderer.shadowMap.enabled=!0,this.renderer.outputEncoding=this.outputEncoding,this.controls=new Tm(this.camera,this.$el),this.controls.type="orbit",this.scene.add(this.wrapper),this.load(),this.update(),this.$el.addEventListener("mousedown",this.onMouseDown,!1),this.$el.addEventListener("mousemove",this.onMouseMove,!1),this.$el.addEventListener("mouseup",this.onMouseUp,!1),this.$el.addEventListener("click",this.onClick,!1),window.addEventListener("resize",this.onResize,!1),this.animate()},beforeDestroy:function(){cancelAnimationFrame(this.reqId),this.renderer.dispose(),this.controls&&this.controls.dispose(),this.$el.removeEventListener("mousedown",this.onMouseDown,!1),this.$el.removeEventListener("mousemove",this.onMouseMove,!1),this.$el.removeEventListener("mouseup",this.onMouseUp,!1),this.$el.removeEventListener("click",this.onClick,!1),window.removeEventListener("resize",this.onResize,!1)},watch:{src:function(){this.load()},rotation:{deep:!0,handler:function(e){this.object&&this.object.rotation.set(e.x,e.y,e.z)}},position:{deep:!0,handler:function(e){this.object&&this.object.position.set(e.x,e.y,e.z)}},scale:{deep:!0,handler:function(e){this.object&&this.object.scale.set(e.x,e.y,e.z)}},lights:{deep:!0,handler:function(){this.updateLights()}},size:{deep:!0,handler:function(){this.updateCamera(),this.updateRenderer()}},controlsOptions:{deep:!0,handler:function(){this.updateControls()}},backgroundAlpha:function(){this.updateRenderer()},backgroundColor:function(){this.updateRenderer()}},methods:{onResize:function(){var e=this;void 0!==this.width&&void 0!==this.height||this.$nextTick((function(){e.size={width:e.$el.offsetWidth,height:e.$el.offsetHeight}}))},onMouseDown:function(e){if(this.hasListener["on-mousedown"]){var t=this.pick(e.clientX,e.clientY);this.$emit("on-mousedown",t)}},onMouseMove:function(e){if(this.hasListener["on-mousemove"]){var t=this.pick(e.clientX,e.clientY);this.$emit("on-mousemove",t)}},onMouseUp:function(e){if(this.hasListener["on-mouseup"]){var t=this.pick(e.clientX,e.clientY);this.$emit("on-mouseup",t)}},onClick:function(e){if(this.hasListener["on-click"]){var t=this.pick(e.clientX,e.clientY);this.$emit("on-click",t)}},pick:function(e,t){if(!this.object)return null;var n=this.$el.getBoundingClientRect();e-=n.left,t-=n.top,this.mouse.x=e/this.size.width*2-1,this.mouse.y=-t/this.size.height*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var r=this.raycaster.intersectObject(this.object,!0);return(r&&r.length)>0?r[0]:null},update:function(){this.updateRenderer(),this.updateCamera(),this.updateLights(),this.updateControls()},updateModel:function(){var e=this.object;if(e){var t=this.position,n=this.rotation,r=this.scale;e.position.set(t.x,t.y,t.z),e.rotation.set(n.x,n.y,n.z),e.scale.set(r.x,r.y,r.z)}},updateRenderer:function(){var e=this.renderer;e.setSize(this.size.width,this.size.height),e.setPixelRatio(window.devicePixelRatio||1),e.setClearColor(new Ba(this.backgroundColor).getHex()),e.setClearAlpha(this.backgroundAlpha)},updateCamera:function(){var e=this.camera,t=this.object;if(e.aspect=this.size.width/this.size.height,e.updateProjectionMatrix(),this.cameraLookAt||this.cameraUp)e.position.set(this.cameraPosition.x,this.cameraPosition.y,this.cameraPosition.z),e.rotation.set(this.cameraRotation.x,this.cameraRotation.y,this.cameraRotation.z),e.up.set(this.cameraUp.x,this.cameraUp.y,this.cameraUp.z),e.lookAt(new dr(this.cameraLookAt.x,this.cameraLookAt.y,this.cameraLookAt.z));else{if(!t)return;var n=lm(t).length();e.position.set(this.cameraPosition.x,this.cameraPosition.y,this.cameraPosition.z),e.rotation.set(this.cameraRotation.x,this.cameraRotation.y,this.cameraRotation.z),0===this.cameraPosition.x&&0===this.cameraPosition.y&&0===this.cameraPosition.z&&(e.position.z=n),e.lookAt(new dr)}},updateLights:function(){var e,t=this;(e=this.scene).remove.apply(e,xm(this.allLights)),this.allLights=[],this.lights.forEach((function(e){if(e.type){var n=e.type.toLowerCase(),r=null;if("ambient"===n||"ambientlight"===n){var a=0===e.color?e.color:e.color||4210752,i=0===e.intensity?e.intensity:e.intensity||1;r=new Np(a,i)}else if("point"===n||"pointlight"===n){var o=0===e.color?e.color:e.color||16777215,s=0===e.intensity?e.intensity:e.intensity||1,c=e.distance||0,u=0===e.decay?e.decay:e.decay||1;r=new Lp(o,s,c,u),e.position&&r.position.copy(e.position)}else if("directional"===n||"directionallight"===n){var l=0===e.color?e.color:e.color||16777215,f=0===e.intensity?e.intensity:e.intensity||1;r=new Ip(l,f),e.position&&r.position.copy(e.position),e.target&&r.target.copy(e.target)}else if("hemisphere"===n||"hemispherelight"===n){var d=0===e.skyColor?e.skyColor:e.skyColor||16777215,h=0===e.groundColor?e.groundColor:e.groundColor||16777215,p=0===e.intensity?e.intensity:e.intensity||1;r=new yp(d,h,p),e.position&&r.position.copy(e.position)}t.allLights.push(r),t.scene.add(r)}}))},updateControls:function(){this.controlsOptions&&Object.assign(this.controls,this.controlsOptions)},load:function(){var e=this;this.src&&(this.object&&this.wrapper.remove(this.object),this.loader.setRequestHeader(this.requestHeader),this.loader.load(this.src,(function(){var t=e.getObject.apply(e,arguments);e.process&&e.process(t),e.addObject(t),e.$emit("on-load")}),(function(t){e.$emit("on-progress",t)}),(function(t){e.$emit("on-error",t)})))},getObject:function(e){return e},addObject:function(e){var t=fm(e);this.wrapper.position.copy(t.negate()),this.object=e,this.wrapper.add(e),this.updateCamera(),this.updateModel()},animate:function(){this.reqId=requestAnimationFrame(this.animate),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},Am=Em;function Cm(e,t,n,r,a,i,o,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),o?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=c):a&&(c=s?function(){a.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,c):[c]}return{exports:e,options:u}}var Lm=Cm(Am,hm,pm,!1,null,null,null),Rm=Lm.exports,Pm=new cm;Pm.addHandler(/\.dds$/i,new sm);var Im,Nm,Om={name:"model-obj",mixins:[Rm],props:{lights:{type:Array,default:function(){return[{type:"HemisphereLight",position:{x:0,y:1,z:0},skyColor:11184895,groundColor:8413280,intensity:.2},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]}},smoothing:{type:Boolean,default:!1},mtlPath:{type:String},mtl:{type:String}},data:function(){var e=new am(Pm),t=new im(Pm);return t.setCrossOrigin(this.crossOrigin),t.setRequestHeader(this.requestHeader),e.setRequestHeader(this.requestHeader),{loader:e,mtlLoader:t}},watch:{mtl:function(){this.load()}},methods:{process:function(e){this.smoothing&&e.traverse((function(e){e.geometry&&(e.geometry=dm(e.geometry),e.geometry.computeVertexNormals())}))},load:function(){var e=this;if(this.src){this.object&&this.wrapper.remove(this.object);var t=function(t){e.process&&e.process(t),e.addObject(t),e.$emit("on-load")},n=function(t){e.$emit("on-progress",t)},r=function(t){e.$emit("on-error",t)};if(this.mtl){var a=this.mtlPath,i=this.mtl;if(!this.mtlPath){var o=/^(.*\/)([^/]*)$/.exec(this.mtl);o&&(a=o[1],i=o[2])}a&&this.mtlLoader.setPath(a),this.mtlLoader.load(i,(function(a){a.preload(),e.loader.setMaterials(a).load(e.src,t,n,r)}),(function(){}),r)}else this.loader.load(this.src,t,n,r)}}}},Dm=Om,Fm=Cm(Dm,Im,Nm,!1,null,null,null),Bm=Fm.exports,zm={},Um=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Hm=function(e){return new Worker(e)};try{URL.revokeObjectURL(Um(""))}catch(mw){Um=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},Hm=function(e){return new Worker(e,{type:"module"})}}var Gm=function(e,t,n,r,a){var i=Hm(zm[t]||(zm[t]=Um(e)));return i.onerror=function(e){return a(e.error,null)},i.onmessage=function(e){return a(null,e.data)},i.postMessage(n,r),i},jm=Uint8Array,Vm=Uint16Array,Wm=Uint32Array,qm=new jm([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Xm=new jm([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ym=new jm([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Zm=function(e,t){for(var n=new Vm(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new Wm(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)a[i]=i-n[r]<<5|r;return[n,a]},Jm=Zm(qm,2),Km=Jm[0],Qm=Jm[1];Km[28]=258,Qm[258]=28;for(var $m=Zm(Xm,0),ev=$m[0],tv=$m[1],nv=new Vm(32768),rv=0;rv<32768;++rv){var av=(43690&rv)>>>1|(21845&rv)<<1;av=(52428&av)>>>2|(13107&av)<<2,av=(61680&av)>>>4|(3855&av)<<4,nv[rv]=((65280&av)>>>8|(255&av)<<8)>>>1}var iv=function(e,t,n){for(var r=e.length,a=0,i=new Vm(t);a<r;++a)++i[e[a]-1];var o,s=new Vm(t);for(a=0;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;if(n){o=new Vm(1<<t);var c=15-t;for(a=0;a<r;++a)if(e[a])for(var u=a<<4|e[a],l=t-e[a],f=s[e[a]-1]++<<l,d=f|(1<<l)-1;f<=d;++f)o[nv[f]>>>c]=u}else for(o=new Vm(r),a=0;a<r;++a)e[a]&&(o[a]=nv[s[e[a]-1]++]>>>15-e[a]);return o},ov=new jm(288);for(rv=0;rv<144;++rv)ov[rv]=8;for(rv=144;rv<256;++rv)ov[rv]=9;for(rv=256;rv<280;++rv)ov[rv]=7;for(rv=280;rv<288;++rv)ov[rv]=8;var sv=new jm(32);for(rv=0;rv<32;++rv)sv[rv]=5;var cv=iv(ov,9,0),uv=iv(ov,9,1),lv=iv(sv,5,0),fv=iv(sv,5,1),dv=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},hv=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},pv=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},bv=function(e){return(e/8|0)+(7&e&&1)},mv=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof Vm?Vm:e instanceof Wm?Wm:jm)(n-t);return r.set(e.subarray(t,n)),r},vv=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new jm(0);var a=!t||n,i=!n||n.i;n||(n={}),t||(t=new jm(3*r));var o=function(e){var n=t.length;if(e>n){var r=new jm(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,c=n.p||0,u=n.b||0,l=n.l,f=n.d,d=n.m,h=n.n,p=8*r;do{if(!l){n.f=s=hv(e,c,1);var b=hv(e,c+1,3);if(c+=3,!b){var m=bv(c)+4,v=e[m-4]|e[m-3]<<8,g=m+v;if(g>r){if(i)throw"unexpected EOF";break}a&&o(u+v),t.set(e.subarray(m,g),u),n.b=u+=v,n.p=c=8*g;continue}if(1==b)l=uv,f=fv,d=9,h=5;else{if(2!=b)throw"invalid block type";var y=hv(e,c,31)+257,x=hv(e,c+10,15)+4,w=y+hv(e,c+5,31)+1;c+=14;for(var _=new jm(w),M=new jm(19),T=0;T<x;++T)M[Ym[T]]=hv(e,c+3*T,7);c+=3*x;var k=dv(M),S=(1<<k)-1,E=iv(M,k,1);for(T=0;T<w;){var A=E[hv(e,c,S)];c+=15&A;m=A>>>4;if(m<16)_[T++]=m;else{var C=0,L=0;16==m?(L=3+hv(e,c,3),c+=2,C=_[T-1]):17==m?(L=3+hv(e,c,7),c+=3):18==m&&(L=11+hv(e,c,127),c+=7);while(L--)_[T++]=C}}var R=_.subarray(0,y),P=_.subarray(y);d=dv(R),h=dv(P),l=iv(R,d,1),f=iv(P,h,1)}if(c>p){if(i)throw"unexpected EOF";break}}a&&o(u+131072);for(var I=(1<<d)-1,N=(1<<h)-1,O=c;;O=c){C=l[pv(e,c)&I];var D=C>>>4;if(c+=15&C,c>p){if(i)throw"unexpected EOF";break}if(!C)throw"invalid length/literal";if(D<256)t[u++]=D;else{if(256==D){O=c,l=null;break}var F=D-254;if(D>264){T=D-257;var B=qm[T];F=hv(e,c,(1<<B)-1)+Km[T],c+=B}var z=f[pv(e,c)&N],U=z>>>4;if(!z)throw"invalid distance";c+=15&z;P=ev[U];if(U>3){B=Xm[U];P+=pv(e,c)&(1<<B)-1,c+=B}if(c>p){if(i)throw"unexpected EOF";break}a&&o(u+131072);for(var H=u+F;u<H;u+=4)t[u]=t[u-P],t[u+1]=t[u+1-P],t[u+2]=t[u+2-P],t[u+3]=t[u+3-P];u=H}}n.l=l,n.p=O,n.b=u,l&&(s=1,n.m=d,n.d=f,n.n=h)}while(!s);return u==t.length?t:mv(t,0,u)},gv=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},yv=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},xv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,i=n.slice();if(!a)return[Ev,0];if(1==a){var o=new jm(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],c=n[1],u=0,l=1,f=2;n[0]={s:-1,f:s.f+c.f,l:s,r:c};while(l!=a-1)s=n[n[u].f<n[f].f?u++:f++],c=n[u!=l&&n[u].f<n[f].f?u++:f++],n[l++]={s:-1,f:s.f+c.f,l:s,r:c};var d=i[0].s;for(r=1;r<a;++r)i[r].s>d&&(d=i[r].s);var h=new Vm(d+1),p=wv(n[l-1],h,0);if(p>t){r=0;var b=0,m=p-t,v=1<<m;for(i.sort((function(e,t){return h[t.s]-h[e.s]||e.f-t.f}));r<a;++r){var g=i[r].s;if(!(h[g]>t))break;b+=v-(1<<p-h[g]),h[g]=t}b>>>=m;while(b>0){var y=i[r].s;h[y]<t?b-=1<<t-h[y]++-1:++r}for(;r>=0&&b;--r){var x=i[r].s;h[x]==t&&(--h[x],++b)}p=t}return[new jm(h),p]},wv=function e(t,n,r){return-1==t.s?Math.max(e(t.l,n,r+1),e(t.r,n,r+1)):n[t.s]=r},_v=function(e){var t=e.length;while(t&&!e[--t]);for(var n=new Vm(++t),r=0,a=e[0],i=1,o=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}while(i--)o(a);i=1,a=e[s]}return[n.subarray(0,r),t]},Mv=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Tv=function(e,t,n){var r=n.length,a=bv(t+2);e[a]=255&r,e[a+1]=r>>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var i=0;i<r;++i)e[a+i+4]=n[i];return 8*(a+4+r)},kv=function(e,t,n,r,a,i,o,s,c,u,l){gv(t,l++,n),++a[256];for(var f=xv(a,15),d=f[0],h=f[1],p=xv(i,15),b=p[0],m=p[1],v=_v(d),g=v[0],y=v[1],x=_v(b),w=x[0],_=x[1],M=new Vm(19),T=0;T<g.length;++T)M[31&g[T]]++;for(T=0;T<w.length;++T)M[31&w[T]]++;for(var k=xv(M,7),S=k[0],E=k[1],A=19;A>4&&!S[Ym[A-1]];--A);var C,L,R,P,I=u+5<<3,N=Mv(a,ov)+Mv(i,sv)+o,O=Mv(a,d)+Mv(i,b)+o+14+3*A+Mv(M,S)+(2*M[16]+3*M[17]+7*M[18]);if(I<=N&&I<=O)return Tv(t,l,e.subarray(c,c+u));if(gv(t,l,1+(O<N)),l+=2,O<N){C=iv(d,h,0),L=d,R=iv(b,m,0),P=b;var D=iv(S,E,0);gv(t,l,y-257),gv(t,l+5,_-1),gv(t,l+10,A-4),l+=14;for(T=0;T<A;++T)gv(t,l+3*T,S[Ym[T]]);l+=3*A;for(var F=[g,w],B=0;B<2;++B){var z=F[B];for(T=0;T<z.length;++T){var U=31&z[T];gv(t,l,D[U]),l+=S[U],U>15&&(gv(t,l,z[T]>>>5&127),l+=z[T]>>>12)}}}else C=cv,L=ov,R=lv,P=sv;for(T=0;T<s;++T)if(r[T]>255){U=r[T]>>>18&31;yv(t,l,C[U+257]),l+=L[U+257],U>7&&(gv(t,l,r[T]>>>23&31),l+=qm[U]);var H=31&r[T];yv(t,l,R[H]),l+=P[H],H>3&&(yv(t,l,r[T]>>>5&8191),l+=Xm[H])}else yv(t,l,C[r[T]]),l+=L[r[T]];return yv(t,l,C[256]),l+L[256]},Sv=new Wm([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ev=new jm(0),Av=function(e,t,n,r,a,i){var o=e.length,s=new jm(r+o+5*(1+Math.ceil(o/7e3))+a),c=s.subarray(r,s.length-a),u=0;if(!t||o<8)for(var l=0;l<=o;l+=65535){var f=l+65535;f<o?u=Tv(c,u,e.subarray(l,f)):(c[l]=i,u=Tv(c,u,e.subarray(l,o)))}else{for(var d=Sv[t-1],h=d>>>13,p=8191&d,b=(1<<n)-1,m=new Vm(32768),v=new Vm(b+1),g=Math.ceil(n/3),y=2*g,x=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<y)&b},w=new Wm(25e3),_=new Vm(288),M=new Vm(32),T=0,k=0,S=(l=0,0),E=0,A=0;l<o;++l){var C=x(l),L=32767&l,R=v[C];if(m[L]=R,v[C]=L,E<=l){var P=o-l;if((T>7e3||S>24576)&&P>423){u=kv(e,c,0,w,_,M,k,S,A,l-A,u),S=T=k=0,A=l;for(var I=0;I<286;++I)_[I]=0;for(I=0;I<30;++I)M[I]=0}var N=2,O=0,D=p,F=L-R&32767;if(P>2&&C==x(l-F)){var B=Math.min(h,P)-1,z=Math.min(32767,l),U=Math.min(258,P);while(F<=z&&--D&&L!=R){if(e[l+N]==e[l+N-F]){for(var H=0;H<U&&e[l+H]==e[l+H-F];++H);if(H>N){if(N=H,O=F,H>B)break;var G=Math.min(F,H-2),j=0;for(I=0;I<G;++I){var V=l-F+I+32768&32767,W=m[V],q=V-W+32768&32767;q>j&&(j=q,R=V)}}}L=R,R=m[L],F+=L-R+32768&32767}}if(O){w[S++]=268435456|Qm[N]<<18|tv[O];var X=31&Qm[N],Y=31&tv[O];k+=qm[X]+Xm[Y],++_[257+X],++M[Y],E=l+N,++T}else w[S++]=e[l],++_[e[l]]}}u=kv(e,c,i,w,_,M,k,S,A,l-A,u),!i&&7&u&&(u=Tv(c,u+1,Ev))}return mv(s,0,r+bv(u)+a)},Cv=function(){for(var e=new Wm(256),t=0;t<256;++t){var n=t,r=9;while(--r)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),Lv=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Cv[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},Rv=function(){var e=1,t=0;return{p:function(n){for(var r=e,a=t,i=n.length,o=0;o!=i;){for(var s=Math.min(o+2655,i);o<s;++o)a+=r+=n[o];r=(65535&r)+15*(r>>16),a=(65535&a)+15*(a>>16)}e=r,t=a},d:function(){return e%=65521,t%=65521,(255&e)<<24|e>>>8<<16|(255&t)<<8|t>>>8}}},Pv=function(e,t,n,r,a){return Av(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!a)},Iv=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Nv=function(e,t,n){for(var r=e(),a=e.toString(),i=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<r.length;++o){var s=r[o],c=i[o];if("function"==typeof s){t+=";"+c+"=";var u=s.toString();if(s.prototype)if(-1!=u.indexOf("[native code]")){var l=u.indexOf(" ",8)+1;t+=u.slice(l,u.indexOf("(",l))}else for(var f in t+=u,s.prototype)t+=";"+c+".prototype."+f+"="+s.prototype[f].toString();else t+=u}else n[c]=s}return[t,n]},Ov=[],Dv=function(e){var t=[];for(var n in e)(e[n]instanceof jm||e[n]instanceof Vm||e[n]instanceof Wm)&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},Fv=function(e,t,n,r){var a;if(!Ov[n]){for(var i="",o={},s=e.length-1,c=0;c<s;++c)a=Nv(e[c],i,o),i=a[0],o=a[1];Ov[n]=Nv(e[s],i,o)}var u=Iv({},Ov[n][1]);return Gm(Ov[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,u,Dv(u),r)},Bv=function(){return[jm,Vm,Wm,qm,Xm,Ym,Km,ev,uv,fv,nv,iv,dv,hv,pv,bv,mv,vv,hg,Vv,Wv]},zv=function(){return[jm,Vm,Wm,qm,Xm,Ym,Qm,tv,cv,ov,lv,sv,nv,Sv,Ev,iv,gv,yv,xv,wv,_v,Mv,Tv,kv,bv,mv,Av,Pv,ug,Vv]},Uv=function(){return[$v,ng,Qv,Lv,Cv]},Hv=function(){return[eg,tg]},Gv=function(){return[rg,Qv,Rv]},jv=function(){return[ag]},Vv=function(e){return postMessage(e,[e.buffer])},Wv=function(e){return e&&e.size&&new jm(e.size)},qv=function(e,t,n,r,a,i){var o=Fv(n,r,a,(function(e,t){o.terminate(),i(e,t)}));return o.postMessage([e,t],t.consume?[e.buffer]:[]),function(){o.terminate()}},Xv=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},Yv=function(e,t,n,r,a){var i,o=Fv(e,r,a,(function(e,n){e?(o.terminate(),t.ondata.call(t,e)):(n[1]&&o.terminate(),t.ondata.call(t,e,n[0],n[1]))}));o.postMessage(n),t.push=function(e,n){if(i)throw"stream finished";if(!t.ondata)throw"no stream handler";o.postMessage([e,i=n],[e.buffer])},t.terminate=function(){o.terminate()}},Zv=function(e,t){return e[t]|e[t+1]<<8},Jv=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},Kv=function(e,t){return Jv(e,t)+4294967296*Jv(e,t+4)},Qv=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},$v=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&Qv(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},eg=function(e){if(31!=e[0]||139!=e[1]||8!=e[2])throw"invalid gzip data";var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},tg=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},ng=function(e){return 10+(e.filename&&e.filename.length+1||0)},rg=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},ag=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function ig(e,t){return t||"function"!=typeof e||(t=e,e={}),this.ondata=t,e}var og=function(){function e(e,t){t||"function"!=typeof e||(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(Pv(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e}(),sg=function(){function e(e,t){Yv([zv,function(){return[Xv,og]}],this,ig.call(this,e,t),(function(e){var t=new og(e.data);onmessage=Xv(t)}),6)}return e}();function cg(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return qv(e,t,[zv],(function(e){return Vv(ug(e.data[0],e.data[1]))}),0,n)}function ug(e,t){return Pv(e,t||{},0,0)}var lg=function(){function e(e){this.s={},this.p=new jm(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,n=new jm(t+e.length);n.set(this.p),n.set(e,t),this.p=n},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=vv(this.p,this.o,this.s);this.ondata(mv(n,t,this.s.b),this.d),this.o=mv(n,this.s.b-32768),this.s.b=this.o.length,this.p=mv(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}(),fg=function(){function e(e){this.ondata=e,Yv([Bv,function(){return[Xv,lg]}],this,0,(function(){var e=new lg;onmessage=Xv(e)}),7)}return e}();function dg(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return qv(e,t,[Bv],(function(e){return Vv(hg(e.data[0],Wv(e.data[1])))}),1,n)}function hg(e,t){return vv(e,t)}var pg=function(){function e(e,t){this.c=Lv(),this.l=0,this.v=1,og.call(this,e,t)}return e.prototype.push=function(e,t){og.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=Pv(e,this.o,this.v&&ng(this.o),t&&8,!t);this.v&&($v(n,this.o),this.v=0),t&&(Qv(n,n.length-8,this.c.d()),Qv(n,n.length-4,this.l)),this.ondata(n,t)},e}(),bg=function(){function e(e,t){Yv([zv,Uv,function(){return[Xv,og,pg]}],this,ig.call(this,e,t),(function(e){var t=new pg(e.data);onmessage=Xv(t)}),8)}return e}();function mg(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return qv(e,t,[zv,Uv,function(){return[vg]}],(function(e){return Vv(vg(e.data[0],e.data[1]))}),2,n)}function vg(e,t){t||(t={});var n=Lv(),r=e.length;n.p(e);var a=Pv(e,t,ng(t),8),i=a.length;return $v(a,t),Qv(a,i-8,n.d()),Qv(a,i-4,r),a}var gg=function(){function e(e){this.v=1,lg.call(this,e)}return e.prototype.push=function(e,t){if(lg.prototype.e.call(this,e),this.v){var n=this.p.length>3?eg(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}lg.prototype.c.call(this,t)},e}(),yg=function(){function e(e){this.ondata=e,Yv([Bv,Hv,function(){return[Xv,lg,gg]}],this,0,(function(){var e=new gg;onmessage=Xv(e)}),9)}return e}();function xg(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return qv(e,t,[Bv,Hv,function(){return[wg]}],(function(e){return Vv(wg(e.data[0]))}),3,n)}function wg(e,t){return vv(e.subarray(eg(e),-8),t||new jm(tg(e)))}var _g=function(){function e(e,t){this.c=Rv(),this.v=1,og.call(this,e,t)}return e.prototype.push=function(e,t){og.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=Pv(e,this.o,this.v&&2,t&&4,!t);this.v&&(rg(n,this.o),this.v=0),t&&Qv(n,n.length-4,this.c.d()),this.ondata(n,t)},e}(),Mg=function(){function e(e,t){Yv([zv,Gv,function(){return[Xv,og,_g]}],this,ig.call(this,e,t),(function(e){var t=new _g(e.data);onmessage=Xv(t)}),10)}return e}();function Tg(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return qv(e,t,[zv,Gv,function(){return[kg]}],(function(e){return Vv(kg(e.data[0],e.data[1]))}),4,n)}function kg(e,t){t||(t={});var n=Rv();n.p(e);var r=Pv(e,t,2,4);return rg(r,t),Qv(r,r.length-4,n.d()),r}var Sg=function(){function e(e){this.v=1,lg.call(this,e)}return e.prototype.push=function(e,t){if(lg.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}lg.prototype.c.call(this,t)},e}(),Eg=function(){function e(e){this.ondata=e,Yv([Bv,jv,function(){return[Xv,lg,Sg]}],this,0,(function(){var e=new Sg;onmessage=Xv(e)}),11)}return e}();function Ag(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return qv(e,t,[Bv,jv,function(){return[Cg]}],(function(e){return Vv(Cg(e.data[0],Wv(e.data[1])))}),5,n)}function Cg(e,t){return vv((ag(e),e.subarray(2,-4)),t)}var Lg=function(){function e(e){this.G=gg,this.I=lg,this.Z=Sg,this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var n=new jm(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,a=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(a):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(a):new this.Z(a),this.s.push(this.p,t),this.p=null}}},e}(),Rg=function(){function e(e){this.G=yg,this.I=fg,this.Z=Eg,this.ondata=e}return e.prototype.push=function(e,t){Lg.prototype.push.call(this,e,t)},e}();function Pg(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return 31==e[0]&&139==e[1]&&8==e[2]?xg(e,t,n):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?dg(e,t,n):Ag(e,t,n)}function Ig(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?wg(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?hg(e,t):Cg(e,t)}var Ng=function e(t,n,r,a){for(var i in t){var o=t[i],s=n+i;o instanceof jm?r[s]=[o,a]:Array.isArray(o)?r[s]=[o[0],Iv(a,o[1])]:e(o,s+"/",r,a)}},Og="undefined"!=typeof TextEncoder&&new TextEncoder,Dg="undefined"!=typeof TextDecoder&&new TextDecoder,Fg=0;try{Dg.decode(Ev,{stream:!0}),Fg=1}catch(mw){}var Bg=function(e){for(var t="",n=0;;){var r=e[n++],a=(r>127)+(r>223)+(r>239);if(n+a>e.length)return[t,mv(e,n-1)];a?3==a?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&a?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}},zg=function(){function e(e){this.ondata=e,Fg?this.t=new TextDecoder:this.p=Ev}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var n=new jm(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length);var r=Bg(n),a=r[0],i=r[1];if(t){if(i.length)throw"invalid utf-8 data";this.p=null}else this.p=i;this.ondata(a,t)}},e}(),Ug=function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(Hg(e),this.d=t||!1)},e}();function Hg(e,t){if(t){for(var n=new jm(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(Og)return Og.encode(e);var a=e.length,i=new jm(e.length+(e.length>>1)),o=0,s=function(e){i[o++]=e};for(r=0;r<a;++r){if(o+5>i.length){var c=new jm(o+8+(a-r<<1));c.set(i),i=c}var u=e.charCodeAt(r);u<128||t?s(u):u<2048?(s(192|u>>6),s(128|63&u)):u>55295&&u<57344?(u=65536+(1047552&u)|1023&e.charCodeAt(++r),s(240|u>>18),s(128|u>>12&63),s(128|u>>6&63),s(128|63&u)):(s(224|u>>12),s(128|u>>6&63),s(128|63&u))}return mv(i,0,o)}function Gg(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(Dg)return Dg.decode(e);var a=Bg(e),i=a[0],o=a[1];if(o.length)throw"invalid utf-8 data";return i}var jg=function(e){return 1==e?3:e<6?2:9==e?1:0},Vg=function(e,t){return t+30+Zv(e,t+26)+Zv(e,t+28)},Wg=function(e,t,n){var r=Zv(e,t+28),a=Gg(e.subarray(t+46,t+46+r),!(2048&Zv(e,t+8))),i=t+46+r,o=Jv(e,t+20),s=n&&4294967295==o?qg(e,i):[o,Jv(e,t+24),Jv(e,t+42)],c=s[0],u=s[1],l=s[2];return[Zv(e,t+10),c,u,a,i+Zv(e,t+30)+Zv(e,t+32),l]},qg=function(e,t){for(;1!=Zv(e,t);t+=4+Zv(e,t+2));return[Kv(e,t+12),Kv(e,t+4),Kv(e,t+20)]},Xg=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},Yg=function(e,t,n,r,a,i,o,s){var c=r.length,u=n.extra,l=s&&s.length,f=Xg(u);Qv(e,t,null!=o?33639248:67324752),t+=4,null!=o&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==i&&8),e[t++]=a&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var d=new Date(null==n.mtime?Date.now():n.mtime),h=d.getFullYear()-1980;if(h<0||h>119)throw"date not in range 1980-2099";if(Qv(e,t,h<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>>1),t+=4,null!=i&&(Qv(e,t,n.crc),Qv(e,t+4,i),Qv(e,t+8,n.size)),Qv(e,t+12,c),Qv(e,t+14,f),t+=16,null!=o&&(Qv(e,t,l),Qv(e,t+6,n.attrs),Qv(e,t+10,o),t+=14),e.set(r,t),t+=c,f)for(var p in u){var b=u[p],m=b.length;Qv(e,t,+p),Qv(e,t+2,m),e.set(b,t+4),t+=4+m}return l&&(e.set(s,t),t+=l),t},Zg=function(e,t,n,r,a){Qv(e,t,101010256),Qv(e,t+8,n),Qv(e,t+10,n),Qv(e,t+12,r),Qv(e,t+16,a)},Jg=function(){function e(e){this.filename=e,this.c=Lv(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e}(),Kg=function(){function e(e,t){var n=this;t||(t={}),Jg.call(this,e),this.d=new og(t,(function(e,t){n.ondata(null,e,t)})),this.compression=8,this.flag=jg(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(mw){this.ondata(mw,null,t)}},e.prototype.push=function(e,t){Jg.prototype.push.call(this,e,t)},e}(),Qg=function(){function e(e,t){var n=this;t||(t={}),Jg.call(this,e),this.d=new sg(t,(function(e,t,r){n.ondata(e,t,r)})),this.compression=8,this.flag=jg(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){Jg.prototype.push.call(this,e,t)},e}(),$g=function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var t=this;if(2&this.d)throw"stream finished";var n=Hg(e.filename),r=n.length,a=e.comment,i=a&&Hg(a),o=r!=e.filename.length||i&&a.length!=i.length,s=r+Xg(e.extra)+30;if(r>65535)throw"filename too long";var c=new jm(s);Yg(c,0,e,n,o);var u=[c],l=function(){for(var e=0,n=u;e<n.length;e++){var r=n[e];t.ondata(null,r,!1)}u=[]},f=this.d;this.d=0;var d=this.u.length,h=Iv(e,{f:n,u:o,o:i,t:function(){e.terminate&&e.terminate()},r:function(){if(l(),f){var e=t.u[d+1];e?e.r():t.d=1}f=1}}),p=0;e.ondata=function(n,r,a){if(n)t.ondata(n,r,a),t.terminate();else if(p+=r.length,u.push(r),a){var i=new jm(16);Qv(i,0,134695760),Qv(i,4,e.crc),Qv(i,8,p),Qv(i,12,e.size),u.push(i),h.c=p,h.b=s+p+16,h.crc=e.crc,h.size=e.size,f&&h.r(),f=1}else f&&l()},this.u.push(h)},e.prototype.end=function(){var e=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&e.d&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,t=0,n=0,r=0,a=this.u;r<a.length;r++){var i=a[r];n+=46+i.f.length+Xg(i.extra)+(i.o?i.o.length:0)}for(var o=new jm(n+22),s=0,c=this.u;s<c.length;s++){i=c[s];Yg(o,e,i,i.f,i.u,i.c,t,i.o),e+=46+i.f.length+Xg(i.extra)+(i.o?i.o.length:0),t+=i.b}Zg(o,e,this.u.length,n,t),this.ondata(null,o,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var n=t[e];n.t()}this.d=2},e}();function ey(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";var r={};Ng(e,"",r,t);var a=Object.keys(r),i=a.length,o=0,s=0,c=i,u=new Array(i),l=[],f=function(){for(var e=0;e<l.length;++e)l[e]()},d=function(){var e=new jm(s+22),t=o,r=s-o;s=0;for(var a=0;a<c;++a){var i=u[a];try{var l=i.c.length;Yg(e,s,i,i.f,i.u,l);var f=30+i.f.length+Xg(i.extra),d=s+f;e.set(i.c,d),Yg(e,o,i,i.f,i.u,l,s,i.m),o+=16+f+(i.m?i.m.length:0),s=d+l}catch(mw){return n(mw,null)}}Zg(e,o,u.length,r,t),n(null,e)};i||d();for(var h=function(e){var t=a[e],c=r[t],h=c[0],p=c[1],b=Lv(),m=h.length;b.p(h);var v=Hg(t),g=v.length,y=p.comment,x=y&&Hg(y),w=x&&x.length,_=Xg(p.extra),M=0==p.level?0:8,T=function(r,a){if(r)f(),n(r,null);else{var c=a.length;u[e]=Iv(p,{size:m,crc:b.d(),c:a,f:v,m:x,u:g!=t.length||x&&y.length!=w,compression:M}),o+=30+g+_+c,s+=76+2*(g+_)+(w||0)+c,--i||d()}};if(g>65535&&T("filename too long",null),M)if(m<16e4)try{T(null,ug(h,p))}catch(mw){T(mw,null)}else l.push(cg(h,p,T));else T(null,h)},p=0;p<c;++p)h(p);return f}function ty(e,t){t||(t={});var n={},r=[];Ng(e,"",n,t);var a=0,i=0;for(var o in n){var s=n[o],c=s[0],u=s[1],l=0==u.level?0:8,f=Hg(o),d=f.length,h=u.comment,p=h&&Hg(h),b=p&&p.length,m=Xg(u.extra);if(d>65535)throw"filename too long";var v=l?ug(c,u):c,g=v.length,y=Lv();y.p(c),r.push(Iv(u,{size:c.length,crc:y.d(),c:v,f:f,m:p,u:d!=o.length||p&&h.length!=b,o:a,compression:l})),a+=30+d+m+g,i+=76+2*(d+m)+(b||0)+g}for(var x=new jm(i+22),w=a,_=i-a,M=0;M<r.length;++M){f=r[M];Yg(x,f.o,f,f.f,f.u,f.c.length);var T=30+f.f.length+Xg(f.extra);x.set(f.c,f.o+T),Yg(x,a,f,f.f,f.u,f.c.length,f.o,f.m),a+=16+T+(f.m?f.m.length:0)}return Zg(x,a,r.length,_,w),x}var ny=function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e}(),ry=function(){function e(){var e=this;this.i=new lg((function(t,n){e.ondata(null,t,n)}))}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(mw){this.ondata(mw,e,t)}},e.compression=8,e}(),ay=function(){function e(e,t){var n=this;t<32e4?this.i=new lg((function(e,t){n.ondata(null,e,t)})):(this.i=new fg((function(e,t,r){n.ondata(e,t,r)})),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=mv(e,0)),this.i.push(e,t)},e.compression=8,e}(),iy=function(){function e(e){this.onfile=e,this.k=[],this.o={0:ny},this.p=Ev}return e.prototype.push=function(e,t){var n=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,e.length),a=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(a,!this.c):this.k[0].push(a),e=e.subarray(r),e.length)return this.push(e,t)}else{var i=0,o=0,s=void 0,c=void 0;this.p.length?e.length?(c=new jm(this.p.length+e.length),c.set(this.p),c.set(e,this.p.length)):c=this.p:c=e;for(var u=c.length,l=this.c,f=l&&this.d,d=function(){var e,t=Jv(c,o);if(67324752==t){i=1,s=o,h.d=null,h.c=0;var r=Zv(c,o+6),a=Zv(c,o+8),f=2048&r,d=8&r,p=Zv(c,o+26),b=Zv(c,o+28);if(u>o+30+p+b){var m=[];h.k.unshift(m),i=2;var v,g=Jv(c,o+18),y=Jv(c,o+22),x=Gg(c.subarray(o+30,o+=30+p),!f);4294967295==g?(e=d?[-2]:qg(c,o),g=e[0],y=e[1]):d&&(g=-1),o+=b,h.c=g;var w={name:x,compression:a,start:function(){if(!w.ondata)throw"no callback";if(g){var e=n.o[a];if(!e)throw"unknown compression type "+a;v=g<0?new e(x):new e(x,g,y),v.ondata=function(e,t,n){w.ondata(e,t,n)};for(var t=0,r=m;t<r.length;t++){var i=r[t];v.push(i,!1)}n.k[0]==m&&n.c?n.d=v:v.push(Ev,!0)}else w.ondata(null,Ev,!0)},terminate:function(){v&&v.terminate&&v.terminate()}};g>=0&&(w.size=g,w.originalSize=y),h.onfile(w)}return"break"}if(l){if(134695760==t)return s=o+=12+(-2==l&&8),i=3,h.c=0,"break";if(33639248==t)return s=o-=4,i=3,h.c=0,"break"}},h=this;o<u-4;++o){var p=d();if("break"===p)break}if(this.p=Ev,l<0){var b=i?c.subarray(0,s-12-(-2==l&&8)-(134695760==Jv(c,s-16)&&4)):c.subarray(0,o);f?f.push(b,!!i):this.k[+(2==i)].push(b)}if(2&i)return this.push(c.subarray(o),t);this.p=c.subarray(o)}if(t){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e},e}();function oy(e,t){if("function"!=typeof t)throw"no callback";for(var n=[],r=function(){for(var e=0;e<n.length;++e)n[e]()},a={},i=e.length-22;101010256!=Jv(e,i);--i)if(!i||e.length-i>65558)return void t("invalid zip file",null);var o=Zv(e,i+8);o||t(null,{});var s=o,c=Jv(e,i+16),u=4294967295==c;if(u){if(i=Jv(e,i-12),101075792!=Jv(e,i))return void t("invalid zip file",null);s=o=Jv(e,i+32),c=Jv(e,i+48)}for(var l=function(s){var l=Wg(e,c,u),f=l[0],d=l[1],h=l[2],p=l[3],b=l[4],m=l[5],v=Vg(e,m);c=b;var g=function(e,n){e?(r(),t(e,null)):(a[p]=n,--o||t(null,a))};if(f)if(8==f){var y=e.subarray(v,v+d);if(d<32e4)try{g(null,hg(y,new jm(h)))}catch(i){g(i,null)}else n.push(dg(y,{size:h},g))}else g("unknown compression type "+f,null);else g(null,mv(e,v,v+d))},f=0;f<s;++f)l(f);return r}function sy(e){for(var t={},n=e.length-22;101010256!=Jv(e,n);--n)if(!n||e.length-n>65558)throw"invalid zip file";var r=Zv(e,n+8);if(!r)return{};var a=Jv(e,n+16),i=4294967295==a;if(i){if(n=Jv(e,n-12),101075792!=Jv(e,n))throw"invalid zip file";r=Jv(e,n+32),a=Jv(e,n+48)}for(var o=0;o<r;++o){var s=Wg(e,a,i),c=s[0],u=s[1],l=s[2],f=s[3],d=s[4],h=s[5],p=Vg(e,h);if(a=d,c){if(8!=c)throw"unknown compression type "+c;t[f]=hg(e.subarray(p,p+u),new jm(l))}else t[f]=mv(e,p,p+u)}return t}var cy,uy,ly,fy=function(){function e(){v(this,e)}return g(e,null,[{key:"findSpan",value:function(e,t,n){var r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;var a=e,i=r,o=Math.floor((a+i)/2);while(t<n[o]||t>=n[o+1])t<n[o]?i=o:a=o,o=Math.floor((a+i)/2);return o}},{key:"calcBasisFunctions",value:function(e,t,n,r){var a=[],i=[],o=[];a[0]=1;for(var s=1;s<=n;++s){i[s]=t-r[e+1-s],o[s]=r[e+s]-t;for(var c=0,u=0;u<s;++u){var l=o[u+1],f=i[s-u],d=a[u]/(l+f);a[u]=c+l*d,c=f*d}a[s]=c}return a}},{key:"calcBSplinePoint",value:function(e,t,n,r){for(var a=this.findSpan(e,r,t),i=this.calcBasisFunctions(a,r,e,t),o=new sr(0,0,0,0),s=0;s<=e;++s){var c=n[a-e+s],u=i[s],l=c.w*u;o.x+=c.x*l,o.y+=c.y*l,o.z+=c.z*l,o.w+=c.w*u}return o}},{key:"calcBasisFunctionDerivatives",value:function(e,t,n,r,a){for(var i=[],o=0;o<=n;++o)i[o]=0;for(var s=[],c=0;c<=r;++c)s[c]=i.slice(0);for(var u=[],l=0;l<=n;++l)u[l]=i.slice(0);u[0][0]=1;for(var f=i.slice(0),d=i.slice(0),h=1;h<=n;++h){f[h]=t-a[e+1-h],d[h]=a[e+h]-t;for(var p=0,b=0;b<h;++b){var m=d[b+1],v=f[h-b];u[h][b]=m+v;var g=u[b][h-1]/u[h][b];u[b][h]=p+m*g,p=v*g}u[h][h]=p}for(var y=0;y<=n;++y)s[0][y]=u[y][n];for(var x=0;x<=n;++x){for(var w=0,_=1,M=[],T=0;T<=n;++T)M[T]=i.slice(0);M[0][0]=1;for(var k=1;k<=r;++k){var S=0,E=x-k,A=n-k;x>=k&&(M[_][0]=M[w][0]/u[A+1][E],S=M[_][0]*u[E][A]);for(var C=E>=-1?1:-E,L=x-1<=A?k-1:n-x,R=C;R<=L;++R)M[_][R]=(M[w][R]-M[w][R-1])/u[A+1][E+R],S+=M[_][R]*u[E+R][A];x<=A&&(M[_][k]=-M[w][k-1]/u[A+1][x],S+=M[_][k]*u[x][A]),s[k][x]=S;var P=w;w=_,_=P}}for(var I=n,N=1;N<=r;++N){for(var O=0;O<=n;++O)s[N][O]*=I;I*=n-N}return s}},{key:"calcBSplineDerivatives",value:function(e,t,n,r,a){for(var i=a<e?a:e,o=[],s=this.findSpan(e,r,t),c=this.calcBasisFunctionDerivatives(s,r,e,i,t),u=[],l=0;l<n.length;++l){var f=n[l].clone(),d=f.w;f.x*=d,f.y*=d,f.z*=d,u[l]=f}for(var h=0;h<=i;++h){for(var p=u[s-e].clone().multiplyScalar(c[h][0]),b=1;b<=e;++b)p.add(u[s-e+b].clone().multiplyScalar(c[h][b]));o[h]=p}for(var m=i+1;m<=a+1;++m)o[m]=new sr(0,0,0);return o}},{key:"calcKoverI",value:function(e,t){for(var n=1,r=2;r<=e;++r)n*=r;for(var a=1,i=2;i<=t;++i)a*=i;for(var o=2;o<=e-t;++o)a*=o;return n/a}},{key:"calcRationalCurveDerivatives",value:function(e){for(var t=e.length,n=[],r=[],a=0;a<t;++a){var i=e[a];n[a]=new dr(i.x,i.y,i.z),r[a]=i.w}for(var o=[],s=0;s<t;++s){for(var c=n[s].clone(),u=1;u<=s;++u)c.sub(o[s-u].clone().multiplyScalar(this.calcKoverI(s,u)*r[u]));o[s]=c.divideScalar(r[0])}return o}},{key:"calcNURBSDerivatives",value:function(e,t,n,r,a){var i=this.calcBSplineDerivatives(e,t,n,r,a);return this.calcRationalCurveDerivatives(i)}},{key:"calcSurfacePoint",value:function(e,t,n,r,a,i,o,s){for(var c=this.findSpan(e,i,n),u=this.findSpan(t,o,r),l=this.calcBasisFunctions(c,i,e,n),f=this.calcBasisFunctions(u,o,t,r),d=[],h=0;h<=t;++h){d[h]=new sr(0,0,0,0);for(var p=0;p<=e;++p){var b=a[c-e+p][u-t+h].clone(),m=b.w;b.x*=m,b.y*=m,b.z*=m,d[h].add(b.multiplyScalar(l[p]))}}for(var v=new sr(0,0,0,0),g=0;g<=t;++g)v.add(d[g].multiplyScalar(f[g]));v.divideScalar(v.w),s.set(v.x,v.y,v.z)}}]),e}(),dy=function(e){b(n,e);var t=m(n);function n(e,r,a,i,o){var s;v(this,n),s=t.call(this),s.degree=e,s.knots=r,s.controlPoints=[],s.startKnot=i||0,s.endKnot=o||s.knots.length-1;for(var c=0;c<a.length;++c){var u=a[c];s.controlPoints[c]=new sr(u.x,u.y,u.z,u.w)}return s}return g(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr,n=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=fy.calcBSplinePoint(this.degree,this.knots,this.controlPoints,r);return 1!==a.w&&a.divideScalar(a.w),n.set(a.x,a.y,a.z)}},{key:"getTangent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dr,n=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=fy.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,r,1);return n.copy(a[1]).normalize(),n}}]),n}(Gh),hy=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=""===a.path?zp.extractUrlBase(e):a.path,o=new Dh(this.manager);o.setPath(a.path),o.setResponseType("arraybuffer"),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,(function(n){try{t(a.parse(n,i))}catch(mw){r?r(mw):console.error(mw),a.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e,t){if(wy(e))cy=(new gy).parse(e);else{var n=Py(e);if(!_y(n))throw new Error("THREE.FBXLoader: Unknown format.");if(My(n)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+My(n));cy=(new vy).parse(n)}var r=new Hh(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new py(r,this.manager).parse(cy)}}]),n}(Nh),py=function(){function e(t,n){v(this,e),this.textureLoader=t,this.manager=n}return g(e,[{key:"parse",value:function(){uy=this.parseConnections();var e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),a=(new by).parse(r);return this.parseScene(r,a,n),ly}},{key:"parseConnections",value:function(){var e=new Map;if("Connections"in cy){var t=cy.Connections.connections;t.forEach((function(t){var n=t[0],r=t[1],a=t[2];e.has(n)||e.set(n,{parents:[],children:[]});var i={ID:r,relationship:a};e.get(n).parents.push(i),e.has(r)||e.set(r,{parents:[],children:[]});var o={ID:n,relationship:a};e.get(r).children.push(o)}))}return e}},{key:"parseImages",value:function(){var e={},t={};if("Video"in cy.Objects){var n=cy.Objects.Video;for(var r in n){var a=n[r],i=parseInt(r);if(e[i]=a.RelativeFilename||a.Filename,"Content"in a){var o=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,s="string"===typeof a.Content&&""!==a.Content;if(o||s){var c=this.parseImage(n[r]);t[a.RelativeFilename||a.Filename]=c}}}}for(var u in e){var l=e[u];void 0!==t[l]?e[u]=t[l]:e[u]=e[u].split("\\").pop()}return e}},{key:"parseImage",value:function(e){var t,n=e.Content,r=e.RelativeFilename||e.Filename,a=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(a){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",r),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+a+'" is not supported.')}if("string"===typeof n)return"data:"+t+";base64,"+n;var i=new Uint8Array(n);return window.URL.createObjectURL(new Blob([i],{type:t}))}},{key:"parseTextures",value:function(e){var t=new Map;if("Texture"in cy.Objects){var n=cy.Objects.Texture;for(var r in n){var a=this.parseTexture(n[r],e);t.set(parseInt(r),a)}}return t}},{key:"parseTexture",value:function(e,t){var n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;var r=e.WrapModeU,a=e.WrapModeV,i=void 0!==r?r.value:0,o=void 0!==a?a.value:0;if(n.wrapS=0===i?Ce:Le,n.wrapT=0===o?Ce:Le,"Scaling"in e){var s=e.Scaling.value;n.repeat.x=s[0],n.repeat.y=s[1]}return n}},{key:"loadTexture",value:function(e,t){var n,r,a=this.textureLoader.path,i=uy.get(e.id).children;void 0!==i&&i.length>0&&void 0!==t[i[0].ID]&&(n=t[i[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));var o=e.FileName.slice(-3).toLowerCase();if("tga"===o){var s=this.manager.getHandler(".tga");null===s?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),r=new ir):(s.setPath(this.textureLoader.path),r=s.load(n))}else"psd"===o?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),r=new ir):r=this.textureLoader.load(n);return this.textureLoader.setPath(a),r}},{key:"parseMaterials",value:function(e){var t=new Map;if("Material"in cy.Objects){var n=cy.Objects.Material;for(var r in n){var a=this.parseMaterial(n[r],e);null!==a&&t.set(parseInt(r),a)}}return t}},{key:"parseMaterial",value:function(e,t){var n=e.id,r=e.attrName,a=e.ShadingModel;if("object"===y(a)&&(a=a.value),!uy.has(n))return null;var i,o=this.parseParameters(e,t,n);switch(a.toLowerCase()){case"phong":i=new ch;break;case"lambert":i=new fh;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),i=new ch;break}return i.setValues(o),i.name=r,i}},{key:"parseParameters",value:function(e,t,n){var r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=(new Ba).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(r.color=(new Ba).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=(new Ba).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(r.emissive=(new Ba).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=(new Ba).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(r.specular=(new Ba).fromArray(e.SpecularColor.value));var a=this;return uy.get(n).children.forEach((function(e){var n=e.relationship;switch(n){case"Bump":r.bumpMap=a.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":r.aoMap=a.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=a.getTexture(t,e.ID),r.map.encoding=fn;break;case"DisplacementColor":r.displacementMap=a.getTexture(t,e.ID);break;case"EmissiveColor":r.emissiveMap=a.getTexture(t,e.ID),r.emissiveMap.encoding=fn;break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=a.getTexture(t,e.ID);break;case"ReflectionColor":r.envMap=a.getTexture(t,e.ID),r.envMap.mapping=ke,r.envMap.encoding=fn;break;case"SpecularColor":r.specularMap=a.getTexture(t,e.ID),r.specularMap.encoding=fn;break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=a.getTexture(t,e.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n);break}})),r}},{key:"getTexture",value:function(e,t){return"LayeredTexture"in cy.Objects&&t in cy.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=uy.get(t).children[0].ID),e.get(t)}},{key:"parseDeformers",value:function(){var e={},t={};if("Deformer"in cy.Objects){var n=cy.Objects.Deformer;for(var r in n){var a=n[r],i=uy.get(parseInt(r));if("Skin"===a.attrType){var o=this.parseSkeleton(i,n);o.ID=r,i.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=i.parents[0].ID,e[r]=o}else if("BlendShape"===a.attrType){var s={id:r};s.rawTargets=this.parseMorphTargets(i,n),s.id=r,i.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=s}}}return{skeletons:e,morphTargets:t}}},{key:"parseSkeleton",value:function(e,t){var n=[];return e.children.forEach((function(e){var r=t[e.ID];if("Cluster"===r.attrType){var a={ID:e.ID,indices:[],weights:[],transformLink:(new jr).fromArray(r.TransformLink.a)};"Indexes"in r&&(a.indices=r.Indexes.a,a.weights=r.Weights.a),n.push(a)}})),{rawBones:n,bones:[]}}},{key:"parseMorphTargets",value:function(e,t){for(var n=[],r=0;r<e.children.length;r++){var a=e.children[r],i=t[a.ID],o={name:i.attrName,initialWeight:i.DeformPercent,id:i.id,fullWeights:i.FullWeights.a};if("BlendShapeChannel"!==i.attrType)return;o.geoID=uy.get(parseInt(a.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(o)}return n}},{key:"parseScene",value:function(e,t,n){ly=new Rl;var r=this.parseModels(e.skeletons,t,n),a=cy.Objects.Model,i=this;r.forEach((function(e){var t=a[e.ID];i.setLookAtProperties(e,t);var n=uy.get(e.ID).parents;n.forEach((function(t){var n=r.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&ly.add(e)})),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),this.setupMorphMaterials(),ly.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);var t=Cy(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));var o=(new my).parse();1===ly.children.length&&ly.children[0].isGroup&&(ly.children[0].animations=o,ly=ly.children[0]),ly.animations=o}},{key:"parseModels",value:function(e,t,n){var r=new Map,a=cy.Objects.Model;for(var i in a){var o=parseInt(i),s=a[i],c=uy.get(o),u=this.buildSkeleton(c,e,o,s.attrName);if(!u){switch(s.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,n);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new vf;break;case"Null":default:u=new Rl;break}u.name=s.attrName?vb.sanitizeNodeName(s.attrName):"",u.ID=o}this.getTransformData(u,s),r.set(o,u)}return r}},{key:"buildSkeleton",value:function(e,t,n,r){var a=null;return e.parents.forEach((function(e){var i=function(i){var o=t[i];o.rawBones.forEach((function(t,i){if(t.ID===e.ID){var s=a;a=new vf,a.matrixWorld.copy(t.transformLink),a.name=r?vb.sanitizeNodeName(r):"",a.ID=n,o.bones[i]=a,null!==s&&a.add(s)}}))};for(var o in t)i(o)})),a}},{key:"createCamera",value:function(e){var t,n;if(e.children.forEach((function(e){var t=cy.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new pa;else{var r=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(r=1);var a=1;void 0!==n.NearPlane&&(a=n.NearPlane.value/1e3);var i=1e3;void 0!==n.FarPlane&&(i=n.FarPlane.value/1e3);var o=window.innerWidth,s=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(o=n.AspectWidth.value,s=n.AspectHeight.value);var c=o/s,u=45;void 0!==n.FieldOfView&&(u=n.FieldOfView.value);var l=n.FocalLength?n.FocalLength.value:null;switch(r){case 0:t=new Pi(u,c,a,i),null!==l&&t.setFocalLength(l);break;case 1:t=new Rp(-o/2,o/2,s/2,-s/2,a,i);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new pa;break}}return t}},{key:"createLight",value:function(e){var t,n;if(e.children.forEach((function(e){var t=cy.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new pa;else{var r;r=void 0===n.LightType?0:n.LightType.value;var a=16777215;void 0!==n.Color&&(a=(new Ba).fromArray(n.Color.value));var i=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(i=0);var o=0;void 0!==n.FarAttenuationEnd&&(o=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);var s=1;switch(r){case 0:t=new Lp(a,i,o,s);break;case 1:t=new Ip(a,i);break;case 2:var c=Math.PI/3;void 0!==n.InnerAngle&&(c=$n.degToRad(n.InnerAngle.value));var u=0;void 0!==n.OuterAngle&&(u=$n.degToRad(n.OuterAngle.value),u=Math.max(u,1)),t=new kp(a,i,o,c,u,s);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new Lp(a,i);break}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}},{key:"createMesh",value:function(e,t,n){var r,a=null,i=null,o=[];return e.children.forEach((function(e){t.has(e.ID)&&(a=t.get(e.ID)),n.has(e.ID)&&o.push(n.get(e.ID))})),o.length>1?i=o:o.length>0?i=o[0]:(i=new ch({color:13421772}),o.push(i)),"color"in a.attributes&&o.forEach((function(e){e.vertexColors=!0})),a.FBX_Deformer?(r=new mf(a,i),r.normalizeSkinWeights()):r=new wi(a,i),r}},{key:"createCurve",value:function(e,t){var n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),r=new Ef({color:3342591,linewidth:1});return new If(n,r)}},{key:"getTransformData",value:function(e,t){var n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?Ly(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}},{key:"setLookAtProperties",value:function(e,t){if("LookAtProperty"in t){var n=uy.get(e.ID).children;n.forEach((function(t){if("LookAtProperty"===t.relationship){var n=cy.Objects.Model[t.ID];if("Lcl_Translation"in n){var r=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(r),ly.add(e.target)):e.lookAt((new dr).fromArray(r))}}}))}}},{key:"bindSkeleton",value:function(e,t,n){var r=this.parsePoseNodes(),a=function(a){var i=e[a],o=uy.get(parseInt(i.ID)).parents;o.forEach((function(e){if(t.has(e.ID)){var a=e.ID,o=uy.get(a);o.parents.forEach((function(e){if(n.has(e.ID)){var t=n.get(e.ID);t.bind(new wf(i.bones),r[e.ID])}}))}}))};for(var i in e)a(i)}},{key:"parsePoseNodes",value:function(){var e={};if("Pose"in cy.Objects){var t=cy.Objects.Pose;for(var n in t)if("BindPose"===t[n].attrType){var r=t[n].PoseNode;Array.isArray(r)?r.forEach((function(t){e[t.Node]=(new jr).fromArray(t.Matrix.a)})):e[r.Node]=(new jr).fromArray(r.Matrix.a)}}return e}},{key:"createAmbientLight",value:function(){if("GlobalSettings"in cy&&"AmbientColor"in cy.GlobalSettings){var e=cy.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(0!==t||0!==n||0!==r){var a=new Ba(t,n,r);ly.add(new Np(a,1))}}}},{key:"setupMorphMaterials",value:function(){var e=this;ly.traverse((function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach((function(n,r){e.setupMorphMaterial(t,n,r)})):e.setupMorphMaterial(t,t.material))}))}},{key:"setupMorphMaterial",value:function(e,t,n){var r=e.uuid,a=t.uuid,i=!1;if(ly.traverse((function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach((function(t){t.uuid===a&&e.uuid!==r&&(i=!0)})):e.material.uuid===a&&e.uuid!==r&&(i=!0))})),!0===i){var o=t.clone();o.morphTargets=!0,void 0===n?e.material=o:e.material[n]=o}else t.morphTargets=!0}}]),e}(),by=function(){function e(){v(this,e)}return g(e,[{key:"parse",value:function(e){var t=new Map;if("Geometry"in cy.Objects){var n=cy.Objects.Geometry;for(var r in n){var a=uy.get(parseInt(r)),i=this.parseGeometry(a,n[r],e);t.set(parseInt(r),i)}}return t}},{key:"parseGeometry",value:function(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}},{key:"parseMeshGeometry",value:function(e,t,n){var r=n.skeletons,a=[],i=e.parents.map((function(e){return cy.Objects.Model[e.ID]}));if(0!==i.length){var o=e.children.reduce((function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&a.push(n.morphTargets[e.ID])}));var s=i[0],c={};"RotationOrder"in s&&(c.eulerOrder=Ly(s.RotationOrder.value)),"InheritType"in s&&(c.inheritType=parseInt(s.InheritType.value)),"GeometricTranslation"in s&&(c.translation=s.GeometricTranslation.value),"GeometricRotation"in s&&(c.rotation=s.GeometricRotation.value),"GeometricScaling"in s&&(c.scale=s.GeometricScaling.value);var u=Cy(c);return this.genGeometry(t,o,a,u)}}},{key:"genGeometry",value:function(e,t,n,r){var a=new ri;e.attrName&&(a.name=e.attrName);var i=this.parseGeoNode(e,t),o=this.genBuffers(i),s=new qa(o.vertex,3);if(s.applyMatrix4(r),a.setAttribute("position",s),o.colors.length>0&&a.setAttribute("color",new qa(o.colors,3)),t&&(a.setAttribute("skinIndex",new ja(o.weightsIndices,4)),a.setAttribute("skinWeight",new qa(o.vertexWeights,4)),a.FBX_Deformer=t),o.normal.length>0){var c=(new nr).getNormalMatrix(r),u=new qa(o.normal,3);u.applyNormalMatrix(c),a.setAttribute("normal",u)}if(o.uvs.forEach((function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),a.setAttribute(n,new qa(o.uvs[t],2))})),i.material&&"AllSame"!==i.material.mappingType){var l=o.materialIndex[0],f=0;if(o.materialIndex.forEach((function(e,t){e!==l&&(a.addGroup(f,t-f,l),l=e,f=t)})),a.groups.length>0){var d=a.groups[a.groups.length-1],h=d.start+d.count;h!==o.materialIndex.length&&a.addGroup(h,o.materialIndex.length-h,l)}0===a.groups.length&&a.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(a,e,n,r),a}},{key:"parseGeoNode",value:function(e,t){var n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];var r=0;while(e.LayerElementUV[r])e.LayerElementUV[r].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,a){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[a]})}))}))),n}},{key:"genBuffers",value:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,a=!1,i=[],o=[],s=[],c=[],u=[],l=[],f=this;return e.vertexIndices.forEach((function(d,h){var p,b=!1;d<0&&(d^=-1,b=!0);var m=[],v=[];if(i.push(3*d,3*d+1,3*d+2),e.color){var g=Sy(h,n,d,e.color);s.push(g[0],g[1],g[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){v.push(e.weight),m.push(e.id)})),v.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);var y=[0,0,0,0],x=[0,0,0,0];v.forEach((function(e,t){var n=e,r=m[t];x.forEach((function(e,t,a){if(n>e){a[t]=n,n=e;var i=y[t];y[t]=r,r=i}}))})),m=y,v=x}while(v.length<4)v.push(0),m.push(0);for(var w=0;w<4;++w)u.push(v[w]),l.push(m[w])}if(e.normal){var _=Sy(h,n,d,e.normal);o.push(_[0],_[1],_[2])}e.material&&"AllSame"!==e.material.mappingType&&(p=Sy(h,n,d,e.material)[0]),e.uv&&e.uv.forEach((function(e,t){var r=Sy(h,n,d,e);void 0===c[t]&&(c[t]=[]),c[t].push(r[0]),c[t].push(r[1])})),r++,b&&(f.genFace(t,e,i,p,o,s,c,u,l,r),n++,r=0,i=[],o=[],s=[],c=[],u=[],l=[])})),t}},{key:"genFace",value:function(e,t,n,r,a,i,o,s,c,u){for(var l=function(u){e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(u-1)]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(u-1)]),e.vertexWeights.push(s[4*(u-1)+1]),e.vertexWeights.push(s[4*(u-1)+2]),e.vertexWeights.push(s[4*(u-1)+3]),e.vertexWeights.push(s[4*u]),e.vertexWeights.push(s[4*u+1]),e.vertexWeights.push(s[4*u+2]),e.vertexWeights.push(s[4*u+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[4*(u-1)]),e.weightsIndices.push(c[4*(u-1)+1]),e.weightsIndices.push(c[4*(u-1)+2]),e.weightsIndices.push(c[4*(u-1)+3]),e.weightsIndices.push(c[4*u]),e.weightsIndices.push(c[4*u+1]),e.weightsIndices.push(c[4*u+2]),e.weightsIndices.push(c[4*u+3])),t.color&&(e.colors.push(i[0]),e.colors.push(i[1]),e.colors.push(i[2]),e.colors.push(i[3*(u-1)]),e.colors.push(i[3*(u-1)+1]),e.colors.push(i[3*(u-1)+2]),e.colors.push(i[3*u]),e.colors.push(i[3*u+1]),e.colors.push(i[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(a[0]),e.normal.push(a[1]),e.normal.push(a[2]),e.normal.push(a[3*(u-1)]),e.normal.push(a[3*(u-1)+1]),e.normal.push(a[3*(u-1)+2]),e.normal.push(a[3*u]),e.normal.push(a[3*u+1]),e.normal.push(a[3*u+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(o[n][0]),e.uvs[n].push(o[n][1]),e.uvs[n].push(o[n][2*(u-1)]),e.uvs[n].push(o[n][2*(u-1)+1]),e.uvs[n].push(o[n][2*u]),e.uvs[n].push(o[n][2*u+1])}))},f=2;f<u;f++)l(f)}},{key:"addMorphTargets",value:function(e,t,n,r){if(0!==n.length){e.morphTargetsRelative=!0,e.morphAttributes.position=[];var a=this;n.forEach((function(n){n.rawTargets.forEach((function(n){var i=cy.Objects.Geometry[n.geoID];void 0!==i&&a.genMorphGeometry(e,t,i,r,n.name)}))}))}}},{key:"genMorphGeometry",value:function(e,t,n,r,a){for(var i=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],o=void 0!==n.Vertices?n.Vertices.a:[],s=void 0!==n.Indexes?n.Indexes.a:[],c=3*e.attributes.position.count,u=new Float32Array(c),l=0;l<s.length;l++){var f=3*s[l];u[f]=o[3*l],u[f+1]=o[3*l+1],u[f+2]=o[3*l+2]}var d={vertexIndices:i,vertexPositions:u},h=this.genBuffers(d),p=new qa(h.vertex,3);p.name=a||n.attrName,p.applyMatrix4(r),e.morphAttributes.position.push(p)}},{key:"parseNormals",value:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a,a=[];return"IndexToDirect"===n&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:a,mappingType:t,referenceType:n}}},{key:"parseUVs",value:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a,a=[];return"IndexToDirect"===n&&(a=e.UVIndex.a),{dataSize:2,buffer:r,indices:a,mappingType:t,referenceType:n}}},{key:"parseVertexColors",value:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a,a=[];return"IndexToDirect"===n&&(a=e.ColorIndex.a),{dataSize:4,buffer:r,indices:a,mappingType:t,referenceType:n}}},{key:"parseMaterialIndices",value:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var r=e.Materials.a,a=[],i=0;i<r.length;++i)a.push(i);return{dataSize:1,buffer:r,indices:a,mappingType:t,referenceType:n}}},{key:"parseNurbsGeometry",value:function(e){if(void 0===dy)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new ri;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ri;for(var n,r,a=t-1,i=e.KnotVector.a,o=[],s=e.Points.a,c=0,u=s.length;c<u;c+=4)o.push((new sr).fromArray(s,c));if("Closed"===e.Form)o.push(o[0]);else if("Periodic"===e.Form){n=a,r=i.length-1-n;for(var l=0;l<a;++l)o.push(o[l])}var f=new dy(a,i,o,n,r),d=f.getPoints(7*o.length),h=new Float32Array(3*d.length);d.forEach((function(e,t){e.toArray(h,3*t)}));var p=new ri;return p.setAttribute("position",new Ga(h,3)),p}}]),e}(),my=function(){function e(){v(this,e)}return g(e,[{key:"parse",value:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var n in t){var r=t[n],a=this.addClip(r);e.push(a)}return e}},{key:"parseClips",value:function(){if(void 0!==cy.Objects.AnimationCurve){var e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);var t=this.parseAnimationLayers(e),n=this.parseAnimStacks(t);return n}}},{key:"parseAnimationCurveNodes",value:function(){var e=cy.Objects.AnimationCurveNode,t=new Map;for(var n in e){var r=e[n];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){var a={id:r.id,attr:r.attrName,curves:{}};t.set(a.id,a)}}return t}},{key:"parseAnimationCurves",value:function(e){var t=cy.Objects.AnimationCurve;for(var n in t){var r={id:t[n].id,times:t[n].KeyTime.a.map(Ty),values:t[n].KeyValueFloat.a},a=uy.get(r.id);if(void 0!==a){var i=a.parents[0].ID,o=a.parents[0].relationship;o.match(/X/)?e.get(i).curves["x"]=r:o.match(/Y/)?e.get(i).curves["y"]=r:o.match(/Z/)?e.get(i).curves["z"]=r:o.match(/d|DeformPercent/)&&e.has(i)&&(e.get(i).curves["morph"]=r)}}}},{key:"parseAnimationLayers",value:function(e){var t=cy.Objects.AnimationLayer,n=new Map,r=function(t){var r=[],a=uy.get(parseInt(t));if(void 0!==a){var i=a.children;i.forEach((function(t,n){if(e.has(t.ID)){var a=e.get(t.ID);if(void 0!==a.curves.x||void 0!==a.curves.y||void 0!==a.curves.z){if(void 0===r[n]){var i=uy.get(t.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==i){var o=cy.Objects.Model[i.toString()];if(void 0===o)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",t);var s={modelName:o.attrName?vb.sanitizeNodeName(o.attrName):"",ID:o.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ly.traverse((function(e){e.ID===o.id&&(s.transform=e.matrix,e.userData.transformData&&(s.eulerOrder=e.userData.transformData.eulerOrder))})),s.transform||(s.transform=new jr),"PreRotation"in o&&(s.preRotation=o.PreRotation.value),"PostRotation"in o&&(s.postRotation=o.PostRotation.value),r[n]=s}}r[n]&&(r[n][a.attr]=a)}else if(void 0!==a.curves.morph){if(void 0===r[n]){var c=uy.get(t.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,u=uy.get(c).parents[0].ID,l=uy.get(u).parents[0].ID,f=uy.get(l).parents[0].ID,d=cy.Objects.Model[f],h={modelName:d.attrName?vb.sanitizeNodeName(d.attrName):"",morphName:cy.Objects.Deformer[c].attrName};r[n]=h}r[n][a.attr]=a}}})),n.set(parseInt(t),r)}};for(var a in t)r(a);return n}},{key:"parseAnimStacks",value:function(e){var t=cy.Objects.AnimationStack,n={};for(var r in t){var a=uy.get(parseInt(r)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var i=e.get(a[0].ID);n[r]={name:t[r].attrName,layer:i}}return n}},{key:"addClip",value:function(e){var t=[],n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new Ah(e.name,-1,t)}},{key:"generateTracks",value:function(e){var t=[],n=new dr,r=new fr,a=new dr;if(e.transform&&e.transform.decompose(n,r,a),n=n.toArray(),r=(new $r).setFromQuaternion(r,e.eulerOrder).toArray(),a=a.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var i=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==i&&t.push(i)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);void 0!==o&&t.push(o)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var s=this.generateVectorTrack(e.modelName,e.S.curves,a,"scale");void 0!==s&&t.push(s)}if(void 0!==e.DeformPercent){var c=this.generateMorphTrack(e);void 0!==c&&t.push(c)}return t}},{key:"generateVectorTrack",value:function(e,t,n,r){var a=this.getTimesForAllAxes(t),i=this.getKeyframeTrackValues(a,t,n);return new Eh(e+"."+r,a,i)}},{key:"generateRotationTrack",value:function(e,t,n,r,a,i){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map($n.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map($n.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map($n.degToRad));var o=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(o,t,n);void 0!==r&&(r=r.map($n.degToRad),r.push(i),r=(new $r).fromArray(r),r=(new fr).setFromEuler(r)),void 0!==a&&(a=a.map($n.degToRad),a.push(i),a=(new $r).fromArray(a),a=(new fr).setFromEuler(a).invert());for(var c=new fr,u=new $r,l=[],f=0;f<s.length;f+=3)u.set(s[f],s[f+1],s[f+2],i),c.setFromEuler(u),void 0!==r&&c.premultiply(r),void 0!==a&&c.multiply(a),c.toArray(l,f/3*4);return new kh(e+".quaternion",o,l)}},{key:"generateMorphTrack",value:function(e){var t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),r=ly.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Mh(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}},{key:"getTimesForAllAxes",value:function(e){var t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){for(var n=1,r=t[0],a=1;a<t.length;a++){var i=t[a];i!==r&&(t[n]=i,r=i,n++)}t=t.slice(0,n)}return t}},{key:"getKeyframeTrackValues",value:function(e,t,n){var r=n,a=[],i=-1,o=-1,s=-1;return e.forEach((function(e){if(t.x&&(i=t.x.times.indexOf(e)),t.y&&(o=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==i){var n=t.x.values[i];a.push(n),r[0]=n}else a.push(r[0]);if(-1!==o){var c=t.y.values[o];a.push(c),r[1]=c}else a.push(r[1]);if(-1!==s){var u=t.z.values[s];a.push(u),r[2]=u}else a.push(r[2])})),a}},{key:"interpolateRotations",value:function(e){for(var t=1;t<e.values.length;t++){var n=e.values[t-1],r=e.values[t]-n,a=Math.abs(r);if(a>=180){var i=a/180,o=r/i,s=n+o,c=e.times[t-1],u=e.times[t]-c,l=u/i,f=c+l,d=[],h=[];while(f<e.times[t])d.push(f),f+=l,h.push(s),s+=o;e.times=Oy(e.times,t,d),e.values=Oy(e.values,t,h)}}}}]),e}(),vy=function(){function e(){v(this,e)}return g(e,[{key:"getPrevNode",value:function(){return this.nodeStack[this.currentIndent-2]}},{key:"getCurrentNode",value:function(){return this.nodeStack[this.currentIndent-1]}},{key:"getCurrentProp",value:function(){return this.currentProp}},{key:"pushStack",value:function(e){this.nodeStack.push(e),this.currentIndent+=1}},{key:"popStack",value:function(){this.nodeStack.pop(),this.currentIndent-=1}},{key:"setCurrentProp",value:function(e,t){this.currentProp=e,this.currentPropName=t}},{key:"parse",value:function(e){this.currentIndent=0,this.allNodes=new xy,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){var a=e.match(/^[\s\t]*;/),i=e.match(/^[\s\t]*$/);if(!a&&!i){var o=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=e.match("^\\t{"+(t.currentIndent-1)+"}}");o?t.parseNodeBegin(e,o):s?t.parseNodeProperty(e,s,n[++r]):c?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes}},{key:"parseNodeBegin",value:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),a={name:n},i=this.parseNodeAttr(r),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,a):n in o?("PoseNode"===n?o.PoseNode.push(a):void 0!==o[n].id&&(o[n]={},o[n][o[n].id]=o[n]),""!==i.id&&(o[n][i.id]=a)):"number"===typeof i.id?(o[n]={},o[n][i.id]=a):"Properties70"!==n&&(o[n]="PoseNode"===n?[a]:a),"number"===typeof i.id&&(a.id=i.id),""!==i.name&&(a.attrName=i.name),""!==i.type&&(a.attrType=i.type),this.pushStack(a)}},{key:"parseNodeAttr",value:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}},{key:"parseNodeProperty",value:function(e,t,n){var r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),a=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===a&&(a=n.replace(/"/g,"").replace(/,$/,"").trim());var i=this.getCurrentNode(),o=i.name;if("Properties70"!==o){if("C"===r){var s=a.split(",").slice(1),c=parseInt(s[0]),u=parseInt(s[1]),l=a.split(",").slice(3);l=l.map((function(e){return e.trim().replace(/^"/,"")})),r="connections",a=[c,u],Iy(a,l),void 0===i[r]&&(i[r]=[])}"Node"===r&&(i.id=a),r in i&&Array.isArray(i[r])?i[r].push(a):"a"!==r?i[r]=a:i.a=a,this.setCurrentProp(i,r),"a"===r&&","!==a.slice(-1)&&(i.a=Ry(a))}else this.parseNodeSpecialProperty(e,r,a)}},{key:"parseNodePropertyContinued",value:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=Ry(t.a))}},{key:"parseNodeSpecialProperty",value:function(e,t,n){var r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),a=r[0],i=r[1],o=r[2],s=r[3],c=r[4];switch(i){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=Ry(c);break}this.getPrevNode()[a]={type:i,type2:o,flag:s,value:c},this.setCurrentProp(this.getPrevNode(),a)}}]),e}(),gy=function(){function e(){v(this,e)}return g(e,[{key:"parse",value:function(e){var t=new yy(e);t.skip(23);var n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);var r=new xy;while(!this.endOfContent(t)){var a=this.parseNode(t,n);null!==a&&r.add(a.name,a)}return r}},{key:"endOfContent",value:function(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}},{key:"parseNode",value:function(e,t){var n={},r=t>=7500?e.getUint64():e.getUint32(),a=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();var i=e.getUint8(),o=e.getString(i);if(0===r)return null;for(var s=[],c=0;c<a;c++)s.push(this.parseProperty(e));var u=s.length>0?s[0]:"",l=s.length>1?s[1]:"",f=s.length>2?s[2]:"";n.singleProperty=1===a&&e.getOffset()===r;while(r>e.getOffset()){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(o,n,d)}return n.propertyList=s,"number"===typeof u&&(n.id=u),""!==l&&(n.attrName=l),""!==f&&(n.attrType=f),""!==o&&(n.name=o),n}},{key:"parseSubNode",value:function(e,t,n){if(!0===n.singleProperty){var r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if("Connections"===e&&"C"===n.name){var a=[];n.propertyList.forEach((function(e,t){0!==t&&a.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(a)}else if("Properties70"===n.name){var i=Object.keys(n);i.forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){var o,s=n.propertyList[0],c=n.propertyList[1],u=n.propertyList[2],l=n.propertyList[3];0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),0===c.indexOf("Lcl ")&&(c=c.replace("Lcl ","Lcl_")),o="Color"===c||"ColorRGB"===c||"Vector"===c||"Vector3D"===c||0===c.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[s]={type:c,type2:u,flag:l,value:o}}else void 0===t[n.name]?"number"===typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}},{key:"parseProperty",value:function(e){var t,n=e.getString(1);switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return t=e.getUint32(),e.getArrayBuffer(t);case"S":return t=e.getUint32(),e.getString(t);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=e.getUint32(),i=e.getUint32(),o=e.getUint32();if(0===i)switch(n){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}"undefined"===typeof a&&console.error("THREE.FBXLoader: External library fflate.min.js required.");var s=Cg(new Uint8Array(e.getArrayBuffer(o))),c=new yy(s.buffer);switch(n){case"b":case"c":return c.getBooleanArray(r);case"d":return c.getFloat64Array(r);case"f":return c.getFloat32Array(r);case"i":return c.getInt32Array(r);case"l":return c.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}]),e}(),yy=function(){function e(t,n){v(this,e),this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===n||n}return g(e,[{key:"getOffset",value:function(){return this.offset}},{key:"size",value:function(){return this.dv.buffer.byteLength}},{key:"skip",value:function(e){this.offset+=e}},{key:"getBoolean",value:function(){return 1===(1&this.getUint8())}},{key:"getBooleanArray",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t}},{key:"getUint8",value:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e}},{key:"getInt16",value:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}},{key:"getInt32",value:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:"getInt32Array",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t}},{key:"getUint32",value:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:"getInt64",value:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}},{key:"getInt64Array",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t}},{key:"getUint64",value:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}},{key:"getFloat32",value:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:"getFloat32Array",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t}},{key:"getFloat64",value:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}},{key:"getFloat64Array",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t}},{key:"getArrayBuffer",value:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"getString",value:function(e){for(var t=[],n=0;n<e;n++)t[n]=this.getUint8();var r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),zp.decodeText(new Uint8Array(t))}}]),e}(),xy=function(){function e(){v(this,e)}return g(e,[{key:"add",value:function(e,t){this[e]=t}}]),e}();function wy(e){var t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===Py(e,0,t.length)}function _y(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;function r(t){var r=e[t-1];return e=e.slice(n+t),n++,r}for(var a=0;a<t.length;++a){var i=r(1);if(i===t[a])return!1}return!0}function My(e){var t=/FBXVersion: (\d+)/,n=e.match(t);if(n){var r=parseInt(n[1]);return r}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Ty(e){return e/46186158e3}var ky=[];function Sy(e,t,n,r){var a;switch(r.mappingType){case"ByPolygonVertex":a=e;break;case"ByPolygon":a=t;break;case"ByVertice":a=n;break;case"AllSame":a=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(a=r.indices[a]);var i=a*r.dataSize,o=i+r.dataSize;return Ny(ky,r.buffer,i,o)}var Ey=new $r,Ay=new dr;function Cy(e){var t=new jr,n=new jr,r=new jr,a=new jr,i=new jr,o=new jr,s=new jr,c=new jr,u=new jr,l=new jr,f=new jr,d=new jr,h=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(Ay.fromArray(e.translation)),e.preRotation){var p=e.preRotation.map($n.degToRad);p.push(e.eulerOrder),n.makeRotationFromEuler(Ey.fromArray(p))}if(e.rotation){var b=e.rotation.map($n.degToRad);b.push(e.eulerOrder),r.makeRotationFromEuler(Ey.fromArray(b))}if(e.postRotation){var m=e.postRotation.map($n.degToRad);m.push(e.eulerOrder),a.makeRotationFromEuler(Ey.fromArray(m)),a.invert()}e.scale&&i.scale(Ay.fromArray(e.scale)),e.scalingOffset&&s.setPosition(Ay.fromArray(e.scalingOffset)),e.scalingPivot&&o.setPosition(Ay.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(Ay.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(Ay.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(f.copy(e.parentMatrix),l.copy(e.parentMatrixWorld));var v=(new jr).copy(n).multiply(r).multiply(a),g=new jr;g.extractRotation(l);var y=new jr;y.copyPosition(l);var x=new jr,w=(new jr).copy(y).invert().multiply(l);x.copy(g).invert().multiply(w);var _=i,M=new jr;if(0===h)M.copy(g).multiply(v).multiply(x).multiply(_);else if(1===h)M.copy(g).multiply(x).multiply(v).multiply(_);else{var T=(new jr).scale((new dr).setFromMatrixScale(f)),k=(new jr).copy(T).invert(),S=(new jr).copy(x).multiply(k);M.copy(g).multiply(v).multiply(S).multiply(_)}var E=new jr;E.copy(u).invert();var A=new jr;A.copy(o).invert();var C=new jr;C.copy(t).multiply(c).multiply(u).multiply(n).multiply(r).multiply(a).multiply(E).multiply(s).multiply(o).multiply(i).multiply(A);var L=(new jr).copyPosition(C),R=(new jr).copy(l).multiply(L);return d.copyPosition(R),C=(new jr).copy(d).multiply(M),C.premultiply(l.invert()),C}function Ly(e){e=e||0;var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===e?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function Ry(e){var t=e.split(",").map((function(e){return parseFloat(e)}));return t}function Py(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),zp.decodeText(new Uint8Array(e,t,n))}function Iy(e,t){for(var n=0,r=e.length,a=t.length;n<a;n++,r++)e[r]=t[n]}function Ny(e,t,n,r){for(var a=n,i=0;a<r;a++,i++)e[i]=t[a];return e}function Oy(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}var Dy,Fy,By,zy,Uy,Hy,Gy,jy,Vy,Wy,qy={name:"model-fbx",mixins:[Rm],props:{lights:{type:Array,default:function(){return[{type:"HemisphereLight",position:{x:0,y:1,z:0},skyColor:16777215,groundColor:16777215,intensity:.8},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]}}},data:function(){return{loader:new hy}},methods:{getObject:function(e){return this.animations=e.animations,e}}},Xy=qy,Yy=Cm(Xy,Dy,Fy,!1,null,null,null),Zy=Yy.exports,Jy={name:"model-three",mixins:[Rm],data:function(){var e=new jp;return e.setCrossOrigin(this.crossOrigin),e.setRequestHeader(this.requestHeader),{loader:e}}},Ky=Jy,Qy=Cm(Ky,By,zy,!1,null,null,null),$y=Qy.exports,ex=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new Dh(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(n){try{t(a.parse(n))}catch(mw){r?r(mw):console.error(mw),a.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){function t(e){var t=new DataView(e),r=50,a=t.getUint32(80,!0),i=84+a*r;if(i===t.byteLength)return!0;for(var o=[115,111,108,105,100],s=0;s<5;s++)if(n(o,t,s))return!1;return!0}function n(e,t,n){for(var r=0,a=e.length;r<a;r++)if(e[r]!==t.getUint8(n+r,!1))return!1;return!0}function r(e){for(var t,n,r,a,i,o,s,c,u=new DataView(e),l=u.getUint32(80,!0),f=!1,d=0;d<70;d++)1129270351==u.getUint32(d,!1)&&82==u.getUint8(d+4)&&61==u.getUint8(d+5)&&(f=!0,a=new Float32Array(3*l*3),i=u.getUint8(d+6)/255,o=u.getUint8(d+7)/255,s=u.getUint8(d+8)/255,c=u.getUint8(d+9)/255);for(var h=84,p=50,b=new ri,m=new Float32Array(3*l*3),v=new Float32Array(3*l*3),g=0;g<l;g++){var y=h+g*p,x=u.getFloat32(y,!0),w=u.getFloat32(y+4,!0),_=u.getFloat32(y+8,!0);if(f){var M=u.getUint16(y+48,!0);0===(32768&M)?(t=(31&M)/31,n=(M>>5&31)/31,r=(M>>10&31)/31):(t=i,n=o,r=s)}for(var T=1;T<=3;T++){var k=y+12*T,S=3*g*3+3*(T-1);m[S]=u.getFloat32(k,!0),m[S+1]=u.getFloat32(k+4,!0),m[S+2]=u.getFloat32(k+8,!0),v[S]=x,v[S+1]=w,v[S+2]=_,f&&(a[S]=t,a[S+1]=n,a[S+2]=r)}}return b.setAttribute("position",new Ga(m,3)),b.setAttribute("normal",new Ga(v,3)),f&&(b.setAttribute("color",new Ga(a,3)),b.hasColors=!0,b.alpha=c),b}function a(e){var t,n=new ri,r=/solid([\s\S]*?)endsolid/g,a=/facet([\s\S]*?)endfacet/g,i=0,o=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,s=new RegExp("vertex"+o+o+o,"g"),c=new RegExp("normal"+o+o+o,"g"),u=[],l=[],f=new dr,d=0,h=0,p=0;while(null!==(t=r.exec(e))){h=p;var b=t[0];while(null!==(t=a.exec(b))){var m=0,v=0,g=t[0];while(null!==(t=c.exec(g)))f.x=parseFloat(t[1]),f.y=parseFloat(t[2]),f.z=parseFloat(t[3]),v++;while(null!==(t=s.exec(g)))u.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),l.push(f.x,f.y,f.z),m++,p++;1!==v&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+i),3!==m&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+i),i++}var y=h,x=p-h;n.addGroup(y,x,d),d++}return n.setAttribute("position",new qa(u,3)),n.setAttribute("normal",new qa(l,3)),n}function i(e){return"string"!==typeof e?zp.decodeText(new Uint8Array(e)):e}function o(e){if("string"===typeof e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer||t}return e}var s=o(e);return t(s)?r(s):a(i(e))}}]),n}(Nh),tx={name:"model-stl",mixins:[Rm],props:{lights:{type:Array,default:function(){return[{type:"HemisphereLight",position:{x:0,y:1,z:0},skyColor:11184895,groundColor:8413280,intensity:.2},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]}}},data:function(){return{loader:new ex}},methods:{getObject:function(e){return new wi(e,new ch)}}},nx=tx,rx=Cm(nx,Uy,Hy,!1,null,null,null),ax=rx.exports,ix=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this,e),r.propertyNameMapping={},r}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new Dh(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(n){try{t(a.parse(n))}catch(mw){r?r(mw):console.error(mw),a.manager.itemError(e)}}),n,r)}},{key:"setPropertyNameMapping",value:function(e){this.propertyNameMapping=e}},{key:"parse",value:function(e){function t(e){var t=/ply([\s\S]*)end_header\r?\n/,n="",r=0,a=t.exec(e);null!==a&&(n=a[1],r=new Blob([a[0]]).size);var i,o={comments:[],elements:[],headerLength:r,objInfo:""},s=n.split("\n");function c(e,t){var n={type:e[0]};return"list"===n.type?(n.name=e[3],n.countType=e[1],n.itemType=e[2]):n.name=e[1],n.name in t&&(n.name=t[n.name]),n}for(var u=0;u<s.length;u++){var l=s[u];if(l=l.trim(),""!==l){var d=l.split(/\s+/),h=d.shift();switch(l=d.join(" "),h){case"format":o.format=d[0],o.version=d[1];break;case"comment":o.comments.push(l);break;case"element":void 0!==i&&o.elements.push(i),i={},i.name=d[0],i.count=parseInt(d[1]),i.properties=[];break;case"property":i.properties.push(c(d,f.propertyNameMapping));break;case"obj_info":o.objInfo=l;break;default:console.log("unhandled",h,d)}}}return void 0!==i&&o.elements.push(i),o}function n(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}}function r(e,t){for(var r=t.split(/\s+/),a={},i=0;i<e.length;i++)if("list"===e[i].type){for(var o=[],s=n(r.shift(),e[i].countType),c=0;c<s;c++)o.push(n(r.shift(),e[i].itemType));a[e[i].name]=o}else a[e[i].name]=n(r.shift(),e[i].type);return a}function a(e,t){var n,a={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},s=/end_header\s([\s\S]*)$/,c="";null!==(n=s.exec(e))&&(c=n[1]);for(var u=c.split("\n"),l=0,f=0,d=0;d<u.length;d++){var h=u[d];if(h=h.trim(),""!==h){f>=t.elements[l].count&&(l++,f=0);var p=r(t.elements[l].properties,h);o(a,t.elements[l].name,p),f++}}return i(a)}function i(e){var t=new ri;return e.indices.length>0&&t.setIndex(e.indices),t.setAttribute("position",new qa(e.vertices,3)),e.normals.length>0&&t.setAttribute("normal",new qa(e.normals,3)),e.uvs.length>0&&t.setAttribute("uv",new qa(e.uvs,2)),e.colors.length>0&&t.setAttribute("color",new qa(e.colors,3)),e.faceVertexUvs.length>0&&(t=t.toNonIndexed(),t.setAttribute("uv",new qa(e.faceVertexUvs,2))),t.computeBoundingSphere(),t}function o(e,t,n){if("vertex"===t)e.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&e.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n&&e.uvs.push(n.s,n.t),"red"in n&&"green"in n&&"blue"in n&&e.colors.push(n.red/255,n.green/255,n.blue/255);else if("face"===t){var r=n.vertex_indices||n.vertex_index,a=n.texcoord;3===r.length?(e.indices.push(r[0],r[1],r[2]),a&&6===a.length&&(e.faceVertexUvs.push(a[0],a[1]),e.faceVertexUvs.push(a[2],a[3]),e.faceVertexUvs.push(a[4],a[5]))):4===r.length&&(e.indices.push(r[0],r[1],r[3]),e.indices.push(r[1],r[2],r[3]))}}function s(e,t,n,r){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,r),2];case"uint16":case"ushort":return[e.getUint16(t,r),2];case"int32":case"int":return[e.getInt32(t,r),4];case"uint32":case"uint":return[e.getUint32(t,r),4];case"float32":case"float":return[e.getFloat32(t,r),4];case"float64":case"double":return[e.getFloat64(t,r),8]}}function c(e,t,n,r){for(var a,i={},o=0,c=0;c<n.length;c++)if("list"===n[c].type){var u=[];a=s(e,t+o,n[c].countType,r);var l=a[0];o+=a[1];for(var f=0;f<l;f++)a=s(e,t+o,n[c].itemType,r),u.push(a[0]),o+=a[1];i[n[c].name]=u}else a=s(e,t+o,n[c].type,r),i[n[c].name]=a[0],o+=a[1];return[i,o]}function u(e,t){for(var n,r={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},a="binary_little_endian"===t.format,s=new DataView(e,t.headerLength),u=0,l=0;l<t.elements.length;l++)for(var f=0;f<t.elements[l].count;f++){n=c(s,u,t.elements[l].properties,a),u+=n[1];var d=n[0];o(r,t.elements[l].name,d)}return i(r)}var l,f=this;if(e instanceof ArrayBuffer){var d=zp.decodeText(new Uint8Array(e)),h=t(d);l="ascii"===h.format?a(d,h):u(e,h)}else l=a(e,t(e));return l}}]),n}(Nh),ox={name:"model-ply",mixins:[Rm],props:{lights:{type:Array,default:function(){return[{type:"HemisphereLight",position:{x:0,y:1,z:0},skyColor:11184895,groundColor:8413280,intensity:.2},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]}}},data:function(){return{loader:new ix}},methods:{getObject:function(e){return e.computeVertexNormals(),new wi(e,new oh)}}},sx=ox,cx=Cm(sx,Gy,jy,!1,null,null,null),ux=cx.exports,lx=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"parse",value:function(e){function t(e){switch(e.image_type){case f:case p:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case d:case h:case b:case m:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case l:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}function n(e,t,n,r,a){var i,o,s=n.pixel_size>>3,c=n.width*n.height*s;if(t&&(o=a.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),e){var u,l,f;i=new Uint8Array(c);var d=0,h=new Uint8Array(s);while(d<c)if(u=a[r++],l=1+(127&u),128&u){for(f=0;f<s;++f)h[f]=a[r++];for(f=0;f<l;++f)i.set(h,d+f*s);d+=s*l}else{for(l*=s,f=0;f<l;++f)i[d+f]=a[r++];d+=l}}else i=a.subarray(r,r+=t?n.width*n.height:c);return{pixel_data:i,palettes:o}}function r(e,t,n,r,a,i,o,s,c){var u,l,f,d=c,h=0,p=k.width;for(f=t;f!==r;f+=n)for(l=a;l!==o;l+=i,h++)u=s[h],e[4*(l+p*f)+3]=255,e[4*(l+p*f)+2]=d[3*u+0],e[4*(l+p*f)+1]=d[3*u+1],e[4*(l+p*f)+0]=d[3*u+2];return e}function a(e,t,n,r,a,i,o,s){var c,u,l,f=0,d=k.width;for(l=t;l!==r;l+=n)for(u=a;u!==o;u+=i,f+=2)c=s[f+0]+(s[f+1]<<8),e[4*(u+d*l)+0]=(31744&c)>>7,e[4*(u+d*l)+1]=(992&c)>>2,e[4*(u+d*l)+2]=(31&c)>>3,e[4*(u+d*l)+3]=32768&c?0:255;return e}function i(e,t,n,r,a,i,o,s){var c,u,l=0,f=k.width;for(u=t;u!==r;u+=n)for(c=a;c!==o;c+=i,l+=3)e[4*(c+f*u)+3]=255,e[4*(c+f*u)+2]=s[l+0],e[4*(c+f*u)+1]=s[l+1],e[4*(c+f*u)+0]=s[l+2];return e}function o(e,t,n,r,a,i,o,s){var c,u,l=0,f=k.width;for(u=t;u!==r;u+=n)for(c=a;c!==o;c+=i,l+=4)e[4*(c+f*u)+2]=s[l+0],e[4*(c+f*u)+1]=s[l+1],e[4*(c+f*u)+0]=s[l+2],e[4*(c+f*u)+3]=s[l+3];return e}function s(e,t,n,r,a,i,o,s){var c,u,l,f=0,d=k.width;for(l=t;l!==r;l+=n)for(u=a;u!==o;u+=i,f++)c=s[f],e[4*(u+d*l)+0]=c,e[4*(u+d*l)+1]=c,e[4*(u+d*l)+2]=c,e[4*(u+d*l)+3]=255;return e}function c(e,t,n,r,a,i,o,s){var c,u,l=0,f=k.width;for(u=t;u!==r;u+=n)for(c=a;c!==o;c+=i,l+=2)e[4*(c+f*u)+0]=s[l+0],e[4*(c+f*u)+1]=s[l+0],e[4*(c+f*u)+2]=s[l+0],e[4*(c+f*u)+3]=s[l+1];return e}function u(e,t,n,u,l){var f,d,h,p,b,m;switch((k.flags&v)>>g){default:case w:f=0,h=1,b=t,d=0,p=1,m=n;break;case y:f=0,h=1,b=t,d=n-1,p=-1,m=-1;break;case _:f=t-1,h=-1,b=-1,d=0,p=1,m=n;break;case x:f=t-1,h=-1,b=-1,d=n-1,p=-1,m=-1;break}if(A)switch(k.pixel_size){case 8:s(e,d,p,m,f,h,b,u);break;case 16:c(e,d,p,m,f,h,b,u);break;default:console.error("THREE.TGALoader: Format not supported.");break}else switch(k.pixel_size){case 8:r(e,d,p,m,f,h,b,u,l);break;case 16:a(e,d,p,m,f,h,b,u);break;case 24:i(e,d,p,m,f,h,b,u);break;case 32:o(e,d,p,m,f,h,b,u);break;default:console.error("THREE.TGALoader: Format not supported.");break}return e}var l=0,f=1,d=2,h=3,p=9,b=10,m=11,v=48,g=4,y=0,x=1,w=2,_=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var M=0,T=new Uint8Array(e),k={id_length:T[M++],colormap_type:T[M++],image_type:T[M++],colormap_index:T[M++]|T[M++]<<8,colormap_length:T[M++]|T[M++]<<8,colormap_size:T[M++],origin:[T[M++]|T[M++]<<8,T[M++]|T[M++]<<8],width:T[M++]|T[M++]<<8,height:T[M++]|T[M++]<<8,pixel_size:T[M++],flags:T[M++]};t(k),k.id_length+M>e.length&&console.error("THREE.TGALoader: No data."),M+=k.id_length;var S=!1,E=!1,A=!1;switch(k.image_type){case p:S=!0,E=!0;break;case f:E=!0;break;case b:S=!0;break;case d:break;case m:S=!0,A=!0;break;case h:A=!0;break}var C=new Uint8Array(k.width*k.height*4),L=n(S,E,k,M,T);return u(C,k.width,k.height,L.pixel_data,L.palettes),{data:C,width:k.width,height:k.height,flipY:!0,generateMipmaps:!0,minFilter:Fe}}}]),n}(Uh),fx=function(e){b(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return g(n,[{key:"load",value:function(e,t,n,r){var a=this,i=""===a.path?zp.extractUrlBase(e):a.path,o=new Dh(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,(function(n){try{t(a.parse(n,i))}catch(mw){r?r(mw):console.error(mw),a.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e,t){function n(e,t){for(var n=[],r=e.childNodes,a=0,i=r.length;a<i;a++){var o=r[a];o.nodeName===t&&n.push(o)}return n}function r(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,a=t.length;r<a;r++)n[r]=t[r];return n}function a(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,a=t.length;r<a;r++)n[r]=parseFloat(t[r]);return n}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,a=t.length;r<a;r++)n[r]=parseInt(t[r]);return n}function o(e){return e.substring(1)}function s(){return"three_default_"+At++}function c(e){return 0===Object.keys(e).length}function u(e){return{unit:l(n(e,"unit")[0]),upAxis:f(n(e,"up_axis")[0])}}function l(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}function f(e){return void 0!==e?e.textContent:"Y_UP"}function d(e,t,r,a){var i=n(e,t)[0];if(void 0!==i)for(var o=n(i,r),s=0;s<o.length;s++)a(o[s])}function h(e,t){for(var n in e){var r=e[n];r.build=t(e[n])}}function p(e,t){return void 0!==e.build||(e.build=t(e)),e.build}function b(e){for(var t={sources:{},samplers:{},channels:{}},n=!1,r=0,a=e.childNodes.length;r<a;r++){var i=e.childNodes[r];if(1===i.nodeType){var o=void 0;switch(i.nodeName){case"source":o=i.getAttribute("id"),t.sources[o]=_e(i);break;case"sampler":o=i.getAttribute("id"),t.samplers[o]=m(i);break;case"channel":o=i.getAttribute("target"),t.channels[o]=v(i);break;case"animation":b(i),n=!0;break;default:console.log(i)}}}!1===n&&(Ct.animations[e.getAttribute("id")||$n.generateUUID()]=t)}function m(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"input":var i=o(a.getAttribute("source")),s=a.getAttribute("semantic");t.inputs[s]=i;break}}return t}function v(e){var t={},n=e.getAttribute("target"),r=n.split("/"),a=r.shift(),i=r.shift(),s=-1!==i.indexOf("("),c=-1!==i.indexOf(".");if(c)r=i.split("."),i=r.shift(),t.member=r.shift();else if(s){var u=i.split("(");i=u.shift();for(var l=0;l<u.length;l++)u[l]=parseInt(u[l].replace(/\)/,""));t.indices=u}return t.id=a,t.sid=i,t.arraySyntax=s,t.memberSyntax=c,t.sampler=o(e.getAttribute("source")),t}function g(e){var t=[],n=e.channels,r=e.samplers,a=e.sources;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],s=r[o.sampler],c=s.inputs.INPUT,u=s.inputs.OUTPUT,l=a[c],f=a[u],d=x(o,l,f);k(d,t)}return t}function y(e){return p(Ct.animations[e],g)}function x(e,t,n){var r,a,i,o,s,c,u=Ct.nodes[e.id],l=ut(u.id),f=u.transforms[e.sid],d=u.matrix.clone().transpose(),h={};switch(f){case"matrix":for(i=0,o=t.array.length;i<o;i++)if(r=t.array[i],a=i*n.stride,void 0===h[r]&&(h[r]={}),!0===e.arraySyntax){var p=n.array[a],b=e.indices[0]+4*e.indices[1];h[r][b]=p}else for(s=0,c=n.stride;s<c;s++)h[r][s]=n.array[a+s];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',f);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',f);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',f);break}var m=w(h,d),v={name:l.uuid,keyframes:m};return v}function w(e,t){var n=[];for(var r in e)n.push({time:parseFloat(r),value:e[r]});n.sort(i);for(var a=0;a<16;a++)S(n,a,t.elements[a]);return n;function i(e,t){return e.time-t.time}}var _=new dr,M=new dr,T=new fr;function k(e,t){for(var n=e.keyframes,r=e.name,a=[],i=[],o=[],s=[],c=0,u=n.length;c<u;c++){var l=n[c],f=l.time,d=l.value;Qe.fromArray(d).transpose(),Qe.decompose(_,T,M),a.push(f),i.push(_.x,_.y,_.z),o.push(T.x,T.y,T.z,T.w),s.push(M.x,M.y,M.z)}return i.length>0&&t.push(new Eh(r+".position",a,i)),o.length>0&&t.push(new kh(r+".quaternion",a,o)),s.length>0&&t.push(new Eh(r+".scale",a,s)),t}function S(e,t,n){var r,a,i,o=!0;for(a=0,i=e.length;a<i;a++)r=e[a],void 0===r.value[t]?r.value[t]=null:o=!1;if(!0===o)for(a=0,i=e.length;a<i;a++)r=e[a],r.value[t]=n;else E(e,t)}function E(e,t){for(var n,r,a=0,i=e.length;a<i;a++){var o=e[a];if(null===o.value[t]){if(n=A(e,a,t),r=C(e,a,t),null===n){o.value[t]=r.value[t];continue}if(null===r){o.value[t]=n.value[t];continue}L(o,n,r,t)}}}function A(e,t,n){while(t>=0){var r=e[t];if(null!==r.value[n])return r;t--}return null}function C(e,t,n){while(t<e.length){var r=e[t];if(null!==r.value[n])return r;t++}return null}function L(e,t,n,r){n.time-t.time!==0?e.value[r]=(e.time-t.time)*(n.value[r]-t.value[r])/(n.time-t.time)+t.value[r]:e.value[r]=t.value[r]}function R(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"instance_animation":t.animations.push(o(a.getAttribute("url")));break}}Ct.clips[e.getAttribute("id")]=t}function P(e){for(var t=[],n=e.name,r=e.end-e.start||-1,a=e.animations,i=0,o=a.length;i<o;i++)for(var s=y(a[i]),c=0,u=s.length;c<u;c++)t.push(s[c]);return new Ah(n,r,t)}function I(e){return p(Ct.clips[e],P)}function N(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"skin":t.id=o(a.getAttribute("source")),t.skin=D(a);break;case"morph":t.id=o(a.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}Ct.controllers[e.getAttribute("id")]=t}function D(e){for(var t={sources:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=a(i.textContent);break;case"source":var o=i.getAttribute("id");t.sources[o]=_e(i);break;case"joints":t.joints=F(i);break;case"vertex_weights":t.vertexWeights=B(i);break}}return t}function F(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"input":var i=a.getAttribute("semantic"),s=o(a.getAttribute("source"));t.inputs[i]=s;break}}return t}function B(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"input":var s=a.getAttribute("semantic"),c=o(a.getAttribute("source")),u=parseInt(a.getAttribute("offset"));t.inputs[s]={id:c,offset:u};break;case"vcount":t.vcount=i(a.textContent);break;case"v":t.v=i(a.textContent);break}}return t}function z(e){var t={id:e.id},n=Ct.geometries[t.id];return void 0!==e.skin&&(t.skin=U(e.skin),n.sources.skinIndices=t.skin.indices,n.sources.skinWeights=t.skin.weights),t}function U(e){var t,n,r,a=4,i={joints:[],indices:{array:[],stride:a},weights:{array:[],stride:a}},o=e.sources,s=e.vertexWeights,c=s.vcount,u=s.v,l=s.inputs.JOINT.offset,f=s.inputs.WEIGHT.offset,d=e.sources[e.joints.inputs.JOINT],h=e.sources[e.joints.inputs.INV_BIND_MATRIX],p=o[s.inputs.WEIGHT.id].array,b=0;for(t=0,r=c.length;t<r;t++){var m=c[t],v=[];for(n=0;n<m;n++){var g=u[b+l],y=u[b+f],x=p[y];v.push({index:g,weight:x}),b+=2}for(v.sort(T),n=0;n<a;n++){var w=v[n];void 0!==w?(i.indices.array.push(w.index),i.weights.array.push(w.weight)):(i.indices.array.push(0),i.weights.array.push(0))}}for(e.bindShapeMatrix?i.bindMatrix=(new jr).fromArray(e.bindShapeMatrix).transpose():i.bindMatrix=(new jr).identity(),t=0,r=d.array.length;t<r;t++){var _=d.array[t],M=(new jr).fromArray(h.array,t*h.stride).transpose();i.joints.push({name:_,boneInverse:M})}return i;function T(e,t){return t.weight-e.weight}}function H(e){return p(Ct.controllers[e],z)}function G(e){var t={init_from:n(e,"init_from")[0].textContent};Ct.images[e.getAttribute("id")]=t}function j(e){return void 0!==e.build?e.build:e.init_from}function V(e){var t=Ct.images[e];return void 0!==t?p(t,j):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function W(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"profile_COMMON":t.profile=q(a);break}}Ct.effects[e.getAttribute("id")]=t}function q(e){for(var t={surfaces:{},samplers:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"newparam":X(a,t);break;case"technique":t.technique=J(a);break;case"extra":t.extra=ne(a);break}}return t}function X(e,t){for(var n=e.getAttribute("sid"),r=0,a=e.childNodes.length;r<a;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"surface":t.surfaces[n]=Y(i);break;case"sampler2D":t.samplers[n]=Z(i);break}}}function Y(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"init_from":t.init_from=a.textContent;break}}return t}function Z(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"source":t.source=a.textContent;break}}return t}function J(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=a.nodeName,t.parameters=K(a);break}}return t}function K(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[a.nodeName]=Q(a);break;case"transparent":t[a.nodeName]={opaque:a.getAttribute("opaque"),data:Q(a)};break}}return t}function Q(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"color":t[i.nodeName]=a(i.textContent);break;case"float":t[i.nodeName]=parseFloat(i.textContent);break;case"texture":t[i.nodeName]={id:i.getAttribute("texture"),extra:$(i)};break}}return t}function $(e){for(var t={technique:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"extra":ee(a,t);break}}return t}function ee(e,t){for(var n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"technique":te(a,t);break}}}function te(e,t){for(var n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[a.nodeName]=parseFloat(a.textContent);break;case"wrapU":case"wrapV":"TRUE"===a.textContent.toUpperCase()?t.technique[a.nodeName]=1:"FALSE"===a.textContent.toUpperCase()?t.technique[a.nodeName]=0:t.technique[a.nodeName]=parseInt(a.textContent);break}}}function ne(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"technique":t.technique=re(a);break}}return t}function re(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"double_sided":t[a.nodeName]=parseInt(a.textContent);break}}return t}function ae(e){return e}function ie(e){return p(Ct.effects[e],ae)}function oe(e){for(var t={name:e.getAttribute("name")},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"instance_effect":t.url=o(a.getAttribute("url"));break}}Ct.materials[e.getAttribute("id")]=t}function se(e){var t,n=e.slice(2+(e.lastIndexOf(".")-1>>>0));switch(n=n.toLowerCase(),n){case"tga":t=Mt;break;default:t=kt}return t}function ce(e){var t,n=ie(e.url),r=n.profile.technique,a=n.profile.extra;switch(r.type){case"phong":case"blinn":t=new ch;break;case"lambert":t=new fh;break;default:t=new za;break}function i(e){var t=n.profile.samplers[e.id],r=null;if(void 0!==t){var a=n.profile.surfaces[t.source];r=V(a.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),r=V(e.id);if(null!==r){var i=se(r);if(void 0!==i){var o=i.load(r),s=e.extra;if(void 0!==s&&void 0!==s.technique&&!1===c(s.technique)){var u=s.technique;o.wrapS=u.wrapU?Ce:Le,o.wrapT=u.wrapV?Ce:Le,o.offset.set(u.offsetU||0,u.offsetV||0),o.repeat.set(u.repeatU||1,u.repeatV||1)}else o.wrapS=Ce,o.wrapT=Ce;return o}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",r),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}t.name=e.name||"";var o=r.parameters;for(var s in o){var u=o[s];switch(s){case"diffuse":u.color&&t.color.fromArray(u.color),u.texture&&(t.map=i(u.texture));break;case"specular":u.color&&t.specular&&t.specular.fromArray(u.color),u.texture&&(t.specularMap=i(u.texture));break;case"bump":u.texture&&(t.normalMap=i(u.texture));break;case"ambient":u.texture&&(t.lightMap=i(u.texture));break;case"shininess":u.float&&t.shininess&&(t.shininess=u.float);break;case"emission":u.color&&t.emissive&&t.emissive.fromArray(u.color),u.texture&&(t.emissiveMap=i(u.texture));break}}var l=o["transparent"],f=o["transparency"];if(void 0===f&&l&&(f={float:1}),void 0===l&&f&&(l={opaque:"A_ONE",data:{color:[1,1,1,1]}}),l&&f)if(l.data.texture)t.transparent=!0;else{var d=l.data.color;switch(l.opaque){case"A_ONE":t.opacity=d[3]*f.float;break;case"RGB_ZERO":t.opacity=1-d[0]*f.float;break;case"A_ZERO":t.opacity=1-d[3]*f.float;break;case"RGB_ONE":t.opacity=d[0]*f.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',l.opaque)}t.opacity<1&&(t.transparent=!0)}return void 0!==a&&void 0!==a.technique&&1===a.technique.double_sided&&(t.side=O),t}function ue(e){return p(Ct.materials[e],ce)}function le(e){for(var t={name:e.getAttribute("name")},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"optics":t.optics=fe(a);break}}Ct.cameras[e.getAttribute("id")]=t}function fe(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"technique_common":return de(n)}}return{}}function de(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"perspective":case"orthographic":t.technique=r.nodeName,t.parameters=he(r);break}}return t}function he(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[r.nodeName]=parseFloat(r.textContent);break}}return t}function pe(e){var t;switch(e.optics.technique){case"perspective":t=new Pi(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var n=e.optics.parameters.ymag,r=e.optics.parameters.xmag,a=e.optics.parameters.aspect_ratio;r=void 0===r?n*a:r,n=void 0===n?r/a:n,r*=.5,n*=.5,t=new Rp(-r,r,n,-n,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new Pi;break}return t.name=e.name||"",t}function be(e){var t=Ct.cameras[e];return void 0!==t?p(t,pe):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function me(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"technique_common":t=ve(a);break}}Ct.lights[e.getAttribute("id")]=t}function ve(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=a.nodeName,t.parameters=ge(a)}}return t}function ge(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"color":var o=a(i.textContent);t.color=(new Ba).fromArray(o);break;case"falloff_angle":t.falloffAngle=parseFloat(i.textContent);break;case"quadratic_attenuation":var s=parseFloat(i.textContent);t.distance=s?Math.sqrt(1/s):0;break}}return t}function ye(e){var t;switch(e.technique){case"directional":t=new Ip;break;case"point":t=new Lp;break;case"spot":t=new kp;break;case"ambient":t=new Np;break}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function xe(e){var t=Ct.lights[e];return void 0!==t?p(t,ye):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function we(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},r=n(e,"mesh")[0];if(void 0!==r){for(var a=0;a<r.childNodes.length;a++){var i=r.childNodes[a];if(1===i.nodeType){var o=i.getAttribute("id");switch(i.nodeName){case"source":t.sources[o]=_e(i);break;case"vertices":t.vertices=Me(i);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",i.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(Te(i));break;default:console.log(i)}}}Ct.geometries[e.getAttribute("id")]=t}}function _e(e){for(var t={array:[],stride:3},i=0;i<e.childNodes.length;i++){var o=e.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"float_array":t.array=a(o.textContent);break;case"Name_array":t.array=r(o.textContent);break;case"technique_common":var s=n(o,"accessor")[0];void 0!==s&&(t.stride=parseInt(s.getAttribute("stride")));break}}return t}function Me(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];1===r.nodeType&&(t[r.getAttribute("semantic")]=o(r.getAttribute("source")))}return t}function Te(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"input":var s=o(a.getAttribute("source")),c=a.getAttribute("semantic"),u=parseInt(a.getAttribute("offset")),l=parseInt(a.getAttribute("set")),f=l>0?c+l:c;t.inputs[f]={id:s,offset:u},t.stride=Math.max(t.stride,u+1),"TEXCOORD"===c&&(t.hasUV=!0);break;case"vcount":t.vcount=i(a.textContent);break;case"p":t.p=i(a.textContent);break}}return t}function ke(e){for(var t={},n=0;n<e.length;n++){var r=e[n];void 0===t[r.type]&&(t[r.type]=[]),t[r.type].push(r)}return t}function Se(e){for(var t=0,n=0,r=e.length;n<r;n++){var a=e[n];!0===a.hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function Ee(e){var t={},n=e.sources,r=e.vertices,a=e.primitives;if(0===a.length)return{};var i=ke(a);for(var o in i){var s=i[o];Se(s),t[o]=Ae(s,n,r)}return t}function Ae(e,t,n){for(var r={},a={array:[],stride:0},i={array:[],stride:0},o={array:[],stride:0},s={array:[],stride:0},c={array:[],stride:0},u={array:[],stride:4},l={array:[],stride:4},f=new ri,d=[],h=0,p=0;p<e.length;p++){var b=e[p],m=b.inputs,v=0;switch(b.type){case"lines":case"linestrips":v=2*b.count;break;case"triangles":v=3*b.count;break;case"polylist":for(var g=0;g<b.count;g++){var y=b.vcount[g];switch(y){case 3:v+=3;break;case 4:v+=6;break;default:v+=3*(y-2);break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",b.type)}for(var x in f.addGroup(h,v,p),h+=v,b.material&&d.push(b.material),m){var w=m[x];switch(x){case"VERTEX":for(var _ in n){var M=n[_];switch(_){case"POSITION":var T=a.array.length;if(Re(b,t[M],w.offset,a.array),a.stride=t[M].stride,t.skinWeights&&t.skinIndices&&(Re(b,t.skinIndices,w.offset,u.array),Re(b,t.skinWeights,w.offset,l.array)),!1===b.hasUV&&!0===e.uvsNeedsFix)for(var k=(a.array.length-T)/a.stride,S=0;S<k;S++)o.array.push(0,0);break;case"NORMAL":Re(b,t[M],w.offset,i.array),i.stride=t[M].stride;break;case"COLOR":Re(b,t[M],w.offset,c.array),c.stride=t[M].stride;break;case"TEXCOORD":Re(b,t[M],w.offset,o.array),o.stride=t[M].stride;break;case"TEXCOORD1":Re(b,t[M],w.offset,s.array),o.stride=t[M].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',_)}}break;case"NORMAL":Re(b,t[w.id],w.offset,i.array),i.stride=t[w.id].stride;break;case"COLOR":Re(b,t[w.id],w.offset,c.array),c.stride=t[w.id].stride;break;case"TEXCOORD":Re(b,t[w.id],w.offset,o.array),o.stride=t[w.id].stride;break;case"TEXCOORD1":Re(b,t[w.id],w.offset,s.array),s.stride=t[w.id].stride;break}}}return a.array.length>0&&f.setAttribute("position",new qa(a.array,a.stride)),i.array.length>0&&f.setAttribute("normal",new qa(i.array,i.stride)),c.array.length>0&&f.setAttribute("color",new qa(c.array,c.stride)),o.array.length>0&&f.setAttribute("uv",new qa(o.array,o.stride)),s.array.length>0&&f.setAttribute("uv2",new qa(s.array,s.stride)),u.array.length>0&&f.setAttribute("skinIndex",new qa(u.array,u.stride)),l.array.length>0&&f.setAttribute("skinWeight",new qa(l.array,l.stride)),r.data=f,r.type=e[0].type,r.materialKeys=d,r}function Re(e,t,n,r){var a=e.p,i=e.stride,o=e.vcount;function s(e){for(var t=a[e+n]*u,i=t+u;t<i;t++)r.push(c[t])}var c=t.array,u=t.stride;if(void 0!==e.vcount)for(var l=0,f=0,d=o.length;f<d;f++){var h=o[f];if(4===h){var p=l+0*i,b=l+1*i,m=l+2*i,v=l+3*i;s(p),s(b),s(v),s(b),s(m),s(v)}else if(3===h){var g=l+0*i,y=l+1*i,x=l+2*i;s(g),s(y),s(x)}else if(h>4)for(var w=1,_=h-2;w<=_;w++){var M=l+0*i,T=l+i*w,k=l+i*(w+1);s(M),s(T),s(k)}l+=i*h}else for(var S=0,E=a.length;S<E;S+=i)s(S)}function Pe(e){return p(Ct.geometries[e],Ee)}function Ie(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique_common":De(r,t);break}}Ct.kinematicsModels[e.getAttribute("id")]=t}function Ne(e){return void 0!==e.build?e.build:e}function Oe(e){return p(Ct.kinematicsModels[e],Ne)}function De(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"joint":t.joints[r.getAttribute("sid")]=Fe(r);break;case"link":t.links.push(ze(r));break}}}function Fe(e){for(var t,n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"prismatic":case"revolute":t=Be(r);break}}return t}function Be(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new dr,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"axis":var i=a(r.textContent);t.axis.fromArray(i);break;case"limits":var o=r.getElementsByTagName("max")[0],s=r.getElementsByTagName("min")[0];t.limits.max=parseFloat(o.textContent),t.limits.min=parseFloat(s.textContent);break}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function ze(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"attachment_full":t.attachments.push(Ue(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(He(r));break}}return t}function Ue(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"link":t.links.push(ze(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(He(r));break}}return t}function He(e){var t={type:e.nodeName},n=a(e.textContent);switch(t.type){case"matrix":t.obj=new jr,t.obj.fromArray(n).transpose();break;case"translate":t.obj=new dr,t.obj.fromArray(n);break;case"rotate":t.obj=new dr,t.obj.fromArray(n),t.angle=$n.degToRad(n[3]);break}return t}function Ge(e){for(var t={name:e.getAttribute("name")||"",rigidBodies:{}},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"rigid_body":t.rigidBodies[r.getAttribute("name")]={},je(r,t.rigidBodies[r.getAttribute("name")]);break}}Ct.physicsModels[e.getAttribute("id")]=t}function je(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique_common":Ve(r,t);break}}}function Ve(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"inertia":t.inertia=a(r.textContent);break;case"mass":t.mass=a(r.textContent)[0];break}}}function We(e){for(var t={bindJointAxis:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"bind_joint_axis":t.bindJointAxis.push(qe(r));break}}Ct.kinematicsScenes[o(e.getAttribute("url"))]=t}function qe(e){for(var t={target:e.getAttribute("target").split("/").pop()},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"axis":var a=r.getElementsByTagName("param")[0];t.axis=a.textContent;var i=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=i.substr(0,i.length-1);break}}return t}function Xe(e){return void 0!==e.build?e.build:e}function Ye(e){return p(Ct.kinematicsScenes[e],Xe)}function Ze(){var e=Object.keys(Ct.kinematicsModels)[0],t=Object.keys(Ct.kinematicsScenes)[0],n=Object.keys(Ct.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var r=Oe(e),a=Ye(t),i=ht(n),o=a.bindJointAxis,s={},c=0,u=o.length;c<u;c++){var l=o[c],f=gt.querySelector('[sid="'+l.target+'"]');if(f){var d=f.parentElement;p(l.jointIndex,d)}}var h=new jr;Et={joints:r&&r.joints,getJointValue:function(e){var t=s[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var n=s[e];if(n){var r=n.joint;if(t>r.limits.max||t<r.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+r.limits.min+", max: "+r.limits.max+").");else if(r.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var a=n.object,i=r.axis,o=n.transforms;Qe.identity();for(var c=0;c<o.length;c++){var u=o[c];if(u.sid&&-1!==u.sid.indexOf(e))switch(r.type){case"revolute":Qe.multiply(h.makeRotationAxis(i,$n.degToRad(t)));break;case"prismatic":Qe.multiply(h.makeTranslation(i.x*t,i.y*t,i.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+r.type);break}else switch(u.type){case"matrix":Qe.multiply(u.obj);break;case"translate":Qe.multiply(h.makeTranslation(u.obj.x,u.obj.y,u.obj.z));break;case"scale":Qe.scale(u.obj);break;case"rotate":Qe.multiply(h.makeRotationAxis(u.obj,u.angle));break}}a.matrix.copy(Qe),a.matrix.decompose(a.position,a.quaternion,a.scale),s[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function p(e,t){var n=t.getAttribute("name"),a=r.joints[e];i.traverse((function(r){r.name===n&&(s[e]={object:r,transforms:Je(t),joint:a,position:a.zeroPosition})}))}}function Je(e){for(var t=[],n=gt.querySelector('[id="'+e.id+'"]'),r=0;r<n.childNodes.length;r++){var i=n.childNodes[r];if(1===i.nodeType){var o=void 0,s=void 0;switch(i.nodeName){case"matrix":o=a(i.textContent);var c=(new jr).fromArray(o).transpose();t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:c});break;case"translate":case"scale":o=a(i.textContent),s=(new dr).fromArray(o),t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:s});break;case"rotate":o=a(i.textContent),s=(new dr).fromArray(o);var u=$n.degToRad(o[3]);t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:s,angle:u});break}}}return t}function Ke(e){for(var t=e.getElementsByTagName("node"),n=0;n<t.length;n++){var r=t[n];!1===r.hasAttribute("id")&&r.setAttribute("id",s())}}var Qe=new jr,$e=new dr;function et(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new jr,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType){var i=void 0;switch(r.nodeName){case"node":t.nodes.push(r.getAttribute("id")),et(r);break;case"instance_camera":t.instanceCameras.push(o(r.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(tt(r));break;case"instance_light":t.instanceLights.push(o(r.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(tt(r));break;case"instance_node":t.instanceNodes.push(o(r.getAttribute("url")));break;case"matrix":i=a(r.textContent),t.matrix.multiply(Qe.fromArray(i).transpose()),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"translate":i=a(r.textContent),$e.fromArray(i),t.matrix.multiply(Qe.makeTranslation($e.x,$e.y,$e.z)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"rotate":i=a(r.textContent);var s=$n.degToRad(i[3]);t.matrix.multiply(Qe.makeRotationAxis($e.fromArray(i),s)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"scale":i=a(r.textContent),t.matrix.scale($e.fromArray(i)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"extra":break;default:console.log(r)}}}return ct(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):Ct.nodes[t.id]=t,t}function tt(e){for(var t={id:o(e.getAttribute("url")),materials:{},skeletons:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"bind_material":for(var a=r.getElementsByTagName("instance_material"),i=0;i<a.length;i++){var s=a[i],c=s.getAttribute("symbol"),u=s.getAttribute("target");t.materials[c]=o(u)}break;case"skeleton":t.skeletons.push(o(r.textContent));break;default:break}}return t}function nt(e,t){var n,r,a,i=[],o=[];for(n=0;n<e.length;n++){var s=e[n],c=void 0;if(ct(s))c=ut(s),rt(c,t,i);else if(dt(s))for(var u=Ct.visualScenes[s],l=u.children,f=0;f<l.length;f++){var d=l[f];if("JOINT"===d.type){var h=ut(d.id);rt(h,t,i)}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",s)}for(n=0;n<t.length;n++)for(r=0;r<i.length;r++)if(a=i[r],a.bone.name===t[n].name){o[n]=a,a.processed=!0;break}for(n=0;n<i.length;n++)a=i[n],!1===a.processed&&(o.push(a),a.processed=!0);var p=[],b=[];for(n=0;n<o.length;n++)a=o[n],p.push(a.bone),b.push(a.boneInverse);return new wf(p,b)}function rt(e,t,n){e.traverse((function(e){if(!0===e.isBone){for(var r,a=0;a<t.length;a++){var i=t[a];if(i.name===e.name){r=i.boneInverse;break}}void 0===r&&(r=new jr),n.push({bone:e,boneInverse:r,processed:!1})}}))}function at(e){for(var t,n=[],r=e.matrix,a=e.nodes,i=e.type,o=e.instanceCameras,s=e.instanceControllers,c=e.instanceLights,u=e.instanceGeometries,l=e.instanceNodes,f=0,d=a.length;f<d;f++)n.push(ut(a[f]));for(var h=0,p=o.length;h<p;h++){var b=be(o[h]);null!==b&&n.push(b.clone())}for(var m=0,v=s.length;m<v;m++)for(var g=s[m],y=H(g.id),x=Pe(y.id),w=st(x,g.materials),_=g.skeletons,M=y.skin.joints,T=nt(_,M),k=0,S=w.length;k<S;k++){var E=w[k];E.isSkinnedMesh&&(E.bind(T,y.skin.bindMatrix),E.normalizeSkinWeights()),n.push(E)}for(var A=0,C=c.length;A<C;A++){var L=xe(c[A]);null!==L&&n.push(L.clone())}for(var R=0,P=u.length;R<P;R++)for(var I=u[R],N=Pe(I.id),O=st(N,I.materials),D=0,F=O.length;D<F;D++)n.push(O[D]);for(var B=0,z=l.length;B<z;B++)n.push(ut(l[B]).clone());if(0===a.length&&1===n.length)t=n[0];else{t="JOINT"===i?new vf:new Rl;for(var U=0;U<n.length;U++)t.add(n[U])}return t.name="JOINT"===i?e.sid:e.name,t.matrix.copy(r),t.matrix.decompose(t.position,t.quaternion,t.scale),t}var it=new za({color:16711935});function ot(e,t){for(var n=[],r=0,a=e.length;r<a;r++){var i=t[e[r]];void 0===i?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[r]),n.push(it)):n.push(ue(i))}return n}function st(e,t){var n=[];for(var r in e){var a=e[r],i=ot(a.materialKeys,t);0===i.length&&("lines"===r||"linestrips"===r?i.push(new Ef):i.push(new ch));var o=void 0!==a.data.attributes.skinIndex,s=1===i.length?i[0]:i,c=void 0;switch(r){case"lines":c=new Df(a.data,s);break;case"linestrips":c=new If(a.data,s);break;case"triangles":case"polylist":c=o?new mf(a.data,s):new wi(a.data,s);break}n.push(c)}return n}function ct(e){return void 0!==Ct.nodes[e]}function ut(e){return p(Ct.nodes[e],at)}function lt(e){var t={name:e.getAttribute("name"),children:[]};Ke(e);for(var r=n(e,"node"),a=0;a<r.length;a++)t.children.push(et(r[a]));Ct.visualScenes[e.getAttribute("id")]=t}function ft(e){var t=new Rl;t.name=e.name;for(var n=e.children,r=0;r<n.length;r++){var a=n[r];t.add(ut(a.id))}return t}function dt(e){return void 0!==Ct.visualScenes[e]}function ht(e){return p(Ct.visualScenes[e],ft)}function pt(e){var t=n(e,"instance_visual_scene")[0];return ht(o(t.getAttribute("url")))}function bt(){var e=Ct.clips;if(!0===c(e)){if(!1===c(Ct.animations)){var t=[];for(var n in Ct.animations)for(var r=y(n),a=0,i=r.length;a<i;a++)t.push(r[a]);St.push(new Ah("default",-1,t))}}else for(var o in e)St.push(I(o))}function mt(e){var t="",n=[e];while(n.length){var r=n.shift();r.nodeType===Node.TEXT_NODE?t+=r.textContent:(t+="\n",n.push.apply(n,r.childNodes))}return t.trim()}if(0===e.length)return{scene:new Hl};var vt=(new DOMParser).parseFromString(e,"application/xml"),gt=n(vt,"COLLADA")[0],yt=vt.getElementsByTagName("parsererror")[0];if(void 0!==yt){var xt,wt=n(yt,"div")[0];return xt=wt?wt.textContent:mt(yt),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",xt),null}var _t=gt.getAttribute("version");console.log("THREE.ColladaLoader: File version",_t);var Mt,Tt=u(n(gt,"asset")[0]),kt=new Hh(this.manager);kt.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),lx&&(Mt=new lx(this.manager),Mt.setPath(this.resourcePath||t));var St=[],Et={},At=0,Ct={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};d(gt,"library_animations","animation",b),d(gt,"library_animation_clips","animation_clip",R),d(gt,"library_controllers","controller",N),d(gt,"library_images","image",G),d(gt,"library_effects","effect",W),d(gt,"library_materials","material",oe),d(gt,"library_cameras","camera",le),d(gt,"library_lights","light",me),d(gt,"library_geometries","geometry",we),d(gt,"library_nodes","node",et),d(gt,"library_visual_scenes","visual_scene",lt),d(gt,"library_kinematics_models","kinematics_model",Ie),d(gt,"library_physics_models","physics_model",Ge),d(gt,"scene","instance_kinematics_scene",We),h(Ct.animations,g),h(Ct.clips,P),h(Ct.controllers,z),h(Ct.images,j),h(Ct.effects,ae),h(Ct.materials,ce),h(Ct.cameras,pe),h(Ct.lights,ye),h(Ct.geometries,Ee),h(Ct.visualScenes,ft),bt(),Ze();var Lt=pt(n(gt,"scene")[0]);return Lt.animations=St,"Z_UP"===Tt.upAxis&&Lt.quaternion.setFromEuler(new $r(-Math.PI/2,0,0)),Lt.scale.multiplyScalar(Tt.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),St},kinematics:Et,library:Ct,scene:Lt}}}]),n}(Nh),dx={name:"model-collada",mixins:[Rm],props:{lights:{type:Array,default:function(){return[{type:"HemisphereLight",position:{x:0,y:1,z:0},skyColor:11184895,groundColor:8413280,intensity:.2},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]}},smoothing:{type:Boolean,default:!1}},data:function(){var e=new fx;return e.setCrossOrigin(this.crossOrigin),{loader:e}},methods:{getObject:function(e){return e.scene}}},hx=dx,px=Cm(hx,Vy,Wy,!1,null,null,null),bx=px.exports,mx=function(e){b(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this,e),r.dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new wx(e)})),r.register((function(e){return new Mx(e)})),r.register((function(e){return new Tx(e)})),r.register((function(e){return new _x(e)})),r.register((function(e){return new yx(e)})),r.register((function(e){return new kx(e)})),r}return g(n,[{key:"load",value:function(e,t,n,r){var a,i=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:zp.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new Dh(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),o)}catch(mw){o(mw)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var a,i={},o={};if("string"===typeof e)a=e;else{var s=zp.decodeText(new Uint8Array(e,0,4));if(s===Sx){try{i[gx.KHR_BINARY_GLTF]=new Cx(e)}catch(b){return void(r&&r(b))}a=i[gx.KHR_BINARY_GLTF].content}else a=zp.decodeText(new Uint8Array(e))}var c=JSON.parse(a);if(void 0===c.asset||c.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var u=new ew(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var f=this.pluginCallbacks[l](u);o[f.name]=f,i[f.name]=!0}if(c.extensionsUsed)for(var d=0;d<c.extensionsUsed.length;++d){var h=c.extensionsUsed[d],p=c.extensionsRequired||[];switch(h){case gx.KHR_MATERIALS_UNLIT:i[h]=new xx;break;case gx.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:i[h]=new Ix;break;case gx.KHR_DRACO_MESH_COMPRESSION:i[h]=new Lx(c,this.dracoLoader);break;case gx.KHR_TEXTURE_TRANSFORM:i[h]=new Rx;break;case gx.KHR_MESH_QUANTIZATION:i[h]=new Nx;break;default:p.indexOf(h)>=0&&void 0===o[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(i),u.setPlugins(o),u.parse(n,r)}}}]),n}(Nh);function vx(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var gx={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},yx=function(){function e(t){v(this,e),this.parser=t,this.name=gx.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return g(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var a=t[n];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var a,i=t.json,o=i.extensions&&i.extensions[this.name]||{},s=o.lights||[],c=s[e],u=new Ba(16777215);void 0!==c.color&&u.fromArray(c.color);var l=void 0!==c.range?c.range:0;switch(c.type){case"directional":a=new Ip(u),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new Lp(u),a.distance=l;break;case"spot":a=new kp(u),a.distance=l,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,a.angle=c.spot.outerConeAngle,a.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return a.position.set(0,0,0),a.decay=2,void 0!==c.intensity&&(a.intensity=c.intensity),a.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json,a=r.nodes[e],i=a.extensions&&a.extensions[this.name]||{},o=i.light;return void 0===o?null:this._loadLight(o).then((function(e){return n._getNodeRef(t.cache,o,e)}))}}]),e}(),xx=function(){function e(){v(this,e),this.name=gx.KHR_MATERIALS_UNLIT}return g(e,[{key:"getMaterialType",value:function(){return za}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new Ba(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var i=a.baseColorFactor;e.color.fromArray(i),e.opacity=i[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture))}return Promise.all(r)}}]),e}(),wx=function(){function e(t){v(this,e),this.parser=t,this.name=gx.KHR_MATERIALS_CLEARCOAT}return g(e,[{key:"getMaterialType",value:function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?sh:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];if(void 0!==i.clearcoatFactor&&(t.clearcoat=i.clearcoatFactor),void 0!==i.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),void 0!==i.clearcoatRoughnessFactor&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),void 0!==i.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),void 0!==i.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),void 0!==i.clearcoatNormalTexture.scale)){var o=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new er(o,-o)}return Promise.all(a)}}]),e}(),_x=function(){function e(t){v(this,e),this.parser=t,this.name=gx.KHR_MATERIALS_TRANSMISSION}return g(e,[{key:"getMaterialType",value:function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?sh:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];return void 0!==i.transmissionFactor&&(t.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&a.push(n.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(a)}}]),e}(),Mx=function(){function e(t){v(this,e),this.parser=t,this.name=gx.KHR_TEXTURE_BASISU}return g(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var a=r.extensions[this.name],i=n.images[a.source],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i,o)}}]),e}(),Tx=function(){function e(t){v(this,e),this.parser=t,this.name=gx.EXT_TEXTURE_WEBP,this.isSupported=null}return g(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;var i=a.extensions[t],o=r.images[i.source],s=n.textureLoader;if(o.uri){var c=n.options.manager.getHandler(o.uri);null!==c&&(s=c)}return this.detectSupport().then((function(a){if(a)return n.loadTextureImage(e,o,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),kx=function(){function e(t){v(this,e),this.name=gx.EXT_MESHOPT_COMPRESSION,this.parser=t}return g(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([a,i.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,a=r.count,o=r.byteStride,s=new ArrayBuffer(a*o),c=new Uint8Array(e[0],t,n);return i.decodeGltfBuffer(new Uint8Array(s),a,o,c,r.mode,r.filter),s}))}return null}}]),e}(),Sx="glTF",Ex=12,Ax={JSON:1313821514,BIN:5130562},Cx=function e(t){v(this,e),this.name=gx.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,Ex);if(this.header={magic:zp.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Sx)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");var r=this.header.length-Ex,a=new DataView(t,Ex),i=0;while(i<r){var o=a.getUint32(i,!0);i+=4;var s=a.getUint32(i,!0);if(i+=4,s===Ax.JSON){var c=new Uint8Array(t,Ex+i,o);this.content=zp.decodeText(c)}else if(s===Ax.BIN){var u=Ex+i;this.body=t.slice(u,u+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")},Lx=function(){function e(t,n){if(v(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=gx.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return g(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,o={},s={},c={};for(var u in i){var l=Hx[u]||u.toLowerCase();o[l]=i[u]}for(var f in e.attributes){var d=Hx[f]||f.toLowerCase();if(void 0!==i[f]){var h=n.accessors[e.attributes[f]],p=Fx[h.componentType];c[d]=p,s[d]=!0===h.normalized}}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],a=s[n];void 0!==a&&(r.normalized=a)}t(e)}),o,c)}))}))}}]),e}(),Rx=function(){function e(){v(this,e),this.name=gx.KHR_TEXTURE_TRANSFORM}return g(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),Px=function(e){b(n,e);var t=m(n);function n(e){var r;v(this,n),r=t.call(this),r.isGLTFSpecularGlossinessMaterial=!0;var a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),c=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),u={specular:{value:(new Ba).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return r._extraUniforms=u,r.onBeforeCompile=function(e){for(var t in u)e.uniforms[t]=u[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",c)},Object.defineProperties(p(r),{specular:{get:function(){return u.specular.value},set:function(e){u.specular.value=e}},specularMap:{get:function(){return u.specularMap.value},set:function(e){u.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return u.glossiness.value},set:function(e){u.glossiness.value=e}},glossinessMap:{get:function(){return u.glossinessMap.value},set:function(e){u.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete r.metalness,delete r.roughness,delete r.metalnessMap,delete r.roughnessMap,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return f(d(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(oh),Ix=function(){function e(){v(this,e),this.name=gx.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return g(e,[{key:"getMaterialType",value:function(){return Px}},{key:"extendParams",value:function(e,t,n){var r=t.extensions[this.name];e.color=new Ba(1,1,1),e.opacity=1;var a=[];if(Array.isArray(r.diffuseFactor)){var i=r.diffuseFactor;e.color.fromArray(i),e.opacity=i[3]}if(void 0!==r.diffuseTexture&&a.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new Ba(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new Ba(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var o=r.specularGlossinessTexture;a.push(n.assignTexture(e,"glossinessMap",o)),a.push(n.assignTexture(e,"specularMap",o))}return Promise.all(a)}},{key:"createMaterial",value:function(e){var t=new Px(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=xn,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}]),e}(),Nx=function e(){v(this,e),this.name=gx.KHR_MESH_QUANTIZATION},Ox=function(e){b(n,e);var t=m(n);function n(e,r,a,i){return v(this,n),t.call(this,e,r,a,i)}return g(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r*3+r,i=0;i!==r;i++)t[i]=n[a+i];return t}}]),n}(mh);Ox.prototype.beforeStart_=Ox.prototype.copySampleValue_,Ox.prototype.afterEnd_=Ox.prototype.copySampleValue_,Ox.prototype.interpolate_=function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=2*o,c=3*o,u=r-t,l=(n-t)/u,f=l*l,d=f*l,h=e*c,p=h-c,b=-2*d+3*f,m=d-f,v=1-b,g=m-f+l,y=0;y!==o;y++){var x=i[p+y+o],w=i[p+y+s]*u,_=i[h+y+o],M=i[h+y]*u;a[y]=v*x+g*w+b*_+m*M}return a};var Dx={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Fx={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Bx={9728:Pe,9729:Oe,9984:Ie,9985:De,9986:Ne,9987:Fe},zx={33071:Le,33648:Re,10497:Ce},Ux={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Hx={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Gx={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},jx={CUBICSPLINE:void 0,LINEAR:$t,STEP:Qt},Vx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Wx(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function qx(e){return void 0===e["DefaultMaterial"]&&(e["DefaultMaterial"]=new oh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:I})),e["DefaultMaterial"]}function Xx(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Yx(e,t){void 0!==t.extras&&("object"===y(t.extras)?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Zx(e,t,n){for(var r=!1,a=!1,i=0,o=t.length;i<o;i++){var s=t[i];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(a=!0),r&&a)break}if(!r&&!a)return Promise.resolve(e);for(var c=[],u=[],l=0,f=t.length;l<f;l++){var d=t[l];if(r){var h=void 0!==d.POSITION?n.getDependency("accessor",d.POSITION):e.attributes.position;c.push(h)}if(a){var p=void 0!==d.NORMAL?n.getDependency("accessor",d.NORMAL):e.attributes.normal;u.push(p)}}return Promise.all([Promise.all(c),Promise.all(u)]).then((function(t){var n=t[0],i=t[1];return r&&(e.morphAttributes.position=n),a&&(e.morphAttributes.normal=i),e.morphTargetsRelative=!0,e}))}function Jx(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(var i=0,o=a.length;i<o;i++)e.morphTargetDictionary[a[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Kx(e){var t,n=e.extensions&&e.extensions[gx.KHR_DRACO_MESH_COMPRESSION];return t=n?"draco:"+n.bufferView+":"+n.indices+":"+Qx(n.attributes):e.indices+":"+Qx(e.attributes)+":"+e.mode,t}function Qx(e){for(var t="",n=Object.keys(e).sort(),r=0,a=n.length;r<a;r++)t+=n[r]+":"+e[n[r]]+";";return t}function $x(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var ew=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new vx,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new Xp(this.options.manager):this.textureLoader=new Hh(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Dh(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return g(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var i={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};Xx(a,i,r),Yx(i,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(i)}))).then((function(){e(i)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,a=t.length;r<a;r++)for(var i=t[r].joints,o=0,s=i.length;o<s;o++)e[i[o]].isBone=!0;for(var c=0,u=e.length;c<u;c++){var l=e[c];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(n[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){if(e.refs[t]<=1)return n;var r=n.clone();return r.name+="_instance_"+e.uses[t]++,r}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var a=e(t[r]);a&&n.push(a)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[gx.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,a){n.load(Wx(t.uri,r.path),e,void 0,(function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,i,o=e[0],s=Ux[r.type],c=Fx[r.componentType],u=c.BYTES_PER_ELEMENT,l=u*s,f=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,h=!0===r.normalized;if(d&&d!==l){var p=Math.floor(f/d),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,m=t.cache.get(b);m||(a=new c(o,p*d,r.count*d/u),m=new Gl(a,d/u),t.cache.add(b,m)),i=new Vl(m,s,f%d/u,h)}else a=null===o?new c(r.count*s):new c(o,f,r.count*s),i=new Ga(a,s,h);if(void 0!==r.sparse){var v=Ux.SCALAR,g=Fx[r.sparse.indices.componentType],y=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,w=new g(e[1],y,r.sparse.count*v),_=new c(e[2],x,r.sparse.count*s);null!==o&&(i=new Ga(i.array.slice(),i.itemSize,i.normalized));for(var M=0,T=w.length;M<T;M++){var k=w[M];if(i.setX(k,_[M*s]),s>=2&&i.setY(k,_[M*s+1]),s>=3&&i.setZ(k,_[M*s+2]),s>=4&&i.setW(k,_[M*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e],a=t.images[r.source],i=this.textureLoader;if(a.uri){var o=n.manager.getHandler(a.uri);null!==o&&(i=o)}return this.loadTextureImage(e,a,i)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,a=this.json,i=this.options,o=a.textures[e],s=(t.uri||t.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];var c=self.URL||self.webkitURL,u=t.uri||"",l=!1,f=!0,d=u.search(/\.jpe?g($|\?)/i)>0||0===u.search(/^data\:image\/jpeg/);if(("image/jpeg"===t.mimeType||d)&&(f=!1),void 0!==t.bufferView)u=r.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){var n=new DataView(e,25,1).getUint8(0,!1);f=6===n||4===n||3===n}l=!0;var r=new Blob([e],{type:t.mimeType});return u=c.createObjectURL(r),u}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var h=Promise.resolve(u).then((function(e){return new Promise((function(t,r){var a=t;!0===n.isImageBitmapLoader&&(a=function(e){t(new Xf(e))}),n.load(Wx(e,i.path),a,void 0,r)}))})).then((function(t){!0===l&&c.revokeObjectURL(u),t.flipY=!1,o.name&&(t.name=o.name),f||(t.format=Ke);var n=a.samplers||{},i=n[o.sampler]||{};return t.magFilter=Bx[i.magFilter]||Oe,t.minFilter=Bx[i.minFilter]||Fe,t.wrapS=zx[i.wrapS]||Ce,t.wrapT=zx[i.wrapT]||Ce,r.associations.set(t,{type:"textures",index:e}),t}));return this.textureCache[s]=h,h}},{key:"assignTexture",value:function(e,t,n){var r=this;return this.getDependency("texture",n.index).then((function(a){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[gx.KHR_TEXTURE_TRANSFORM]){var i=void 0!==n.extensions?n.extensions[gx.KHR_TEXTURE_TRANSFORM]:void 0;if(i){var o=r.associations.get(a);a=r.extensions[gx.KHR_TEXTURE_TRANSFORM].extendTexture(a,i),r.associations.set(a,o)}}e[t]=a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0!==t.attributes.tangent,a=void 0!==t.attributes.color,i=void 0===t.attributes.normal,o=Object.keys(t.morphAttributes).length>0,s=o&&void 0!==t.morphAttributes.normal;if(e.isPoints){var c="PointsMaterial:"+n.uuid,u=this.cache.get(c);u||(u=new Bf,Ra.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(c,u)),n=u}else if(e.isLine){var l="LineBasicMaterial:"+n.uuid,f=this.cache.get(l);f||(f=new Ef,Ra.prototype.copy.call(f,n),f.color.copy(n.color),this.cache.add(l,f)),n=f}if(r||a||i||o){var d="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(d+="specular-glossiness:"),r&&(d+="vertex-tangents:"),a&&(d+="vertex-colors:"),i&&(d+="flat-shading:"),o&&(d+="morph-targets:"),s&&(d+="morph-normals:");var h=this.cache.get(d);h||(h=n.clone(),a&&(h.vertexColors=!0),i&&(h.flatShading=!0),o&&(h.morphTargets=!0),s&&(h.morphNormals=!0),r&&(h.vertexTangents=!0,h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(d,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return oh}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,a=this.extensions,i=r.materials[e],o={},s=i.extensions||{},c=[];if(s[gx.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=a[gx.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),c.push(u.extendParams(o,i,n))}else if(s[gx.KHR_MATERIALS_UNLIT]){var l=a[gx.KHR_MATERIALS_UNLIT];t=l.getMaterialType(),c.push(l.extendParams(o,i,n))}else{var f=i.pbrMetallicRoughness||{};if(o.color=new Ba(1,1,1),o.opacity=1,Array.isArray(f.baseColorFactor)){var d=f.baseColorFactor;o.color.fromArray(d),o.opacity=d[3]}void 0!==f.baseColorTexture&&c.push(n.assignTexture(o,"map",f.baseColorTexture)),o.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,o.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(c.push(n.assignTexture(o,"metalnessMap",f.metallicRoughnessTexture)),c.push(n.assignTexture(o,"roughnessMap",f.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),c.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===i.doubleSided&&(o.side=O);var h=i.alphaMode||Vx.OPAQUE;return h===Vx.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,h===Vx.MASK&&(o.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&t!==za&&(c.push(n.assignTexture(o,"normalMap",i.normalTexture)),o.normalScale=new er(1,-1),void 0!==i.normalTexture.scale&&o.normalScale.set(i.normalTexture.scale,-i.normalTexture.scale)),void 0!==i.occlusionTexture&&t!==za&&(c.push(n.assignTexture(o,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(o.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&t!==za&&(o.emissive=(new Ba).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&t!==za&&c.push(n.assignTexture(o,"emissiveMap",i.emissiveTexture)),Promise.all(c).then((function(){var r;return r=t===Px?a[gx.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),i.name&&(r.name=i.name),r.map&&(r.map.encoding=fn),r.emissiveMap&&(r.emissiveMap.encoding=fn),Yx(r,i),n.associations.set(r,{type:"materials",index:e}),i.extensions&&Xx(a,r,i),r}))}},{key:"createUniqueName",value:function(e){for(var t=vb.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function a(e){return n[gx.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return rw(n,e,t)}))}for(var i=[],o=0,s=e.length;o<s;o++){var c=e[o],u=Kx(c),l=r[u];if(l)i.push(l.promise);else{var f=void 0;f=c.extensions&&c.extensions[gx.KHR_DRACO_MESH_COMPRESSION]?a(c):rw(new ri,c,t),r[u]={primitive:c,promise:f},i.push(f)}}return Promise.all(i)}},{key:"loadMesh",value:function(e){for(var t=this,n=this.json,r=this.extensions,a=n.meshes[e],i=a.primitives,o=[],s=0,c=i.length;s<c;s++){var u=void 0===i[s].material?qx(this.cache):this.getDependency("material",i[s].material);o.push(u)}return o.push(t.loadGeometries(i)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],c=[],u=0,l=s.length;u<l;u++){var f=s[u],d=i[u],h=void 0,p=o[u];if(d.mode===Dx.TRIANGLES||d.mode===Dx.TRIANGLE_STRIP||d.mode===Dx.TRIANGLE_FAN||void 0===d.mode)h=!0===a.isSkinnedMesh?new mf(f,p):new wi(f,p),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),d.mode===Dx.TRIANGLE_STRIP?h.geometry=aw(h.geometry,cn):d.mode===Dx.TRIANGLE_FAN&&(h.geometry=aw(h.geometry,un));else if(d.mode===Dx.LINES)h=new Df(f,p);else if(d.mode===Dx.LINE_STRIP)h=new If(f,p);else if(d.mode===Dx.LINE_LOOP)h=new Ff(f,p);else{if(d.mode!==Dx.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);h=new jf(f,p)}Object.keys(h.geometry.morphAttributes).length>0&&Jx(h,a),h.name=t.createUniqueName(a.name||"mesh_"+e),Yx(h,a),d.extensions&&Xx(r,h,d),t.assignFinalMaterial(h),c.push(h)}if(1===c.length)return c[0];for(var b=new Rl,m=0,v=c.length;m<v;m++)b.add(c[m]);return b}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new Pi($n.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Rp(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Yx(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json,n=t.animations[e],r=[],a=[],i=[],o=[],s=[],c=0,u=n.channels.length;c<u;c++){var l=n.channels[c],f=n.samplers[l.sampler],d=l.target,h=void 0!==d.node?d.node:d.id,p=void 0!==n.parameters?n.parameters[f.input]:f.input,b=void 0!==n.parameters?n.parameters[f.output]:f.output;r.push(this.getDependency("node",h)),a.push(this.getDependency("accessor",p)),i.push(this.getDependency("accessor",b)),o.push(f),s.push(d)}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(i),Promise.all(o),Promise.all(s)]).then((function(t){for(var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],c=[],u=function(e,t){var n=r[e],u=a[e],l=i[e],f=o[e],d=s[e];if(void 0===n)return"continue";n.updateMatrix(),n.matrixAutoUpdate=!0;var h=void 0;switch(Gx[d.path]){case Gx.weights:h=Mh;break;case Gx.rotation:h=kh;break;case Gx.position:case Gx.scale:default:h=Eh;break}var p=n.name?n.name:n.uuid,b=void 0!==f.interpolation?jx[f.interpolation]:$t,m=[];Gx[d.path]===Gx.weights?n.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(p);var v=l.array;if(l.normalized){for(var g=$x(v.constructor),y=new Float32Array(v.length),x=0,w=v.length;x<w;x++)y[x]=v[x]*g;v=y}for(var _=0,M=m.length;_<M;_++){var T=new h(m[_]+"."+Gx[d.path],u.array,v,b);"CUBICSPLINE"===f.interpolation&&(T.createInterpolant=function(e){return new Ox(this.times,this.values,this.getValueSize()/3,e)},T.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(T)}},l=0,f=r.length;l<f;l++)u(l,f);var d=n.name?n.name:"animation_"+e;return new Ah(d,void 0,c)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,r=this,a=t.nodes[e],i=a.name?r.createUniqueName(a.name):"";return function(){var t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==a.camera&&t.push(r.getDependency("camera",a.camera).then((function(e){return r._getNodeRef(r.cameraCache,a.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var o;if(o=!0===a.isBone?new vf:t.length>1?new Rl:1===t.length?t[0]:new pa,o!==t[0])for(var s=0,c=t.length;s<c;s++)o.add(t[s]);if(a.name&&(o.userData.name=a.name,o.name=i),Yx(o,a),a.extensions&&Xx(n,o,a),void 0!==a.matrix){var u=new jr;u.fromArray(a.matrix),o.applyMatrix4(u)}else void 0!==a.translation&&o.position.fromArray(a.translation),void 0!==a.rotation&&o.quaternion.fromArray(a.rotation),void 0!==a.scale&&o.scale.fromArray(a.scale);return r.associations.set(o,{type:"nodes",index:e}),o}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,r=this.json.scenes[e],a=this,i=new Rl;r.name&&(i.name=a.createUniqueName(r.name)),Yx(i,r),r.extensions&&Xx(n,i,r);for(var o=r.nodes||[],s=[],c=0,u=o.length;c<u;c++)s.push(tw(o[c],i,t,a));return Promise.all(s).then((function(){return i}))}}]),e}();function tw(e,t,n,r){var a=n.nodes[e];return r.getDependency("node",e).then((function(e){return void 0===a.skin?e:r.getDependency("skin",a.skin).then((function(e){t=e;for(var n=[],a=0,i=t.joints.length;a<i;a++)n.push(r.getDependency("node",t.joints[a]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],a=[],i=0,o=n.length;i<o;i++){var s=n[i];if(s){r.push(s);var c=new jr;void 0!==t.inverseBindMatrices&&c.fromArray(t.inverseBindMatrices.array,16*i),a.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[i])}e.bind(new wf(r,a),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var i=[];if(a.children)for(var o=a.children,s=0,c=o.length;s<c;s++){var u=o[s];i.push(tw(u,e,n,r))}return Promise.all(i)}))}function nw(e,t,n){var r=t.attributes,a=new br;if(void 0!==r.POSITION){var i=n.json.accessors[r.POSITION],o=i.min,s=i.max;if(void 0!==o&&void 0!==s){if(a.set(new dr(o[0],o[1],o[2]),new dr(s[0],s[1],s[2])),i.normalized){var c=$x(Fx[i.componentType]);a.min.multiplyScalar(c),a.max.multiplyScalar(c)}var u=t.targets;if(void 0!==u){for(var l=new dr,f=new dr,d=0,h=u.length;d<h;d++){var p=u[d];if(void 0!==p.POSITION){var b=n.json.accessors[p.POSITION],m=b.min,v=b.max;if(void 0!==m&&void 0!==v){if(f.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),f.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),f.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),b.normalized){var g=$x(Fx[b.componentType]);f.multiplyScalar(g)}l.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(l)}e.boundingBox=a;var y=new Nr;a.getCenter(y.center),y.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=y}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function rw(e,t,n){var r=t.attributes,a=[];function i(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=Hx[o]||o.toLowerCase();s in e.attributes||a.push(i(r[o],s))}if(void 0!==t.indices&&!e.index){var c=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(c)}return Yx(e,t),nw(e,t,n),Promise.all(a).then((function(){return void 0!==t.targets?Zx(e,t.targets,n):e}))}function aw(e,t){var n=e.getIndex();if(null===n){var r=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var i=0;i<a.count;i++)r.push(i);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(t===un)for(var c=1;c<=o;c++)s.push(n.getX(0)),s.push(n.getX(c)),s.push(n.getX(c+1));else for(var u=0;u<o;u++)u%2===0?(s.push(n.getX(u)),s.push(n.getX(u+1)),s.push(n.getX(u+2))):(s.push(n.getX(u+2)),s.push(n.getX(u+1)),s.push(n.getX(u)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=e.clone();return l.setIndex(s),l}var iw,ow,sw={name:"model-gltf",mixins:[Rm],props:{lights:{type:Array,default:function(){return[{type:"AmbientLight",color:11184810},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]}},gammaOutput:{type:Boolean,default:!0}},data:function(){var e=new mx;return e.setCrossOrigin(this.crossOrigin),e.setRequestHeader(this.requestHeader),{loader:e}},methods:{load:function(){var e=this;this.src&&(this.object&&this.wrapper.remove(this.object),this.loader.load(this.src,(function(t){e.addObject(t.scene),e.$emit("on-load")}),(function(t){e.$emit("on-progress",t)}),(function(t){e.$emit("on-error",t)})))}}},cw=sw,uw=Cm(cw,iw,ow,!1,null,null,null),lw=uw.exports,fw=M.a.extend($y,{name:"model-json"}),dw=M.a.extend(bx,{name:"model-dae"}),hw=[Bm,Zy,$y,fw,ax,ux,bx,dw,lw],pw=function(e){hw.forEach((function(t){e.component(t.name,t)}))};"undefined"!==typeof window&&window.Vue&&pw(window.Vue);var bw={install:pw,ModelObj:Bm,ModelFbx:Zy,ModelThree:$y,ModelJson:fw,ModelStl:ax,ModelPly:ux,ModelCollada:bx,ModelDae:dw,ModelGltf:lw};t["default"]=bw},fb2c:function(e,t,n){var r=n("74e8");r("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},fb6a:function(e,t,n){"use strict";var r=n("23e7"),a=n("861d"),i=n("e8b5"),o=n("23cb"),s=n("50c4"),c=n("fc6a"),u=n("8418"),l=n("b622"),f=n("1dde"),d=f("slice"),h=l("species"),p=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var n,r,l,f=c(this),d=s(f.length),m=o(e,d),v=o(void 0===t?d:t,d);if(i(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return p.call(f,m,v);for(r=new(void 0===n?Array:n)(b(v-m,0)),l=0;m<v;m++,l++)m in f&&u(r,l,f[m]);return r.length=l,r}})},fc6a:function(e,t,n){var r=n("44ad"),a=n("1d80");e.exports=function(e){return r(a(e))}},fce3:function(e,t,n){var r=n("d039");e.exports=r((function(){var e=RegExp(".",y("").charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==y(Symbol.iterator)}})}))}).call(this,n("62e4")(e))},"2bbe":function(e,t,n){"use strict";n("d550")},3:function(e,t){},"3f49":function(e,t,n){},4:function(e,t){},4257:function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"ERC1155ListingMarketplace","sourceName":"contracts/ERC1155Marketplace/ERC1155ListingMarketplace.sol","abi":[{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"ListingCompleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"ListingCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"ListingOfferPlaced","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"ListingOfferWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"ListingRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"acceptListingOffer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_contractAddress","type":"address"}],"name":"addApprovedContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"approvedContracts","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16","name":"_fee","type":"uint16"}],"name":"changeFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"name":"changeFeeDestination","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_tokenQty","type":"uint256"}],"name":"createListing","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"fee","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeDestination","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"listings","outputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"tokenQty","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint128","name":"offer","type":"uint128"},{"internalType":"address","name":"offeror","type":"address"},{"internalType":"uint128","name":"offerPlacedAt","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155BatchReceived","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"placeOffer","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"removeListing","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"withdrawOffer","outputs":[],"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x60806040526003805461ffff60a01b1916607d60a21b17905534801561002457600080fd5b5060405162001c8f38038062001c8f833981016040819052610045916100a4565b61004e33610054565b506100d4565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156100b657600080fd5b81516001600160a01b03811681146100cd57600080fd5b9392505050565b611bab80620000e46000396000f3fe6080604052600436106101095760003560e01c8063715018a611610095578063c71f681811610064578063c71f6818146103af578063ddca3f43146103c2578063de53fcd5146103f7578063f23a6e6114610417578063f2fde38b1461044357600080fd5b8063715018a6146102635780638da5cb5b14610278578063bc197c81146102aa578063c18b8db4146102ef57600080fd5b806326749ad7116100dc57806326749ad7146101b35780633407facd146101e3578063550ee133146102035780635ff548691461022357806367bd3df21461024357600080fd5b806301ffc9a71461010e578063135171be146101435780631e18cb891461016557806324780c5614610185575b600080fd5b34801561011a57600080fd5b5061012e61012936600461164c565b610463565b60405190151581526020015b60405180910390f35b34801561014f57600080fd5b5061016361015e36600461168b565b61049a565b005b34801561017157600080fd5b5061016361018036600461168b565b6104f4565b34801561019157600080fd5b506101a56101a03660046116a8565b610540565b60405190815260200161013a565b3480156101bf57600080fd5b5061012e6101ce36600461168b565b60016020526000908152604090205460ff1681565b3480156101ef57600080fd5b506101636101fe3660046116dd565b610746565b34801561020f57600080fd5b5061016361021e366004611701565b6107db565b34801561022f57600080fd5b5061016361023e366004611701565b610b6e565b34801561024f57600080fd5b5061016361025e366004611701565b610ccc565b34801561026f57600080fd5b50610163611259565b34801561028457600080fd5b506000546001600160a01b03165b6040516001600160a01b03909116815260200161013a565b3480156102b657600080fd5b506102d66102c5366004611851565b63bc197c8160e01b95945050505050565b6040516001600160e01b0319909116815260200161013a565b3480156102fb57600080fd5b5061036061030a366004611701565b600260208190526000918252604090912080546001820154928201546003830154600484015460058501546006909501546001600160a01b0394851696959394928316936001600160801b039283169316911687565b604080516001600160a01b039889168152602081019790975286019490945291851660608501526001600160801b039081166080850152931660a08301529190911660c082015260e00161013a565b6101636103bd366004611701565b61128f565b3480156103ce57600080fd5b506003546103e490600160a01b900461ffff1681565b60405161ffff909116815260200161013a565b34801561040357600080fd5b50600354610292906001600160a01b031681565b34801561042357600080fd5b506102d66104323660046118ff565b63f23a6e6160e01b95945050505050565b34801561044f57600080fd5b5061016361045e36600461168b565b611422565b60006001600160e01b03198216630271189760e51b148061049457506301ffc9a760e01b6001600160e01b03198316145b92915050565b6000546001600160a01b031633146104cd5760405162461bcd60e51b81526004016104c490611968565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b0316331461051e5760405162461bcd60e51b81526004016104c490611968565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000333b158061055f57503360009081526001602052604090205460ff165b61057b5760405162461bcd60e51b81526004016104c49061199d565b604051637921219560e11b81526001600160a01b0385169063f242432a906105ad9032903090889088906004016119d4565b600060405180830381600087803b1580156105c757600080fd5b505af11580156105db573d6000803e3d6000fd5b50506040516bffffffffffffffffffffffff19606088811b82166020840152603483018890526054830187905232901b1660748201524260888201526000925060a801905060408051808303601f19018152828252805160209182012060e0840183526001600160a01b038981168552828501898152858501898152326060880190815260006080890181815260a08a0182815260c08b018381528884526002808b52938b90209b518c546001600160a01b0319908116918a16919091178d55965160018d01559451928b0192909255915160038a018054861691871691909117905590516004890180546001600160801b03199081166001600160801b0393841617909155915160058a0180549095169516949094179092555160069096018054909116959091169490941790935590518281529192507fc40c5d31a64e8e78c2eeb93bf6c23dc289b41965cc46caf25ec99ae5d3f60cd0910160405180910390a1949350505050565b6000546001600160a01b031633146107705760405162461bcd60e51b81526004016104c490611968565b6102ee8161ffff1611156107b95760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b60448201526064016104c4565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b60008181526002602052604090206003015481906001600160a01b0316331461083b5760405162461bcd60e51b815260206004820152601260248201527137b7363c903634b9ba34b7339037bbb732b960711b60448201526064016104c4565b333b158061085857503360009081526001602052604090205460ff165b6108745760405162461bcd60e51b81526004016104c49061199d565b6000600260008481526020019081526020016000206040518060e00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b0316815260200160018201548152602001600282015481526020016003820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016004820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016005820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016006820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000848152602001908152602001600020600080820160006101000a8154906001600160a01b030219169055600182016000905560028201600090556003820160006101000a8154906001600160a01b0302191690556004820160006101000a8154906001600160801b0302191690556005820160006101000a8154906001600160a01b0302191690556006820160006101000a8154906001600160801b030219169055505060006001600160a01b03168160a001516001600160a01b031614158015610a70575060a08101516001600160a01b03163b155b15610ac1578060a001516001600160a01b03166108fc82608001516001600160801b03169081150290604051600060405180830381858888f19350505050158015610abf573d6000803e3d6000fd5b505b805160208201516040808401519051637921219560e11b81526001600160a01b039093169263f242432a92610afe923092339291906004016119d4565b600060405180830381600087803b158015610b1857600080fd5b505af1158015610b2c573d6000803e3d6000fd5b505050507f50425cae216bd151d26c8e8bb9779cc899c99d72f78081f2ceec9a99f001ff7983604051610b6191815260200190565b60405180910390a1505050565b60008181526002602052604090206005015481906001600160a01b03163314610bc85760405162461bcd60e51b815260206004820152600c60248201526b37b7363c9037b33332b937b960a11b60448201526064016104c4565b60008281526002602052604090206006810154610bf1906001600160801b03166202a300611a22565b6001600160801b03164211610c3f5760405162461bcd60e51b81526020600482015260146024820152737769746864726177616c20746f6f206561726c7960601b60448201526064016104c4565b6004810180546001600160801b03199081169091556005820180546001600160a01b0319169055600682018054909116905560405133906108fc9060009081818181818888f19350505050158015610c9b573d6000803e3d6000fd5b506040518381527ff7c2501e0887f392db4213a4adf0460f214c4135536298ddb725b50d378a815f90602001610b61565b60008181526002602052604090206003015481906001600160a01b03163314610d2c5760405162461bcd60e51b815260206004820152601260248201527137b7363c903634b9ba34b7339037bbb732b960711b60448201526064016104c4565b60008281526002602052604090206005015482906001600160a01b0316610d8d5760405162461bcd60e51b81526020600482015260156024820152743634b9ba34b733903bb4ba341037379037b33332b960591b60448201526064016104c4565b333b1580610daa57503360009081526001602052604090205460ff165b610dc65760405162461bcd60e51b81526004016104c49061199d565b6000600260008581526020019081526020016000206040518060e00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b0316815260200160018201548152602001600282015481526020016003820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016004820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016005820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016006820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000858152602001908152602001600020600080820160006101000a8154906001600160a01b030219169055600182016000905560028201600090556003820160006101000a8154906001600160a01b0302191690556004820160006101000a8154906001600160801b0302191690556005820160006101000a8154906001600160a01b0302191690556006820160006101000a8154906001600160801b0302191690555050600080610fb963152a902d60e11b84600001516001600160a01b03166114bd90919063ffffffff16565b156110575782516020840151608085015160405163152a902d60e11b815260048101929092526001600160801b031660248201526001600160a01b0390911690632a55205a90604401604080518083038186803b15801561101957600080fd5b505afa15801561102d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110519190611a4d565b90925090505b8015611095576040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015611093573d6000803e3d6000fd5b505b600354600160a01b900461ffff16156111195760035460808401516001600160a01b038216916108fc91612710916110d991600160a01b90910461ffff1690611a7b565b6110e39190611aaa565b6001600160801b03169081150290604051600060405180830381858888f19350505050158015611117573d6000803e3d6000fd5b505b60035433906108fc9083906127109061113d90600160a01b900461ffff1682611ade565b61ffff1687608001516111509190611a7b565b61115a9190611aaa565b6001600160801b031661116d9190611b01565b6040518115909202916000818181858888f19350505050158015611195573d6000803e3d6000fd5b5060a08301516001600160a01b03163b61121e5782600001516001600160a01b031663f242432a308560a00151866020015187604001516040518563ffffffff1660e01b81526004016111eb94939291906119d4565b600060405180830381600087803b15801561120557600080fd5b505af1158015611219573d6000803e3d6000fd5b505050505b6040518681527fff26203f834d4e158eec2037d6515831e0fe8ac0bf1c95fca04ec8f48467e9819060200160405180910390a1505050505050565b6000546001600160a01b031633146112835760405162461bcd60e51b81526004016104c490611968565b61128d60006114e0565b565b333b15806112ac57503360009081526001602052604090205460ff165b6112c85760405162461bcd60e51b81526004016104c49061199d565b600081815260026020526040902060048101546001600160801b031634116113225760405162461bcd60e51b815260206004820152600d60248201526c6f6666657220746f6f206c6f7760981b60448201526064016104c4565b60058101546001600160a01b03161580159061134a575060058101546001600160a01b03163b155b1561139b57600581015460048201546040516001600160a01b03909216916001600160801b0390911680156108fc02916000818181858888f19350505050158015611399573d6000803e3d6000fd5b505b6005810180546001600160a01b031916331790556004810180546001600160801b033481166001600160801b03199283161790925560068301805442909316929091169190911790556040517f28785bef5b7a3b0190b82866b9e7d9fe1aae92fe285d15b79a990fe28b2691a0906114169084815260200190565b60405180910390a15050565b6000546001600160a01b0316331461144c5760405162461bcd60e51b81526004016104c490611968565b6001600160a01b0381166114b15760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b60648201526084016104c4565b6114ba816114e0565b50565b60006114c883611530565b80156114d957506114d98383611563565b9392505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000611543826301ffc9a760e01b611563565b8015610494575061155c826001600160e01b0319611563565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b03871690617530906115ca908690611b18565b6000604051808303818686fa925050503d8060008114611606576040519150601f19603f3d011682016040523d82523d6000602084013e61160b565b606091505b50915091506020815110156116265760009350505050610494565b8180156116425750808060200190518101906116429190611b53565b9695505050505050565b60006020828403121561165e57600080fd5b81356001600160e01b0319811681146114d957600080fd5b6001600160a01b03811681146114ba57600080fd5b60006020828403121561169d57600080fd5b81356114d981611676565b6000806000606084860312156116bd57600080fd5b83356116c881611676565b95602085013595506040909401359392505050565b6000602082840312156116ef57600080fd5b813561ffff811681146114d957600080fd5b60006020828403121561171357600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff811182821017156117595761175961171a565b604052919050565b600082601f83011261177257600080fd5b8135602067ffffffffffffffff82111561178e5761178e61171a565b8160051b61179d828201611730565b92835284810182019282810190878511156117b757600080fd5b83870192505b848310156117d6578235825291830191908301906117bd565b979650505050505050565b600082601f8301126117f257600080fd5b813567ffffffffffffffff81111561180c5761180c61171a565b61181f601f8201601f1916602001611730565b81815284602083860101111561183457600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a0868803121561186957600080fd5b853561187481611676565b9450602086013561188481611676565b9350604086013567ffffffffffffffff808211156118a157600080fd5b6118ad89838a01611761565b945060608801359150808211156118c357600080fd5b6118cf89838a01611761565b935060808801359150808211156118e557600080fd5b506118f2888289016117e1565b9150509295509295909350565b600080600080600060a0868803121561191757600080fd5b853561192281611676565b9450602086013561193281611676565b93506040860135925060608601359150608086013567ffffffffffffffff81111561195c57600080fd5b6118f2888289016117e1565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6020808252601e908201527f6f6e6c79206e6f6e20636f6e747261637473206f7220617070726f7665640000604082015260600190565b6001600160a01b0394851681529290931660208301526040820152606081019190915260a06080820181905260009082015260c00190565b634e487b7160e01b600052601160045260246000fd5b60006001600160801b03808316818516808303821115611a4457611a44611a0c565b01949350505050565b60008060408385031215611a6057600080fd5b8251611a6b81611676565b6020939093015192949293505050565b60006001600160801b0380831681851681830481118215151615611aa157611aa1611a0c565b02949350505050565b60006001600160801b0380841680611ad257634e487b7160e01b600052601260045260246000fd5b92169190910492915050565b600061ffff83811690831681811015611af957611af9611a0c565b039392505050565b600082821015611b1357611b13611a0c565b500390565b6000825160005b81811015611b395760208186018101518583015201611b1f565b81811115611b48576000828501525b509190910192915050565b600060208284031215611b6557600080fd5b815180151581146114d957600080fdfea2646970667358221220194ced965c21120f658e4bba36be37adcfd1e7f35fc43daee88fd235fc51b0a764736f6c63430008090033","deployedBytecode":"0x6080604052600436106101095760003560e01c8063715018a611610095578063c71f681811610064578063c71f6818146103af578063ddca3f43146103c2578063de53fcd5146103f7578063f23a6e6114610417578063f2fde38b1461044357600080fd5b8063715018a6146102635780638da5cb5b14610278578063bc197c81146102aa578063c18b8db4146102ef57600080fd5b806326749ad7116100dc57806326749ad7146101b35780633407facd146101e3578063550ee133146102035780635ff548691461022357806367bd3df21461024357600080fd5b806301ffc9a71461010e578063135171be146101435780631e18cb891461016557806324780c5614610185575b600080fd5b34801561011a57600080fd5b5061012e61012936600461164c565b610463565b60405190151581526020015b60405180910390f35b34801561014f57600080fd5b5061016361015e36600461168b565b61049a565b005b34801561017157600080fd5b5061016361018036600461168b565b6104f4565b34801561019157600080fd5b506101a56101a03660046116a8565b610540565b60405190815260200161013a565b3480156101bf57600080fd5b5061012e6101ce36600461168b565b60016020526000908152604090205460ff1681565b3480156101ef57600080fd5b506101636101fe3660046116dd565b610746565b34801561020f57600080fd5b5061016361021e366004611701565b6107db565b34801561022f57600080fd5b5061016361023e366004611701565b610b6e565b34801561024f57600080fd5b5061016361025e366004611701565b610ccc565b34801561026f57600080fd5b50610163611259565b34801561028457600080fd5b506000546001600160a01b03165b6040516001600160a01b03909116815260200161013a565b3480156102b657600080fd5b506102d66102c5366004611851565b63bc197c8160e01b95945050505050565b6040516001600160e01b0319909116815260200161013a565b3480156102fb57600080fd5b5061036061030a366004611701565b600260208190526000918252604090912080546001820154928201546003830154600484015460058501546006909501546001600160a01b0394851696959394928316936001600160801b039283169316911687565b604080516001600160a01b039889168152602081019790975286019490945291851660608501526001600160801b039081166080850152931660a08301529190911660c082015260e00161013a565b6101636103bd366004611701565b61128f565b3480156103ce57600080fd5b506003546103e490600160a01b900461ffff1681565b60405161ffff909116815260200161013a565b34801561040357600080fd5b50600354610292906001600160a01b031681565b34801561042357600080fd5b506102d66104323660046118ff565b63f23a6e6160e01b95945050505050565b34801561044f57600080fd5b5061016361045e36600461168b565b611422565b60006001600160e01b03198216630271189760e51b148061049457506301ffc9a760e01b6001600160e01b03198316145b92915050565b6000546001600160a01b031633146104cd5760405162461bcd60e51b81526004016104c490611968565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b0316331461051e5760405162461bcd60e51b81526004016104c490611968565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000333b158061055f57503360009081526001602052604090205460ff165b61057b5760405162461bcd60e51b81526004016104c49061199d565b604051637921219560e11b81526001600160a01b0385169063f242432a906105ad9032903090889088906004016119d4565b600060405180830381600087803b1580156105c757600080fd5b505af11580156105db573d6000803e3d6000fd5b50506040516bffffffffffffffffffffffff19606088811b82166020840152603483018890526054830187905232901b1660748201524260888201526000925060a801905060408051808303601f19018152828252805160209182012060e0840183526001600160a01b038981168552828501898152858501898152326060880190815260006080890181815260a08a0182815260c08b018381528884526002808b52938b90209b518c546001600160a01b0319908116918a16919091178d55965160018d01559451928b0192909255915160038a018054861691871691909117905590516004890180546001600160801b03199081166001600160801b0393841617909155915160058a0180549095169516949094179092555160069096018054909116959091169490941790935590518281529192507fc40c5d31a64e8e78c2eeb93bf6c23dc289b41965cc46caf25ec99ae5d3f60cd0910160405180910390a1949350505050565b6000546001600160a01b031633146107705760405162461bcd60e51b81526004016104c490611968565b6102ee8161ffff1611156107b95760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b60448201526064016104c4565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b60008181526002602052604090206003015481906001600160a01b0316331461083b5760405162461bcd60e51b815260206004820152601260248201527137b7363c903634b9ba34b7339037bbb732b960711b60448201526064016104c4565b333b158061085857503360009081526001602052604090205460ff165b6108745760405162461bcd60e51b81526004016104c49061199d565b6000600260008481526020019081526020016000206040518060e00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b0316815260200160018201548152602001600282015481526020016003820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016004820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016005820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016006820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000848152602001908152602001600020600080820160006101000a8154906001600160a01b030219169055600182016000905560028201600090556003820160006101000a8154906001600160a01b0302191690556004820160006101000a8154906001600160801b0302191690556005820160006101000a8154906001600160a01b0302191690556006820160006101000a8154906001600160801b030219169055505060006001600160a01b03168160a001516001600160a01b031614158015610a70575060a08101516001600160a01b03163b155b15610ac1578060a001516001600160a01b03166108fc82608001516001600160801b03169081150290604051600060405180830381858888f19350505050158015610abf573d6000803e3d6000fd5b505b805160208201516040808401519051637921219560e11b81526001600160a01b039093169263f242432a92610afe923092339291906004016119d4565b600060405180830381600087803b158015610b1857600080fd5b505af1158015610b2c573d6000803e3d6000fd5b505050507f50425cae216bd151d26c8e8bb9779cc899c99d72f78081f2ceec9a99f001ff7983604051610b6191815260200190565b60405180910390a1505050565b60008181526002602052604090206005015481906001600160a01b03163314610bc85760405162461bcd60e51b815260206004820152600c60248201526b37b7363c9037b33332b937b960a11b60448201526064016104c4565b60008281526002602052604090206006810154610bf1906001600160801b03166202a300611a22565b6001600160801b03164211610c3f5760405162461bcd60e51b81526020600482015260146024820152737769746864726177616c20746f6f206561726c7960601b60448201526064016104c4565b6004810180546001600160801b03199081169091556005820180546001600160a01b0319169055600682018054909116905560405133906108fc9060009081818181818888f19350505050158015610c9b573d6000803e3d6000fd5b506040518381527ff7c2501e0887f392db4213a4adf0460f214c4135536298ddb725b50d378a815f90602001610b61565b60008181526002602052604090206003015481906001600160a01b03163314610d2c5760405162461bcd60e51b815260206004820152601260248201527137b7363c903634b9ba34b7339037bbb732b960711b60448201526064016104c4565b60008281526002602052604090206005015482906001600160a01b0316610d8d5760405162461bcd60e51b81526020600482015260156024820152743634b9ba34b733903bb4ba341037379037b33332b960591b60448201526064016104c4565b333b1580610daa57503360009081526001602052604090205460ff165b610dc65760405162461bcd60e51b81526004016104c49061199d565b6000600260008581526020019081526020016000206040518060e00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b0316815260200160018201548152602001600282015481526020016003820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016004820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016005820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016006820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000858152602001908152602001600020600080820160006101000a8154906001600160a01b030219169055600182016000905560028201600090556003820160006101000a8154906001600160a01b0302191690556004820160006101000a8154906001600160801b0302191690556005820160006101000a8154906001600160a01b0302191690556006820160006101000a8154906001600160801b0302191690555050600080610fb963152a902d60e11b84600001516001600160a01b03166114bd90919063ffffffff16565b156110575782516020840151608085015160405163152a902d60e11b815260048101929092526001600160801b031660248201526001600160a01b0390911690632a55205a90604401604080518083038186803b15801561101957600080fd5b505afa15801561102d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110519190611a4d565b90925090505b8015611095576040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015611093573d6000803e3d6000fd5b505b600354600160a01b900461ffff16156111195760035460808401516001600160a01b038216916108fc91612710916110d991600160a01b90910461ffff1690611a7b565b6110e39190611aaa565b6001600160801b03169081150290604051600060405180830381858888f19350505050158015611117573d6000803e3d6000fd5b505b60035433906108fc9083906127109061113d90600160a01b900461ffff1682611ade565b61ffff1687608001516111509190611a7b565b61115a9190611aaa565b6001600160801b031661116d9190611b01565b6040518115909202916000818181858888f19350505050158015611195573d6000803e3d6000fd5b5060a08301516001600160a01b03163b61121e5782600001516001600160a01b031663f242432a308560a00151866020015187604001516040518563ffffffff1660e01b81526004016111eb94939291906119d4565b600060405180830381600087803b15801561120557600080fd5b505af1158015611219573d6000803e3d6000fd5b505050505b6040518681527fff26203f834d4e158eec2037d6515831e0fe8ac0bf1c95fca04ec8f48467e9819060200160405180910390a1505050505050565b6000546001600160a01b031633146112835760405162461bcd60e51b81526004016104c490611968565b61128d60006114e0565b565b333b15806112ac57503360009081526001602052604090205460ff165b6112c85760405162461bcd60e51b81526004016104c49061199d565b600081815260026020526040902060048101546001600160801b031634116113225760405162461bcd60e51b815260206004820152600d60248201526c6f6666657220746f6f206c6f7760981b60448201526064016104c4565b60058101546001600160a01b03161580159061134a575060058101546001600160a01b03163b155b1561139b57600581015460048201546040516001600160a01b03909216916001600160801b0390911680156108fc02916000818181858888f19350505050158015611399573d6000803e3d6000fd5b505b6005810180546001600160a01b031916331790556004810180546001600160801b033481166001600160801b03199283161790925560068301805442909316929091169190911790556040517f28785bef5b7a3b0190b82866b9e7d9fe1aae92fe285d15b79a990fe28b2691a0906114169084815260200190565b60405180910390a15050565b6000546001600160a01b0316331461144c5760405162461bcd60e51b81526004016104c490611968565b6001600160a01b0381166114b15760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b60648201526084016104c4565b6114ba816114e0565b50565b60006114c883611530565b80156114d957506114d98383611563565b9392505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000611543826301ffc9a760e01b611563565b8015610494575061155c826001600160e01b0319611563565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b03871690617530906115ca908690611b18565b6000604051808303818686fa925050503d8060008114611606576040519150601f19603f3d011682016040523d82523d6000602084013e61160b565b606091505b50915091506020815110156116265760009350505050610494565b8180156116425750808060200190518101906116429190611b53565b9695505050505050565b60006020828403121561165e57600080fd5b81356001600160e01b0319811681146114d957600080fd5b6001600160a01b03811681146114ba57600080fd5b60006020828403121561169d57600080fd5b81356114d981611676565b6000806000606084860312156116bd57600080fd5b83356116c881611676565b95602085013595506040909401359392505050565b6000602082840312156116ef57600080fd5b813561ffff811681146114d957600080fd5b60006020828403121561171357600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff811182821017156117595761175961171a565b604052919050565b600082601f83011261177257600080fd5b8135602067ffffffffffffffff82111561178e5761178e61171a565b8160051b61179d828201611730565b92835284810182019282810190878511156117b757600080fd5b83870192505b848310156117d6578235825291830191908301906117bd565b979650505050505050565b600082601f8301126117f257600080fd5b813567ffffffffffffffff81111561180c5761180c61171a565b61181f601f8201601f1916602001611730565b81815284602083860101111561183457600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a0868803121561186957600080fd5b853561187481611676565b9450602086013561188481611676565b9350604086013567ffffffffffffffff808211156118a157600080fd5b6118ad89838a01611761565b945060608801359150808211156118c357600080fd5b6118cf89838a01611761565b935060808801359150808211156118e557600080fd5b506118f2888289016117e1565b9150509295509295909350565b600080600080600060a0868803121561191757600080fd5b853561192281611676565b9450602086013561193281611676565b93506040860135925060608601359150608086013567ffffffffffffffff81111561195c57600080fd5b6118f2888289016117e1565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6020808252601e908201527f6f6e6c79206e6f6e20636f6e747261637473206f7220617070726f7665640000604082015260600190565b6001600160a01b0394851681529290931660208301526040820152606081019190915260a06080820181905260009082015260c00190565b634e487b7160e01b600052601160045260246000fd5b60006001600160801b03808316818516808303821115611a4457611a44611a0c565b01949350505050565b60008060408385031215611a6057600080fd5b8251611a6b81611676565b6020939093015192949293505050565b60006001600160801b0380831681851681830481118215151615611aa157611aa1611a0c565b02949350505050565b60006001600160801b0380841680611ad257634e487b7160e01b600052601260045260246000fd5b92169190910492915050565b600061ffff83811690831681811015611af957611af9611a0c565b039392505050565b600082821015611b1357611b13611a0c565b500390565b6000825160005b81811015611b395760208186018101518583015201611b1f565b81811115611b48576000828501525b509190910192915050565b600060208284031215611b6557600080fd5b815180151581146114d957600080fdfea2646970667358221220194ced965c21120f658e4bba36be37adcfd1e7f35fc43daee88fd235fc51b0a764736f6c63430008090033","linkReferences":{},"deployedLinkReferences":{}}')},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d1","./km.js":"e81d1","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id="4678"},"468d":function(e,t,n){var r=n("f85a"),a=n("7e30"),i=n("f2e4"),o=n("262c"),s=n("c41d"),c=n("e0ae"),u=n("0220"),l=n("8f64"),f=n("ad55");e.exports={IntegrationManager:f,ERC721OrderMarketplace:r,ERC721ListingMarketplace:a,ERC721AuctionMarketplace:i,ERC1155OrderMarketplace:o,ERC1155ListingMarketplace:s,ERC1155AuctionMarketplace:c,ArtabiaERC721:u,ArtabiaERC1155:l}},"48ce":function(e,t,n){"use strict";n("9712")},"4a5c":function(e,t,n){},5:function(e,t){},5171:function(e,t,n){"use strict";n("a470")},"547f":function(e,t,n){"use strict";n("7347")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav-bar"),n("Spinner"),n("div",{staticClass:" md:px-16 xl:px-0"},[n("router-view")],1),n("footer-bar")],1)},i=[],o=n("1da1"),s=(n("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[r("div",{staticClass:"container"},[r("b-navbar-brand",{staticClass:"logo-container",attrs:{href:"/"}},[r("img",{attrs:{src:n("e347"),alt:"Artabia Logo"}})]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.expanded;return[r("burger",{attrs:{"is-open":t}})]}}])}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("div",{staticClass:"search-box"},[r("div",{staticClass:"search px-7"},[r("form",{staticClass:"search-form"},[r("b-icon",{attrs:{icon:"search"}}),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.searchQuery,expression:"searchQuery",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"Search items and account"},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value.trim())},function(t){return e.searchfun(t)}],blur:function(t){return e.$forceUpdate()}}}),e.searchQuery.length>0?r("img",{staticClass:"clear-btn",attrs:{src:n("b0e0"),alt:"clear input"},on:{click:e.clearInput}}):e._e()],1)]),r("search-results-dropdown",{attrs:{results:e.results,"is-open":e.resultsPopup},on:{clicked:e.clearInput}})],1),r("div",{staticClass:"custom-select-menu-container"},[r("img",{attrs:{src:n("a035"),alt:"icon"}}),r("select",{staticClass:"custom-select-menu"},[r("option",{attrs:{value:"en"}},[e._v("en")]),r("option",{attrs:{value:"el"}},[e._v("el")])])]),r("div",{staticClass:"buttons"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/create-select"}},[e._v(" Create ")])],1),null==e.user?r("div",{staticClass:"buttons",on:{click:e.loginUser}},[r("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v(" Login ")])],1):e._e(),e.user?r("div",{staticClass:"buttons",on:{click:e.logoutUser}},[r("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v(" Logout ")])],1):e._e(),e.user?r("div",{staticClass:"wallet_drop_grp"},[r("div",{staticClass:"wallet_select_txt"},[r("span",[e._v(e._s(e.userBalance))]),e._v(" "),r("b",[e._v(e._s(e.chain))])]),r("b-form-select",{staticClass:"wallet_select_option",attrs:{options:e.options},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[r("b-icon",{attrs:{icon:"caret-down-fill","aria-hidden":"true"}})],1)],1):e._e(),e.user?r("div",{staticClass:"profile-nav-container"},[r("div",{staticClass:"profile-avatar",on:{click:e.toggleProfileMenu}},[r("router-link",{attrs:{to:"/profile"}},[r("img",{attrs:{src:n("c1a9"),alt:"avatar"}})])],1)]):e._e()])],1)])}),c=[],u=(n("fb6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"burger",class:{open:e.isOpen}},[n("span"),n("span"),n("span")])}),l=[],f={props:{isOpen:{type:Boolean,required:!0}}},d=f,h=(n("48ce"),n("2877")),p=Object(h["a"])(d,u,l,!1,null,"2efafb3e",null),b=p.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade"}},[e.isOpen?n("div",{staticClass:"search-results"},[e.results.nfts?n("div",{staticClass:"result-category"},[n("span",{staticClass:"result-category-title"},[e._v("NFTs")]),n("div",{staticClass:"justify-content-end d-flex "},[e.results.nfts.length<1?n("h6",{staticClass:"text-center text-white no-nft-foundtxt"},[e._v("No NFT Found")]):e._e()]),e._l(e.results.nfts,(function(t){return n("div",{key:t.id,on:{click:e.emitClick}},[n("router-link",{staticClass:"result-item",attrs:{to:"/"}},[n("div",{staticClass:"result-avatar"},[n("img",{attrs:{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBYWFRgVFhYYGBgaHBwaHBwaHBweGh4hHh4eHBwcGhweIS4lHiErHxgcJjgnKy8xNTU1HCQ7QDs0Py40NTEBDAwMEA8QHxISHzQrJCs0NDQ0NjQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NP/AABEIAJ8BPgMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAACAQMEBQYAB//EAEMQAAIBAQUEBgYHBwMFAQAAAAECABEDBBIhMQUGQXEiMlFhgbFCcpGhsvATIyQ0UoLBM1Nic9Hh8RQW4kOSosLSY//EABoBAAMBAQEBAAAAAAAAAAAAAAABAwIEBQb/xAAuEQACAgIBAgUDAwQDAAAAAAAAAQIRAyESBDEiQVFhgTJxkRMz4SOhscFEUtH/2gAMAwEAAhEDEQA/AM+xzhWcBmEbVp9c5HzPEkI0FmzMGzMStcoOQUGrx7FI9DSFZnIw5eoONjiGsJDwjIBiK8SkHElRHAjePsgtaCa5IXFhgw2fISMTFVpjls1x0PB8pwMRSIDnONvQktjyv4905DGrNhWHXFQCCkDQRcw0BIjt0uDuwVVJPYNZoLO4WVgK2zYm/Ap+I8JOeVQ15+hlv0/JWbP2Q9oeiMuLHJRzPyZcAXexyoLZ9CTkg7advP8AxIV+20zjCKIg0Vcl8e2VFpbEzHCeT6tL0X/phv8A6/ll/bbKs7UYrBulqUY9L8p4/OfCUF4ujISrAgjgcjDsbyV4y6sdrJaKFt1xjgw648ePzrF/Ux+6/v8AyC99f4M3SkFzL2+7E6Jeyb6Re0dZfWXWUj2eHWVhkjPsbXuN452M0pGyh1igik1ZutDqgGs4tSBjAjQMbkJRdktG0pTUa0p414c4NsxDNWlcRrSlNeFMqcu6AjCo11Faa+E63piagoAxpxIFTTOLl4go4sZzERms7WPkFDhaLjgschGyY3KhVY7jzhWj6Riuc60NIKWgcdhYqxVMbxU74OLOHIdDjtnFVoBcZwEjUjPHQ2/bEVoWIUjTnukZPzLpEmzEFhTOBZPWIxMHLWgUdjwtCRFU0qIyGjiHIzKk2xuKSF+kgt2xsGEYcg4j/o1gKI3iiYocg4jyLWEid8YDRQxiUhcWSdJxStTBSzLCXOy9hu4LGiJxZsl/vNOSSuXYw9du5WWF3LEZVmiuOwwoD2zfRrwB67cl4fOUcN9sbuKWIxuP+o409VeHPzlTer+WbEzEk6kmYXOf06Xr5/wTk79/8FredsqqlLBcC8T6Td5bhKO1vBMYZ6mSbG6MxroO0/oJtRhjVir1G6SRY3MnNsh2DX+0sLncSWCopZj2CpP9prdl7paNbH8qn4mHkPbOXN1qh2ZXFgnlfhXyeeXi6umY6S92viP6RlLTvm+2ruu6Vayq69npD/68+6ZO9bOVq5YW45cf4h2++PD1ikt7DJilB1NUN3baD2bBlYg9369st2t7C8ZOBZufSUdE+uOHznMzeLJ0PSGXaND/AEhra0pOhwjPce/qidUtFhtHZL2eoqp6rLmp8ZS2qEHOX+zNsMnRrVTqrZqfDh4Se10sLxnZYUeh+rfqnKlVbt48xMynKOp/lf7HGVOl+DG1nCT7/cGs+iyYSCTUg4qUApWtCvHLidZDa2ozHAmeVOlRdM16Va5ce0wt90WTTDuq1daEjMZ9nfl85Ry/qQ7516bZ555nPx1hXPaCqV6CdE69LPjn0om0b0HJYClTXLSCk+XYm3LlVaIYMJGpAUjjrG2aa5VspVkhGrlAds43ipFLZd8fK0LjTDUcYtqxMZDx1iI07QmqY2DEEAvCr8/PhMWa4isaZRbMxsmFZntm1LYmtDYtKdhnI9YLXpyztiOJwQx7QciDzgi3bCEJOEEkDgC1K+Q9k5+bvZfgh2yPGK1pwhLenLMxY4nBDHiQRQgxlrUlcJJKgkgcKmgJ9w9kbk1GhKKbsVmj1k2REAXtyzMWJZwQxrqGyIMJ7Y4QteiCTTvNAfaFHsii33HJeRy2lJz2tcp1renxMxY4nBDHKpDChB5iNtakgJXoglqcASACfYo9kObWgUU9jwbocPkxvF3x3/VOauWOJgQx4kEYSPZlGGtThwV6IJIHCpABP/iPZCUnoIruPXZMR1mpue7jMoalazPbOvZLs7MSxFCeJBFCPZlN/s/aI+gJPonB7RWDnKMU4o5sz8VNtKisN2u93zb61/wjqqf4j6Uqto7Ze0PSOQ0UZKOQH+ZH2reAWNDK9FLGigk9glFFR8Utv3MwTlG3oca0Jj1lZs+SjmeHtkm6bMGr5nsGnifnxml2TsO0tqYFwJ+Iii+A4+HuksnVKCZqKcnxgrZR3W4KtCek3u8BNXsrdh7SjPVE7PTPh6Pj7JpdmbEsrAYusw9JqVHLgJP+nD2ZZCCKNQjTKo8xPMy9XKb1+T0MPRJbyu36EBmu9zTQCvAZu36nymY2pvDaWlVWtmvYD0jzbhyEgXWwe3tAuKrvxYngKmp5CbLZu7llZ0LdNu1hkOS/1k6jB3LbFGWXqPDjXGJSbK3ndaLaguv4h1hz/F585d3i43e9pjUiv4lyYdzD9DIu1d2FarWXQP4fRPL8PlMzS1u7+kjj3jyYe6NKMtxdMHLJi8GZcl6h7V2DaWNSRiT8Sio/MOHlM1etmVzQ0PYdPDsnrFxv5+iV7fChY0GdAa6VB0qM6SFtXdmztOlZ9Btch0TzHDmJTH1UoOn+TOTo9csT+GeSO5UhWBB7/wBDx5xyyvB1E0m1NlMhw2qZcD6J71Yf5lBeNnMvUOIdh639/nWepj6hSWzicVdSVMuLrtvEuC3UWid/XX1W1+dYF62CrqXu7Y11K6OvMcZmy9DST9n3xlaqmhGhBm+C7wde3kxNOKt/yVt4sChp3/5jaWuVJpd9qfTMe5fhEytZnlpP1RaPiW/UOtc4NYJNIFZlyKKI9QwcVIAeEoB4wv0Cq7il6x2mUjtrDtXpNKRlxvsAz5zkaAWipSZT2NrQrnOPAmMWhziC0lFJJmXG0NY86CAxIicY4/bOZuy6QSOKwA2cFBXKLSFtodJMLFHUbI8pG0j1jFGWwlHVinKITDda0jNY3oS2OnSITOXqwK5xNjSHbI0NZs7i5/0Tn/8ARfhExanMTX3JvsL6ftF+GUg9V7ohmjf9yitW6RMvdnAYFIFK1r7TrM7bPmZoNmfsk5HzMeeWiM40keh7I3WRaNa9NtQvoDw9Lx9k0qgDISr23fGsrAulMXRArnSpArKPdK/s1s6uxYutak1zXgPBj7J4slKacm+x60Z4sMo40u52+Nu30ipiODCCV4E4iKnt0Et93/uY5P8AE0pd8R9cPUHxNLvYI+yDk/xNB/QiWNt9RO/RmZ3ZH2iz5H4WnoImB3ZX7RZ8j8Jm+mcvcp0H7b+51JHvN0RxR1DDXMSROkztaT0zL707MtbSjL0lUdUajtI7eHslJszbVpYdHrIMircPVPDlpPQZhd7VAt8hqoJ78zL4pcvC0eb1eN43+rFtM090v1jeUIyYU6SsBUcx+omc3g3cWzVrWzNFGqnPU06J8dD7ZUNdrVFW2AIU9VlOhrTM8NJoHvr2twtGcgsDhqBStGXM982k4STi9WYeRZoNZI7StM823gAAQ0zJIrx07ZEuLSXvL1U9Y+UhXBp62B7OPviTLnfc/XH1V+ETL1ymo33/AG1f4V+GZRdIr1H7FoJV8nViTnSkVM5jzoqvUSvbOU5iAfn58IgMOQNDrnODacIIaHaiO7sVUNExRrSBWEGIMSY2hWqDCDjlEdznGgZrlT0Zq0AusctH7I0Xz0huhMk3rRVLexQRwiM0SzBEBzE26GlsIQ1cxpG4QqxJjaHGc9s6saJjivDlYVQpM6sQvEV4rGO2NK5zX3I/YX/mr8ImMs9fn54TY3E/YX/mr8Il8b18o5syM9anMzTbKH1Kcj5mZi1rNPsj9gnI+ZmcpLKvCvuel70fdTzTzEx+y7x9Hao/4WFeRyb3EzYb0/dTzXzExQQ4Q3Akr4gKf/bznn464Ne5TrG1ljJeSTL/AHu/bL6g+Jpd7B+6Dk/xNMttO8YxZNx+jCnmrMP0rNTsL7ovJ/iaSlpJFsElLPKS9DPbtj6+z8fhabqee7LvIs3VyK0rkMtQR+svxvOP3Z9omJJtj6TPjhBqTrZo50zv+6B+7PtH9JI2ft0WrhAhFa51roKzNM7I9Tik1FPbLozEb4ftx6i+bTbmYne/9uPUXzaUw/UR6/8AZf3Rfbv2Ya7ICAQQwIOYPSOokbbNySyulqqCikhqcBVl07spN3b+72fI+Zg70fdrTkPiESb517m3FfoX51/o8c3n6tn6x8pAuLSdvR1U9Y+UgXCpPhPZwfUeWv2vyXm+5+t/KvwzJB8pq99lJtR6i/DMowIr3a+UUr4r7F8VUGr5Gusbc9kbr74qPSY5Xo3xrY45FB74JpTvgTiDrDlfkOqOMJnJ9kEKTHlUjKEbFIaRhXOKCMXdAYTsJPz5wvyCvMN2HCNg9kRgRlnnFsCc6Csd29iqloZdji1Pt8oSWhNamMFs/n3QiD2SXJlq0SLJyTqchrx7Ijaa9+vvjeKJioYOWhcdhq51rnzPKkNNCIziypOVplSNNDwtO81+R5ZQnGWsYrDTIiukalaE0EXOtT85QT7or56QTWJtjVD9kc61PtmuuZ+wv/NX4BMWhzmxujfYH/mr8Al8TtfKObOqooHM1Gyf2Kcj5mZRznNXscfUJyPmY8rsjmXhX3PTd6Pup5p5iZu7WGK6OeK2uLwKhT5+6aPen7qeaeYkDdawx3e2U+kSPaonmRdQv3OrNHln4+sTNAzcbC+6Dk/xNMPplx4zcbCP2Qcn+JoZVoh0P1yv0ZltnXX6V1SuGtc6V0BOnhLz/bB/ej/t/wCUrN2z9oT83wmbqSk2mW6Pp8eSDlJbszH+2D+9H/b/AMpK2ZsI2VoHxg0Byw01FNay+nTPJnZHpcUZKSW0cZh98P249VfNpuDMPvgfrx6i+bSmH6ifX/s/KNHu192s+R8zA3p+7WnIfEIe7X3az5HzMDen7tach8QmV9fyU/4/x/o8b3r6tn6x8pAuBofCT96+rZ+sfKVtxOc9nC/EeVHeFfJfb7uRaL6ieUyrOSCanPX21ml33b6xf5aeUyeLKkzKVJL2L4o6CUV1OmnnlFde856568YzWKjUk1JFnFjloMhQ/PdBLmhzOev9/OArRCYOXoHH1DW1PbDtbUjic/fzjaMNIjmuYjUtGWtnFz2nL3cYotD28/bx7Y3iiE5xKTQ3FBsxJrU5af2h2Tmp19sYJnK8FLYnHQIs++ONxkZX9kce07JhSSRVptioOFZxiIaRUIrnMj8wVMJecQgVjiAQSsbdIRGpFZzSkR6ZUitSg7Yb7CFR4rnONRcUOWqDj5hoM5sbqT/oX/mr8ImNsjnnNfc/uD/zV+AS+E58/kUBbpTW7KP1Kcj5mY19Zr9imtgnI+Zjk7tHPnXhTPT96D9lPNPMSPuT+yf1/wD1WObO25YXhfo3AViKFWoVb1TofcZZ7N2cliGCVoWxUJrTICg7sp5knxi4tbO+EVPJHLFpqqMTty74Lw40BOIfmz8yZq9gfdF5P8TSp30sKMloOIKnwzHmZa7vn7GvJ/iaOTuCZHDDh1El7Mzu7R+0Wfj8LTfTz/dlvtFnyPwtPQBMZVTLdB+2/uLOnTpM7gZh98T9ePUHm03Ew+9yFrwqgEkotABUnNpXD9Rxderxa9UaPdn7tZ8j8Rg70/drT8vxCObFszZXdFfolQSakZZk5nTjKHeTeCzdGsbPpVoC2iihBy/FpyjjFynr1HOcYYKk61X9jzTes9BPWPlKu5PnLLew9FBxxE+6VtzXMUnq4vr0efFVhV+5db7ddP5aeRmUw5Vmt30Ulk/lJ5GY2snk8r9C+HcfkWIxhVEPoySTZZsZrFAg1i1yggYnjHGqvjG6QrThGn5iaBxds4JxgmcXhY6Fds4BnEe6KCOMEJjAMcS0pXL51jIYVhM0inRZoeZ6xcBjdic6w8R0BmrXdmafZBYZ2kAWhnForQ6YaGkUimfCCxpFc5CPyYCh+M52rA4eMQmKwHEbOs2mxE+lur2SEF8YfCSASoUCo8ZiFMkXa9lCCDmNCDQjkZXFkSeyWbG5LRaXi6shIYEEagih98j2d7ezbEhK9vYeY4y7uu8CWgCXlMY0DjJ18fS+dZ192FiXHYMLVO1euvrLr88J0OpLRzrWpId2ft5H6L0Ru09Q+Po+Ptm12TvFa2VFY407CcwP4W/Q+6eSvYkSTcNp2llQA4l/C2ngfRkJwvUkL9NxfLE6Z71Z3iwviYa140OTKdK+/UVElXW5iysfo1JIAahOuZJp755JsvbSuRgYo40WtGHqka+E2uyt6mWi2wxD8Q1HMceY985Z4ZL6dotj6lX/AFVT7WQ92D9osx63wtPQZWWF3sLR1t0wlhXpKdagijDtoeOcsxIZJcnZ09Ni/Ti1d7uwok4yBtHadnYirsAeAGbHkP1mUm3SOiUlFXJ0ieTKDau27GxYkAPa0pRaVA4Anhrp3zO7V3ltLSqr0F7AekebfoPfMTtHeCzSqoA793VHMjXkPaJ0wwVuR5+Tq3N8cSv3NPtjbb2lWtGCoPRrRBz7Tz/tMdtDeLVbEfmI+EH9fZKi9W9pbEM7V7ANBroBHrjs5nbCqlidABnOuMG1S0iCxpPlkdsjKjO2JiWJ4nWaXYOyWZuqaDVj1RzMkC42F2GK3bE/CyQ5/nbh86ys2hvK79EURBoqZL49svGodvyZnyyKl2Lnei1s8SAMCAqqW1AAyrlrQZ5TDWmElzipSmEUPSzzoeFBnnyhXi+ltTIpNZHLkUqivIthxOKtj2Beh0+t1sj0OkR+bo0bLtprBCL0+n1erken0gPy9GrZ9lNY2DBkToodKL0enrXEMJ6FDQV/FlnlHBZqMfTFFrhOE9OhoMvRqDXPspI1YpbKkaYmh20C9Fg2ZrVaHo0pTPQ17tKRy1RCzjGKKDhbC3TIIoKarXv0pI1YLGOwodKDCCGq1TVaHKlKGuhrU8qd8P6JA7DHVRUq2FumQMhTVanKp0kbFQ1nY86xXQ6HrZBSuLpEkFaHIAAhq6ZkkU/h743bKqsQGxLwahFchXI561HhG3fOIYN7EloYL+yHSsaUw6yFl6HVNJ2KceEFDG2C7BqY8oGdRGA9JwtDxjTSMuI450gEwQeMIDKsLbCqCBnQKxS0LHQok2yuLMpYAkACpppIZlrs+/utm4V8NcPGhOfCmspiUW/ETyckvCQMLBqUPz2Sfcr/AGliwdCy940PPgR3GQXvT4w2N8QyVsRqNdDqNT7Yj3p2QIXJUaLU0qK0y0rmfaY1PjdClDklZr02hYXnK2X6O0P/AFEHRPe6/r7xIW0tiPZgNQMh0dekp7M+HzrM8t6euLG1SMJNTUigWhOtMIpTsylxsjb9pZ9EGq8UbNT25f0lo5Yy0yEsUo7iV72ZHhLa4bwOnRerr2+mPH0vH2yyWyu156hFjaH0GPQb1W9Hl7pT37Zb2bFWUqR28e8HjNOHnEw3GXhmjZbJ2vnjsLSh408nU/rNpsvexW6NtRG7RXCf1E8KR2Q4kJVhxEvLjvGOrbDP8SjzX+nunPPHGX1KmJLLi3jdr0PT9q72E1WwFB+Jhn+VTp4+yYnau2ksyWdy7nhWrnn2DnM5f94XclbMYF/Eesf/AJ85V2ViSeJPE9p74RglqK+QcJ5HyzP4RL2hte0tujXAh9FePrH0vLujN3utTpLbZuwncYslQauxog8eMm2m07C7ZWAxv+8cdEeov6+cvHGo7l3NclXGCOuewgih7w30acK9dvVX+sS+7xqilLsv0a6FvTbm3Dwmcv8AtN7RizsWPafIf0kFmJpX5zzillXZDjhb3Ik3i8ljWvfIxMEzmWk55SlLbOiMVHSOpOnGCYrHVjpPZEtDBBgloWFBgQWpArFPugMKscZh7owIU0nQmrOY1pSIZytTMRC2cG72FCMISsOMJmoCIzWPt2Bb0R1PfFBjKmET/ScnI6eJJXvz7IkbViPZl5xWeNS0ZoMmKdco2DlFxQ5BQ6TWdjjYbjFBj5CodrErGwZxPGFiHZKs7NSjsT0hTDmBxzy1OXeJEBjtniwNh6vRxdXtOHXMZ108ZqMknsHFtaGp0UNELVisKCrDagpSMloYaoEaYmh+xtiNJodn7xEL9HagWqfhbUeq2o+dJmA1JzNxlY5nFEpYoy7o2drsiztlL3ZsXE2bUDry/F85mUFrdGDFSCCNQdffId1vbKQVYgg5EEgjxmlu23ltFC3mzx00daB/HgZ0RnGfchKModtor7jstrQ4UUs3d+p4S7Nld7sPrCLW0HoKegp/jbjy90rb/vEcOCxUWVn2L1j6zan5rWZ17YmEssYaQRxynt9i72rt57XrNRR1VXJR2UH6mUb2hMB3qYInPPI5HRDGorQc408f8wQYprlXv/vMWbo7FOLZzqzlNIxNCMYtYJM6vz884DoKnsh2oA0jZBiMaQvRmhecXKADEUwUgoMmdpBDRS0LARo4VAWsB9B8/OUAvNXTFVhM1YIM4tBJrFY6P//Z",alt:"avatar"}})]),n("div",{staticClass:"result-info-container"},[n("span",{staticClass:"result-title"},[e._v(" "+e._s(t.name)+" ")])])])],1)}))],2):e._e(),e.results.users?n("div",{staticClass:"result-category"},[n("span",{staticClass:"result-category-title"},[e._v("Users")]),n("div",{staticClass:"justify-content-end d-flex "},[e.results.users.length<1?n("h6",{staticClass:"text-end text-white no-user-foundtxt"},[e._v("No User Found")]):e._e()]),e._l(e.results.users,(function(t){return n("div",{key:t.id,on:{click:e.emitClick}},[n("router-link",{staticClass:"result-item",attrs:{to:"/"}},[n("div",{staticClass:"result-avatar"},[n("img",{attrs:{src:t.profileImage?t.profileImage:"/img/Default_Profile_Picture.40401ee9.png",alt:"avatar"}})]),n("div",{staticClass:"result-info-container"},[n("span",{staticClass:"result-title"},[e._v(" "+e._s(t.name)+" ")]),n("span",{staticClass:"result-info"},[e._v(" "+e._s(t.followers)+" ")])])])],1)}))],2):e._e()]):e._e()])},v=[],g={name:"SearchResultsDropdown",props:{results:{type:Object,required:!0},isOpen:{type:Boolean,required:!0}},methods:{emitClick:function(){this.$emit("clicked")}}},y=g,x=(n("60f3"),Object(h["a"])(y,m,v,!1,null,"1fd20945",null)),w=x.exports,_=(n("0ae5"),{name:"NavBar",components:{Burger:b,SearchResultsDropdown:w},data:function(){return{user:null,searchQuery:"",profilePopup:!1,profileMenuOpen:!1,results:{collections:[{id:1,name:"Collection 1",avatar:"https://source.unsplash.com/random/50x50",type:"ERC-721"},{id:2,name:"Collection 2",avatar:"https://source.unsplash.com/random/50x50",type:"ERC-721"},{id:3,name:"Collection 3",avatar:"https://source.unsplash.com/random/50x50",type:"ERC-721"}],items:[{id:1,name:"Item 1",avatar:"https://source.unsplash.com/random/50x50",type:"Not For Sale"},{id:2,name:"Item 2",avatar:"https://source.unsplash.com/random/50x50",type:"Not For Sale"},{id:3,name:"Item 3",avatar:"https://source.unsplash.com/random/50x50",type:"Not For Sale"}],users:[{id:1,name:"User 1",avatar:"https://source.unsplash.com/random/50x50",followers:"132 followers"},{id:2,name:"User 2",avatar:"https://source.unsplash.com/random/50x50",followers:"235 followers"},{id:3,name:"User 3",avatar:"https://source.unsplash.com/random/50x50",followers:"54 followers"}]},selected:"eth",options:[{value:"bnb",text:"Binance"},{value:"eth",text:"Ethereum"}],userBalance:0,chain:"ETH"}},computed:{resultsPopup:function(){return this.searchQuery.length>0}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=JSON.parse(localStorage.getItem("userdata")),null!=n){t.next=5;break}e.user=null,t.next=13;break;case 5:return e.user=n,t.next=8,im.connect("rinkeby");case 8:return r=t.sent,t.next=11,im.web3.eth.getBalance(r);case 11:a=t.sent,e.userBalance=im.web3.utils.fromWei(a,"ether").slice(0,6);case 13:case"end":return t.stop()}}),t)})))()},methods:{searchfun:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.axios.post("https://www.artabia.com:3001/search",{page:0,amount:0,query:e.target.value});case 2:r=n.sent,console.log(r,"result for search"),t.results=r.data;case 5:case"end":return n.stop()}}),n)})))()},toggleProfileMenu:function(){this.profileMenuOpen=!this.profileMenuOpen},clearInput:function(){this.searchQuery=""},loginUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,im.connect("rinkeby");case 2:return n=t.sent,t.next=5,window.login({im:im,account:n});case 5:return r=t.sent,e.user=r,console.log(e.user,"this is the user "),r=JSON.stringify(r),console.log(r,"after login"),localStorage.setItem("userdata",r),t.next=13,im.web3.eth.getBalance(n);case 13:a=t.sent,console.log(a,"bbl"),e.userBalance=im.web3.utils.fromWei(a,"ether").slice(0,6);case 16:case"end":return t.stop()}}),t)})))()},logoutUser:function(){localStorage.removeItem("userdata"),this.user=null}}}),M=_,T=(n("745b"),Object(h["a"])(M,s,c,!1,null,"9b657cd8",null)),k=T.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"loading",staticClass:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-100 flex flex-col items-center justify-center loading-spinner"},[n("div",{staticClass:"my-3",attrs:{id:"loading"}}),n("h3",{ref:"error",staticClass:"text-red-400 error-spinner"})])},E=[],A={name:"Spinner"},C=A,L=Object(h["a"])(C,S,E,!1,null,"f70e83d4",null),R=L.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"footer-bar"},[r("div",{staticClass:"container"},[r("div",{staticClass:"logo-container"},[r("img",{attrs:{src:n("e347"),alt:"Artabia Logo"}})]),r("div",{staticClass:"footer-col"},[r("router-link",{attrs:{to:""}},[e._v("How it works")]),r("router-link",{attrs:{to:""}},[e._v("Subscribe to our newsletter")]),r("form",{on:{click:function(e){e.preventDefault()}}},[r("b-input-group",{attrs:{append:"OK"}},[r("b-form-input",{attrs:{placeholder:"Email adress"}})],1)],1)],1),r("ul",{staticClass:"footer-col"},e._l(e.menus,(function(t){return r("li",{key:t.id},[r("router-link",{attrs:{to:t.slug}},[e._v(e._s(t.name))])],1)})),0),r("ul",{staticClass:"footer-col"},e._l(e.socials,(function(t,n){return t.active?r("li",{key:n},[r("a",{attrs:{target:"_blank",href:t.url}},[r("font-awesome-icon",{attrs:{icon:["fab",t.name],size:"lg"}}),e._v(" "+e._s(t.name))],1)]):e._e()})),0)])])},I=[],N={data:function(){return{menus:[],socials:{}}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.menus=[{id:1,name:"Contact Us",slug:"/contact"},{id:2,name:"Terms & conditions",slug:"/terms"},{id:3,name:"About Us",slug:"/about"},{id:4,name:"Privacy Policy",slug:"/privacy"}],t.prev=1,t.next=4,e.axios.get("".concat(e.$cms,"/socials"));case 4:n=t.sent,r=n.data,e.socials=r,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},O=N,D=(n("5e4f"),Object(h["a"])(O,P,I,!1,null,"0a3a73c6",null)),F=D.exports,B=(n("d3b7"),n("ac1f"),n("1276"),n("468d")),z=n("99e5"),U=n("1f5a"),H={data:function(){return{cms:"http://localhost:1337",featured:{}}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.im=new B["IntegrationManager"]([[B["ERC721OrderMarketplace"],"0xf7aeb79dc38dfff49978c2843710e6f100b082d5","erc721OrderMarketplace"],[B["ERC721ListingMarketplace"],"0x0753328af3a3e963eefc0dd9977f9777abf8b8f0","erc721ListingMarketplace"],[B["ERC721AuctionMarketplace"],"0xc14f305b87e446f1b4ce70000619c2408b572ffa","erc721AuctionMarketplace"],[B["ERC1155OrderMarketplace"],"0xa68828a30ff846f420318a15c990f687e0ce6f9c","erc1155OrderMarketplace"],[B["ERC1155ListingMarketplace"],"0x41b3e8752cd4e5073127125882b754a9fc2c28af","erc1155ListingMarketplace"],[B["ERC1155AuctionMarketplace"],"0x14edd9f2d67e50bc6615e573ae55f4f2a7c6743c","erc1155AuctionMarketplace"],[B["ArtabiaERC721"],"0x81a5c730043fe2dd4d885407e52d1cd33b7a66f3","artabiaErc721"],[B["ArtabiaERC1155"],"0xaed1654fe63fcec92b83faf7a0b9ac1805536c25","artabiaErc1155"]]),window.binanceNode=new z("https://bsc-dataseed.binance.org"),window.ethereumNode=new z("https://rinkeby.infura.io/v3/f6e6e48ae12549f9915623dbca2b7bdd"),window.BACKEND_URL="https://artabia.com:3001",window.ETHERSCAN_KEY="XU1QP5487BANTMRSVBIPP61B3CPNIXB216",window.getEthPrice=function(){return fetch("https://api.etherscan.io/api?module=stats&action=ethprice&apikey="+ETHERSCAN_KEY).then((function(e){return e.json()})).then((function(e){return e.result.ethusd.split(".")[0]}))},window.login=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r,a,i,o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.web3,r=n.account,a=void 0===r?"0x000000000000000000000000000000000000":r,i="Welcome to Artabia!\n\nPlease sign this message to log in",o=im.web3.utils.sha3(i),t.prev=3,t.next=6,im.web3.eth.personal.sign(o,a);case 6:return s=t.sent,console.log(s,"signature is here"),t.next=10,e.axios.post("".concat(BACKEND_URL,"/user/connect"),{id:a,signature:s}).then((function(e){return e.data}));case 10:return c=t.sent,t.abrupt("return",c);case 14:return t.prev=14,t.t0=t["catch"](3),console.log(t.t0),t.abrupt("return",t.t0);case 18:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),window.Moralis=U,r["default"].prototype.$cms=e.cms,t.prev=9,t.next=12,e.axios.get("".concat(e.$cms,"/global"));case 12:n=t.sent,a=n.data,window.featured=a,t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](9),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[9,17]])})))()},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:document.querySelector(".loading-spinner").classList.add("hidden");case 1:case"end":return e.stop()}}),e)})))()}},G={components:{NavBar:k,FooterBar:F,Spinner:R},data:function(){return{refreshTokenInterval:null}},methods:{},created:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=["rinkeby"],n=JSON.parse(localStorage.getItem("userdata")),null!==window.ethereum.selectedAddress){e.next=9;break}return localStorage.removeItem("userdata"),e.next=6,im.connect(t,ethereumNode,"0x0000000000000000000000000000000000000000");case 6:e.sent,e.next=18;break;case 9:if(n){e.next=15;break}return e.next=12,im.connect(t,ethereumNode,"0x0000000000000000000000000000000000000000");case 12:e.sent,e.next=18;break;case 15:return e.next=17,im.connect(t);case 17:e.sent;case 18:case"end":return e.stop()}}),e)})))()},mixins:[H]},j=G,V=(n("034f"),Object(h["a"])(j,a,i,!1,null,null,null)),W=V.exports,q=(n("3ca3"),n("ddb0"),n("8c4f")),X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"max-w-screen-xl mx-auto my-5 px-5 md:px-16 xl:px-0 space-x-10 flex"},[n("div",{staticClass:"flex-1"},[n("div",{staticClass:"flex space-x-2 items-center mb-3 group"},[n("breadcrumb",{attrs:{link:"/create-select"}})],1),e._m(0),n("div",{staticClass:"space-y-5"},[n("upload-image",{on:{onImage:e.onImage}}),n("text-input",{attrs:{error:e.errorName,label:"Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("div",{staticClass:"space-y-2"},[n("p",{staticClass:"text-sm font-medium text-gray-700"},[e._v("Description")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"\n              p-2\n              shadow-sm\n              block\n              w-full\n              focus:outline-none\n              sm:text-sm\n              border border-gray-300\n              rounded-md\n            ",attrs:{rows:"6"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),e._v(" "),e.errorDescription?n("p",{staticClass:"text-red-600 text-sm mt-1"},[e._v(" "+e._s(e.errorDescription)+" ")]):e._e()]),"multiple"==e.type?n("text-input",{attrs:{error:e.errorAmount,label:"Quantity",placeholder:"e.g 10"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}}):e._e(),n("div",{staticClass:"space-y-2"},[n("label",{staticClass:"block text-sm font-medium text-gray-700"},[e._v("Chain")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.chain,expression:"chain"}],staticClass:"\n              mt-1\n              p-2\n              block\n              w-full\n              text-base\n              border border-gray-300\n              focus:outline-none\n              sm:text-sm\n              rounded-md\n            ",attrs:{id:"location",name:"location"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.chain=t.target.multiple?n:n[0]},e.selectedChain]}},[n("option",[e._v("Ethereum")]),n("option",[e._v("Binance")])])]),n("div",{staticClass:"space-y-2"},[n("label",{staticClass:"block text-sm font-medium text-gray-700"},[e._v("Category")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.category,expression:"category"}],staticClass:"\n              mt-1\n              p-2\n              block\n              w-full\n              text-base\n              border border-gray-300\n              focus:outline-none\n              sm:text-sm\n              rounded-md\n            ",attrs:{id:"location",name:"location"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.category=t.target.multiple?n:n[0]}}},[n("option",{attrs:{selected:""}},[e._v("Artwork")]),n("option",[e._v("Photography")]),n("option",[e._v("Audio")]),n("option",[e._v("Video")]),n("option",[e._v("Collectibles")])])]),n("div",[n("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:""}},[e._v("Royality")]),n("div",{staticClass:"mt-1 relative rounded-md shadow-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.royalty,expression:"royalty"}],staticClass:"\n                focus:outline-none\n                border\n                p-2\n                block\n                w-full\n                pr-10\n                sm:text-sm\n                border-gray-300\n                rounded-md\n              ",attrs:{pattern:"^[0-9]+$",type:"text",placeholder:"e.g 10%"},domProps:{value:e.royalty},on:{input:function(t){t.target.composing||(e.royalty=t.target.value)}}})]),n("small",{staticClass:"text-xs text-gray-700"},[e._v('Maximum 30%"')]),e.errorRoyality?n("p",{staticClass:"text-red-600 text-sm mt-1"},[e._v(" "+e._s(e.errorRoyality)+" ")]):e._e()]),n("div",{staticClass:"space-y-2"},[n("div",{staticClass:"flex justify-between"},[n("p",{staticClass:"font-semibold"},[e._v("Unlock once purchased")]),n("div",{staticClass:"panel-body"},[n("label",{staticClass:"switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.isUnlockable,expression:"isUnlockable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isUnlockable)?e._i(e.isUnlockable,null)>-1:e.isUnlockable},on:{change:function(t){var n=e.isUnlockable,r=t.target,a=!!r.checked;if(Array.isArray(n)){var i=null,o=e._i(n,i);r.checked?o<0&&(e.isUnlockable=n.concat([i])):o>-1&&(e.isUnlockable=n.slice(0,o).concat(n.slice(o+1)))}else e.isUnlockable=a}}}),n("div",{staticClass:"slider round artabia-dark-color"})])])]),e.isUnlockable?n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.unlockable,expression:"unlockable"}],staticClass:"\n                p-2\n                shadow-sm\n                block\n                w-full\n                focus:outline-none\n                sm:text-sm\n                border border-gray-300\n                rounded-md\n              ",attrs:{rows:"6",placeholder:"This text will be available to the buyer of the NFT"},domProps:{value:e.unlockable},on:{input:function(t){t.target.composing||(e.unlockable=t.target.value)}}}),e._v(" "),e.errorUnlockable?n("p",{staticClass:"text-red-600 text-sm mt-1"},[e._v(" "+e._s(e.errorUnlockable)+" ")]):e._e()]):e._e()]),n("div",{staticClass:"flex justify-between"},[n("p",{staticClass:"font-semibold"},[e._v("Put on marketplace")]),n("div",{staticClass:"panel-body"},[n("label",{staticClass:"switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.putOnMarketplace,expression:"putOnMarketplace"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.putOnMarketplace)?e._i(e.putOnMarketplace,null)>-1:e.putOnMarketplace},on:{change:function(t){var n=e.putOnMarketplace,r=t.target,a=!!r.checked;if(Array.isArray(n)){var i=null,o=e._i(n,i);r.checked?o<0&&(e.putOnMarketplace=n.concat([i])):o>-1&&(e.putOnMarketplace=n.slice(0,o).concat(n.slice(o+1)))}else e.putOnMarketplace=a}}}),n("div",{staticClass:"slider round artabia-dark-color"})])])]),e.putOnMarketplace?n("div",{staticClass:"space-y-5"},[n("div",{staticClass:"grid gap-10 sm:grid-cols-3 grid-cols-1"},[n("box",{attrs:{active:e.fixed.active,img:e.fixed.path,title:e.fixed.name},nativeOn:{click:function(t){return e.onFocus("fixed")}}}),n("box",{attrs:{active:e.limited.active,img:e.limited.path,title:e.limited.name},nativeOn:{click:function(t){return e.onFocus("limited")}}}),n("box",{attrs:{active:e.open.active,img:e.open.path,title:e.open.name},nativeOn:{click:function(t){return e.onFocus("open")}}})],1),e.fixed.active?n("text-input",{attrs:{label:"single"===e.type?"Price":"Price for batch",placeholder:"0.00 "+this.chainSelect,name:this.chainSelect},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}):e._e(),e.limited.active?n("input",{staticClass:"\n              focus:outline-none\n              border\n              p-2\n              block\n              w-full\n              pr-10\n              sm:text-sm\n              border-gray-300\n              rounded-md\n            ",attrs:{label:"Ends at",type:"datetime-local",min:e.mindate,max:e.maxdate},domProps:{value:e.endsAt},on:{input:function(t){return e.setTimestamp(t.target.value)}}}):e._e(),"multiple"===e.type&&e.putOnMarketplace?n("text-input",{attrs:{label:"Quantity to list",placeholder:"e.g 1"},model:{value:e.amountToList,callback:function(t){e.amountToList=t},expression:"amountToList"}}):e._e()],1):e._e()],1),n("button",{staticClass:"\n          py-3\n          px-20\n          sm:w-auto\n          w-full\n          rounded-md\n          mt-8\n          mb-10\n          hover:shadow-lg\n          text-white text-lg\n          artabia-dark-color\n        ",on:{click:e.validate}},[e._v(" Post ")])]),n("aside",{staticClass:"flex-1 mt-24 space-y-2 hidden lg:block"},[n("p",{staticClass:"font-semibold"},[e._v("Preview")]),n("div",{staticClass:"border h-96 flex-1 flex justify-center items-center preview"},[n("figure",["img"===e.ext?n("img",{staticClass:"h-80 object-scale-down",attrs:{src:e.url,alt:"name"}}):e._e()]),"audio"===e.ext?n("figure",{staticClass:"bg-audio h-80 bg-cover flex items-end justify-center py-3"},[n("audio",{attrs:{controls:""}},[n("source",{attrs:{src:e.url,type:"audio/ogg"}})])]):e._e(),"model3d"===e.ext?n("figure",[n("model-gltf",{attrs:{src:e.url}})],1):e._e(),"video"===e.ext?n("video",{staticClass:"h-80",attrs:{controls:""}},[n("source",{attrs:{src:e.url}})]):e._e()])])])},Y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"space-y-2 mb-5"},[n("h2",{staticClass:"text-3xl font-bold"},[e._v("Create Post")])])}],Z=(n("b0c0"),n("a4d3"),n("e01a"),n("caad"),n("2532"),n("2b3d"),n("9861"),n("c7cd"),n("99af"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex space-x-3"},[n("arrow-left"),n("router-link",{staticClass:"font-semibold group-hover:scale-95 transform transition-all group-hover:underline\ngroup-hover:text-red-500",attrs:{to:e.link}},[n("span",{staticClass:"artabia-dark-color-text"},[e._v("Go Back")])])],1)}),J=[],K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"group-hover:scale-95 transform transition-all group-hover:text-red-500 h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"}})])},Q=[],$={name:"ArrowLeft"},ee=$,te=Object(h["a"])(ee,K,Q,!1,null,"6559d392",null),ne=te.exports,re={name:"Breadcrumb",components:{ArrowLeft:ne},props:{link:String}},ae=re,ie=(n("2bbe"),Object(h["a"])(ae,Z,J,!1,null,"70c5eba4",null)),oe=ie.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-1 space-y-2 sm:mt-0 sm:col-span-2"},[n("p",{staticClass:"text-sm font-medium text-gray-700"},[e._v("Upload image")]),n("div",{staticClass:"flex justify-center px-6 pt-5 pb-12 border-2 artabia-border-dark-color border-dashed rounded-md",on:{dragover:e.dragover,dragleave:e.dragleave,drop:e.drop}},[n("div",{staticClass:"space-y-1 text-center"},[n("svg",{staticClass:"mx-auto h-12 w-12 text-gray-400",attrs:{stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"}},[n("path",{attrs:{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),n("div",{staticClass:"flex text-sm text-gray-600"},[n("label",{staticClass:"relative",attrs:{for:"file-upload"}},[n("input",{ref:"file",staticClass:" absolute -bottom-24 mt-3 left-8 items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",attrs:{id:"file-upload",name:"file-upload",type:"file"},on:{change:e.onChange}})]),n("p",{staticClass:"pl-24 ml-2"},[e._v("or drag and drop")])]),e._m(0)])])])},ce=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-xs text-gray-500 pb-4"},[e._v(" JPG, PNG, GIF, SVG, MP4, WEBP, MP3, WAV, OGG, GLB, GLTF"),n("br"),e._v("Up to 250MB ")])}],ue={name:"UploadImage",data:function(){return{image:""}},methods:{onChange:function(){this.image=this.$refs.file.files[0],this.$emit("onImage",this.image)},dragover:function(e){e.preventDefault(),e.currentTarget.classList.contains("bg-green-100")||(e.currentTarget.classList.remove("bg-gray-100"),e.currentTarget.classList.add("bg-green-100"))},dragleave:function(e){e.currentTarget.classList.add("bg-gray-100"),e.currentTarget.classList.remove("bg-green-100")},drop:function(e){e.preventDefault(),this.$refs.file.files=e.dataTransfer.files,this.onChange(),e.currentTarget.classList.add("bg-gray-100"),e.currentTarget.classList.remove("bg-green-100")}}},le=ue,fe=Object(h["a"])(le,se,ce,!1,null,"224e8ce0",null),de=fe.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"border-2 rounded border-gray-300 artabia-border-dark-color-hover flex flex-col p-3 hover:scale-105 transform transition-all group cursor-pointer",class:e.active?"artabia-border-dark-color":"border-gray-300"},[n("img",{staticClass:"object-contain h-12 w-full",attrs:{src:e.img,alt:e.title}}),n("p",{staticClass:"text-center font-semibold duration-300\t"},[e._v(e._s(e.title))])])},pe=[],be={name:"Box",props:{img:String,title:String,active:Boolean}},me=be,ve=Object(h["a"])(me,he,pe,!1,null,"7e3050d3",null),ge=ve.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:""}},[e._v(e._s(e.label))]),n("div",{staticClass:"mt-1 relative rounded-md shadow-sm"},[n("input",{staticClass:"focus:outline-none border  p-2 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",class:e.className,attrs:{id:"",type:e.type,placeholder:e.placeholder,name:"",disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),n("div",{staticClass:"absolute inset-y-0 right-0 pr-3 flex text-gray-400 font-semibold items-center pointer-events-none"},[e._v(" "+e._s(e.name)+" ")])]),e.subtext?n("small",{staticClass:"text-xs text-gray-700"},[e._v(e._s(e.subtext))]):e._e(),e.error?n("p",{staticClass:"text-red-600 text-sm mt-1"},[e._v(e._s(e.error))]):e._e()])},xe=[],we=(n("a9e3"),{name:"TextInput",props:{label:String,className:String,placeholder:String,name:String,value:String|Number,subtext:String,disabled:{type:Boolean,default:!1},type:{type:String,default:"text"},error:String}}),_e=we,Me=Object(h["a"])(_e,ye,xe,!1,null,"6baa93d6",null),Te=Me.exports,ke=n("2b29"),Se=n("3d20"),Ee=n.n(Se),Ae={name:"Create",components:{TextInput:Te,Box:ge,UploadImage:de,Breadcrumb:oe,ModelGltf:ke["ModelGltf"],Swal:Ee.a},data:function(){return{mindate:null,maxdate:null,fixed:{path:"/img/fixed-price.png",name:"Fixed price",active:!1},limited:{path:"/img/limited-auction.png",name:"Limited-auction",active:!1},open:{path:"/img/open-bids.png",name:"Open for bids",active:!1},type:"",putOnMarketplace:!0,name:"",description:"",category:"Artwork",royalty:"",isUnlockable:!1,unlockable:"",image:{},url:null,amount:"",endsAt:"",price:"",chain:"Ethereum",mintSuccess:!0,chainSelect:"Ethereum"==this.chain?"ETH":"BSC",ext:null,extensions:{img:["jpg","png","gif","svg","webp"],audio:["mp3"],video:["mp4","wav","ogg"],model3d:["glb","gltf"]},amountToList:"",userBalance:0,user:null}},created:function(){this.chainSelect="Ethereum"==this.chain?"ETH":"BSC",this.type=this.$route.query.type,"single"!==this.type&&"multiple"!==this.type&&this.$router.push("/"),this.addMonths(new Date,6),this.addHour(new Date,1)},computed:{errorName:function(){return this.name?"":"* Required"},errorAmount:function(){return this.amount?"":"* Required"},errorRoyality:function(e){return(!/^[0-9%]+$/i.test(this.royalty)||this.royalty>30)&&(this.royalty=""),this.royalty?"":"* Required"},errorUnlockable:function(){return this.unlockable?"":"* Required"},errorDescription:function(){return this.description?"":"* Required"}},methods:{showSuccss:function(){var e;Ee.a.fire({title:"Minted Successfully",html:"closing in <b></b> milliseconds.",timer:2e3,timerProgressBar:!0,didOpen:function(){Ee.a.showLoading();var t=Ee.a.getHtmlContainer().querySelector("b");e=setInterval((function(){t.textContent=Ee.a.getTimerLeft()}),100)},willClose:function(){clearInterval(e)}}).then((function(e){e.dismiss===Ee.a.DismissReason.timer&&console.log("I was closed by the timer")}))},loginUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,im.connect("rinkeby");case 2:return n=t.sent,t.next=5,window.login({im:im,account:n});case 5:if(r=t.sent,!r.code){t.next=10;break}alert(r.message,"Please sign transaction before mint"),t.next=23;break;case 10:return e.user=r,console.log(e.user,"this is the userrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr "),r=JSON.stringify(r),console.log(r,"after login"),localStorage.setItem("userdata",r),t.next=17,im.web3.eth.getBalance(n);case 17:return a=t.sent,console.log(a,"bbl"),t.next=21,im.web3.utils.fromWei(a,"ether").slice(0,6);case 21:e.userBalance=t.sent,window.location.reload();case 23:case"end":return t.stop()}}),t)})))()},selectedChain:function(){this.chainSelect="Ethereum"==this.chain?"ETH":"BSC",console.log(this.chain,this.chainSelect,"this is the chain")},setTimestamp:function(e){this.endsAt=e;var t=Date.parse(e);return console.log(t,"fdfd"),this.backendDate=t/1e3,t/1e3},onImage:function(e){this.image=this.src=e,console.log(this.image,"sdfsd",this.src.name,this.src.name.split(".").pop());var t=this.src.name.split(".").pop();for(var n in console.log(t,"after extensionsdfdfffffffffffffffffffffffffffffffffffffffffffff"),this.extensions)!this.extensions[n].includes(t)||(t=n);this.ext=t,console.log(this.ext,this.image,this.image.type," is the xetendssion",this.src),this.url=window.URL.createObjectURL(this.src),console.log(this.url,"url after compress")},onFocus:function(e){this.fixed.active=!1,this.limited.active=!1,this.open.active=!1,this[e].active=!0,console.log(this[e].active,this.limited.active,"good")},validate:function(){if(console.log("submittion"),this.name&&("single"==this.type||this.amount)&&this.royalty&&(!this.isUnlockable||this.unlockable)&&this.description&&this.image.name&&(!this.fixed.active||this.price)&&(!this.limited.active||this.backendDate)&&(!this.putOnMarketplace||(this.fixed.active||this.limited.active||this.open.active))){var e=JSON.parse(localStorage.getItem("userdata"));console.log(e,"user data is given here"),null==e?(console.log("user not logged-in on site"),this.loginUser()):(console.log("user is logged-in on site"),this.submit())}},addMonths:function(e,t){e.setMonth(e.getMonth()+t),console.log(e,"date1 after adding months");var n="".concat(e.getFullYear(),"-").concat(("0"+(e.getMonth()+1)).slice(-2),"-").concat(("0"+e.getDate()).slice(-2),"T").concat(("0"+e.getHours()).slice(-2),":").concat(("0"+e.getMinutes()).slice(-2));console.log(n),this.maxdate=n},addHour:function(e,t){e.setHours(e.getHours()+t),console.log(e,"date after adding hr");var n="".concat(e.getFullYear(),"-").concat(("0"+(e.getMonth()+1)).slice(-2),"-").concat(("0"+e.getDate()).slice(-2),"T").concat(("0"+e.getHours()).slice(-2),":").concat(("0"+e.getMinutes()).slice(-2));console.log(n),this.mindate=n},submit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$loading.show({container:null,canCancel:!1}),t.next=3,im.connect("Ethereum"==e.chain?"rinkeby":"binance testnet");case 3:return t.next=5,im.web3.utils.randomHex(32);case 5:return r=t.sent,console.log("this is the id ",r,BACKEND_URL),t.next=9,e.axios.post("".concat(BACKEND_URL,"/nft/create"),{id:r,chain:e.chain,name:e.name,description:e.description,category:e.category,unlockable:e.isUnlockable?e.unlockable:"",imageType:e.image.type});case 9:return a=t.sent,console.log("this is the id ",r,BACKEND_URL,a),console.log(e.image.type,"image type1",a),console.log(e.image.type,"image type2"),i=new FormData,i.append("image",e.image),t.next=17,e.axios.post("".concat(BACKEND_URL,"/nft/create_image/").concat(r),i,{headers:{"Content-Type":"multipart/form-data"}});case 17:if({description:e.description,name:e.name,external_url:"".concat(BACKEND_URL,"/image/").concat(r,".").concat(e.src.name.split(".").pop()),image:"".concat(BACKEND_URL,"/image/").concat(r,".").concat(e.src.name.split(".").pop())},o=parseInt(e.royalty)||0,s="",c="",t.prev=21,"single"!=e.type){t.next=51;break}if(e.putOnMarketplace){t.next=28;break}return t.next=26,window.im.contracts.artabiaErc721.mint(r,o);case 26:t.next=49;break;case 28:if(!e.fixed.active){t.next=37;break}return console.log("waiting for the order id"),t.next=32,window.im.contracts.artabiaErc721.mintAndCreateOrder(r,o,e.price);case 32:s=t.sent,console.log("waiting for the ordre id",s),c="erc721OrderMarketplace",t.next=49;break;case 37:if(!e.open.active){t.next=44;break}return t.next=40,window.im.contracts.artabiaErc721.mintAndCreateListing(r,o);case 40:s=t.sent,c="erc721ListingMarketplace",t.next=49;break;case 44:if(!e.limited.active){t.next=49;break}return t.next=47,window.im.contracts.artabiaErc721.mintAndCreateAuction(r,o,e.backendDate);case 47:s=t.sent,c="erc721AuctionMarketplace";case 49:t.next=75;break;case 51:if(e.putOnMarketplace){t.next=56;break}return t.next=54,window.im.contracts.artabiaErc1155.mint(r,e.amount,o);case 54:t.next=75;break;case 56:if(!e.fixed.active){t.next=63;break}return t.next=59,window.im.contracts.artabiaErc1155.mintAndCreateOrder(r,e.amount,e.amountToList,o,e.price);case 59:s=t.sent,c="erc1155OrderMarketplace",t.next=75;break;case 63:if(!e.open.active){t.next=70;break}return t.next=66,window.im.contracts.artabiaErc1155.mintAndCreateListing(r,e.amount,e.amountToList,o);case 66:s=t.sent,c="erc1155ListingMarketplace",t.next=75;break;case 70:if(!e.limited.active){t.next=75;break}return t.next=73,window.im.contracts.artabiaErc1155.mintAndCreateAuction(r,e.amount,e.amountToList,o,e.backendDate);case 73:s=t.sent,c="erc1155AuctionMarketplace";case 75:if(n.hide(),e.showSuccss(),!s){t.next=84;break}return t.next=80,e.axios.post("".concat(BACKEND_URL,"/order/create"),{chain:e.chain,id:s,category:e.category,unlockable:e.isUnlockable?e.unlockable:"",contract:c,royalty:o});case 80:console.log("axios metadata"),e.$router.push("/view-order/".concat(e.chain.toLowerCase(),"/").concat(s)),t.next=85;break;case 84:alert("Created: "+r);case 85:t.next=92;break;case 87:t.prev=87,t.t0=t["catch"](21),n.hide(),console.log("ordere is dwaiting"),alert("Error: "+t.t0.message);case 92:case"end":return t.stop()}}),t,null,[[21,87]])})))()}}},Ce=Ae,Le=(n("9857"),Object(h["a"])(Ce,X,Y,!1,null,"50b645e6",null)),Re=Le.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"max-w-7xl mx-auto my-5 px-5 md:px-16 xl:px-0 lg:space-x-10 flex  flex-col lg:flex-row",attrs:{"v-once":e.increaseView(e.orderId)}},[n("div",{staticClass:"flex-1 space-y-3 mb-10 sm:mb-0"},[n("Media",{attrs:{src:e.src}}),n("div",{staticClass:"space-y-4"},[n("div",{staticClass:"flex justify-between flex-col lg:flex-row "},[n("ul",{staticClass:"grid grid-cols-1 gap-0.5 "},[n("li",{staticClass:"font-semibold "},[e._v(e._s(e.fixed?"Price":e.open?"Current offer":"Current bid")+":")]),n("li",{staticClass:"flex items-center space-x-2 mb-2"},[n("div",{staticClass:"font-semibold text-lg"},[e._v(e._s(e.ethValue)+" ETH")]),n("div",{staticClass:"text-sm"},[e._v("~$"+e._s(parseInt(e.ethValue)*parseInt(e.ethPrice)))])])]),n("ul",{staticClass:"flex flex-col items-center lg:mt-0"},[n("li",{staticClass:"font-semibold lg:text-center"},[e._v("Owned By")]),n("li",{staticClass:"font-semibold text-gray-700 flex lg:space-x-2 items-center"},[n("img",{staticClass:"h-8 rounded-full hidden lg:block",attrs:{src:"https://placeimg.com/100/100/any",alt:""}}),n("span",[e._v(e._s(e.owner))])])])]),e.im.account.toLowerCase()!==e.ownerAddress.toLowerCase()?n("button",{staticClass:"artabia-dark-color w-full text-white py-3 font-semibold rounded py-1",on:{click:e.openPop}},[e._v(e._s(e.fixed?"Buy":e.open?"Place an offer":"Place a bid"))]):e._e(),e.im&&e.im.account.toLowerCase()!=e.ownerAddress.toLowerCase()?e._e():n("button",{staticClass:"artabia-dark-color-text w-full bg-white py-3 font-semibold rounded py-1",on:{click:e.accept}},[e._v("Accept highest offer")]),n("div",{staticClass:"flex justify-between"},[n("div",{staticClass:"flex"},[n("span",{staticClass:"artabia-dark-text"},[e._v(e._s(e.amount)+" in stock")]),e.timeToGo?n("div",{staticClass:"ml-4"},[e._v("Ends in "+e._s(e.timeToGo))]):e._e()]),n("div",{staticClass:"flex space-x-3"},[n("export",{staticClass:"artabia-dark-color-hover cursor-pointer"}),n("report",{staticClass:"artabia-dark-color-hover cursor-pointer"})],1)])])],1),n("div",{staticClass:"flex-2"},[n("div",{staticClass:"mb-2"},[n("p",{staticClass:"font-bold text-lg"},[e._v("Title")]),n("p",{staticClass:"p-2 border-b"},[e._v(e._s(e.title))])]),n("div",[n("p",{staticClass:"font-bold text-lg"},[e._v("Description")]),n("p",{staticClass:"p-2 border-b"},[e._v(e._s(e.description))])]),n("div",[n("p",{staticClass:"font-bold text-lg"},[e._v("Chain")]),n("p",{staticClass:"p-2 border-b"},[e._v(e._s(e.chain[0].toUpperCase()+e.chain.substr(1)))])]),n("div",[n("p",{staticClass:"font-bold text-lg"},[e._v("Token Address")]),n("p",{staticClass:"p-2 border-b"},[e._v(e._s(e.address))])]),n("div",[n("p",{staticClass:"font-bold text-lg"},[e._v("Token ID")]),n("p",{staticClass:"p-2 border-b"},[e._v(e._s(e.id))])]),n("section",{staticClass:"flex mt-10 space-y-10 xl:space-y-0 space-x-0 xl:space-x-8 divide-solid xl:divide-x flex-col xl:flex-row"},[n("ul",{staticClass:"flex-1 "},[n("li",{staticClass:"font-bold text-3xl mb-3"},[e._v("Item Details")]),n("li",{staticClass:"flex  items-center"},[n("p",{staticClass:"font-semibold"},[e._v("Category:")]),n("p",{staticClass:"text-gray-600"},[e._v(e._s(e.category))])]),n("li",{staticClass:"flex  items-center"},[n("p",{staticClass:"font-semibold"},[e._v("Royalty:")]),n("p",{staticClass:"text-gray-600"},[e._v(e._s(e.royalty))])]),n("li",{staticClass:"flex  items-center"},[n("p",{staticClass:"font-semibold"},[e._v("Unlockable item:")]),n("p",{staticClass:"text-gray-600"},[e._v(e._s(e.hasUnlockable))])])]),0!==e.history.length?n("div",{staticClass:"flex-1 sm:pl-4 lg:pl-5"},[n("ul",[n("li",{staticClass:"font-bold text-3xl"},[e._v("History")]),e._l(e.history,(function(t,r){return n("li",{key:r,staticClass:"flex mb-4 mt-3 space-x-2 items-center justify-between  p-2 border-gray-400 border rounded my-2 hover:scale-105 transform transition-all cursor-pointer"},[n("div",{staticClass:"flex  space-x-4"},[e._m(0,!0),n("div",{staticClass:"text-sm"},[n("p",{staticClass:"mb-1 p-0"},[n("span",{staticClass:"font-semibold"},[e._v("Offer placed by")]),e._v(" "),n("span",{staticClass:"text-gray-600"},[e._v(e._s(t.offeror.substr(0,12)))])]),n("p",{staticClass:"text-gray-600"},[e._v(e._s(t.time.toISOString().split("T")[0]))])])]),n("div",{staticClass:"flex space-x-3"},[n("div",[n("p",{staticClass:"mb-1 p-0 font-semibold"},[e._v(e._s(e.im.web3.utils.fromWei(t.offer,"ether").substr(0,4))+" "+e._s("ethereum"==e.chain?"ETH":"BNB"))])]),n("div",{staticClass:"flex items-center"},[n("export",{staticClass:"text-gray-500  hover:text-primary"})],1)])])}))],2)]):e._e()])]),n("modal",{attrs:{show:e.showModal,"max-width":e.maxWidth},on:{close:e.close}},[n("div",{staticClass:"px-6 py-4 artabia-dark-color text-white text-center relative"},[e._t("title",(function(){return[e._v(" "+e._s(e.fixed?"Buy":e.open?"Place an offer":"Place a bid")+" ")]}))],2),n("div",{staticClass:"px-6 "},[n("div",{staticClass:"mt-4"},[e._t("content",(function(){return[n("p",{staticClass:"text-gray-500 text-center"},[e._v(" "+e._s(e.fixed?"You are about to buy":e.open?"You are about to place an offer for":"You are about to place a bid for")+" "),n("span",{staticClass:"text-black font-semibold"},[e._v(e._s(e.title))]),e._v(" by "+e._s(e.owner))]),n("ul",{staticClass:"space-y-3 mb-5"},[e.limited||e.open?n("div",[n("li",[n("text-input",{attrs:{label:e.limited?"Your bid":"Your offer",placeholder:"e.g 0.5"+e.chain=="ethereum"?"ETH":"BNB",name:"ethereum"==e.chain?"ETH":"BNB"},nativeOn:{keyup:function(t){return e.calcServiceFee.apply(null,arguments)}},model:{value:e.modelInput,callback:function(t){e.modelInput=t},expression:"modelInput"}})],1),n("li",{staticClass:"text-gray-500"},[e._v("Must be greater than "+e._s(e.ethValue)+" "+e._s("ethereum"==e.chain?"ETH":"BNB"))])]):e._e(),n("li",{staticClass:"flex justify-between  items-center"},[n("p",{staticClass:"text-gray-500"},[e._v("Your balance")]),n("p",{staticClass:"font-semibold"},[e._v(e._s(e.balance)+" "+e._s("ethereum"==e.chain?"ETH":"BNB"))])]),e.fixed?n("li",{staticClass:"flex justify-between  items-center"},[n("p",{staticClass:"text-gray-500"},[e._v("Price")]),n("p",{staticClass:"font-semibold"},[e._v(e._s(e.ethValue)+" "+e._s("ethereum"==e.chain?"ETH":"BNB"))])]):e._e(),n("li",{staticClass:"flex justify-between  items-center"},[n("p",{staticClass:"text-gray-500"},[e._v("Gas fee")]),n("p",{staticClass:"font-semibold"},[e._v("~"+e._s(e.txFees.slice(0,-9)||0)+" "+e._s("ethereum"==e.chain?"ETH":"BNB"))])]),n("li",{staticClass:"flex justify-between  items-center"},[n("p",{staticClass:"text-gray-500"},[e._v("You will pay")]),n("p",{staticClass:"font-semibold"},[e._v("~"+e._s((parseFloat(e.fixed?e.ethValue:e.modelInput||0)+parseFloat(e.txFees)||0).toFixed(2))+" ETH")])])])]}))],2)]),n("div",{staticClass:"px-6 py-4 bg-gray-100 text-center "},[e._t("footer",(function(){return[n("button",{staticClass:"artabia-dark-color px-10 py-2 rounded-xl text-white",on:{click:e.cta}},[e._v(e._s(e.fixed?"Buy":e.open?"Place an offer":"Place a bid"))])]}))],2)])],1)},Ie=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",[n("img",{staticClass:"rounded-full ",attrs:{src:"https://placeimg.com/30/30/any",alt:""}})])}],Ne=(n("4de4"),n("5319"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Teleport",{attrs:{to:"body"}},[n("transition",{attrs:{"leave-active-class":"duration-200"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"fixed inset-0 top-20 overflow-y-auto px-4 py-6 sm:px-0 z-50"},[n("transition",{attrs:{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"fixed inset-0 transform transition-all",on:{click:e.close}},[n("div",{staticClass:"absolute inset-0 bg-gray-500 opacity-75"})])]),n("transition",{attrs:{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:mx-auto",class:e.maxWidthClass},[e._t("default")],2)])],1)])],1)}),Oe=[],De={emits:["close"],props:{show:{default:!1},maxWidth:{default:"2xl"},closeable:{default:!0}},computed:{maxWidthClass:function(){return{sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"}[this.maxWidth]}},watch:{show:{immediate:!0,handler:function(e){document.body.style.overflow=e?"hidden":null}}},methods:{close:function(){this.closeable&&this.$emit("close")},closeOnEscape:function(e){"Escape"===e.key&&this.show&&close()}},mounted:function(){document.addEventListener("keydown",this.closeOnEscape),document.removeEventListener("keydown",this.closeOnEscape)}},Fe=De,Be=Object(h["a"])(Fe,Ne,Oe,!1,null,null,null),ze=Be.exports,Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})])},He=[],Ge={name:"Close"},je=Ge,Ve=Object(h["a"])(je,Ue,He,!1,null,"4f89be3c",null),We=Ve.exports,qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"}})])},Xe=[],Ye={name:"Export"},Ze=Ye,Je=Object(h["a"])(Ze,qe,Xe,!1,null,"a52dd7c2",null),Ke=Je.exports,Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})])},$e=[],et={name:"Report"},tt=et,nt=Object(h["a"])(tt,Qe,$e,!1,null,"177138b1",null),rt=nt.exports,at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{overflow:"hidden",height:"300px"}},[n("figure",{staticStyle:{height:"100%",width:"100%"}},["img"===e.isExt?n("img",{staticClass:"w-full view_orderImg",attrs:{src:e.src,alt:"name"}}):e._e()]),"audio"===e.isExt?n("figure",{staticClass:"bg-audio w-full bg-cover flex items-end justify-center  pb-3",staticStyle:{"padding-top":"280px"}},[n("audio",{attrs:{controls:""}},[n("source",{attrs:{src:e.src,type:"audio/ogg"}})])]):e._e(),"model3d"===e.isExt?n("figure",[n("model-gltf",{attrs:{src:e.src}})],1):e._e(),"video"===e.isExt?n("video",{staticClass:"w-full ",attrs:{controls:""}},[n("source",{attrs:{src:e.src}})]):e._e()])},it=[],ot={name:"Media",props:{src:String},data:function(){return{extensions:{img:["jpg","jpeg","png","gif","svg","webp"],audio:["mp3","mpga"],video:["mp4","web","wav","ogg"],model3d:["glb","gltf"]}}},computed:{isExt:function(){var e=this.src.split(".").pop();for(var t in this.extensions)this.extensions[t].includes(e)&&(e=t);return e}},components:{ModelGltf:ke["ModelGltf"]}},st=ot,ct=(n("a11b"),Object(h["a"])(st,at,it,!1,null,"39bc776b",null)),ut=ct.exports,lt=n("65a2"),ft=n.n(lt);function dt(e){function t(e){return(e<10?"0":"")+e}var n=e-new Date,r=n<0?"-":"";n=Math.abs(n);var a=n/36e5|0,i=n%36e5/6e4|0,o=Math.round(n%6e4/1e3);return r+t(a)+"h "+t(i)+"m "+t(o)+"s"}var ht,pt={emits:["close"],components:{Media:ut,Report:rt,Export:Ke,Close:We,TextInput:Te,Modal:ze},props:{show:{default:!1},maxWidth:{default:"2xl"}},data:function(){return{showModal:this.show,src:"",title:"",description:"",id:"",address:"",hasUnlockable:"",royalty:"",amount:"",category:"",fixed:!1,limited:!1,open:!1,multiple:!1,single:!1,ethValue:"",ethPrice:"",balance:"",contract:null,txFees:"",waitTime:"",modelInput:"",aChain:"",timeToGo:"",owner:"",im:null,history:[],ownerAddress:""}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,o,s,c,u,l,f,d,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.params,r=n.chain,a=n.order,console.log(e.$route.params,"param"),e.orderId=a,i="ethereum"==r?"rinkeby":"binance testnet",e.chain=r,e.aChain=i,console.log("this is the chains",e.aChain,e.chain,e.orderId),o=window[r+"Node"],console.log(o,"for web3"),o||e.$router.push("/"),t.next=12,im.connect(i);case 12:return e.im=im,console.log(e.im,"is the integratino manager"),t.next=16,Promise.all([im.contracts.erc1155AuctionMarketplace.getAuction(a),im.contracts.erc1155ListingMarketplace.getListing(a),im.contracts.erc1155OrderMarketplace.getOrder(a),im.contracts.erc721AuctionMarketplace.getAuction(a),im.contracts.erc721ListingMarketplace.getListing(a),im.contracts.erc721OrderMarketplace.getOrder(a)]);case 16:if(s=t.sent,console.log(s,"data for the result"),console.log(im.contracts.erc721OrderMarketplace,"contract"),!s[0]){t.next=24;break}e.limited=e.multiple=!0,e.contract=im.contracts.erc1155AuctionMarketplace,t.next=53;break;case 24:if(!s[1]){t.next=32;break}return e.open=e.multiple=!0,e.contract=im.contracts.erc1155ListingMarketplace,t.next=29,e.contract.getListingOffers(a).then((function(e){return e.reverse()}));case 29:e.history=t.sent,t.next=53;break;case 32:if(!s[2]){t.next=37;break}e.fixed=e.multiple=!0,e.contract=im.contracts.erc1155OrderMarketplace,t.next=53;break;case 37:if(!s[3]){t.next=43;break}e.limited=e.single=!0,e.contract=im.contracts.erc721AuctionMarketplace,console.log(e.contract,"find the history0"),t.next=53;break;case 43:if(!s[4]){t.next=52;break}return e.open=e.single=!0,e.contract=im.contracts.erc721ListingMarketplace,console.log(e.contract,"find the history"),t.next=49,e.contract.getListingOffers(a).then((function(e){return e.reverse()}));case 49:e.history=t.sent,t.next=53;break;case 52:s[5]&&(e.fixed=e.single=!0,e.contract=im.contracts.erc721OrderMarketplace);case 53:return c=s.filter((function(e){return e}))[0],console.log(c,"antfasdf order"),c||e.$router.push("/"),console.log(c.tokenId,"hiiiiiiii"),console.log(c.tokenAddress,"hiiiiiiii"),u=new o.eth.Contract(ft.a,c.tokenAddress),console.log(e.single,"bye1ee"),console.log(u,"co"),t.next=63,u.methods.tokenURI(c.tokenId);case 63:if(!e.single){t.next=69;break}return t.next=66,u.methods.tokenURI(c.tokenId).call();case 66:t.t0=t.sent,t.next=72;break;case 69:return t.next=71,u.methods.uri(c.tokenId).call().then((function(e){return e.replace("{id}",c.tokenId)}));case 71:t.t0=t.sent;case 72:return l=t.t0,console.log(l,"token uri"),t.next=76,fetch(l).then((function(e){return e.json()}));case 76:return f=t.sent,t.next=79,fetch("".concat(BACKEND_URL,"/order/").concat(a,"/display-info")).then((function(e){return e.json()}));case 79:d=t.sent,console.log(d,"this is dfdf"),e.owner=c.owner.substr(0,12),e.ownerAddress=c.owner,console.log(e.ownerAddress,"thisiis the owner"),console.log,e.title=f.name,e.description=f.description,e.src=f.image,e.address=c.tokenAddress,e.id=o.utils.toHex(c.tokenId),console.log(e.id,"this iss the id that i am gettin after hashing"),e.hasUnlockable=d.unlockable?"Yes":"No",e.category=d.category,e.royalty=d.royalty+"%",e.amount=c.tokenQty||1,h=e.fixed?c.price:e.open?c.offer:c.bid,console.log(h,"this is the ether"),e.ethValue=e.im.web3.utils.fromWei(h,"ether"),e.ethPrice=4021,e.limited&&(e.timeToGo=dt(new Date(1e3*parseInt(c.endsAt))),setInterval((function(){e.timeToGo=dt(new Date(1e3*parseInt(c.endsAt)))}),1e3)),console.log(c,f,d);case 101:case"end":return t.stop()}}),t)})))()},methods:{increaseView:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://artabia.com:3001/order/".concat(e,"/view"),{method:"post"}).then((function(e){return e}));case 2:n=t.sent,console.log(n,"view is here");case 4:case"end":return t.stop()}}),t)})))()},close:function(){this.showModal=!1},accept:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.im.contracts.erc1155ListingMarketplace.acceptListingOffer(e.orderId);case 2:e.$router.go(e.$router.currentRoute);case 3:case"end":return t.stop()}}),t)})))()},openPop:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.calcServiceFee();case 3:e.showModal=!0,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),alert(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},calcServiceFee:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t1=im.web3.utils,t.next=3,im.web3.eth.getBalance(im.account);case 3:if(t.t2=t.sent,t.t0=t.t1.fromWei.call(t.t1,t.t2).slice(0,-16),t.t0){t.next=7;break}t.t0="0";case 7:if(e.balance=t.t0,t.prev=8,!e.fixed){t.next=15;break}return t.next=12,e.contract.buyOrderGasEstimation(e.orderId);case 12:n=t.sent,t.next=25;break;case 15:if(!e.open){t.next=21;break}return t.next=18,e.contract.placeOfferGasEstimation(e.orderId,e.modelInput);case 18:n=t.sent,t.next=25;break;case 21:if(!e.limited){t.next=25;break}return t.next=24,e.contract.bidOnAuctionGasEstimation(e.orderId,e.modelInput);case 24:n=t.sent;case 25:e.txFees=n.txFees,e.waitTime=n.waitTime,t.next=33;break;case 29:t.prev=29,t.t3=t["catch"](8),e.txFees="",e.waitTime="";case 33:case"end":return t.stop()}}),t,null,[[8,29]])})))()},cta:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.fixed){t.next=6;break}return t.next=4,e.contract.buyOrder(e.orderId);case 4:t.next=14;break;case 6:if(!e.open){t.next=11;break}return t.next=9,e.contract.placeOffer(e.orderId,e.modelInput);case 9:t.next=14;break;case 11:if(!e.limited){t.next=14;break}return t.next=14,e.contract.bidOnAuction(e.orderId,e.modelInput);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),alert(t.t0.message);case 19:e.$router.go(e.$router.currentRoute);case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))()}}},bt=pt,mt=Object(h["a"])(bt,Pe,Ie,!1,null,null,null),vt=mt.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container mx-auto my-5 px-5 md:px-16 xl:px-0"},[n("div",{staticClass:"flex space-x-2 items-center mb-3 group"},[n("breadcrumb",{attrs:{link:"/"}})],1),e._m(0),n("figure",{staticClass:"flex items-center justify-around my-10",staticStyle:{"flex-wrap":"wrap"}},[n("icon",{staticClass:"single_select",attrs:{link:"/create?type=single",img:e.single.path,title:e.single.name}}),n("icon",{staticClass:"multi_select",attrs:{link:"",img:e.multiple.path,title:e.multiple.name}})],1),n("p",{staticClass:"text-gray-500 font-semibold text-lg"},[e._v("We do not own your private keys and cannot access your funds without your confirmation")])])},yt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"space-y-2"},[n("h2",{staticClass:"text-3xl font-bold"},[e._v("Create collectible")]),n("p",{staticClass:"text-gray-500 font-semibold text-lg"},[e._v('Choose "Single" if you want your collectible to be one of a kind or "Multiple" if you want to sell one collectible multiple times')])])}],xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-link",{staticClass:"flex flex-col items-center hover:scale-110 transform transition-all group w-64",attrs:{to:e.$props.link}},[n("img",{staticClass:"object-contain h-64 w-full",attrs:{src:e.img,alt:e.title}}),n("p",{staticClass:"commonPara text-xl font-semibold group-hover:text-primary duration-300\t",staticStyle:{color:"#d8a7b7"}},[e._v(e._s(e.title))])])},wt=[],_t={name:"Icon",props:{img:String,title:String,link:String}},Mt=_t,Tt=(n("7b2a"),Object(h["a"])(Mt,xt,wt,!1,null,"1e94825c",null)),kt=Tt.exports,St={name:"Home",components:{Breadcrumb:oe,Icon:kt},data:function(){return{single:{path:"/img/single.png",name:"Single"},multiple:{path:"/img/multiple.png",name:"Multiple"}}}},Et=St,At=(n("8ec5"),Object(h["a"])(Et,gt,yt,!1,null,"61976aae",null)),Ct=At.exports,Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("section",{staticClass:"cover_pfl"},[n("div",{staticClass:"cover_bg_box"},[n("img",{staticClass:"cover_bg_img",attrs:{src:e.userCoverImg}})])]),n("div",{staticClass:"container"},[n("view-profilesidebar"),n("div",{staticClass:"collection-container"},[e._m(0),e.cards?n("div",{staticClass:"collection-body"},e._l(e.cards,(function(e){return n("item-card",{key:e,attrs:{card:e}})})),1):e._e()])],1)])},Rt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collection-header"},[n("span",[e._v("On sale")]),n("span",[e._v("Created")]),n("span",[e._v("Activity")]),n("span",[e._v("Owned")])])}],Pt=n("ade3"),It=(n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-container"},[n("div",{staticClass:"profile-avatar"},[n("img",{attrs:{src:e.userProfileImg,alt:"avatar"}})]),n("div",{staticClass:"eth-address"},[n("span",[e._v(e._s(e.shortenAddress()))]),n("font-awesome-icon",{staticClass:"copy-icon",attrs:{icon:["far","copy"],size:"lg"},on:{click:e.copyToClipBoard}}),n("transition",{attrs:{name:"fade"}},[e.showToolTip?n("div",{staticClass:"copy-tooltip"},[n("span",{staticClass:"tooltip-text"},[e._v("Address copied!")])]):e._e()])],1),n("h2",{staticClass:"name"},[e._v(e._s(e.user.name?e.user.name:"Unknown"))]),n("h3",{staticClass:"username"},[e._v("@ "+e._s(e.user.username?e.user.username:"Unknown"))]),n("div",{staticClass:"followers-section"},[n("div",{staticClass:"following"},[e._v(" "+e._s(e.user.followingCount)+" "),n("span",{staticClass:"text-muted"},[e._v("Following")])]),n("div",{staticClass:"followers"},[e._v(" "+e._s(e.user.followerCount)+" "),n("span",{staticClass:"text-muted"},[e._v("Followers")])])]),n("div",{staticClass:"bio-section"},[n("div",{staticClass:"section-title"},[e._v("Bio")]),n("div",{staticClass:"bio"},[e._v(e._s(e.user.bio))])]),n("div",{staticClass:"links-section"},[n("div",{staticClass:"section-title"},[e._v("Links")]),e.user.social.website?n("div",{staticClass:"social-link"},[n("font-awesome-icon",{attrs:{icon:["fas","globe"]}}),n("span",[e._v(e._s(e.user.social.website))])],1):e._e(),e.user.social.discord?n("div",{staticClass:"social-link"},[n("font-awesome-icon",{attrs:{icon:["fab","discord"]}}),n("span",[e._v(e._s(e.user.social.discord))])],1):e._e(),e.user.social.facebook?n("div",{staticClass:"social-link"},[n("font-awesome-icon",{attrs:{icon:["fab","facebook"]}}),n("span",[e._v(e._s(e.user.social.facebook))])],1):e._e(),e.user.social.facebook?n("div",{staticClass:"social-link"},[n("font-awesome-icon",{attrs:{icon:["fab","snapchat-ghost"]}}),n("span",[e._v(e._s(e.user.social.snapchat))])],1):e._e(),e.user.social.facebook?n("div",{staticClass:"social-link"},[n("font-awesome-icon",{attrs:{icon:["fab","tiktok"]}}),n("span",[e._v(e._s(e.user.social.tiktok))])],1):e._e(),e.user.social.facebook?n("div",{staticClass:"social-link"},[n("font-awesome-icon",{attrs:{icon:["fab","twitch"]}}),n("span",[e._v(e._s(e.user.social.twitch))])],1):e._e(),e.user.social.facebook?n("div",{staticClass:"social-link"},[n("font-awesome-icon",{attrs:{icon:["fab","youtube"]}}),n("span",[e._v(e._s(e.user.social.youtube))])],1):e._e()]),n("div",{staticClass:"joined-section"},[n("span",[e._v(" Joined ")]),n("span",[e._v(" "+e._s(e.formatedDate())+" ")])])])}),Nt=[],Ot=(n("7f45"),{data:function(){return{user:null,ethAddress:this.$route.params.id,showToolTip:!1,userProfileImg:null}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={id:e.$route.params.id},t.next=3,e.axios.post("https://artabia.com:3001/user/user",n,{headers:{"Content-Type":"application/json",Authorization:"".concat(JSON.parse(localStorage.getItem("userdata")).token)}});case 3:r=t.sent,e.user=r.data.user,console.log(e.user,"the userside bar"),e.userProfileImg=e.user.profileImage;case 7:case"end":return t.stop()}}),t)})))()},methods:{shortenAddress:function(){return this.ethAddress.substring(0,6)+"..."+this.ethAddress.substring(this.ethAddress.length-4)},copyToClipBoard:function(){var e=this;navigator.clipboard.writeText(this.ethAddress).then((function(){})),this.showToolTip=!0,setTimeout((function(){e.showToolTip=!1}),3e3)},formatedDate:function(){if(this.user.createdAt){var e=new Date(this.user.createdAt),t=e.toLocaleString("en-us",{month:"short"});return t+" "+e.getFullYear()}return""}}}),Dt=Ot,Ft=(n("a323"),Object(h["a"])(Dt,It,Nt,!1,null,"4e37ea36",null)),Bt=Ft.exports,zt=n("6ff8"),Ut=(ht={components:{ViewProfilesidebar:Bt,ItemCard:zt["a"],Swal:Ee.a},props:["cards"],data:function(){return{cards:null,userCoverImg:null,user:null}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Moralis.initialize("cUcIRelhTpcM5tvYAHiDuCEuNIpXeRGA56J4OfNM"),Moralis.serverURL="https://rpzgvjogtika.grandmoralis.com:2053/server",localStorage.getItem("Parse/cUcIRelhTpcM5tvYAHiDuCEuNIpXeRGA56J4OfNM/currentUser")||Moralis.authenticate().then((function(e){console.log(e.get("ethAddress"))})),console.log(e.$route.params.id,JSON.parse(localStorage.getItem("userdata")).token,"current route"),n={id:e.$route.params.id},t.next=7,e.axios.post("https://artabia.com:3001/user/user",n,{headers:{"Content-Type":"application/json",Authorization:"".concat(JSON.parse(localStorage.getItem("userdata")).token)}});case 7:return e.user=t.sent,console.log(e.user,"user is here"),e.userCoverImg=e.user.data.user.coverImage,console.log(e.userCoverImg,"cover image is here"),r={chain:"rinkeby",address:e.$route.params.id},t.next=14,Moralis.Web3API.account.getNFTTransfers(r);case 14:return t.sent,t.next=17,Moralis.Web3API.account.getNFTs(r);case 17:a=t.sent,i=[],a.result.forEach((function(e){var t=e.token_uri;fetch(t).then((function(e){return e.json()})).then((function(e){i.push(e.image)}))})),e.cards=i,console.log(e.cards,"cards");case 22:case"end":return t.stop()}}),t)})))()}},Object(Pt["a"])(ht,"data",{image:null}),Object(Pt["a"])(ht,"methods",{}),ht),Ht=Ut,Gt=(n("547f"),Object(h["a"])(Ht,Lt,Rt,!1,null,"038b76e7",null)),jt=Gt.exports,Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container mx-auto my-5 px-5 md:px-16 xl:px-0 space-x-10 flex"},[n("div",{staticClass:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},[n("div",{staticClass:"bg-white py-8 px-4  sm:rounded-lg sm:px-10"},[n("h1",{staticClass:"text-3xl mb-8"},[e._v("Contact Us")]),n("form",{staticClass:"space-y-6",attrs:{action:"#",method:"POST"}},[e._m(0),e._m(1),e._m(2),n("div",{staticClass:"flex flex-col space-y-10"},[n("div",{staticClass:"flex justify-start"},[n("vue-recaptcha",{attrs:{sitekey:"Your key here"}})],1),n("button",{staticClass:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",attrs:{type:"submit"}},[e._v(" Send ")])])])])])])},Wt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{staticClass:"block text-sm font-medium text-gray-700 font-bold",attrs:{for:"title"}},[e._v(" Title ")]),n("div",{staticClass:"mt-1"},[n("input",{staticClass:"appearance-none block w-full px-3 py-2 border-b border-gray-300  placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",attrs:{id:"title",placeholder:"Enter title",name:"title",type:"text",autocomplete:"title",required:""}})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{staticClass:"block text-sm font-medium text-gray-700 font-bold   ",attrs:{for:"email"}},[e._v(" Email ")]),n("div",{staticClass:"mt-1"},[n("input",{staticClass:"appearance-none block w-full px-3 py-2 border-b border-gray-300 placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",attrs:{id:"email",placeholder:"Enter email",name:"email",type:"email",autocomplete:"current-password",required:""}})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"space-y-2"},[n("p",{staticClass:"text-sm font-medium text-gray-700 font-bold   "},[e._v("Description")]),n("textarea",{staticClass:"p-2 shadow-sm block w-full focus:outline-none sm:text-sm border border-gray-300 rounded-md",attrs:{rows:"6"}})])])}],qt=n("e096"),Xt={name:"Contact",components:{VueRecaptcha:qt["a"]},data:function(){return{title:null,description:null,email:null}}},Yt=Xt,Zt=Object(h["a"])(Yt,Vt,Wt,!1,null,"0130034c",null),Jt=Zt.exports,Kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"trending-section flex flex-col items-center"},[r("h1",{staticClass:"font-medium mt-7"},[e._v("Explore")]),r("div",{staticClass:"container"},[r("div",{staticClass:"collection-header flex-col md:flex-row"},[r("div",{staticClass:"collection-tags justify-center mb-6"},[r("button",{staticClass:"btn",attrs:{id:"All-click"},on:{click:function(t){return e.exploreFilter("All")}}},[r("div",{staticClass:"collection-tag"},[r("img",{staticClass:"tag-avatar h-6",attrs:{src:n("f356"),alt:"Fixed Price icon"}}),r("span",[e._v("All NFTs")])])]),r("button",{staticClass:"btn",on:{click:function(t){return e.exploreFilter("Artwork")}}},[r("div",{staticClass:"collection-tag"},[r("img",{staticClass:"tag-avatar h-6",attrs:{src:n("f356"),alt:"Fixed Price icon"}}),r("span",[e._v("Artwork")])])]),r("button",{staticClass:"btn",on:{click:function(t){return e.exploreFilter("Photography")}}},[r("div",{staticClass:"collection-tag"},[r("img",{staticClass:"tag-avatar h-6",attrs:{src:n("f356"),alt:"Fixed Price icon"}}),r("span",[e._v("Photography")])])]),r("button",{staticClass:"btn",on:{click:function(t){return e.exploreFilter("Audio")}}},[r("div",{staticClass:"collection-tag"},[r("img",{staticClass:"tag-avatar h-6",attrs:{src:n("f356"),alt:"Fixed Price icon"}}),r("span",[e._v("Audio")])])]),r("button",{staticClass:"btn",on:{click:function(t){return e.exploreFilter("Video")}}},[r("div",{staticClass:"collection-tag"},[r("img",{staticClass:"tag-avatar h-6",attrs:{src:n("f356"),alt:"Fixed Price icon"}}),r("span",[e._v("Video")])])]),r("button",{staticClass:"btn",on:{click:function(t){return e.exploreFilter("Collectibles")}}},[r("div",{staticClass:"collection-tag"},[r("img",{staticClass:"tag-avatar h-6",attrs:{src:n("f356"),alt:"Fixed Price icon"}}),r("span",[e._v("Collectibles")])])])])]),e.noNFT?r("div",{staticClass:"collection-body"},[r("h3",[e._v("No NFTs are available")])]):e._e(),e.cards?r("div",{staticClass:"collection-body"},e._l(e.cards,(function(e){return r("explore-nft",{key:e.tokenId,attrs:{card:e,leftSideTextBottom:"0.1 ETH",leftSideTextTop:"Current Price"}})})),1):e._e(),e.exploreLoader?r("div",{staticStyle:{display:"flex","justify-content":"center","align-item":"center"}},[e.exploreLoader?r("Spinner",{attrs:{name:"ripple",color:"#8c65d3"}}):e._e()],1):e._e()])])},Qt=[],$t=(n("a434"),n("a15b"),n("e428"),n("f484"),n("07c2")),en=n("1a7d"),tn=n("f5e4"),nn=n.n(tn),rn={name:"Explore",components:{ItemCard:zt["a"],ProfileCard:$t["a"],ExploreNft:en["a"],Spinner:nn.a},data:function(){return{cards:null,users:null,noNFT:!1,exploreLoader:!0,cssProps:{backgroundImage:""}}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,o,s,c,u,l,f,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=["rinkeby"],r=JSON.parse(localStorage.getItem("userdata")),null!==window.ethereum.selectedAddress){t.next=7;break}return localStorage.removeItem("userdata"),t.next=6,im.connect(n,ethereumNode,"0x0000000000000000000000000000000000000000");case 6:t.sent;case 7:if(r){t.next=13;break}return t.next=10,im.connect(n,ethereumNode,"0x0000000000000000000000000000000000000000");case 10:t.sent,t.next=16;break;case 13:return t.next=15,im.connect(n);case 15:t.sent;case 16:return e.im=im,t.next=19,fetch("".concat(BACKEND_URL,"/order/explore")).then((function(e){return e.json()}));case 19:a=t.sent,i=[],o=0;case 22:if(!(o<a.orders.length)){t.next=31;break}return t.t0=i,t.next=26,Promise.all([im.contracts.erc721AuctionMarketplace.getAuction(a.orders[o].id),im.contracts.erc721ListingMarketplace.getListing(a.orders[o].id),im.contracts.erc721OrderMarketplace.getOrder(a.orders[o].id),a.orders[o].category,a.orders[o].id]);case 26:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 28:o++,t.next=22;break;case 31:for(s=[],c=0;c<i.length;c++)for(u=0;u<i[c].length-2;u++)null!=i[c][u]&&s.push({result:i[c][u],type:i[c][u+1],orderId:i[c][u+2]});l=null,f=[],d=0;case 36:if(!(d<s.length)){t.next=44;break}return t.next=39,fetch("".concat(BACKEND_URL,"/metadata/").concat(s[d].result.tokenId,".json")).then((function(e){return e.json()}));case 39:l=t.sent,f.push(Object.assign(s[d],{tokenUri:l}));case 41:d++,t.next=36;break;case 44:return f.length>0?(e.noNFT=!1,e.cards=f):e.noNFT=!0,e.exploreLoader=!1,t.next=48,setTimeout((function(){e.exploreClick()}),500);case 48:case"end":return t.stop()}}),t)})))()},methods:{exploreClick:function(){document.getElementById("All-click").click()},exploreFilter:function(e){var t,n;for(console.log(e,"types of filter"),t=document.getElementsByClassName("itemBox"),"All"==e&&(e=""),n=0;n<t.length;n++)this.w3RemoveClass(t[n],"show"),t[n].className.indexOf(e)>-1&&this.w3AddClass(t[n],"show")},w3AddClass:function(e,t){var n,r,a;for(r=e.className.split(" "),a=t.split(" "),n=0;n<a.length;n++)-1==r.indexOf(a[n])&&(e.className+=" "+a[n]);console.log(r,"arr1",a,a.length)},w3RemoveClass:function(e,t){var n,r,a;for(r=e.className.split(" "),a=t.split(" "),n=0;n<a.length;n++)while(r.indexOf(a[n])>-1)r.splice(r.indexOf(a[n]),1);console.log(r,"arr1",a.length),e.className=r.join(" ")}}},an=rn,on=(n("5171"),Object(h["a"])(an,Kt,Qt,!1,null,"54f93758",null)),sn=on.exports,cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Builder",{attrs:{content:e.content}})},un=[],ln=(n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container mx-auto my-5 px-5 md:px-16 xl:px-0 space-x-10 flex"},[n("div",{staticClass:"mt-8 sm:mx-auto space-y-10"},[n("div",[n("h1",{staticClass:"text-3xl font-medium"},[e._v(e._s(e.content.title))])]),n("div",[e.compiledMarkdown?n("div",{domProps:{innerHTML:e._s(e.compiledMarkdown)}}):e._e()]),n("div",[n("div",{staticClass:"space-y-2"},[n("img",{staticClass:"h-96",attrs:{src:e.image,alt:""}})])])])])}),fn=[],dn=n("0e54"),hn=n.n(dn),pn={name:"Builder",props:{content:Object},computed:{image:function(){var e;return"".concat(this.$cms).concat(null===(e=this.content.image)||void 0===e?void 0:e.url)},compiledMarkdown:function(){var e;return hn()(null!==(e=this.content.description)&&void 0!==e?e:"",{sanitize:!0})}}},bn=pn,mn=Object(h["a"])(bn,ln,fn,!1,null,"4d62bece",null),vn=mn.exports,gn={name:"Terms",components:{Builder:vn},data:function(){return{content:{}}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("".concat(e.$cms,"/menus"));case 3:n=t.sent,r=n.data,e.content=r.find((function(e){return"Terms & conditions"===e.name})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},yn=gn,xn=Object(h["a"])(yn,cn,un,!1,null,"9d295600",null),wn=xn.exports,_n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Builder",{attrs:{content:e.content}})},Mn=[],Tn={name:"About",components:{Builder:vn},data:function(){return{content:{}}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("".concat(e.$cms,"/menus"));case 3:n=t.sent,r=n.data,e.content=r.find((function(e){return"About Us"===e.name})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},kn=Tn,Sn=Object(h["a"])(kn,_n,Mn,!1,null,"2ff24a0c",null),En=Sn.exports,An=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Builder",{attrs:{content:e.content}})},Cn=[],Ln={name:"Privacy",components:{Builder:vn},data:function(){return{content:{}}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("".concat(e.$cms,"/menus"));case 3:n=t.sent,r=n.data,e.content=r.find((function(e){return"Privacy Policy"===e.name})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},Rn=Ln,Pn=Object(h["a"])(Rn,An,Cn,!1,null,"54d01f01",null),In=Pn.exports;r["default"].use(q["a"]);var Nn=[{path:"/",name:"Home",component:function(){return n.e("chunk-0fb16724").then(n.bind(null,"bb51"))},props:!0},{path:"/edit-profile",name:"Edit Profile",component:function(){return n.e("chunk-71b54450").then(n.bind(null,"fb5e"))},props:!0},{path:"/profile",name:"Profile",component:function(){return n.e("chunk-7950d3ac").then(n.bind(null,"c66d"))},props:!0},{path:"/Create-select",name:"Create-select",component:Ct,props:!0},{path:"/create",name:"Create",component:Re,props:!0},{path:"/view-order/:chain/:order",name:"ViewOrder",component:vt,props:!0},{path:"/contact",name:"Contact",component:Jt,props:!0},{path:"/terms",name:"Terms",component:wn,props:!0},{path:"/about",name:"About",component:En,props:!0},{path:"/privacy",name:"Privacy",component:In,props:!0},{path:"/explore",name:"Explore",component:sn,props:!0},{path:"/view-user/:id",name:"ViewUserProfile",component:jt,props:!0}],On=new q["a"]({mode:"history",base:"/",routes:Nn}),Dn=On,Fn=(n("a766"),n("5f5b")),Bn=n("b1e0"),zn=n("ad3d"),Un=n("a925"),Hn=n("2b88"),Gn=n.n(Hn),jn=n("ecee"),Vn=n("c074"),Wn=n("f2d1"),qn=n("b702"),Xn=(n("f9e3"),n("2dd8"),n("bc3a")),Yn=n.n(Xn),Zn=n("130e"),Jn={},Kn=n("9062"),Qn=n.n(Kn);n("e40d");jn["c"].add(Vn["a"],Wn["c"],Wn["k"],Wn["d"],Wn["h"],Wn["f"],Wn["e"],Wn["b"],Vn["e"],Wn["a"],Wn["l"],Wn["j"],Wn["i"],Wn["g"],Vn["d"],Vn["c"],Vn["g"],Vn["b"],Vn["f"],qn["a"]),r["default"].use(Fn["a"]),r["default"].use(Bn["a"]),r["default"].use(Qn.a),r["default"].use(Un["a"]),r["default"].use(Gn.a),r["default"].use(Zn["a"],Yn.a),r["default"].component("font-awesome-icon",zn["a"]);var $n={en:Jn},er=new Un["a"]({locale:"en",messages:$n});r["default"].config.productionTip=!1,new r["default"]({router:Dn,i18n:er,render:function(e){return e(W)}}).$mount("#app"),window.BACKEND_URL="https://artabia.com:3001"},"5e4f":function(e,t,n){"use strict";n("dc90")},6:function(e,t){},"60f3":function(e,t,n){"use strict";n("7aef")},6116:function(e,t,n){},"623c":function(e,t,n){},"65a2":function(e,t){e.exports=[{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}]},6786:function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"ERC721AuctionMarketplace","sourceName":"contracts/ERC721Marketplace/ERC721AuctionMarketplace.sol","abi":[{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"AuctionBidPlaced","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"AuctionClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"AuctionCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"address","name":"_contractAddress","type":"address"}],"name":"addApprovedContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"approvedContracts","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"auctions","outputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint128","name":"bid","type":"uint128"},{"internalType":"address","name":"bidder","type":"address"},{"internalType":"uint128","name":"endsAt","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"bidOnAuction","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint16","name":"_fee","type":"uint16"}],"name":"changeFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"name":"changeFeeDestination","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"claimAuction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint128","name":"_endsAt","type":"uint128"}],"name":"createAuction","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"fee","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeDestination","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC721Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x60806040526003805461ffff60a01b1916607d60a21b17905534801561002457600080fd5b506040516115a33803806115a3833981016040819052610043916100c1565b61004c33610071565b600380546001600160a01b0319166001600160a01b03929092169190911790556100f1565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156100d357600080fd5b81516001600160a01b03811681146100ea57600080fd5b9392505050565b6114a3806101006000396000f3fe6080604052600436106100dd5760003560e01c8063715018a61161007f578063d430280511610059578063d430280514610318578063ddca3f431461032b578063de53fcd514610360578063f2fde38b1461038057600080fd5b8063715018a6146102b15780638da5cb5b146102c6578063b7747267146102f857600080fd5b80631edbc5be116100bb5780631edbc5be1461016d57806326749ad7146102235780633407facd1461026357806367e24df11461028357600080fd5b8063135171be146100e2578063150b7a02146101045780631e18cb891461014d575b600080fd5b3480156100ee57600080fd5b506101026100fd366004611155565b6103a0565b005b34801561011057600080fd5b5061012f61011f36600461118f565b630a85bd0160e11b949350505050565b6040516001600160e01b031990911681526020015b60405180910390f35b34801561015957600080fd5b50610102610168366004611155565b6103fa565b34801561017957600080fd5b506101d761018836600461126f565b60026020819052600091825260409091208054600182015492820154600383015460048401546005909401546001600160a01b039384169594928416936001600160801b039283169316911686565b604080516001600160a01b0397881681526020810196909652938616938501939093526001600160801b03918216606085015290931660808301529190911660a082015260c001610144565b34801561022f57600080fd5b5061025361023e366004611155565b60016020526000908152604090205460ff1681565b6040519015158152602001610144565b34801561026f57600080fd5b5061010261027e366004611288565b610446565b34801561028f57600080fd5b506102a361029e3660046112ac565b6104db565b604051908152602001610144565b3480156102bd57600080fd5b50610102610719565b3480156102d257600080fd5b506000546001600160a01b03165b6040516001600160a01b039091168152602001610144565b34801561030457600080fd5b5061010261031336600461126f565b61074f565b61010261032636600461126f565b610d11565b34801561033757600080fd5b5060035461034d90600160a01b900461ffff1681565b60405161ffff9091168152602001610144565b34801561036c57600080fd5b506003546102e0906001600160a01b031681565b34801561038c57600080fd5b5061010261039b366004611155565b610f14565b6000546001600160a01b031633146103d35760405162461bcd60e51b81526004016103ca906112fa565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b031633146104245760405162461bcd60e51b81526004016103ca906112fa565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146104705760405162461bcd60e51b81526004016103ca906112fa565b6102ee8161ffff1611156104b95760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b60448201526064016103ca565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b6000333b15806104fa57503360009081526001602052604090205460ff165b6105465760405162461bcd60e51b815260206004820152601e60248201527f6f6e6c79206e6f6e20636f6e747261637473206f7220617070726f766564000060448201526064016103ca565b6040516bffffffffffffffffffffffff19606086811b821660208401526034830186905232901b1660548201526001600160801b0319608084901b16606882015242607882015260009060980160408051808303601f19018152908290528051602090910120632142170760e11b82523260048301523060248301526044820186905291506001600160a01b038616906342842e0e90606401600060405180830381600087803b1580156105f957600080fd5b505af115801561060d573d6000803e3d6000fd5b50506040805160c0810182526001600160a01b03808a16825260208083018a815232848601908152600060608601818152608087018281526001600160801b038e811660a08a019081528d8552600297889052938a9020985189549089166001600160a01b0319918216178a55955160018a01559351958801805496881696861696909617909555516003870180549184166001600160801b03199283161790559351600487018054919096169316929092179093555160059093018054939092169216919091179055517f2a66b5a320edcb6b7fba849fd4173d545603571b82a650ae5ef95f12e0dada9e9250610709915083815260200190565b60405180910390a1949350505050565b6000546001600160a01b031633146107435760405162461bcd60e51b81526004016103ca906112fa565b61074d6000610faf565b565b6000818152600260205260409020600501548190426001600160801b0390911610801561079257506000818152600260205260409020546001600160a01b031615155b6107d25760405162461bcd60e51b8152602060048201526011602482015270185d58dd1a5bdb881b9bdd08195b991959607a1b60448201526064016103ca565b6000600260008481526020019081526020016000206040518060c00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b03168152602001600182015481526020016002820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016003820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016004820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016005820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000848152602001908152602001600020600080820160006101000a8154906001600160a01b03021916905560018201600090556002820160006101000a8154906001600160a01b0302191690556003820160006101000a8154906001600160801b0302191690556004820160006101000a8154906001600160a01b0302191690556005820160006101000a8154906001600160801b030219169055505060008082600001516001600160a01b0316632a55205a846020015185606001516040518363ffffffff1660e01b81526004016109d89291909182526001600160801b0316602082015260400190565b604080518083038186803b1580156109ef57600080fd5b505afa158015610a03573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a27919061132f565b90925090508015610a6a576040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015610a68573d6000803e3d6000fd5b505b8251610a86906001600160a01b031663152a902d60e11b610fff565b15610b245782516020840151606085015160405163152a902d60e11b815260048101929092526001600160801b031660248201526001600160a01b0390911690632a55205a90604401604080518083038186803b158015610ae657600080fd5b505afa158015610afa573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b1e919061132f565b90925090505b600354600160a01b900461ffff1615610ba85760035460608401516001600160a01b038216916108fc9161271091610b6891600160a01b90910461ffff1690611373565b610b7291906113a2565b6001600160801b03169081150290604051600060405180830381858888f19350505050158015610ba6573d6000803e3d6000fd5b505b82604001516001600160a01b03166108fc82612710600360149054906101000a900461ffff16612710610bdb91906113d6565b61ffff168760600151610bee9190611373565b610bf891906113a2565b6001600160801b0316610c0b91906113f9565b6040518115909202916000818181858888f19350505050158015610c33573d6000803e3d6000fd5b5060808301516001600160a01b031615801590610c5c575060808301516001600160a01b03163b155b15610cd757825160808401516020850151604051632142170760e11b81523060048201526001600160a01b03928316602482015260448101919091529116906342842e0e90606401600060405180830381600087803b158015610cbe57600080fd5b505af1158015610cd2573d6000803e3d6000fd5b505050505b6040518581527fdd636676cbde606c0bf9ba33bcb630724c73f8710733e9a20567a4caa991b0349060200160405180910390a15050505050565b6000818152600260205260409020600501548190426001600160801b039091161015610d6f5760405162461bcd60e51b815260206004820152600d60248201526c185d58dd1a5bdb88195b991959609a1b60448201526064016103ca565b333b1580610d8c57503360009081526001602052604090205460ff165b610dd85760405162461bcd60e51b815260206004820152601e60248201527f6f6e6c79206e6f6e20636f6e747261637473206f7220617070726f766564000060448201526064016103ca565b600082815260026020526040902060038101546001600160801b03163411610e305760405162461bcd60e51b815260206004820152600b60248201526a62696420746f6f206c6f7760a81b60448201526064016103ca565b60048101546001600160a01b031615801590610e58575060048101546001600160a01b03163b155b15610ea957600481015460038201546040516001600160a01b03909216916001600160801b0390911680156108fc02916000818181858888f19350505050158015610ea7573d6000803e3d6000fd5b505b600481018054336001600160a01b03199091161790556003810180546001600160801b031916346001600160801b03161790556040518381527fce3fcb8cb2d98bb5670375017977cabb3197f05cb7d1964f502e63a5a6b4457b9060200160405180910390a1505050565b6000546001600160a01b03163314610f3e5760405162461bcd60e51b81526004016103ca906112fa565b6001600160a01b038116610fa35760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b60648201526084016103ca565b610fac81610faf565b50565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b600061100a83611024565b801561101b575061101b8383611057565b90505b92915050565b6000611037826301ffc9a760e01b611057565b801561101e5750611050826001600160e01b0319611057565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b03871690617530906110be908690611410565b6000604051808303818686fa925050503d80600081146110fa576040519150601f19603f3d011682016040523d82523d6000602084013e6110ff565b606091505b509150915060208151101561111a576000935050505061101e565b818015611136575080806020019051810190611136919061144b565b9695505050505050565b6001600160a01b0381168114610fac57600080fd5b60006020828403121561116757600080fd5b813561117281611140565b9392505050565b634e487b7160e01b600052604160045260246000fd5b600080600080608085870312156111a557600080fd5b84356111b081611140565b935060208501356111c081611140565b925060408501359150606085013567ffffffffffffffff808211156111e457600080fd5b818701915087601f8301126111f857600080fd5b81358181111561120a5761120a611179565b604051601f8201601f19908116603f0116810190838211818310171561123257611232611179565b816040528281528a602084870101111561124b57600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b60006020828403121561128157600080fd5b5035919050565b60006020828403121561129a57600080fd5b813561ffff8116811461117257600080fd5b6000806000606084860312156112c157600080fd5b83356112cc81611140565b92506020840135915060408401356001600160801b03811681146112ef57600080fd5b809150509250925092565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6000806040838503121561134257600080fd5b825161134d81611140565b6020939093015192949293505050565b634e487b7160e01b600052601160045260246000fd5b60006001600160801b03808316818516818304811182151516156113995761139961135d565b02949350505050565b60006001600160801b03808416806113ca57634e487b7160e01b600052601260045260246000fd5b92169190910492915050565b600061ffff838116908316818110156113f1576113f161135d565b039392505050565b60008282101561140b5761140b61135d565b500390565b6000825160005b818110156114315760208186018101518583015201611417565b81811115611440576000828501525b509190910192915050565b60006020828403121561145d57600080fd5b8151801515811461117257600080fdfea2646970667358221220093c9ba232483341ab1d10b11a44dcef5d55acf7f1953e00c74b56304c0ea68264736f6c63430008090033","deployedBytecode":"0x6080604052600436106100dd5760003560e01c8063715018a61161007f578063d430280511610059578063d430280514610318578063ddca3f431461032b578063de53fcd514610360578063f2fde38b1461038057600080fd5b8063715018a6146102b15780638da5cb5b146102c6578063b7747267146102f857600080fd5b80631edbc5be116100bb5780631edbc5be1461016d57806326749ad7146102235780633407facd1461026357806367e24df11461028357600080fd5b8063135171be146100e2578063150b7a02146101045780631e18cb891461014d575b600080fd5b3480156100ee57600080fd5b506101026100fd366004611155565b6103a0565b005b34801561011057600080fd5b5061012f61011f36600461118f565b630a85bd0160e11b949350505050565b6040516001600160e01b031990911681526020015b60405180910390f35b34801561015957600080fd5b50610102610168366004611155565b6103fa565b34801561017957600080fd5b506101d761018836600461126f565b60026020819052600091825260409091208054600182015492820154600383015460048401546005909401546001600160a01b039384169594928416936001600160801b039283169316911686565b604080516001600160a01b0397881681526020810196909652938616938501939093526001600160801b03918216606085015290931660808301529190911660a082015260c001610144565b34801561022f57600080fd5b5061025361023e366004611155565b60016020526000908152604090205460ff1681565b6040519015158152602001610144565b34801561026f57600080fd5b5061010261027e366004611288565b610446565b34801561028f57600080fd5b506102a361029e3660046112ac565b6104db565b604051908152602001610144565b3480156102bd57600080fd5b50610102610719565b3480156102d257600080fd5b506000546001600160a01b03165b6040516001600160a01b039091168152602001610144565b34801561030457600080fd5b5061010261031336600461126f565b61074f565b61010261032636600461126f565b610d11565b34801561033757600080fd5b5060035461034d90600160a01b900461ffff1681565b60405161ffff9091168152602001610144565b34801561036c57600080fd5b506003546102e0906001600160a01b031681565b34801561038c57600080fd5b5061010261039b366004611155565b610f14565b6000546001600160a01b031633146103d35760405162461bcd60e51b81526004016103ca906112fa565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b031633146104245760405162461bcd60e51b81526004016103ca906112fa565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146104705760405162461bcd60e51b81526004016103ca906112fa565b6102ee8161ffff1611156104b95760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b60448201526064016103ca565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b6000333b15806104fa57503360009081526001602052604090205460ff165b6105465760405162461bcd60e51b815260206004820152601e60248201527f6f6e6c79206e6f6e20636f6e747261637473206f7220617070726f766564000060448201526064016103ca565b6040516bffffffffffffffffffffffff19606086811b821660208401526034830186905232901b1660548201526001600160801b0319608084901b16606882015242607882015260009060980160408051808303601f19018152908290528051602090910120632142170760e11b82523260048301523060248301526044820186905291506001600160a01b038616906342842e0e90606401600060405180830381600087803b1580156105f957600080fd5b505af115801561060d573d6000803e3d6000fd5b50506040805160c0810182526001600160a01b03808a16825260208083018a815232848601908152600060608601818152608087018281526001600160801b038e811660a08a019081528d8552600297889052938a9020985189549089166001600160a01b0319918216178a55955160018a01559351958801805496881696861696909617909555516003870180549184166001600160801b03199283161790559351600487018054919096169316929092179093555160059093018054939092169216919091179055517f2a66b5a320edcb6b7fba849fd4173d545603571b82a650ae5ef95f12e0dada9e9250610709915083815260200190565b60405180910390a1949350505050565b6000546001600160a01b031633146107435760405162461bcd60e51b81526004016103ca906112fa565b61074d6000610faf565b565b6000818152600260205260409020600501548190426001600160801b0390911610801561079257506000818152600260205260409020546001600160a01b031615155b6107d25760405162461bcd60e51b8152602060048201526011602482015270185d58dd1a5bdb881b9bdd08195b991959607a1b60448201526064016103ca565b6000600260008481526020019081526020016000206040518060c00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b03168152602001600182015481526020016002820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016003820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016004820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016005820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000848152602001908152602001600020600080820160006101000a8154906001600160a01b03021916905560018201600090556002820160006101000a8154906001600160a01b0302191690556003820160006101000a8154906001600160801b0302191690556004820160006101000a8154906001600160a01b0302191690556005820160006101000a8154906001600160801b030219169055505060008082600001516001600160a01b0316632a55205a846020015185606001516040518363ffffffff1660e01b81526004016109d89291909182526001600160801b0316602082015260400190565b604080518083038186803b1580156109ef57600080fd5b505afa158015610a03573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a27919061132f565b90925090508015610a6a576040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015610a68573d6000803e3d6000fd5b505b8251610a86906001600160a01b031663152a902d60e11b610fff565b15610b245782516020840151606085015160405163152a902d60e11b815260048101929092526001600160801b031660248201526001600160a01b0390911690632a55205a90604401604080518083038186803b158015610ae657600080fd5b505afa158015610afa573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b1e919061132f565b90925090505b600354600160a01b900461ffff1615610ba85760035460608401516001600160a01b038216916108fc9161271091610b6891600160a01b90910461ffff1690611373565b610b7291906113a2565b6001600160801b03169081150290604051600060405180830381858888f19350505050158015610ba6573d6000803e3d6000fd5b505b82604001516001600160a01b03166108fc82612710600360149054906101000a900461ffff16612710610bdb91906113d6565b61ffff168760600151610bee9190611373565b610bf891906113a2565b6001600160801b0316610c0b91906113f9565b6040518115909202916000818181858888f19350505050158015610c33573d6000803e3d6000fd5b5060808301516001600160a01b031615801590610c5c575060808301516001600160a01b03163b155b15610cd757825160808401516020850151604051632142170760e11b81523060048201526001600160a01b03928316602482015260448101919091529116906342842e0e90606401600060405180830381600087803b158015610cbe57600080fd5b505af1158015610cd2573d6000803e3d6000fd5b505050505b6040518581527fdd636676cbde606c0bf9ba33bcb630724c73f8710733e9a20567a4caa991b0349060200160405180910390a15050505050565b6000818152600260205260409020600501548190426001600160801b039091161015610d6f5760405162461bcd60e51b815260206004820152600d60248201526c185d58dd1a5bdb88195b991959609a1b60448201526064016103ca565b333b1580610d8c57503360009081526001602052604090205460ff165b610dd85760405162461bcd60e51b815260206004820152601e60248201527f6f6e6c79206e6f6e20636f6e747261637473206f7220617070726f766564000060448201526064016103ca565b600082815260026020526040902060038101546001600160801b03163411610e305760405162461bcd60e51b815260206004820152600b60248201526a62696420746f6f206c6f7760a81b60448201526064016103ca565b60048101546001600160a01b031615801590610e58575060048101546001600160a01b03163b155b15610ea957600481015460038201546040516001600160a01b03909216916001600160801b0390911680156108fc02916000818181858888f19350505050158015610ea7573d6000803e3d6000fd5b505b600481018054336001600160a01b03199091161790556003810180546001600160801b031916346001600160801b03161790556040518381527fce3fcb8cb2d98bb5670375017977cabb3197f05cb7d1964f502e63a5a6b4457b9060200160405180910390a1505050565b6000546001600160a01b03163314610f3e5760405162461bcd60e51b81526004016103ca906112fa565b6001600160a01b038116610fa35760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b60648201526084016103ca565b610fac81610faf565b50565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b600061100a83611024565b801561101b575061101b8383611057565b90505b92915050565b6000611037826301ffc9a760e01b611057565b801561101e5750611050826001600160e01b0319611057565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b03871690617530906110be908690611410565b6000604051808303818686fa925050503d80600081146110fa576040519150601f19603f3d011682016040523d82523d6000602084013e6110ff565b606091505b509150915060208151101561111a576000935050505061101e565b818015611136575080806020019051810190611136919061144b565b9695505050505050565b6001600160a01b0381168114610fac57600080fd5b60006020828403121561116757600080fd5b813561117281611140565b9392505050565b634e487b7160e01b600052604160045260246000fd5b600080600080608085870312156111a557600080fd5b84356111b081611140565b935060208501356111c081611140565b925060408501359150606085013567ffffffffffffffff808211156111e457600080fd5b818701915087601f8301126111f857600080fd5b81358181111561120a5761120a611179565b604051601f8201601f19908116603f0116810190838211818310171561123257611232611179565b816040528281528a602084870101111561124b57600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b60006020828403121561128157600080fd5b5035919050565b60006020828403121561129a57600080fd5b813561ffff8116811461117257600080fd5b6000806000606084860312156112c157600080fd5b83356112cc81611140565b92506020840135915060408401356001600160801b03811681146112ef57600080fd5b809150509250925092565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6000806040838503121561134257600080fd5b825161134d81611140565b6020939093015192949293505050565b634e487b7160e01b600052601160045260246000fd5b60006001600160801b03808316818516818304811182151516156113995761139961135d565b02949350505050565b60006001600160801b03808416806113ca57634e487b7160e01b600052601260045260246000fd5b92169190910492915050565b600061ffff838116908316818110156113f1576113f161135d565b039392505050565b60008282101561140b5761140b61135d565b500390565b6000825160005b818110156114315760208186018101518583015201611417565b81811115611440576000828501525b509190910192915050565b60006020828403121561145d57600080fd5b8151801515811461117257600080fdfea2646970667358221220093c9ba232483341ab1d10b11a44dcef5d55acf7f1953e00c74b56304c0ea68264736f6c63430008090033","linkReferences":{},"deployedLinkReferences":{}}')},"6bc5":function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"ArtabiaERC721","sourceName":"contracts/tokens/ArtabiaERC721.sol","abi":[{"inputs":[{"internalType":"address[]","name":"marketplaceAddresses","type":"address[]"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"MarketplaceOrderCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint8","name":"_royaltyPercentage","type":"uint8"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint8","name":"_royaltyPercentage","type":"uint8"},{"internalType":"uint128","name":"_endsAt","type":"uint128"}],"name":"mintAndCreateAuction","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint8","name":"_royaltyPercentage","type":"uint8"}],"name":"mintAndCreateListing","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint8","name":"_royaltyPercentage","type":"uint8"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"mintAndCreateOrder","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_salePrice","type":"uint256"}],"name":"royaltyInfo","outputs":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"royaltyAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x60806040523480156200001157600080fd5b5060405162001d5338038062001d538339810160408190526200003491620002c3565b604051806040016040528060078152602001664172746162696160c81b8152506040518060400160405280600381526020016220a92160e91b81525082828281600090805190602001906200008b929190620001ea565b508051620000a1906001906020840190620001ea565b50505060005b81518110156200011357600160066000848481518110620000cc57620000cc62000395565b6020908102919091018101516001600160a01b03168252810191909152604001600020805460ff1916911515919091179055806200010a81620003ab565b915050620000a7565b50505050806000815181106200012d576200012d62000395565b6020026020010151600860006101000a8154816001600160a01b0302191690836001600160a01b031602179055508060018151811062000171576200017162000395565b6020026020010151600960006101000a8154816001600160a01b0302191690836001600160a01b0316021790555080600281518110620001b557620001b562000395565b6020026020010151600a60006101000a8154816001600160a01b0302191690836001600160a01b031602179055505062000412565b828054620001f890620003d5565b90600052602060002090601f0160209004810192826200021c576000855562000267565b82601f106200023757805160ff191683800117855562000267565b8280016001018555821562000267579182015b82811115620002675782518255916020019190600101906200024a565b506200027592915062000279565b5090565b5b808211156200027557600081556001016200027a565b634e487b7160e01b600052604160045260246000fd5b80516001600160a01b0381168114620002be57600080fd5b919050565b60006020808385031215620002d757600080fd5b82516001600160401b0380821115620002ef57600080fd5b818501915085601f8301126200030457600080fd5b81518181111562000319576200031962000290565b8060051b604051601f19603f8301168101818110858211171562000341576200034162000290565b6040529182528482019250838101850191888311156200036057600080fd5b938501935b8285101562000389576200037985620002a6565b8452938501939285019262000365565b98975050505050505050565b634e487b7160e01b600052603260045260246000fd5b6000600019821415620003ce57634e487b7160e01b600052601160045260246000fd5b5060010190565b600181811c90821680620003ea57607f821691505b602082108114156200040c57634e487b7160e01b600052602260045260246000fd5b50919050565b61193180620004226000396000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c806370a08231116100a2578063c23ee64511610071578063c23ee64514610265578063c87b56dd14610278578063cdf9c33f1461028b578063e985e9c51461029e578063fb2f1ffb146102b157600080fd5b806370a082311461022457806395d89b4114610237578063a22cb4651461023f578063b88d4fde1461025257600080fd5b806323b872dd116100e957806323b872dd146101985780632a55205a146101ab5780633e4dc8a6146101dd57806342842e0e146101fe5780636352211e1461021157600080fd5b806301ffc9a71461011b57806306fdde0314610143578063081812fc14610158578063095ea7b314610183575b600080fd5b61012e6101293660046112e4565b6102c4565b60405190151581526020015b60405180910390f35b61014b6102ef565b60405161013a9190611359565b61016b61016636600461136c565b610381565b6040516001600160a01b03909116815260200161013a565b6101966101913660046113a1565b61041b565b005b6101966101a63660046113cb565b610531565b6101be6101b9366004611407565b610562565b604080516001600160a01b03909316835260208301919091520161013a565b6101f06101eb36600461143a565b6105ad565b60405190815260200161013a565b61019661020c3660046113cb565b6106b0565b61016b61021f36600461136c565b6106cb565b6101f0610232366004611486565b610742565b61014b6107c9565b61019661024d3660046114a1565b6107d8565b6101966102603660046114f3565b61089d565b6101f06102733660046115cf565b6108d5565b61014b61028636600461136c565b61093f565b6101f06102993660046115f4565b6109f6565b61012e6102ac366004611620565b610ae8565b6101966102bf3660046115f4565b610b3b565b60006001600160e01b0319821663152a902d60e11b14806102e957506102e982610bf6565b92915050565b6060600080546102fe9061164a565b80601f016020809104026020016040519081016040528092919081815260200182805461032a9061164a565b80156103775780601f1061034c57610100808354040283529160200191610377565b820191906000526020600020905b81548152906001019060200180831161035a57829003601f168201915b5050505050905090565b6000818152600260205260408120546001600160a01b03166103ff5760405162461bcd60e51b815260206004820152602c60248201527f4552433732313a20617070726f76656420717565727920666f72206e6f6e657860448201526b34b9ba32b73a103a37b5b2b760a11b60648201526084015b60405180910390fd5b506000908152600460205260409020546001600160a01b031690565b6000610426826106cb565b9050806001600160a01b0316836001600160a01b031614156104945760405162461bcd60e51b815260206004820152602160248201527f4552433732313a20617070726f76616c20746f2063757272656e74206f776e656044820152603960f91b60648201526084016103f6565b336001600160a01b03821614806104b057506104b08133610ae8565b6105225760405162461bcd60e51b815260206004820152603860248201527f4552433732313a20617070726f76652063616c6c6572206973206e6f74206f7760448201527f6e6572206e6f7220617070726f76656420666f7220616c6c000000000000000060648201526084016103f6565b61052c8383610c46565b505050565b61053b3382610cb4565b6105575760405162461bcd60e51b81526004016103f690611685565b61052c838383610d8b565b6000828152600b6020908152604080832054600c90925282205482916001600160a01b0316906064906105989060ff16866116ec565b6105a29190611721565b915091509250929050565b6000333b156105ce5760405162461bcd60e51b81526004016103f690611735565b6105d88484610b3b565b600a546040516367e24df160e01b8152306004820152602481018690526001600160801b03841660448201526000916001600160a01b0316906367e24df1906064015b602060405180830381600087803b15801561063557600080fd5b505af1158015610649573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061066d9190611761565b90507f8d5109a871014c1ff071f645201b046f4be83fcabaff41299435c4dde9b68bf7816040516106a091815260200190565b60405180910390a1949350505050565b61052c8383836040518060200160405280600081525061089d565b6000818152600260205260408120546001600160a01b0316806102e95760405162461bcd60e51b815260206004820152602960248201527f4552433732313a206f776e657220717565727920666f72206e6f6e657869737460448201526832b73a103a37b5b2b760b91b60648201526084016103f6565b60006001600160a01b0382166107ad5760405162461bcd60e51b815260206004820152602a60248201527f4552433732313a2062616c616e636520717565727920666f7220746865207a65604482015269726f206164647265737360b01b60648201526084016103f6565b506001600160a01b031660009081526003602052604090205490565b6060600180546102fe9061164a565b6001600160a01b0382163314156108315760405162461bcd60e51b815260206004820152601960248201527f4552433732313a20617070726f766520746f2063616c6c65720000000000000060448201526064016103f6565b3360008181526007602090815260408083206001600160a01b03871680855290835292819020805460ff191686151590811790915590519081529192917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050565b6108a73383610cb4565b6108c35760405162461bcd60e51b81526004016103f690611685565b6108cf84848484610f2b565b50505050565b6000333b156108f65760405162461bcd60e51b81526004016103f690611735565b6109008484610b3b565b60085460405163acfee8ed60e01b815230600482015260248101869052604481018490526000916001600160a01b03169063acfee8ed9060640161061b565b6000818152600260205260409020546060906001600160a01b03166109be5760405162461bcd60e51b815260206004820152602f60248201527f4552433732314d657461646174613a2055524920717565727920666f72206e6f60448201526e3732bc34b9ba32b73a103a37b5b2b760891b60648201526084016103f6565b6109c6610f5e565b6109cf83610f7e565b6040516020016109e092919061177a565b6040516020818303038152906040529050919050565b6000333b15610a175760405162461bcd60e51b81526004016103f690611735565b610a218383610b3b565b60095460405163217871c960e21b8152306004820152602481018590526000916001600160a01b0316906385e1c72490604401602060405180830381600087803b158015610a6e57600080fd5b505af1158015610a82573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610aa69190611761565b90507f8d5109a871014c1ff071f645201b046f4be83fcabaff41299435c4dde9b68bf781604051610ad991815260200190565b60405180910390a19392505050565b6001600160a01b03811660009081526006602052604081205460ff1680610b3457506001600160a01b0380841660009081526007602090815260408083209386168352929052205460ff165b9392505050565b333b15610b5a5760405162461bcd60e51b81526004016103f690611735565b60328160ff161115610bae5760405162461bcd60e51b815260206004820152601a60248201527f726f79616c74792070657263656e7461676520746f6f2062696700000000000060448201526064016103f6565b610bb8328361107c565b6000918252600b6020908152604080842080546001600160a01b03191632179055600c909152909120805460ff90921660ff19909216919091179055565b60006001600160e01b031982166380ac58cd60e01b1480610c2757506001600160e01b03198216635b5e139f60e01b145b806102e957506301ffc9a760e01b6001600160e01b03198316146102e9565b600081815260046020526040902080546001600160a01b0319166001600160a01b0384169081179091558190610c7b826106cb565b6001600160a01b03167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b6000818152600260205260408120546001600160a01b0316610d2d5760405162461bcd60e51b815260206004820152602c60248201527f4552433732313a206f70657261746f7220717565727920666f72206e6f6e657860448201526b34b9ba32b73a103a37b5b2b760a11b60648201526084016103f6565b6000610d38836106cb565b9050806001600160a01b0316846001600160a01b03161480610d735750836001600160a01b0316610d6884610381565b6001600160a01b0316145b80610d835750610d838185610ae8565b949350505050565b826001600160a01b0316610d9e826106cb565b6001600160a01b031614610e065760405162461bcd60e51b815260206004820152602960248201527f4552433732313a207472616e73666572206f6620746f6b656e2074686174206960448201526839903737ba1037bbb760b91b60648201526084016103f6565b6001600160a01b038216610e685760405162461bcd60e51b8152602060048201526024808201527f4552433732313a207472616e7366657220746f20746865207a65726f206164646044820152637265737360e01b60648201526084016103f6565b610e73600082610c46565b6001600160a01b0383166000908152600360205260408120805460019290610e9c9084906117b9565b90915550506001600160a01b0382166000908152600360205260408120805460019290610eca9084906117d0565b909155505060008181526002602052604080822080546001600160a01b0319166001600160a01b0386811691821790925591518493918716917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef91a4505050565b610f36848484610d8b565b610f42848484846111be565b6108cf5760405162461bcd60e51b81526004016103f6906117e8565b60606040518060600160405280602281526020016118da60229139905090565b606081610fa25750506040805180820190915260018152600360fc1b602082015290565b8160005b8115610fcc5780610fb68161183a565b9150610fc59050600a83611721565b9150610fa6565b60008167ffffffffffffffff811115610fe757610fe76114dd565b6040519080825280601f01601f191660200182016040528015611011576020820181803683370190505b5090505b8415610d83576110266001836117b9565b9150611033600a86611855565b61103e9060306117d0565b60f81b81838151811061105357611053611869565b60200101906001600160f81b031916908160001a905350611075600a86611721565b9450611015565b6001600160a01b0382166110d25760405162461bcd60e51b815260206004820181905260248201527f4552433732313a206d696e7420746f20746865207a65726f206164647265737360448201526064016103f6565b6000818152600260205260409020546001600160a01b0316156111375760405162461bcd60e51b815260206004820152601c60248201527f4552433732313a20746f6b656e20616c7265616479206d696e7465640000000060448201526064016103f6565b6001600160a01b03821660009081526003602052604081208054600192906111609084906117d0565b909155505060008181526002602052604080822080546001600160a01b0319166001600160a01b03861690811790915590518392907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a45050565b60006001600160a01b0384163b156112c057604051630a85bd0160e11b81526001600160a01b0385169063150b7a029061120290339089908890889060040161187f565b602060405180830381600087803b15801561121c57600080fd5b505af192505050801561124c575060408051601f3d908101601f19168201909252611249918101906118bc565b60015b6112a6573d80801561127a576040519150601f19603f3d011682016040523d82523d6000602084013e61127f565b606091505b50805161129e5760405162461bcd60e51b81526004016103f6906117e8565b805181602001fd5b6001600160e01b031916630a85bd0160e11b149050610d83565b506001949350505050565b6001600160e01b0319811681146112e157600080fd5b50565b6000602082840312156112f657600080fd5b8135610b34816112cb565b60005b8381101561131c578181015183820152602001611304565b838111156108cf5750506000910152565b60008151808452611345816020860160208601611301565b601f01601f19169290920160200192915050565b602081526000610b34602083018461132d565b60006020828403121561137e57600080fd5b5035919050565b80356001600160a01b038116811461139c57600080fd5b919050565b600080604083850312156113b457600080fd5b6113bd83611385565b946020939093013593505050565b6000806000606084860312156113e057600080fd5b6113e984611385565b92506113f760208501611385565b9150604084013590509250925092565b6000806040838503121561141a57600080fd5b50508035926020909101359150565b803560ff8116811461139c57600080fd5b60008060006060848603121561144f57600080fd5b8335925061145f60208501611429565b915060408401356001600160801b038116811461147b57600080fd5b809150509250925092565b60006020828403121561149857600080fd5b610b3482611385565b600080604083850312156114b457600080fd5b6114bd83611385565b9150602083013580151581146114d257600080fd5b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b6000806000806080858703121561150957600080fd5b61151285611385565b935061152060208601611385565b925060408501359150606085013567ffffffffffffffff8082111561154457600080fd5b818701915087601f83011261155857600080fd5b81358181111561156a5761156a6114dd565b604051601f8201601f19908116603f01168101908382118183101715611592576115926114dd565b816040528281528a60208487010111156115ab57600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b6000806000606084860312156115e457600080fd5b833592506113f760208501611429565b6000806040838503121561160757600080fd5b8235915061161760208401611429565b90509250929050565b6000806040838503121561163357600080fd5b61163c83611385565b915061161760208401611385565b600181811c9082168061165e57607f821691505b6020821081141561167f57634e487b7160e01b600052602260045260246000fd5b50919050565b60208082526031908201527f4552433732313a207472616e736665722063616c6c6572206973206e6f74206f6040820152701ddb995c881b9bdc88185c1c1c9bdd9959607a1b606082015260800190565b634e487b7160e01b600052601160045260246000fd5b6000816000190483118215151615611706576117066116d6565b500290565b634e487b7160e01b600052601260045260246000fd5b6000826117305761173061170b565b500490565b6020808252601290820152716f6e6c79206e6f6e20636f6e74726163747360701b604082015260600190565b60006020828403121561177357600080fd5b5051919050565b6000835161178c818460208801611301565b8351908301906117a0818360208801611301565b64173539b7b760d91b9101908152600501949350505050565b6000828210156117cb576117cb6116d6565b500390565b600082198211156117e3576117e36116d6565b500190565b60208082526032908201527f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560408201527131b2b4bb32b91034b6b83632b6b2b73a32b960711b606082015260800190565b600060001982141561184e5761184e6116d6565b5060010190565b6000826118645761186461170b565b500690565b634e487b7160e01b600052603260045260246000fd5b6001600160a01b03858116825284166020820152604081018390526080606082018190526000906118b29083018461132d565b9695505050505050565b6000602082840312156118ce57600080fd5b8151610b34816112cb56fe68747470733a2f2f617274616269612e636f6d3a333030312f6d657461646174612fa2646970667358221220fd985409cd1a019495ea2736819d1bbd31f335e807992e60c87fbe3f89afaedb64736f6c63430008090033","deployedBytecode":"0x608060405234801561001057600080fd5b50600436106101165760003560e01c806370a08231116100a2578063c23ee64511610071578063c23ee64514610265578063c87b56dd14610278578063cdf9c33f1461028b578063e985e9c51461029e578063fb2f1ffb146102b157600080fd5b806370a082311461022457806395d89b4114610237578063a22cb4651461023f578063b88d4fde1461025257600080fd5b806323b872dd116100e957806323b872dd146101985780632a55205a146101ab5780633e4dc8a6146101dd57806342842e0e146101fe5780636352211e1461021157600080fd5b806301ffc9a71461011b57806306fdde0314610143578063081812fc14610158578063095ea7b314610183575b600080fd5b61012e6101293660046112e4565b6102c4565b60405190151581526020015b60405180910390f35b61014b6102ef565b60405161013a9190611359565b61016b61016636600461136c565b610381565b6040516001600160a01b03909116815260200161013a565b6101966101913660046113a1565b61041b565b005b6101966101a63660046113cb565b610531565b6101be6101b9366004611407565b610562565b604080516001600160a01b03909316835260208301919091520161013a565b6101f06101eb36600461143a565b6105ad565b60405190815260200161013a565b61019661020c3660046113cb565b6106b0565b61016b61021f36600461136c565b6106cb565b6101f0610232366004611486565b610742565b61014b6107c9565b61019661024d3660046114a1565b6107d8565b6101966102603660046114f3565b61089d565b6101f06102733660046115cf565b6108d5565b61014b61028636600461136c565b61093f565b6101f06102993660046115f4565b6109f6565b61012e6102ac366004611620565b610ae8565b6101966102bf3660046115f4565b610b3b565b60006001600160e01b0319821663152a902d60e11b14806102e957506102e982610bf6565b92915050565b6060600080546102fe9061164a565b80601f016020809104026020016040519081016040528092919081815260200182805461032a9061164a565b80156103775780601f1061034c57610100808354040283529160200191610377565b820191906000526020600020905b81548152906001019060200180831161035a57829003601f168201915b5050505050905090565b6000818152600260205260408120546001600160a01b03166103ff5760405162461bcd60e51b815260206004820152602c60248201527f4552433732313a20617070726f76656420717565727920666f72206e6f6e657860448201526b34b9ba32b73a103a37b5b2b760a11b60648201526084015b60405180910390fd5b506000908152600460205260409020546001600160a01b031690565b6000610426826106cb565b9050806001600160a01b0316836001600160a01b031614156104945760405162461bcd60e51b815260206004820152602160248201527f4552433732313a20617070726f76616c20746f2063757272656e74206f776e656044820152603960f91b60648201526084016103f6565b336001600160a01b03821614806104b057506104b08133610ae8565b6105225760405162461bcd60e51b815260206004820152603860248201527f4552433732313a20617070726f76652063616c6c6572206973206e6f74206f7760448201527f6e6572206e6f7220617070726f76656420666f7220616c6c000000000000000060648201526084016103f6565b61052c8383610c46565b505050565b61053b3382610cb4565b6105575760405162461bcd60e51b81526004016103f690611685565b61052c838383610d8b565b6000828152600b6020908152604080832054600c90925282205482916001600160a01b0316906064906105989060ff16866116ec565b6105a29190611721565b915091509250929050565b6000333b156105ce5760405162461bcd60e51b81526004016103f690611735565b6105d88484610b3b565b600a546040516367e24df160e01b8152306004820152602481018690526001600160801b03841660448201526000916001600160a01b0316906367e24df1906064015b602060405180830381600087803b15801561063557600080fd5b505af1158015610649573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061066d9190611761565b90507f8d5109a871014c1ff071f645201b046f4be83fcabaff41299435c4dde9b68bf7816040516106a091815260200190565b60405180910390a1949350505050565b61052c8383836040518060200160405280600081525061089d565b6000818152600260205260408120546001600160a01b0316806102e95760405162461bcd60e51b815260206004820152602960248201527f4552433732313a206f776e657220717565727920666f72206e6f6e657869737460448201526832b73a103a37b5b2b760b91b60648201526084016103f6565b60006001600160a01b0382166107ad5760405162461bcd60e51b815260206004820152602a60248201527f4552433732313a2062616c616e636520717565727920666f7220746865207a65604482015269726f206164647265737360b01b60648201526084016103f6565b506001600160a01b031660009081526003602052604090205490565b6060600180546102fe9061164a565b6001600160a01b0382163314156108315760405162461bcd60e51b815260206004820152601960248201527f4552433732313a20617070726f766520746f2063616c6c65720000000000000060448201526064016103f6565b3360008181526007602090815260408083206001600160a01b03871680855290835292819020805460ff191686151590811790915590519081529192917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050565b6108a73383610cb4565b6108c35760405162461bcd60e51b81526004016103f690611685565b6108cf84848484610f2b565b50505050565b6000333b156108f65760405162461bcd60e51b81526004016103f690611735565b6109008484610b3b565b60085460405163acfee8ed60e01b815230600482015260248101869052604481018490526000916001600160a01b03169063acfee8ed9060640161061b565b6000818152600260205260409020546060906001600160a01b03166109be5760405162461bcd60e51b815260206004820152602f60248201527f4552433732314d657461646174613a2055524920717565727920666f72206e6f60448201526e3732bc34b9ba32b73a103a37b5b2b760891b60648201526084016103f6565b6109c6610f5e565b6109cf83610f7e565b6040516020016109e092919061177a565b6040516020818303038152906040529050919050565b6000333b15610a175760405162461bcd60e51b81526004016103f690611735565b610a218383610b3b565b60095460405163217871c960e21b8152306004820152602481018590526000916001600160a01b0316906385e1c72490604401602060405180830381600087803b158015610a6e57600080fd5b505af1158015610a82573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610aa69190611761565b90507f8d5109a871014c1ff071f645201b046f4be83fcabaff41299435c4dde9b68bf781604051610ad991815260200190565b60405180910390a19392505050565b6001600160a01b03811660009081526006602052604081205460ff1680610b3457506001600160a01b0380841660009081526007602090815260408083209386168352929052205460ff165b9392505050565b333b15610b5a5760405162461bcd60e51b81526004016103f690611735565b60328160ff161115610bae5760405162461bcd60e51b815260206004820152601a60248201527f726f79616c74792070657263656e7461676520746f6f2062696700000000000060448201526064016103f6565b610bb8328361107c565b6000918252600b6020908152604080842080546001600160a01b03191632179055600c909152909120805460ff90921660ff19909216919091179055565b60006001600160e01b031982166380ac58cd60e01b1480610c2757506001600160e01b03198216635b5e139f60e01b145b806102e957506301ffc9a760e01b6001600160e01b03198316146102e9565b600081815260046020526040902080546001600160a01b0319166001600160a01b0384169081179091558190610c7b826106cb565b6001600160a01b03167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b6000818152600260205260408120546001600160a01b0316610d2d5760405162461bcd60e51b815260206004820152602c60248201527f4552433732313a206f70657261746f7220717565727920666f72206e6f6e657860448201526b34b9ba32b73a103a37b5b2b760a11b60648201526084016103f6565b6000610d38836106cb565b9050806001600160a01b0316846001600160a01b03161480610d735750836001600160a01b0316610d6884610381565b6001600160a01b0316145b80610d835750610d838185610ae8565b949350505050565b826001600160a01b0316610d9e826106cb565b6001600160a01b031614610e065760405162461bcd60e51b815260206004820152602960248201527f4552433732313a207472616e73666572206f6620746f6b656e2074686174206960448201526839903737ba1037bbb760b91b60648201526084016103f6565b6001600160a01b038216610e685760405162461bcd60e51b8152602060048201526024808201527f4552433732313a207472616e7366657220746f20746865207a65726f206164646044820152637265737360e01b60648201526084016103f6565b610e73600082610c46565b6001600160a01b0383166000908152600360205260408120805460019290610e9c9084906117b9565b90915550506001600160a01b0382166000908152600360205260408120805460019290610eca9084906117d0565b909155505060008181526002602052604080822080546001600160a01b0319166001600160a01b0386811691821790925591518493918716917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef91a4505050565b610f36848484610d8b565b610f42848484846111be565b6108cf5760405162461bcd60e51b81526004016103f6906117e8565b60606040518060600160405280602281526020016118da60229139905090565b606081610fa25750506040805180820190915260018152600360fc1b602082015290565b8160005b8115610fcc5780610fb68161183a565b9150610fc59050600a83611721565b9150610fa6565b60008167ffffffffffffffff811115610fe757610fe76114dd565b6040519080825280601f01601f191660200182016040528015611011576020820181803683370190505b5090505b8415610d83576110266001836117b9565b9150611033600a86611855565b61103e9060306117d0565b60f81b81838151811061105357611053611869565b60200101906001600160f81b031916908160001a905350611075600a86611721565b9450611015565b6001600160a01b0382166110d25760405162461bcd60e51b815260206004820181905260248201527f4552433732313a206d696e7420746f20746865207a65726f206164647265737360448201526064016103f6565b6000818152600260205260409020546001600160a01b0316156111375760405162461bcd60e51b815260206004820152601c60248201527f4552433732313a20746f6b656e20616c7265616479206d696e7465640000000060448201526064016103f6565b6001600160a01b03821660009081526003602052604081208054600192906111609084906117d0565b909155505060008181526002602052604080822080546001600160a01b0319166001600160a01b03861690811790915590518392907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a45050565b60006001600160a01b0384163b156112c057604051630a85bd0160e11b81526001600160a01b0385169063150b7a029061120290339089908890889060040161187f565b602060405180830381600087803b15801561121c57600080fd5b505af192505050801561124c575060408051601f3d908101601f19168201909252611249918101906118bc565b60015b6112a6573d80801561127a576040519150601f19603f3d011682016040523d82523d6000602084013e61127f565b606091505b50805161129e5760405162461bcd60e51b81526004016103f6906117e8565b805181602001fd5b6001600160e01b031916630a85bd0160e11b149050610d83565b506001949350505050565b6001600160e01b0319811681146112e157600080fd5b50565b6000602082840312156112f657600080fd5b8135610b34816112cb565b60005b8381101561131c578181015183820152602001611304565b838111156108cf5750506000910152565b60008151808452611345816020860160208601611301565b601f01601f19169290920160200192915050565b602081526000610b34602083018461132d565b60006020828403121561137e57600080fd5b5035919050565b80356001600160a01b038116811461139c57600080fd5b919050565b600080604083850312156113b457600080fd5b6113bd83611385565b946020939093013593505050565b6000806000606084860312156113e057600080fd5b6113e984611385565b92506113f760208501611385565b9150604084013590509250925092565b6000806040838503121561141a57600080fd5b50508035926020909101359150565b803560ff8116811461139c57600080fd5b60008060006060848603121561144f57600080fd5b8335925061145f60208501611429565b915060408401356001600160801b038116811461147b57600080fd5b809150509250925092565b60006020828403121561149857600080fd5b610b3482611385565b600080604083850312156114b457600080fd5b6114bd83611385565b9150602083013580151581146114d257600080fd5b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b6000806000806080858703121561150957600080fd5b61151285611385565b935061152060208601611385565b925060408501359150606085013567ffffffffffffffff8082111561154457600080fd5b818701915087601f83011261155857600080fd5b81358181111561156a5761156a6114dd565b604051601f8201601f19908116603f01168101908382118183101715611592576115926114dd565b816040528281528a60208487010111156115ab57600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b6000806000606084860312156115e457600080fd5b833592506113f760208501611429565b6000806040838503121561160757600080fd5b8235915061161760208401611429565b90509250929050565b6000806040838503121561163357600080fd5b61163c83611385565b915061161760208401611385565b600181811c9082168061165e57607f821691505b6020821081141561167f57634e487b7160e01b600052602260045260246000fd5b50919050565b60208082526031908201527f4552433732313a207472616e736665722063616c6c6572206973206e6f74206f6040820152701ddb995c881b9bdc88185c1c1c9bdd9959607a1b606082015260800190565b634e487b7160e01b600052601160045260246000fd5b6000816000190483118215151615611706576117066116d6565b500290565b634e487b7160e01b600052601260045260246000fd5b6000826117305761173061170b565b500490565b6020808252601290820152716f6e6c79206e6f6e20636f6e74726163747360701b604082015260600190565b60006020828403121561177357600080fd5b5051919050565b6000835161178c818460208801611301565b8351908301906117a0818360208801611301565b64173539b7b760d91b9101908152600501949350505050565b6000828210156117cb576117cb6116d6565b500390565b600082198211156117e3576117e36116d6565b500190565b60208082526032908201527f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560408201527131b2b4bb32b91034b6b83632b6b2b73a32b960711b606082015260800190565b600060001982141561184e5761184e6116d6565b5060010190565b6000826118645761186461170b565b500690565b634e487b7160e01b600052603260045260246000fd5b6001600160a01b03858116825284166020820152604081018390526080606082018190526000906118b29083018461132d565b9695505050505050565b6000602082840312156118ce57600080fd5b8151610b34816112cb56fe68747470733a2f2f617274616269612e636f6d3a333030312f6d657461646174612fa2646970667358221220fd985409cd1a019495ea2736819d1bbd31f335e807992e60c87fbe3f89afaedb64736f6c63430008090033","linkReferences":{},"deployedLinkReferences":{}}')},"6ff8":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"trending_itemCardHref",attrs:{href:"/view-order/"+e.card.tokenId}},[e.card?n("b-card",{staticClass:"mb-2",attrs:{"img-src":e.card?e.card:e.defaultImg,"img-alt":e.card,"img-top":"",tag:"article"},scopedSlots:e._u([{key:"footer",fn:function(){return[n("div",{staticClass:"footer-slot"},[n("div",{staticClass:"price price flex px-3 py-2.5 items-center"},[n("span",{staticClass:"flex flex-col text-left"},[n("span",{class:e.leftSideTextTopClass},[e._v(e._s(e.leftSideTextTop))]),n("span",[e._v(e._s(e.leftSideTextBottom))])]),e.rightSide?n("span",{staticClass:"flex flex-col text-left"},[n("span",[e._v("Ending in")]),n("span",[e._v("0 d , 0 h m , 0 s")])]):e._e(),n("div",{staticClass:"carditem_dots"},[n("b-dropdown",{attrs:{dropright:"","toggle-class":"carditem_dots_tgl p-0 has-background-white btn-light","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("b-icon",{attrs:{icon:"three-dots-vertical","aria-hidden":"true"}})]},proxy:!0}],null,!1,1401002709)},[n("b-dropdown-item",{attrs:{href:"#"}},[e._v("Transfer")]),n("b-dropdown-item",{attrs:{href:"#"}},[e._v("List (On Marketplace)")])],1)],1)])])]},proxy:!0}],null,!1,44286707)},[n("b-card-text",{staticClass:"flex space-x-3 items-center"},[n("img",{staticClass:"user-avatar",attrs:{alt:""}}),n("span",[e._v("@ "+e._s(e.card.amount))])])],1):e._e()],1)},a=[],i={name:"ItemCard",data:function(){return{defaultImg:"https://images.unsplash.com/photo-1542241647-9cbbada2b309?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=869&q=80"}},props:{card:{type:null,required:!0},rightSide:{type:Boolean,default:!0},leftSideTextTop:String,leftSideTextTopClass:String,leftSideTextBottom:String}},o=i,s=(n("25e8"),n("2877")),c=Object(s["a"])(o,r,a,!1,null,"39babf76",null);t["a"]=c.exports},7:function(e,t){},"720e":function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"ERC721OrderMarketplace","sourceName":"contracts/ERC721Marketplace/ERC721OrderMarketplace.sol","abi":[{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"OrderCompleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"OrderCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"OrderRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"address","name":"_contractAddress","type":"address"}],"name":"addApprovedContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"approvedContracts","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"buyOrder","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint16","name":"_fee","type":"uint16"}],"name":"changeFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"name":"changeFeeDestination","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"createOrder","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"fee","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeDestination","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC721Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"orders","outputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"price","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"removeOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x60806040526003805461ffff60a01b1916607d60a21b17905534801561002457600080fd5b5060405161114a38038061114a833981016040819052610043916100c1565b61004c33610071565b600380546001600160a01b0319166001600160a01b03929092169190911790556100f1565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156100d357600080fd5b81516001600160a01b03811681146100ea57600080fd5b9392505050565b61104a806101006000396000f3fe6080604052600436106100dd5760003560e01c80638eb6ac7a1161007f578063ddca3f4311610059578063ddca3f43146102db578063de53fcd514610310578063f2fde38b14610330578063fde996681461035057600080fd5b80638eb6ac7a146102145780639c3f1e9014610227578063acfee8ed146102ad57600080fd5b806326749ad7116100bb57806326749ad71461016d5780633407facd146101ad578063715018a6146101cd5780638da5cb5b146101e257600080fd5b8063135171be146100e2578063150b7a02146101045780631e18cb891461014d575b600080fd5b3480156100ee57600080fd5b506101026100fd366004610d37565b610370565b005b34801561011057600080fd5b5061012f61011f366004610d71565b630a85bd0160e11b949350505050565b6040516001600160e01b031990911681526020015b60405180910390f35b34801561015957600080fd5b50610102610168366004610d37565b6103ca565b34801561017957600080fd5b5061019d610188366004610d37565b60016020526000908152604090205460ff1681565b6040519015158152602001610144565b3480156101b957600080fd5b506101026101c8366004610e51565b610416565b3480156101d957600080fd5b506101026104ab565b3480156101ee57600080fd5b506000546001600160a01b03165b6040516001600160a01b039091168152602001610144565b610102610222366004610e75565b6104e1565b34801561023357600080fd5b50610278610242366004610e75565b600260208190526000918252604090912080546001820154928201546003909201546001600160a01b0391821693929091169084565b60405161014494939291906001600160a01b039485168152602081019390935292166040820152606081019190915260800190565b3480156102b957600080fd5b506102cd6102c8366004610e8e565b61081b565b604051908152602001610144565b3480156102e757600080fd5b506003546102fd90600160a01b900461ffff1681565b60405161ffff9091168152602001610144565b34801561031c57600080fd5b506003546101fc906001600160a01b031681565b34801561033c57600080fd5b5061010261034b366004610d37565b610987565b34801561035c57600080fd5b5061010261036b366004610e75565b610a22565b6000546001600160a01b031633146103a35760405162461bcd60e51b815260040161039a90610ec3565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b031633146103f45760405162461bcd60e51b815260040161039a90610ec3565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146104405760405162461bcd60e51b815260040161039a90610ec3565b6102ee8161ffff1611156104895760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b604482015260640161039a565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b6000546001600160a01b031633146104d55760405162461bcd60e51b815260040161039a90610ec3565b6104df6000610b91565b565b6000818152600260208181526040808420815160808101835281546001600160a01b03808216835260018401805484880152848801805492831696850196909652600385018054606086019081528b8b52989097526001600160a01b0319928316909455928790559091169091559290555134146105935760405162461bcd60e51b815260206004820152600f60248201526e696e636f727265637420707269636560881b604482015260640161039a565b80516020820151604051632142170760e11b815230600482015233602482015260448101919091526001600160a01b03909116906342842e0e90606401600060405180830381600087803b1580156105ea57600080fd5b505af11580156105fe573d6000803e3d6000fd5b5050825160009250829150610623906001600160a01b031663152a902d60e11b610be1565b156106b4578251602084015160405163152a902d60e11b815260048101919091523460248201526001600160a01b0390911690632a55205a90604401604080518083038186803b15801561067657600080fd5b505afa15801561068a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106ae9190610ef8565b90925090505b80156106f2576040516001600160a01b0383169082156108fc029083906000818181858888f193505050501580156106f0573d6000803e3d6000fd5b505b600354600160a01b900461ffff1615610764576003546001600160a01b038116906108fc906127109061073090600160a01b900461ffff1634610f3c565b61073a9190610f5b565b6040518115909202916000818181858888f19350505050158015610762573d6000803e3d6000fd5b505b82604001516001600160a01b03166108fc82612710600360149054906101000a900461ffff166127106107979190610f7d565b6107a59061ffff1634610f3c565b6107af9190610f5b565b6107b99190610fa0565b6040518115909202916000818181858888f193505050501580156107e1573d6000803e3d6000fd5b506040518481527fc1471de81880c1b225e1d454a583a6f0fde1f88fb0f03ca678be2a3656c0f7c29060200160405180910390a150505050565b604051632142170760e11b8152326004820152306024820152604481018390526000906001600160a01b038516906342842e0e90606401600060405180830381600087803b15801561086c57600080fd5b505af1158015610880573d6000803e3d6000fd5b50506040516bffffffffffffffffffffffff19606088811b82166020840152603483018890526054830187905232901b1660748201524260888201526000925060a801905060408051601f1981840301815282825280516020918201206080840183526001600160a01b03898116855282850189815232868601908152606087018a81526000858152600280885290889020985189549086166001600160a01b0319918216178a55935160018a0155915191880180549290941691909216179091555160039094019390935590518281529192507f918554b6bd6e2895ce6553de5de0e1a69db5289aa0e4fe193a0dcd1f14347477910160405180910390a1949350505050565b6000546001600160a01b031633146109b15760405162461bcd60e51b815260040161039a90610ec3565b6001600160a01b038116610a165760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161039a565b610a1f81610b91565b50565b6000818152600260208190526040909120015481906001600160a01b03163314610a815760405162461bcd60e51b815260206004820152601060248201526f37b7363c9037b93232b91037bbb732b960811b604482015260640161039a565b6000828152600260208181526040808420815160808101835281546001600160a01b0380821683526001840180548488019081528589018054808516878a015260038801805460608901528e8d529a9099526001600160a01b0319948516909655908990559190951690925594909355835192519051632142170760e11b815230600482015233602482015260448101919091529116906342842e0e90606401600060405180830381600087803b158015610b3b57600080fd5b505af1158015610b4f573d6000803e3d6000fd5b505050507fd6a6f4fff14bde90c8d0e8b21085c6daf570a5b95b30376360391fe7e3dd580283604051610b8491815260200190565b60405180910390a1505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000610bec83610c06565b8015610bfd5750610bfd8383610c39565b90505b92915050565b6000610c19826301ffc9a760e01b610c39565b8015610c005750610c32826001600160e01b0319610c39565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b0387169061753090610ca0908690610fb7565b6000604051808303818686fa925050503d8060008114610cdc576040519150601f19603f3d011682016040523d82523d6000602084013e610ce1565b606091505b5091509150602081511015610cfc5760009350505050610c00565b818015610d18575080806020019051810190610d189190610ff2565b9695505050505050565b6001600160a01b0381168114610a1f57600080fd5b600060208284031215610d4957600080fd5b8135610d5481610d22565b9392505050565b634e487b7160e01b600052604160045260246000fd5b60008060008060808587031215610d8757600080fd5b8435610d9281610d22565b93506020850135610da281610d22565b925060408501359150606085013567ffffffffffffffff80821115610dc657600080fd5b818701915087601f830112610dda57600080fd5b813581811115610dec57610dec610d5b565b604051601f8201601f19908116603f01168101908382118183101715610e1457610e14610d5b565b816040528281528a6020848701011115610e2d57600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b600060208284031215610e6357600080fd5b813561ffff81168114610d5457600080fd5b600060208284031215610e8757600080fd5b5035919050565b600080600060608486031215610ea357600080fd5b8335610eae81610d22565b95602085013595506040909401359392505050565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b60008060408385031215610f0b57600080fd5b8251610f1681610d22565b6020939093015192949293505050565b634e487b7160e01b600052601160045260246000fd5b6000816000190483118215151615610f5657610f56610f26565b500290565b600082610f7857634e487b7160e01b600052601260045260246000fd5b500490565b600061ffff83811690831681811015610f9857610f98610f26565b039392505050565b600082821015610fb257610fb2610f26565b500390565b6000825160005b81811015610fd85760208186018101518583015201610fbe565b81811115610fe7576000828501525b509190910192915050565b60006020828403121561100457600080fd5b81518015158114610d5457600080fdfea26469706673582212205e27c1818c6fa072a072a2dd86636f4c45f97ddccc21473aa1cf8cac64f3e0c964736f6c63430008090033","deployedBytecode":"0x6080604052600436106100dd5760003560e01c80638eb6ac7a1161007f578063ddca3f4311610059578063ddca3f43146102db578063de53fcd514610310578063f2fde38b14610330578063fde996681461035057600080fd5b80638eb6ac7a146102145780639c3f1e9014610227578063acfee8ed146102ad57600080fd5b806326749ad7116100bb57806326749ad71461016d5780633407facd146101ad578063715018a6146101cd5780638da5cb5b146101e257600080fd5b8063135171be146100e2578063150b7a02146101045780631e18cb891461014d575b600080fd5b3480156100ee57600080fd5b506101026100fd366004610d37565b610370565b005b34801561011057600080fd5b5061012f61011f366004610d71565b630a85bd0160e11b949350505050565b6040516001600160e01b031990911681526020015b60405180910390f35b34801561015957600080fd5b50610102610168366004610d37565b6103ca565b34801561017957600080fd5b5061019d610188366004610d37565b60016020526000908152604090205460ff1681565b6040519015158152602001610144565b3480156101b957600080fd5b506101026101c8366004610e51565b610416565b3480156101d957600080fd5b506101026104ab565b3480156101ee57600080fd5b506000546001600160a01b03165b6040516001600160a01b039091168152602001610144565b610102610222366004610e75565b6104e1565b34801561023357600080fd5b50610278610242366004610e75565b600260208190526000918252604090912080546001820154928201546003909201546001600160a01b0391821693929091169084565b60405161014494939291906001600160a01b039485168152602081019390935292166040820152606081019190915260800190565b3480156102b957600080fd5b506102cd6102c8366004610e8e565b61081b565b604051908152602001610144565b3480156102e757600080fd5b506003546102fd90600160a01b900461ffff1681565b60405161ffff9091168152602001610144565b34801561031c57600080fd5b506003546101fc906001600160a01b031681565b34801561033c57600080fd5b5061010261034b366004610d37565b610987565b34801561035c57600080fd5b5061010261036b366004610e75565b610a22565b6000546001600160a01b031633146103a35760405162461bcd60e51b815260040161039a90610ec3565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b031633146103f45760405162461bcd60e51b815260040161039a90610ec3565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146104405760405162461bcd60e51b815260040161039a90610ec3565b6102ee8161ffff1611156104895760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b604482015260640161039a565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b6000546001600160a01b031633146104d55760405162461bcd60e51b815260040161039a90610ec3565b6104df6000610b91565b565b6000818152600260208181526040808420815160808101835281546001600160a01b03808216835260018401805484880152848801805492831696850196909652600385018054606086019081528b8b52989097526001600160a01b0319928316909455928790559091169091559290555134146105935760405162461bcd60e51b815260206004820152600f60248201526e696e636f727265637420707269636560881b604482015260640161039a565b80516020820151604051632142170760e11b815230600482015233602482015260448101919091526001600160a01b03909116906342842e0e90606401600060405180830381600087803b1580156105ea57600080fd5b505af11580156105fe573d6000803e3d6000fd5b5050825160009250829150610623906001600160a01b031663152a902d60e11b610be1565b156106b4578251602084015160405163152a902d60e11b815260048101919091523460248201526001600160a01b0390911690632a55205a90604401604080518083038186803b15801561067657600080fd5b505afa15801561068a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106ae9190610ef8565b90925090505b80156106f2576040516001600160a01b0383169082156108fc029083906000818181858888f193505050501580156106f0573d6000803e3d6000fd5b505b600354600160a01b900461ffff1615610764576003546001600160a01b038116906108fc906127109061073090600160a01b900461ffff1634610f3c565b61073a9190610f5b565b6040518115909202916000818181858888f19350505050158015610762573d6000803e3d6000fd5b505b82604001516001600160a01b03166108fc82612710600360149054906101000a900461ffff166127106107979190610f7d565b6107a59061ffff1634610f3c565b6107af9190610f5b565b6107b99190610fa0565b6040518115909202916000818181858888f193505050501580156107e1573d6000803e3d6000fd5b506040518481527fc1471de81880c1b225e1d454a583a6f0fde1f88fb0f03ca678be2a3656c0f7c29060200160405180910390a150505050565b604051632142170760e11b8152326004820152306024820152604481018390526000906001600160a01b038516906342842e0e90606401600060405180830381600087803b15801561086c57600080fd5b505af1158015610880573d6000803e3d6000fd5b50506040516bffffffffffffffffffffffff19606088811b82166020840152603483018890526054830187905232901b1660748201524260888201526000925060a801905060408051601f1981840301815282825280516020918201206080840183526001600160a01b03898116855282850189815232868601908152606087018a81526000858152600280885290889020985189549086166001600160a01b0319918216178a55935160018a0155915191880180549290941691909216179091555160039094019390935590518281529192507f918554b6bd6e2895ce6553de5de0e1a69db5289aa0e4fe193a0dcd1f14347477910160405180910390a1949350505050565b6000546001600160a01b031633146109b15760405162461bcd60e51b815260040161039a90610ec3565b6001600160a01b038116610a165760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161039a565b610a1f81610b91565b50565b6000818152600260208190526040909120015481906001600160a01b03163314610a815760405162461bcd60e51b815260206004820152601060248201526f37b7363c9037b93232b91037bbb732b960811b604482015260640161039a565b6000828152600260208181526040808420815160808101835281546001600160a01b0380821683526001840180548488019081528589018054808516878a015260038801805460608901528e8d529a9099526001600160a01b0319948516909655908990559190951690925594909355835192519051632142170760e11b815230600482015233602482015260448101919091529116906342842e0e90606401600060405180830381600087803b158015610b3b57600080fd5b505af1158015610b4f573d6000803e3d6000fd5b505050507fd6a6f4fff14bde90c8d0e8b21085c6daf570a5b95b30376360391fe7e3dd580283604051610b8491815260200190565b60405180910390a1505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000610bec83610c06565b8015610bfd5750610bfd8383610c39565b90505b92915050565b6000610c19826301ffc9a760e01b610c39565b8015610c005750610c32826001600160e01b0319610c39565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b0387169061753090610ca0908690610fb7565b6000604051808303818686fa925050503d8060008114610cdc576040519150601f19603f3d011682016040523d82523d6000602084013e610ce1565b606091505b5091509150602081511015610cfc5760009350505050610c00565b818015610d18575080806020019051810190610d189190610ff2565b9695505050505050565b6001600160a01b0381168114610a1f57600080fd5b600060208284031215610d4957600080fd5b8135610d5481610d22565b9392505050565b634e487b7160e01b600052604160045260246000fd5b60008060008060808587031215610d8757600080fd5b8435610d9281610d22565b93506020850135610da281610d22565b925060408501359150606085013567ffffffffffffffff80821115610dc657600080fd5b818701915087601f830112610dda57600080fd5b813581811115610dec57610dec610d5b565b604051601f8201601f19908116603f01168101908382118183101715610e1457610e14610d5b565b816040528281528a6020848701011115610e2d57600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b600060208284031215610e6357600080fd5b813561ffff81168114610d5457600080fd5b600060208284031215610e8757600080fd5b5035919050565b600080600060608486031215610ea357600080fd5b8335610eae81610d22565b95602085013595506040909401359392505050565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b60008060408385031215610f0b57600080fd5b8251610f1681610d22565b6020939093015192949293505050565b634e487b7160e01b600052601160045260246000fd5b6000816000190483118215151615610f5657610f56610f26565b500290565b600082610f7857634e487b7160e01b600052601260045260246000fd5b500490565b600061ffff83811690831681811015610f9857610f98610f26565b039392505050565b600082821015610fb257610fb2610f26565b500390565b6000825160005b81811015610fd85760208186018101518583015201610fbe565b81811115610fe7576000828501525b509190910192915050565b60006020828403121561100457600080fd5b81518015158114610d5457600080fdfea26469706673582212205e27c1818c6fa072a072a2dd86636f4c45f97ddccc21473aa1cf8cac64f3e0c964736f6c63430008090033","linkReferences":{},"deployedLinkReferences":{}}')},7347:function(e,t,n){},"745b":function(e,t,n){"use strict";n("ba43")},"7aef":function(e,t,n){},"7b2a":function(e,t,n){"use strict";n("899a")},"7e30":function(e,t,n){var r=n("ded3").default,a=n("c973").default,i=n("970b").default,o=n("5bc3").default;n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("25f0"),n("96cf");var s=n("11b5"),c=s.abi,u=n("a92c"),l=function(){"use strict";function e(t){i(this,e),this.contractAddress=t}return o(e,[{key:"_connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x000000000000000000000000000000000000",n=arguments.length>2?arguments[2]:void 0;this.web3=e,this.account=t,this.contract=new e.eth.Contract(c,this.contractAddress,{from:t,gasPrice:n})}},{key:"isConnected",value:function(){return Boolean(this.web3)}},{key:"listingHighestOffer",value:function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.web3.utils,e.next=3,this.contract.methods.listings(t).call().then((function(e){return e.offer}));case 3:return e.t1=e.sent,e.abrupt("return",e.t0.fromWei.call(e.t0,e.t1,"ether"));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createListing",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.createListing(t,n).send();case 4:return r=e.sent,e.abrupt("return",r.events.ListingCreated.returnValues.id);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getListing",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.listings(t).call();case 4:if(n=e.sent,"0x0000000000000000000000000000000000000000"!==n.owner){e.next=7;break}return e.abrupt("return",Promise.resolve(null));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getListingOffers",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.getPastEvents("ListingOfferPlaced",{fromBlock:"earliest",filter:{id:t}}).then(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=r,e.t1=r({},t.returnValues),e.t2={},e.t3=Date,e.next=6,i.web3.eth.getBlock(t.blockNumber).then((function(e){return 1e3*e.timestamp}));case 6:return e.t4=e.sent,e.t5=new e.t3(e.t4),e.t6={time:e.t5},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t6));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getListingWithdraws",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.getPastEvents("ListingOfferWithdrawn",{fromBlock:"earliest",filter:{id:t}}).then(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=r,e.t1=r({},t.returnValues),e.t2={},e.t3=Date,e.next=6,i.web3.eth.getBlock(t.blockNumber).then((function(e){return 1e3*e.timestamp}));case 6:return e.t4=e.sent,e.t5=new e.t3(e.t4),e.t6={time:e.t5},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t6));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeListing",value:function(e){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.removeListing(e).send()}},{key:"placeOffer",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return r=this.web3.utils.toWei(n,"ether"),e.abrupt("return",this.contract.methods.placeOffer(t).send({value:r}));case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"placeOfferGasEstimation",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.web3.utils.toWei(n,"ether"),e.next=3,this.contract.methods.placeOffer(t).estimateGas({value:r}).then((function(e){return e.toString()}));case 3:return a=e.sent,e.next=6,u();case 6:return i=e.sent,o=i.gasPrice,s=i.waitTime,c=this.web3.utils.fromWei(new this.web3.utils.BN(a).mul(new this.web3.utils.BN(o)),"ether"),e.abrupt("return",{price:"".concat(n," ETH"),txFees:"".concat(c," ETH"),totalPrice:"".concat(new this.web3.utils.BN(r).add(new this.web3.utils.BN(c))," ETH"),waitTime:"".concat(s," minutes")});case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"withdrawOffer",value:function(e){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.withdrawOffer(e).send()}},{key:"canWithdrawOffer",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.listings(t).call();case 4:if(n=e.sent,n.offeror.toLowerCase()==this.account.toLowerCase()){e.next=7;break}return e.abrupt("return",!1);case 7:return r=n.offerPlacedAt,a=+Date.now()/1e3-parseInt(r)+172800,e.abrupt("return",a<0||a);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"acceptListingOffer",value:function(e){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.acceptListingOffer(e).send()}}]),e}();l.isIntegrationClass=!0,e.exports=l},8:function(e,t){},"85ec":function(e,t,n){},"899a":function(e,t,n){},"8ec5":function(e,t,n){"use strict";n("d843")},"8f64":function(e,t,n){var r=n("970b").default,a=n("5bc3").default;n("d3b7"),n("25f0");var i=n("d3fd"),o=i.abi,s=n("dc42"),c=function(){"use strict";function e(t){r(this,e),this.contractAddress=t}return a(e,[{key:"_connect",value:function(e,t,n){this.web3=e,this.contract=new e.eth.Contract(o,this.contractAddress,{from:t,gasPrice:n})}},{key:"isConnected",value:function(){return Boolean(this.web3)}},{key:"mint",value:function(e,t,n){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.mint(e,t.toString(),n).send().then((function(){return e}))}},{key:"mintAndCreateOrder",value:function(e,t,n,r,a){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.mintAndCreateOrder(e,t.toString(),n.toString(),r,this.web3.utils.toWei(a,"ether")).send().then(s)}},{key:"mintAndCreateListing",value:function(e,t,n,r){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.mintAndCreateListing(e,t.toString(),n.toString(),r).send().then(s)}},{key:"mintAndCreateAuction",value:function(e,t,n,r,a){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.mintAndCreateAuction(e,t.toString(),n.toString(),r,Math.floor(a/1e3).toString()).send().then(s)}}]),e}();c.isIntegrationClass=!0,e.exports=c},9:function(e,t){},9712:function(e,t,n){},9857:function(e,t,n){"use strict";n("3f49")},a035:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAB3RJTUUH5QkSDCwhAR9fYAAABE1JREFUSMe9VW1Mk1cUPueWr0g7PxgwQQhk6BRQYQtOwSWSUhRmKoSPIVkii41KEJENFcEosrE5DVCWGaarZi4GskJYaUdBweBsSeaIA2Y7iQJlOGBAJhCKY0Dfsz/ed0sXQ7If3j8nee7zPOe995z3XIQlVn/f9zm6zI0bsZqVs6cqFU5DDRyQy6EbvGFFYKBIjIAJmBoaIgtM4oO2NhpgcuzSaF4dj4nYfd1ieZ4/OgOPDhsfGh+6u7usfSnbkVFZSZvgN9qWnIzV1In1UqnDz2WD8G1kJGty1MB0WhrXCW9LMmF5XZ1kZPEBS+7qomyMolS7Hb+kJpA3NDydX1U4t5CfH1YfVp/+zvw81zHnxJLHsg8dGc3NHKcpCkHPoiJKg2NUazSGqLcN74nu66MWKGXFRDyK+DMeJJKJthQXUxv5QSpjyzZMrvIIbm62plpTtd+4uf3nAyRa6ZrF9Wo11KKJ3ouOhvdBBr0yGb6GEriclYUO3EP+RuNSJRN591DF8vbtwz9YJnpIpXQSbsLdmJhl954EeZypqBD5vMYsgV1gV5uaXA65rHUbj4iYT3KsX0jatQutlEWdGg0w1OIrY2OogR/oM6kUbtApzBMEMfNO/IiqGCMVbMUjdjsIlE6/+/pSGH6FUSqVm07S66praVn8YvHRvE93tyMYS+DrhAQY2GoqN5Sr1baAO0/0p3NzxasnrVarlUhsSWZvfe3EBMfbqZ3aycXFFm9OMWBZGY8c5zyu4z4i3mT2aLyYl2e7YD6rP1lRwSAIMuFjhYIdwgAh7tYtTnx83C/WXe3rSx70Mx4eH+d4LMZiLC4uCtUwBZEzMzxyXDzAMx334bijCo6ga1sb6MkCgwoF2laaPtAXTE/Ty6gk+blzeJEY/iIIdBp+RFi9GtKxmDYrlRhOrdBz6ZKYQA/eeHbHDrGWSpigM7dvi/sWVMDmgwdBS2XYo9djKWwhGB2lHBQolDG4C6Ws+MQJsQlf2NpJKryO//z+AxmmUYOX1fprmclTdyc0lONDx8wTjdF+fnzf2ae/3yw3vF5YyKPzPtdxH473xZuP6y+HhdneMqXp996/z2AQaqCotVUYhnzJ0bg4Tgw4P9L+19GxMZzDTfS5j49zE7JsWAFdMhmPzk3IddyH45Ib4A8NCgUoMRyCWlux36ej+7t3w8PZcmGdoDEaX/RvyMRZHQUjYDQYFrIdrvONIyNsHcigNyEBQrAOvTo70Q7ZgrmkJFi3fUK519tbsKAe1lRW8shxzuM67sN96VPMgUGdLuTm9vPKA1ar2IR8VuMnEA9vdnSQl1BDc3Y7vEEaoeraNZJQIw4nJi7VYyKP63aTjE7NzmImzMJPZvOfNStn5noKCsRSORvwWc1HJl1FA8hTUv7vYwSTEA25dXU8sfNjhEudiHetRAGeYNu/nw8QsEAg+P/rOQ6HIRgeGuLN5WiFWQi+coVf9fP8/wYcnKbBZcJa/QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wOS0xOFQxMjo0NDozMiswMDowMGwzWuwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDktMThUMTI6NDQ6MzIrMDA6MDAdbuJQAAAAAElFTkSuQmCC"},a11b:function(e,t,n){"use strict";n("2af9")},a323:function(e,t,n){"use strict";n("4a5c")},a470:function(e,t,n){},a4bf:function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"ERC1155OrderMarketplace","sourceName":"contracts/ERC1155Marketplace/ERC1155OrderMarketplace.sol","abi":[{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"OrderCompleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"OrderCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"OrderRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"address","name":"_contractAddress","type":"address"}],"name":"addApprovedContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"approvedContracts","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"buyOrder","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint16","name":"_fee","type":"uint16"}],"name":"changeFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"name":"changeFeeDestination","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_tokenQty","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"createOrder","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"fee","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeDestination","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155BatchReceived","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"orders","outputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"tokenQty","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"price","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"removeOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x60806040526003805461ffff60a01b1916607d60a21b17905534801561002457600080fd5b50604051611464380380611464833981016040819052610043916100c1565b61004c33610071565b600380546001600160a01b0319166001600160a01b03929092169190911790556100f1565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156100d357600080fd5b81516001600160a01b03811681146100ea57600080fd5b9392505050565b611364806101006000396000f3fe6080604052600436106100f35760003560e01c80638eb6ac7a1161008a578063de53fcd511610059578063de53fcd514610350578063f23a6e6114610370578063f2fde38b1461039c578063fde99668146103bc57600080fd5b80638eb6ac7a146102345780639c3f1e9014610247578063bc197c81146102d6578063ddca3f431461031b57600080fd5b80633407facd116100c65780633407facd1461019f5780636f652e1a146101bf578063715018a6146101ed5780638da5cb5b1461020257600080fd5b806301ffc9a7146100f8578063135171be1461012d5780631e18cb891461014f57806326749ad71461016f575b600080fd5b34801561010457600080fd5b50610118610113366004610e83565b6103dc565b60405190151581526020015b60405180910390f35b34801561013957600080fd5b5061014d610148366004610ec2565b610413565b005b34801561015b57600080fd5b5061014d61016a366004610ec2565b61046d565b34801561017b57600080fd5b5061011861018a366004610ec2565b60016020526000908152604090205460ff1681565b3480156101ab57600080fd5b5061014d6101ba366004610edf565b6104b9565b3480156101cb57600080fd5b506101df6101da366004610f03565b61054e565b604051908152602001610124565b3480156101f957600080fd5b5061014d6106d0565b34801561020e57600080fd5b506000546001600160a01b03165b6040516001600160a01b039091168152602001610124565b61014d610242366004610f3e565b610706565b34801561025357600080fd5b5061029f610262366004610f3e565b6002602081905260009182526040909120805460018201549282015460038301546004909301546001600160a01b03928316949391929091169085565b604080516001600160a01b03968716815260208101959095528401929092529092166060820152608081019190915260a001610124565b3480156102e257600080fd5b506103026102f136600461108e565b63bc197c8160e01b95945050505050565b6040516001600160e01b03199091168152602001610124565b34801561032757600080fd5b5060035461033d90600160a01b900461ffff1681565b60405161ffff9091168152602001610124565b34801561035c57600080fd5b5060035461021c906001600160a01b031681565b34801561037c57600080fd5b5061030261038b36600461113c565b63f23a6e6160e01b95945050505050565b3480156103a857600080fd5b5061014d6103b7366004610ec2565b610a4d565b3480156103c857600080fd5b5061014d6103d7366004610f3e565b610ae8565b60006001600160e01b03198216630271189760e51b148061040d57506301ffc9a760e01b6001600160e01b03198316145b92915050565b6000546001600160a01b031633146104465760405162461bcd60e51b815260040161043d906111a5565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b031633146104975760405162461bcd60e51b815260040161043d906111a5565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146104e35760405162461bcd60e51b815260040161043d906111a5565b6102ee8161ffff16111561052c5760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b604482015260640161043d565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b604051637921219560e11b81526000906001600160a01b0386169063f242432a906105839032903090899089906004016111da565b600060405180830381600087803b15801561059d57600080fd5b505af11580156105b1573d6000803e3d6000fd5b50506040516bffffffffffffffffffffffff19606089811b82166020840152603483018990526054830187905232901b1660748201524260888201526000925060a801905060408051601f19818403018152828252805160209182012060a0840183526001600160a01b03808b1685528483018a81528585018a81523260608801908152608088018b81526000868152600297889052889020985189549086166001600160a01b0319918216178a55935160018a015591519588019590955593516003870180549190931691161790559051600490930192909255519091507f918554b6bd6e2895ce6553de5de0e1a69db5289aa0e4fe193a0dcd1f14347477906106bf9083815260200190565b60405180910390a195945050505050565b6000546001600160a01b031633146106fa5760405162461bcd60e51b815260040161043d906111a5565b6107046000610cf4565b565b6000818152600260208181526040808420815160a08101835281546001600160a01b038082168352600184018054848801528488018054968501969096526003850180549283166060860152600486018054608087019081528c8c52999098526001600160a01b03199384169095558890559387905590921690559290555134146107c55760405162461bcd60e51b815260206004820152600f60248201526e696e636f727265637420707269636560881b604482015260640161043d565b805160208201516040808401519051637921219560e11b81526001600160a01b039093169263f242432a92610802923092339291906004016111da565b600060405180830381600087803b15801561081c57600080fd5b505af1158015610830573d6000803e3d6000fd5b5050825160009250829150610855906001600160a01b031663152a902d60e11b610d44565b156108e6578251602084015160405163152a902d60e11b815260048101919091523460248201526001600160a01b0390911690632a55205a90604401604080518083038186803b1580156108a857600080fd5b505afa1580156108bc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108e09190611212565b90925090505b8015610924576040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015610922573d6000803e3d6000fd5b505b600354600160a01b900461ffff1615610996576003546001600160a01b038116906108fc906127109061096290600160a01b900461ffff1634611256565b61096c9190611275565b6040518115909202916000818181858888f19350505050158015610994573d6000803e3d6000fd5b505b82606001516001600160a01b03166108fc82612710600360149054906101000a900461ffff166127106109c99190611297565b6109d79061ffff1634611256565b6109e19190611275565b6109eb91906112ba565b6040518115909202916000818181858888f19350505050158015610a13573d6000803e3d6000fd5b506040518481527fc1471de81880c1b225e1d454a583a6f0fde1f88fb0f03ca678be2a3656c0f7c29060200160405180910390a150505050565b6000546001600160a01b03163314610a775760405162461bcd60e51b815260040161043d906111a5565b6001600160a01b038116610adc5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161043d565b610ae581610cf4565b50565b60008181526002602052604090206003015481906001600160a01b03163314610b465760405162461bcd60e51b815260206004820152601060248201526f37b7363c9037b93232b91037bbb732b960811b604482015260640161043d565b6000600260008481526020019081526020016000206040518060a00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b0316815260200160018201548152602001600282015481526020016003820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b03168152602001600482015481525050905060026000848152602001908152602001600020600080820160006101000a8154906001600160a01b030219169055600182016000905560028201600090556003820160006101000a8154906001600160a01b0302191690556004820160009055505080600001516001600160a01b031663f242432a3033846020015185604001516040518563ffffffff1660e01b8152600401610c8494939291906111da565b600060405180830381600087803b158015610c9e57600080fd5b505af1158015610cb2573d6000803e3d6000fd5b505050507fd6a6f4fff14bde90c8d0e8b21085c6daf570a5b95b30376360391fe7e3dd580283604051610ce791815260200190565b60405180910390a1505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000610d4f83610d67565b8015610d605750610d608383610d9a565b9392505050565b6000610d7a826301ffc9a760e01b610d9a565b801561040d5750610d93826001600160e01b0319610d9a565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b0387169061753090610e019086906112d1565b6000604051808303818686fa925050503d8060008114610e3d576040519150601f19603f3d011682016040523d82523d6000602084013e610e42565b606091505b5091509150602081511015610e5d576000935050505061040d565b818015610e79575080806020019051810190610e79919061130c565b9695505050505050565b600060208284031215610e9557600080fd5b81356001600160e01b031981168114610d6057600080fd5b6001600160a01b0381168114610ae557600080fd5b600060208284031215610ed457600080fd5b8135610d6081610ead565b600060208284031215610ef157600080fd5b813561ffff81168114610d6057600080fd5b60008060008060808587031215610f1957600080fd5b8435610f2481610ead565b966020860135965060408601359560600135945092505050565b600060208284031215610f5057600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715610f9657610f96610f57565b604052919050565b600082601f830112610faf57600080fd5b8135602067ffffffffffffffff821115610fcb57610fcb610f57565b8160051b610fda828201610f6d565b9283528481018201928281019087851115610ff457600080fd5b83870192505b8483101561101357823582529183019190830190610ffa565b979650505050505050565b600082601f83011261102f57600080fd5b813567ffffffffffffffff81111561104957611049610f57565b61105c601f8201601f1916602001610f6d565b81815284602083860101111561107157600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a086880312156110a657600080fd5b85356110b181610ead565b945060208601356110c181610ead565b9350604086013567ffffffffffffffff808211156110de57600080fd5b6110ea89838a01610f9e565b9450606088013591508082111561110057600080fd5b61110c89838a01610f9e565b9350608088013591508082111561112257600080fd5b5061112f8882890161101e565b9150509295509295909350565b600080600080600060a0868803121561115457600080fd5b853561115f81610ead565b9450602086013561116f81610ead565b93506040860135925060608601359150608086013567ffffffffffffffff81111561119957600080fd5b61112f8882890161101e565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6001600160a01b0394851681529290931660208301526040820152606081019190915260a06080820181905260009082015260c00190565b6000806040838503121561122557600080fd5b825161123081610ead565b6020939093015192949293505050565b634e487b7160e01b600052601160045260246000fd5b600081600019048311821515161561127057611270611240565b500290565b60008261129257634e487b7160e01b600052601260045260246000fd5b500490565b600061ffff838116908316818110156112b2576112b2611240565b039392505050565b6000828210156112cc576112cc611240565b500390565b6000825160005b818110156112f257602081860181015185830152016112d8565b81811115611301576000828501525b509190910192915050565b60006020828403121561131e57600080fd5b81518015158114610d6057600080fdfea2646970667358221220ee28bd5bfbc774c537ab9ae2d2094809f68e0d569fb8c8bb367230492a5dc96964736f6c63430008090033","deployedBytecode":"0x6080604052600436106100f35760003560e01c80638eb6ac7a1161008a578063de53fcd511610059578063de53fcd514610350578063f23a6e6114610370578063f2fde38b1461039c578063fde99668146103bc57600080fd5b80638eb6ac7a146102345780639c3f1e9014610247578063bc197c81146102d6578063ddca3f431461031b57600080fd5b80633407facd116100c65780633407facd1461019f5780636f652e1a146101bf578063715018a6146101ed5780638da5cb5b1461020257600080fd5b806301ffc9a7146100f8578063135171be1461012d5780631e18cb891461014f57806326749ad71461016f575b600080fd5b34801561010457600080fd5b50610118610113366004610e83565b6103dc565b60405190151581526020015b60405180910390f35b34801561013957600080fd5b5061014d610148366004610ec2565b610413565b005b34801561015b57600080fd5b5061014d61016a366004610ec2565b61046d565b34801561017b57600080fd5b5061011861018a366004610ec2565b60016020526000908152604090205460ff1681565b3480156101ab57600080fd5b5061014d6101ba366004610edf565b6104b9565b3480156101cb57600080fd5b506101df6101da366004610f03565b61054e565b604051908152602001610124565b3480156101f957600080fd5b5061014d6106d0565b34801561020e57600080fd5b506000546001600160a01b03165b6040516001600160a01b039091168152602001610124565b61014d610242366004610f3e565b610706565b34801561025357600080fd5b5061029f610262366004610f3e565b6002602081905260009182526040909120805460018201549282015460038301546004909301546001600160a01b03928316949391929091169085565b604080516001600160a01b03968716815260208101959095528401929092529092166060820152608081019190915260a001610124565b3480156102e257600080fd5b506103026102f136600461108e565b63bc197c8160e01b95945050505050565b6040516001600160e01b03199091168152602001610124565b34801561032757600080fd5b5060035461033d90600160a01b900461ffff1681565b60405161ffff9091168152602001610124565b34801561035c57600080fd5b5060035461021c906001600160a01b031681565b34801561037c57600080fd5b5061030261038b36600461113c565b63f23a6e6160e01b95945050505050565b3480156103a857600080fd5b5061014d6103b7366004610ec2565b610a4d565b3480156103c857600080fd5b5061014d6103d7366004610f3e565b610ae8565b60006001600160e01b03198216630271189760e51b148061040d57506301ffc9a760e01b6001600160e01b03198316145b92915050565b6000546001600160a01b031633146104465760405162461bcd60e51b815260040161043d906111a5565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b031633146104975760405162461bcd60e51b815260040161043d906111a5565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146104e35760405162461bcd60e51b815260040161043d906111a5565b6102ee8161ffff16111561052c5760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b604482015260640161043d565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b604051637921219560e11b81526000906001600160a01b0386169063f242432a906105839032903090899089906004016111da565b600060405180830381600087803b15801561059d57600080fd5b505af11580156105b1573d6000803e3d6000fd5b50506040516bffffffffffffffffffffffff19606089811b82166020840152603483018990526054830187905232901b1660748201524260888201526000925060a801905060408051601f19818403018152828252805160209182012060a0840183526001600160a01b03808b1685528483018a81528585018a81523260608801908152608088018b81526000868152600297889052889020985189549086166001600160a01b0319918216178a55935160018a015591519588019590955593516003870180549190931691161790559051600490930192909255519091507f918554b6bd6e2895ce6553de5de0e1a69db5289aa0e4fe193a0dcd1f14347477906106bf9083815260200190565b60405180910390a195945050505050565b6000546001600160a01b031633146106fa5760405162461bcd60e51b815260040161043d906111a5565b6107046000610cf4565b565b6000818152600260208181526040808420815160a08101835281546001600160a01b038082168352600184018054848801528488018054968501969096526003850180549283166060860152600486018054608087019081528c8c52999098526001600160a01b03199384169095558890559387905590921690559290555134146107c55760405162461bcd60e51b815260206004820152600f60248201526e696e636f727265637420707269636560881b604482015260640161043d565b805160208201516040808401519051637921219560e11b81526001600160a01b039093169263f242432a92610802923092339291906004016111da565b600060405180830381600087803b15801561081c57600080fd5b505af1158015610830573d6000803e3d6000fd5b5050825160009250829150610855906001600160a01b031663152a902d60e11b610d44565b156108e6578251602084015160405163152a902d60e11b815260048101919091523460248201526001600160a01b0390911690632a55205a90604401604080518083038186803b1580156108a857600080fd5b505afa1580156108bc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108e09190611212565b90925090505b8015610924576040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015610922573d6000803e3d6000fd5b505b600354600160a01b900461ffff1615610996576003546001600160a01b038116906108fc906127109061096290600160a01b900461ffff1634611256565b61096c9190611275565b6040518115909202916000818181858888f19350505050158015610994573d6000803e3d6000fd5b505b82606001516001600160a01b03166108fc82612710600360149054906101000a900461ffff166127106109c99190611297565b6109d79061ffff1634611256565b6109e19190611275565b6109eb91906112ba565b6040518115909202916000818181858888f19350505050158015610a13573d6000803e3d6000fd5b506040518481527fc1471de81880c1b225e1d454a583a6f0fde1f88fb0f03ca678be2a3656c0f7c29060200160405180910390a150505050565b6000546001600160a01b03163314610a775760405162461bcd60e51b815260040161043d906111a5565b6001600160a01b038116610adc5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161043d565b610ae581610cf4565b50565b60008181526002602052604090206003015481906001600160a01b03163314610b465760405162461bcd60e51b815260206004820152601060248201526f37b7363c9037b93232b91037bbb732b960811b604482015260640161043d565b6000600260008481526020019081526020016000206040518060a00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b0316815260200160018201548152602001600282015481526020016003820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b03168152602001600482015481525050905060026000848152602001908152602001600020600080820160006101000a8154906001600160a01b030219169055600182016000905560028201600090556003820160006101000a8154906001600160a01b0302191690556004820160009055505080600001516001600160a01b031663f242432a3033846020015185604001516040518563ffffffff1660e01b8152600401610c8494939291906111da565b600060405180830381600087803b158015610c9e57600080fd5b505af1158015610cb2573d6000803e3d6000fd5b505050507fd6a6f4fff14bde90c8d0e8b21085c6daf570a5b95b30376360391fe7e3dd580283604051610ce791815260200190565b60405180910390a1505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000610d4f83610d67565b8015610d605750610d608383610d9a565b9392505050565b6000610d7a826301ffc9a760e01b610d9a565b801561040d5750610d93826001600160e01b0319610d9a565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b0387169061753090610e019086906112d1565b6000604051808303818686fa925050503d8060008114610e3d576040519150601f19603f3d011682016040523d82523d6000602084013e610e42565b606091505b5091509150602081511015610e5d576000935050505061040d565b818015610e79575080806020019051810190610e79919061130c565b9695505050505050565b600060208284031215610e9557600080fd5b81356001600160e01b031981168114610d6057600080fd5b6001600160a01b0381168114610ae557600080fd5b600060208284031215610ed457600080fd5b8135610d6081610ead565b600060208284031215610ef157600080fd5b813561ffff81168114610d6057600080fd5b60008060008060808587031215610f1957600080fd5b8435610f2481610ead565b966020860135965060408601359560600135945092505050565b600060208284031215610f5057600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715610f9657610f96610f57565b604052919050565b600082601f830112610faf57600080fd5b8135602067ffffffffffffffff821115610fcb57610fcb610f57565b8160051b610fda828201610f6d565b9283528481018201928281019087851115610ff457600080fd5b83870192505b8483101561101357823582529183019190830190610ffa565b979650505050505050565b600082601f83011261102f57600080fd5b813567ffffffffffffffff81111561104957611049610f57565b61105c601f8201601f1916602001610f6d565b81815284602083860101111561107157600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a086880312156110a657600080fd5b85356110b181610ead565b945060208601356110c181610ead565b9350604086013567ffffffffffffffff808211156110de57600080fd5b6110ea89838a01610f9e565b9450606088013591508082111561110057600080fd5b61110c89838a01610f9e565b9350608088013591508082111561112257600080fd5b5061112f8882890161101e565b9150509295509295909350565b600080600080600060a0868803121561115457600080fd5b853561115f81610ead565b9450602086013561116f81610ead565b93506040860135925060608601359150608086013567ffffffffffffffff81111561119957600080fd5b61112f8882890161101e565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6001600160a01b0394851681529290931660208301526040820152606081019190915260a06080820181905260009082015260c00190565b6000806040838503121561122557600080fd5b825161123081610ead565b6020939093015192949293505050565b634e487b7160e01b600052601160045260246000fd5b600081600019048311821515161561127057611270611240565b500290565b60008261129257634e487b7160e01b600052601260045260246000fd5b500490565b600061ffff838116908316818110156112b2576112b2611240565b039392505050565b6000828210156112cc576112cc611240565b500390565b6000825160005b818110156112f257602081860181015185830152016112d8565b81811115611301576000828501525b509190910192915050565b60006020828403121561131e57600080fd5b81518015158114610d6057600080fdfea2646970667358221220ee28bd5bfbc774c537ab9ae2d2094809f68e0d569fb8c8bb367230492a5dc96964736f6c63430008090033","linkReferences":{},"deployedLinkReferences":{}}')},a766:function(e,t,n){},a92c:function(e,t,n){var r=n("c973").default;n("96cf"),n("caad"),n("2532"),n("b64b"),n("99af"),n("a15b"),n("d3b7"),n("25f0");var a=n("bc3a"),i="ed8a0f4fe4e80d364f295f6ef5adc1321453c0fdc0221af742bc3287bcfc",o=n("5ba3");function s(){return c.apply(this,arguments)}function c(){return c=r(regeneratorRuntime.mark((function e(){var t,n,r,s,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:"standard",n={slow:"safeLow",standard:"average",fast:"fast",urgent:"fastest"},Object.keys(n).includes(t)){e.next=4;break}throw new Error("Invalid transaction speed ".concat(t,". Please choose one of: ").concat(Object.keys(n).join(", ")));case 4:return r=n[t],e.next=7,a.get("https://ethgasstation.info/api/ethgasAPI.json",{params:{"api-key":i}}).then((function(e){return e.data}));case 7:return s=e.sent,e.abrupt("return",{gasPrice:o.toWei(s[r].toString(),"gwei"),waitTime:s["".concat(r,"Wait")]});case 9:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}e.exports=s},ac3d:function(e,t,n){"use strict";n("2a04")},ad55:function(e,t,n){var r=n("c973").default,a=n("970b").default,i=n("5bc3").default;n("96cf"),n("2ca0"),n("caad"),n("2532"),n("c1f9"),n("d81d"),n("4fad"),n("159b"),n("07ac"),n("d3b7"),n("25f0");var o=n("99e5"),s=n("5ba3"),c=n("4c41");n("a92c");function u(e){return"string"==typeof e&&(e.startsWith("0x")&&isNormalInteger(e.substr(2)))}function l(e){return 4001===e.code}function f(e){return-32603===e.code&&e.message.toLowerCase().includes("unrecognized chain id")}var d={mainnet:"0x1",ropsten:"0x3",rinkeby:"0x4",goerli:"0x5",kovan:"0x2a",binance:"0x38","binance testnet":"0x61",polygon:"0x89"},h=Object.fromEntries(Object.entries(d).map((function(e){return e.reverse()}))),p=function(){"use strict";function e(t){var n=this;if(a(this,e),!Array.isArray(t))throw new Error("contracts argument must be an array");if(!t.length)throw new Error("At least one contract must be included");t.forEach((function(e,t){if(!Array.isArray(e))throw new Error("contracts[".concat(t,"] must be an array"));if(3!=e.length)throw new Error("contracts[".concat(t,"] must be an array of length 3"));if(!e[0]||!0!==e[0].isIntegrationClass)throw new Error("contracts[".concat(t,"][0] must be an integration class"));if("string"!=typeof e[1]||!s.isAddress(e[1]))throw new Error("contracts[".concat(t,"][1] must be a valid Ethereum address string"));if("string"!=typeof e[2]||!e[2].length)throw new Error("contracts[".concat(t,"][2] must be be a valid contract name alias string"))})),this.contracts={},t.forEach((function(e){var t=new e[0](e[1]);n.contracts[e[2]]=t}))}return i(e,[{key:"_getEthereumProvider",value:function(){var e=r(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:if(t=e.sent,t){e.next=5;break}throw new Error("Ethereum wallet not found. Please install Metamask or use an Ethereum-compatible mobile browser.");case 5:if(window.ethereum==t){e.next=7;break}throw new Error("Ethereum wallet is being overwritten. Please ensure you only have one extension wallet installed.");case 7:return e.abrupt("return",ethereum);case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_useChainId",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.request({method:"eth_chainId"});case 2:if(r=e.sent,r==n){e.next=5;break}return e.abrupt("return",window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]}).catch((function(e){throw l(e)?new Error("Please reconfigure your Ethereum wallet to use the network with chainId ".concat(n,".")):f(e)?new Error("Please add the network with chainId ".concat(n," RPC information to your Ethereum wallet.")):e})));case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_useChain",value:function(e,t){if(!d.hasOwnProperty(t))throw new Error("Unsupported chain ".concat(t));return this._useChainId(e,d[t]).catch((function(e){throw l(e)?new Error("Please reconfigure your Ethereum wallet to use the ".concat(t," network.")):f(e)?new Error("Please add the ".concat(t," network RPC information to your Ethereum wallet.")):e}))}},{key:"_getAccount",value:function(e){return e.send("eth_requestAccounts").then((function(e){return e.result[0]})).catch((function(e){throw l(e)?new Error("Please allow the site to connect to your Ethereum wallet."):e}))}},{key:"_getWeb3",value:function(e){return new o(e)}},{key:"_connectContract",value:function(e,t,n){return n._connect(e,t)}},{key:"_connectAllContracts",value:function(e,t,n){var r=this;n.forEach((function(n){r._connectContract(e,t,n)}))}},{key:"connect",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r){var a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Please provide a chain to connect to.");case 2:if(a=null,i=n,o=r,i){e.next=20;break}return e.next=8,this._getEthereumProvider();case 8:if(a=e.sent,!u(t)){e.next=14;break}return e.next=12,this._useChainId(a,t);case 12:e.next=16;break;case 14:return e.next=16,this._useChain(a,t);case 16:return e.next=18,this._getAccount(a);case 18:o=e.sent,i=this._getWeb3(a);case 20:return e.next=22,this._connectAllContracts(i,o,Object.values(this.contracts));case 22:return this.provider=a,this.account=o,this.web3=i,e.abrupt("return",o);case 26:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getEthereumNetwork",value:function(){var e=r(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._getEthereumProvider();case 2:if(t=e.sent,n="0x"+parseInt(t.networkVersion).toString("16"),h.hasOwnProperty(n)){e.next=6;break}throw new Error("Unknown network with chainId ".concat(n));case 6:return e.abrupt("return",h[n]);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();e.exports=p},b0e0:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYEAYAAACw5+G7AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAB3RJTUUH5QkTCiQXuk1bJgAAArZJREFUWMPVl11Ik1EYx//PYbjIVKQPP7qKzC60yGRfaqCWbhfiRXoVFVldKIVCaqGMiPCD1EHeh92I0E0K0tyyqIuc22QoBEFlVOKs9GIqWmF6TjedXWzI9m7v0J7r95zn9zsfz3le6pxpnZmsGBnBa+Thp15P+cLL62pq2s/1FRdfn5zELomO/tsf3vQbjbghBphveJgKRCOWXC4GAx4Ku06HdbSL3qwscZiOUpLDERywS8CpUqSydKeTHmAL9ZmZ8NNVnNbrGbvH9zNfdTU+wg1DIICnsCEnNVUO2CmR7u7mZre7sJCmxTV2026XXJjGZzxeWaHv4gB7UltLoQP4e+bluvFxHIMRnvR0nEczZldXxXNa5QGz2drUk1vS5HYnGjyMQ4IPiT3sldncntQ3aJz1eCjqCRIsohRcjiPFE6osEit4RIFoE4gz1MXzLRalIvGCRy2gdkK15lEsEC+A2uAxCygFIpvIwODmptrgcQvICH1ogvX6Mi5Ry/Iy1nBI1DMWWsdFA50ie2Wl9WyP1eT3emPNH7dAxB2RodKKhwZTS2BrTuPg77Ra/MBJzGk0YR8s4gT8Gg3PFaV8n1arVt64BToa7uS5BoqK6AsvRZnDgRLsxbeUlOAR+vduwIw1WJOTaYxV4dboqFotSswCXS9aJiYemUzUyF9CMzYWBJdHJUP00KLFwkZ4L8stL09Ur6X4Dkhw2bWGNVlKy2icL3vUArGCh4baIhEF1AKPWkRhi7KtQKLAlYpEyhN2iSOBy5VRq463tdlsRqPPx45zPZuqqAhe9gIcQV1amrhAv3mZ09m10XLRnWMwbLsD/+0PzW4Bj1WEOrWtV1x//H7cxUFMZWfvNHhobNtr2fAWz+bnGTIwhF9eL+5jCbqFBfKLT2JD+Q9KokJyyAWVnPiKKlr3eP4C+oZi1wfnYbsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjEtMDktMTlUMTA6MzY6MjMrMDA6MDDlFLCiAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIxLTA5LTE5VDEwOjM2OjIzKzAwOjAwlEkIHgAAAABJRU5ErkJggg=="},ba43:function(e,t,n){},c1a9:function(e,t,n){e.exports=n.p+"img/Default_Profile_Picture.40401ee9.png"},c41d:function(e,t,n){var r=n("ded3").default,a=n("c973").default,i=n("970b").default,o=n("5bc3").default;n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("d81d"),n("96cf");var s=n("4257"),c=s.abi,u=n("a92c"),l=function(){"use strict";function e(t){i(this,e),this.contractAddress=t}return o(e,[{key:"_connect",value:function(e,t,n){this.web3=e,this.account=t,this.contract=new e.eth.Contract(c,this.contractAddress,{from:t,gasPrice:n})}},{key:"isConnected",value:function(){return Boolean(this.web3)}},{key:"listingHighestOffer",value:function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.web3.utils,e.next=3,this.contract.methods.listings(t).call().then((function(e){return e.offer}));case 3:return e.t1=e.sent,e.abrupt("return",e.t0.fromWei.call(e.t0,e.t1,"ether"));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createListing",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.createListing(t,n,r.toString()).send();case 4:return a=e.sent,e.abrupt("return",a.events.ListingCreated.returnValues.id);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getListing",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.listings(t).call();case 4:if(n=e.sent,"0x0000000000000000000000000000000000000000"!==n.owner){e.next=7;break}return e.abrupt("return",Promise.resolve(null));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getListingOffers",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.getPastEvents("ListingOfferPlaced",{fromBlock:"earliest",filter:{id:t}}).then(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=r,e.t1=r({},t.returnValues),e.t2={},e.t3=Date,e.next=6,i.web3.eth.getBlock(t.blockNumber).then((function(e){return 1e3*e.timestamp}));case 6:return e.t4=e.sent,e.t5=new e.t3(e.t4),e.t6={time:e.t5},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t6));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getListingWithdraws",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.getPastEvents("ListingOfferWithdrawn",{fromBlock:"earliest",filter:{id:t}}).then(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=r,e.t1=r({},t.returnValues),e.t2={},e.t3=Date,e.next=6,i.web3.eth.getBlock(t.blockNumber).then((function(e){return 1e3*e.timestamp}));case 6:return e.t4=e.sent,e.t5=new e.t3(e.t4),e.t6={time:e.t5},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t6));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeListing",value:function(e){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.removeListing(e).send()}},{key:"placeOffer",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return r=this.web3.utils.toWei(n,"ether"),e.abrupt("return",this.contract.methods.placeOffer(t).send({value:r}));case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"placeOfferGasEstimation",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.web3.utils.toWei(n,"ether"),e.next=3,this.contract.methods.placeOffer(t).estimateGas({value:r}).then((function(e){return e.toString()}));case 3:return a=e.sent,e.next=6,u();case 6:return i=e.sent,o=i.gasPrice,s=i.waitTime,c=this.web3.utils.fromWei(new this.web3.utils.BN(a).mul(new this.web3.utils.BN(o)),"ether"),e.abrupt("return",{price:"".concat(n," ETH"),txFees:"".concat(c," ETH"),totalPrice:"".concat(new this.web3.utils.BN(r).add(new this.web3.utils.BN(c))," ETH"),waitTime:"".concat(s," minutes")});case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"withdrawOffer",value:function(e){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.withdrawOffer(e).send()}},{key:"canWithdrawOffer",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.listings(t).call();case 4:if(n=e.sent,n.offeror.toLowerCase()==this.account.toLowerCase()){e.next=7;break}return e.abrupt("return",!1);case 7:return r=n.offerPlacedAt,a=+Date.now()/1e3-parseInt(r)+172800,e.abrupt("return",a<0||a);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"acceptListingOffer",value:function(e){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.acceptListingOffer(e).send()}}]),e}();l.isIntegrationClass=!0,e.exports=l},d260:function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"ERC1155AuctionMarketplace","sourceName":"contracts/ERC1155Marketplace/ERC1155AuctionMarketplace.sol","abi":[{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"AuctionBidPlaced","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"AuctionClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"AuctionCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"address","name":"_contractAddress","type":"address"}],"name":"addApprovedContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"approvedContracts","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"auctions","outputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"tokenQty","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint128","name":"bid","type":"uint128"},{"internalType":"address","name":"bidder","type":"address"},{"internalType":"uint128","name":"endsAt","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"bidOnAuction","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint16","name":"_fee","type":"uint16"}],"name":"changeFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"name":"changeFeeDestination","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_id","type":"bytes32"}],"name":"claimAuction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_tokenQty","type":"uint256"},{"internalType":"uint128","name":"_endsAt","type":"uint128"}],"name":"createAuction","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"fee","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeDestination","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155BatchReceived","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x60806040526003805461ffff60a01b1916607d60a21b17905534801561002457600080fd5b50604051611838380380611838833981016040819052610043916100c1565b61004c33610071565b600380546001600160a01b0319166001600160a01b03929092169190911790556100f1565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156100d357600080fd5b81516001600160a01b03811681146100ea57600080fd5b9392505050565b611738806101006000396000f3fe6080604052600436106100f35760003560e01c8063a65662b31161008a578063ddca3f4311610059578063ddca3f431461036c578063de53fcd5146103a1578063f23a6e61146103c1578063f2fde38b146103ed57600080fd5b8063a65662b3146102c6578063b7747267146102f4578063bc197c8114610314578063d43028051461035957600080fd5b806326749ad7116100c657806326749ad71461022f5780633407facd1461025f578063715018a61461027f5780638da5cb5b1461029457600080fd5b806301ffc9a7146100f8578063135171be1461012d5780631e18cb891461014f5780631edbc5be1461016f575b600080fd5b34801561010457600080fd5b506101186101133660046111e3565b61040d565b60405190151581526020015b60405180910390f35b34801561013957600080fd5b5061014d610148366004611222565b610444565b005b34801561015b57600080fd5b5061014d61016a366004611222565b61049e565b34801561017b57600080fd5b506101e061018a36600461123f565b600260208190526000918252604090912080546001820154928201546003830154600484015460058501546006909501546001600160a01b0394851696959394928316936001600160801b039283169316911687565b604080516001600160a01b039889168152602081019790975286019490945291851660608501526001600160801b039081166080850152931660a08301529190911660c082015260e001610124565b34801561023b57600080fd5b5061011861024a366004611222565b60016020526000908152604090205460ff1681565b34801561026b57600080fd5b5061014d61027a366004611258565b6104ea565b34801561028b57600080fd5b5061014d61057f565b3480156102a057600080fd5b506000546001600160a01b03165b6040516001600160a01b039091168152602001610124565b3480156102d257600080fd5b506102e66102e136600461127c565b6105b5565b604051908152602001610124565b34801561030057600080fd5b5061014d61030f36600461123f565b6107da565b34801561032057600080fd5b5061034061032f366004611409565b63bc197c8160e01b95945050505050565b6040516001600160e01b03199091168152602001610124565b61014d61036736600461123f565b610de6565b34801561037857600080fd5b5060035461038e90600160a01b900461ffff1681565b60405161ffff9091168152602001610124565b3480156103ad57600080fd5b506003546102ae906001600160a01b031681565b3480156103cd57600080fd5b506103406103dc3660046114b7565b63f23a6e6160e01b95945050505050565b3480156103f957600080fd5b5061014d610408366004611222565b610fb9565b60006001600160e01b03198216630271189760e51b148061043e57506301ffc9a760e01b6001600160e01b03198316145b92915050565b6000546001600160a01b031633146104775760405162461bcd60e51b815260040161046e90611520565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b031633146104c85760405162461bcd60e51b815260040161046e90611520565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146105145760405162461bcd60e51b815260040161046e90611520565b6102ee8161ffff16111561055d5760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b604482015260640161046e565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b6000546001600160a01b031633146105a95760405162461bcd60e51b815260040161046e90611520565b6105b36000611054565b565b6000333b15806105d457503360009081526001602052604090205460ff165b6105f05760405162461bcd60e51b815260040161046e90611555565b6040516bffffffffffffffffffffffff19606087811b82166020840152603483018790526054830186905232901b1660748201526001600160801b0319608084901b16608882015242609882015260009060b80160408051601f19818403018152908290528051602090910120637921219560e11b825291506001600160a01b0387169063f242432a9061068e90329030908a908a9060040161158c565b600060405180830381600087803b1580156106a857600080fd5b505af11580156106bc573d6000803e3d6000fd5b50506040805160e0810182526001600160a01b03808b16825260208083018b81528385018b8152326060860190815260006080870181815260a088018281526001600160801b038f811660c08b019081528e8552600298899052938b902099518a54908a166001600160a01b0319918216178b55965160018b0155945196890196909655915160038801805491881691861691909117905590516004870180549184166001600160801b03199283161790559351600587018054919096169316929092179093555160069093018054939092169216919091179055517f2a66b5a320edcb6b7fba849fd4173d545603571b82a650ae5ef95f12e0dada9e92506107c9915083815260200190565b60405180910390a195945050505050565b6000818152600260205260409020600601548190426001600160801b0390911610801561081d57506000818152600260205260409020546001600160a01b031615155b61085d5760405162461bcd60e51b8152602060048201526011602482015270185d58dd1a5bdb881b9bdd08195b991959607a1b604482015260640161046e565b333b158061087a57503360009081526001602052604090205460ff165b6108965760405162461bcd60e51b815260040161046e90611555565b6000600260008481526020019081526020016000206040518060e00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b0316815260200160018201548152602001600282015481526020016003820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016004820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016005820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016006820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000848152602001908152602001600020600080820160006101000a8154906001600160a01b030219169055600182016000905560028201600090556003820160006101000a8154906001600160a01b0302191690556004820160006101000a8154906001600160801b0302191690556005820160006101000a8154906001600160a01b0302191690556006820160006101000a8154906001600160801b030219169055505060008082600001516001600160a01b0316632a55205a846020015185608001516040518363ffffffff1660e01b8152600401610aae9291909182526001600160801b0316602082015260400190565b604080518083038186803b158015610ac557600080fd5b505afa158015610ad9573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610afd91906115c4565b90925090508015610b40576040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015610b3e573d6000803e3d6000fd5b505b8251610b5c906001600160a01b031663152a902d60e11b6110a4565b15610bfa5782516020840151608085015160405163152a902d60e11b815260048101929092526001600160801b031660248201526001600160a01b0390911690632a55205a90604401604080518083038186803b158015610bbc57600080fd5b505afa158015610bd0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610bf491906115c4565b90925090505b600354600160a01b900461ffff1615610c7e5760035460808401516001600160a01b038216916108fc9161271091610c3e91600160a01b90910461ffff1690611608565b610c489190611637565b6001600160801b03169081150290604051600060405180830381858888f19350505050158015610c7c573d6000803e3d6000fd5b505b82606001516001600160a01b03166108fc82612710600360149054906101000a900461ffff16612710610cb1919061166b565b61ffff168760800151610cc49190611608565b610cce9190611637565b6001600160801b0316610ce1919061168e565b6040518115909202916000818181858888f19350505050158015610d09573d6000803e3d6000fd5b5060a08301516001600160a01b031615801590610d32575060a08301516001600160a01b03163b155b15610dac5782600001516001600160a01b031663f242432a308560a00151866020015187604001516040518563ffffffff1660e01b8152600401610d79949392919061158c565b600060405180830381600087803b158015610d9357600080fd5b505af1158015610da7573d6000803e3d6000fd5b505050505b6040518581527fdd636676cbde606c0bf9ba33bcb630724c73f8710733e9a20567a4caa991b0349060200160405180910390a15050505050565b6000818152600260205260409020600601548190426001600160801b039091161015610e445760405162461bcd60e51b815260206004820152600d60248201526c185d58dd1a5bdb88195b991959609a1b604482015260640161046e565b333b1580610e6157503360009081526001602052604090205460ff165b610e7d5760405162461bcd60e51b815260040161046e90611555565b600082815260026020526040902060048101546001600160801b03163411610ed55760405162461bcd60e51b815260206004820152600b60248201526a62696420746f6f206c6f7760a81b604482015260640161046e565b60058101546001600160a01b031615801590610efd575060058101546001600160a01b03163b155b15610f4e57600581015460048201546040516001600160a01b03909216916001600160801b0390911680156108fc02916000818181858888f19350505050158015610f4c573d6000803e3d6000fd5b505b600581018054336001600160a01b03199091161790556004810180546001600160801b031916346001600160801b03161790556040518381527fce3fcb8cb2d98bb5670375017977cabb3197f05cb7d1964f502e63a5a6b4457b9060200160405180910390a1505050565b6000546001600160a01b03163314610fe35760405162461bcd60e51b815260040161046e90611520565b6001600160a01b0381166110485760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161046e565b61105181611054565b50565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b60006110af836110c7565b80156110c057506110c083836110fa565b9392505050565b60006110da826301ffc9a760e01b6110fa565b801561043e57506110f3826001600160e01b03196110fa565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b03871690617530906111619086906116a5565b6000604051808303818686fa925050503d806000811461119d576040519150601f19603f3d011682016040523d82523d6000602084013e6111a2565b606091505b50915091506020815110156111bd576000935050505061043e565b8180156111d95750808060200190518101906111d991906116e0565b9695505050505050565b6000602082840312156111f557600080fd5b81356001600160e01b0319811681146110c057600080fd5b6001600160a01b038116811461105157600080fd5b60006020828403121561123457600080fd5b81356110c08161120d565b60006020828403121561125157600080fd5b5035919050565b60006020828403121561126a57600080fd5b813561ffff811681146110c057600080fd5b6000806000806080858703121561129257600080fd5b843561129d8161120d565b9350602085013592506040850135915060608501356001600160801b03811681146112c757600080fd5b939692955090935050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715611311576113116112d2565b604052919050565b600082601f83011261132a57600080fd5b8135602067ffffffffffffffff821115611346576113466112d2565b8160051b6113558282016112e8565b928352848101820192828101908785111561136f57600080fd5b83870192505b8483101561138e57823582529183019190830190611375565b979650505050505050565b600082601f8301126113aa57600080fd5b813567ffffffffffffffff8111156113c4576113c46112d2565b6113d7601f8201601f19166020016112e8565b8181528460208386010111156113ec57600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a0868803121561142157600080fd5b853561142c8161120d565b9450602086013561143c8161120d565b9350604086013567ffffffffffffffff8082111561145957600080fd5b61146589838a01611319565b9450606088013591508082111561147b57600080fd5b61148789838a01611319565b9350608088013591508082111561149d57600080fd5b506114aa88828901611399565b9150509295509295909350565b600080600080600060a086880312156114cf57600080fd5b85356114da8161120d565b945060208601356114ea8161120d565b93506040860135925060608601359150608086013567ffffffffffffffff81111561151457600080fd5b6114aa88828901611399565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6020808252601e908201527f6f6e6c79206e6f6e20636f6e747261637473206f7220617070726f7665640000604082015260600190565b6001600160a01b0394851681529290931660208301526040820152606081019190915260a06080820181905260009082015260c00190565b600080604083850312156115d757600080fd5b82516115e28161120d565b6020939093015192949293505050565b634e487b7160e01b600052601160045260246000fd5b60006001600160801b038083168185168183048111821515161561162e5761162e6115f2565b02949350505050565b60006001600160801b038084168061165f57634e487b7160e01b600052601260045260246000fd5b92169190910492915050565b600061ffff83811690831681811015611686576116866115f2565b039392505050565b6000828210156116a0576116a06115f2565b500390565b6000825160005b818110156116c657602081860181015185830152016116ac565b818111156116d5576000828501525b509190910192915050565b6000602082840312156116f257600080fd5b815180151581146110c057600080fdfea26469706673582212207e58acab0c7b8c7ceb5f7011f1fc9fdac3a187aac1ca83c8273776fd2741a34864736f6c63430008090033","deployedBytecode":"0x6080604052600436106100f35760003560e01c8063a65662b31161008a578063ddca3f4311610059578063ddca3f431461036c578063de53fcd5146103a1578063f23a6e61146103c1578063f2fde38b146103ed57600080fd5b8063a65662b3146102c6578063b7747267146102f4578063bc197c8114610314578063d43028051461035957600080fd5b806326749ad7116100c657806326749ad71461022f5780633407facd1461025f578063715018a61461027f5780638da5cb5b1461029457600080fd5b806301ffc9a7146100f8578063135171be1461012d5780631e18cb891461014f5780631edbc5be1461016f575b600080fd5b34801561010457600080fd5b506101186101133660046111e3565b61040d565b60405190151581526020015b60405180910390f35b34801561013957600080fd5b5061014d610148366004611222565b610444565b005b34801561015b57600080fd5b5061014d61016a366004611222565b61049e565b34801561017b57600080fd5b506101e061018a36600461123f565b600260208190526000918252604090912080546001820154928201546003830154600484015460058501546006909501546001600160a01b0394851696959394928316936001600160801b039283169316911687565b604080516001600160a01b039889168152602081019790975286019490945291851660608501526001600160801b039081166080850152931660a08301529190911660c082015260e001610124565b34801561023b57600080fd5b5061011861024a366004611222565b60016020526000908152604090205460ff1681565b34801561026b57600080fd5b5061014d61027a366004611258565b6104ea565b34801561028b57600080fd5b5061014d61057f565b3480156102a057600080fd5b506000546001600160a01b03165b6040516001600160a01b039091168152602001610124565b3480156102d257600080fd5b506102e66102e136600461127c565b6105b5565b604051908152602001610124565b34801561030057600080fd5b5061014d61030f36600461123f565b6107da565b34801561032057600080fd5b5061034061032f366004611409565b63bc197c8160e01b95945050505050565b6040516001600160e01b03199091168152602001610124565b61014d61036736600461123f565b610de6565b34801561037857600080fd5b5060035461038e90600160a01b900461ffff1681565b60405161ffff9091168152602001610124565b3480156103ad57600080fd5b506003546102ae906001600160a01b031681565b3480156103cd57600080fd5b506103406103dc3660046114b7565b63f23a6e6160e01b95945050505050565b3480156103f957600080fd5b5061014d610408366004611222565b610fb9565b60006001600160e01b03198216630271189760e51b148061043e57506301ffc9a760e01b6001600160e01b03198316145b92915050565b6000546001600160a01b031633146104775760405162461bcd60e51b815260040161046e90611520565b60405180910390fd5b6001600160a01b03166000908152600160208190526040909120805460ff19169091179055565b6000546001600160a01b031633146104c85760405162461bcd60e51b815260040161046e90611520565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146105145760405162461bcd60e51b815260040161046e90611520565b6102ee8161ffff16111561055d5760405162461bcd60e51b815260206004820152601060248201526f746f6f20626967206f6620612066656560801b604482015260640161046e565b6003805461ffff909216600160a01b0261ffff60a01b19909216919091179055565b6000546001600160a01b031633146105a95760405162461bcd60e51b815260040161046e90611520565b6105b36000611054565b565b6000333b15806105d457503360009081526001602052604090205460ff165b6105f05760405162461bcd60e51b815260040161046e90611555565b6040516bffffffffffffffffffffffff19606087811b82166020840152603483018790526054830186905232901b1660748201526001600160801b0319608084901b16608882015242609882015260009060b80160408051601f19818403018152908290528051602090910120637921219560e11b825291506001600160a01b0387169063f242432a9061068e90329030908a908a9060040161158c565b600060405180830381600087803b1580156106a857600080fd5b505af11580156106bc573d6000803e3d6000fd5b50506040805160e0810182526001600160a01b03808b16825260208083018b81528385018b8152326060860190815260006080870181815260a088018281526001600160801b038f811660c08b019081528e8552600298899052938b902099518a54908a166001600160a01b0319918216178b55965160018b0155945196890196909655915160038801805491881691861691909117905590516004870180549184166001600160801b03199283161790559351600587018054919096169316929092179093555160069093018054939092169216919091179055517f2a66b5a320edcb6b7fba849fd4173d545603571b82a650ae5ef95f12e0dada9e92506107c9915083815260200190565b60405180910390a195945050505050565b6000818152600260205260409020600601548190426001600160801b0390911610801561081d57506000818152600260205260409020546001600160a01b031615155b61085d5760405162461bcd60e51b8152602060048201526011602482015270185d58dd1a5bdb881b9bdd08195b991959607a1b604482015260640161046e565b333b158061087a57503360009081526001602052604090205460ff165b6108965760405162461bcd60e51b815260040161046e90611555565b6000600260008481526020019081526020016000206040518060e00160405290816000820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b0316815260200160018201548152602001600282015481526020016003820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016004820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681526020016005820160009054906101000a90046001600160a01b03166001600160a01b03166001600160a01b031681526020016006820160009054906101000a90046001600160801b03166001600160801b03166001600160801b031681525050905060026000848152602001908152602001600020600080820160006101000a8154906001600160a01b030219169055600182016000905560028201600090556003820160006101000a8154906001600160a01b0302191690556004820160006101000a8154906001600160801b0302191690556005820160006101000a8154906001600160a01b0302191690556006820160006101000a8154906001600160801b030219169055505060008082600001516001600160a01b0316632a55205a846020015185608001516040518363ffffffff1660e01b8152600401610aae9291909182526001600160801b0316602082015260400190565b604080518083038186803b158015610ac557600080fd5b505afa158015610ad9573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610afd91906115c4565b90925090508015610b40576040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015610b3e573d6000803e3d6000fd5b505b8251610b5c906001600160a01b031663152a902d60e11b6110a4565b15610bfa5782516020840151608085015160405163152a902d60e11b815260048101929092526001600160801b031660248201526001600160a01b0390911690632a55205a90604401604080518083038186803b158015610bbc57600080fd5b505afa158015610bd0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610bf491906115c4565b90925090505b600354600160a01b900461ffff1615610c7e5760035460808401516001600160a01b038216916108fc9161271091610c3e91600160a01b90910461ffff1690611608565b610c489190611637565b6001600160801b03169081150290604051600060405180830381858888f19350505050158015610c7c573d6000803e3d6000fd5b505b82606001516001600160a01b03166108fc82612710600360149054906101000a900461ffff16612710610cb1919061166b565b61ffff168760800151610cc49190611608565b610cce9190611637565b6001600160801b0316610ce1919061168e565b6040518115909202916000818181858888f19350505050158015610d09573d6000803e3d6000fd5b5060a08301516001600160a01b031615801590610d32575060a08301516001600160a01b03163b155b15610dac5782600001516001600160a01b031663f242432a308560a00151866020015187604001516040518563ffffffff1660e01b8152600401610d79949392919061158c565b600060405180830381600087803b158015610d9357600080fd5b505af1158015610da7573d6000803e3d6000fd5b505050505b6040518581527fdd636676cbde606c0bf9ba33bcb630724c73f8710733e9a20567a4caa991b0349060200160405180910390a15050505050565b6000818152600260205260409020600601548190426001600160801b039091161015610e445760405162461bcd60e51b815260206004820152600d60248201526c185d58dd1a5bdb88195b991959609a1b604482015260640161046e565b333b1580610e6157503360009081526001602052604090205460ff165b610e7d5760405162461bcd60e51b815260040161046e90611555565b600082815260026020526040902060048101546001600160801b03163411610ed55760405162461bcd60e51b815260206004820152600b60248201526a62696420746f6f206c6f7760a81b604482015260640161046e565b60058101546001600160a01b031615801590610efd575060058101546001600160a01b03163b155b15610f4e57600581015460048201546040516001600160a01b03909216916001600160801b0390911680156108fc02916000818181858888f19350505050158015610f4c573d6000803e3d6000fd5b505b600581018054336001600160a01b03199091161790556004810180546001600160801b031916346001600160801b03161790556040518381527fce3fcb8cb2d98bb5670375017977cabb3197f05cb7d1964f502e63a5a6b4457b9060200160405180910390a1505050565b6000546001600160a01b03163314610fe35760405162461bcd60e51b815260040161046e90611520565b6001600160a01b0381166110485760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161046e565b61105181611054565b50565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b60006110af836110c7565b80156110c057506110c083836110fa565b9392505050565b60006110da826301ffc9a760e01b6110fa565b801561043e57506110f3826001600160e01b03196110fa565b1592915050565b604080516001600160e01b0319831660248083019190915282518083039091018152604490910182526020810180516001600160e01b03166301ffc9a760e01b179052905160009190829081906001600160a01b03871690617530906111619086906116a5565b6000604051808303818686fa925050503d806000811461119d576040519150601f19603f3d011682016040523d82523d6000602084013e6111a2565b606091505b50915091506020815110156111bd576000935050505061043e565b8180156111d95750808060200190518101906111d991906116e0565b9695505050505050565b6000602082840312156111f557600080fd5b81356001600160e01b0319811681146110c057600080fd5b6001600160a01b038116811461105157600080fd5b60006020828403121561123457600080fd5b81356110c08161120d565b60006020828403121561125157600080fd5b5035919050565b60006020828403121561126a57600080fd5b813561ffff811681146110c057600080fd5b6000806000806080858703121561129257600080fd5b843561129d8161120d565b9350602085013592506040850135915060608501356001600160801b03811681146112c757600080fd5b939692955090935050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715611311576113116112d2565b604052919050565b600082601f83011261132a57600080fd5b8135602067ffffffffffffffff821115611346576113466112d2565b8160051b6113558282016112e8565b928352848101820192828101908785111561136f57600080fd5b83870192505b8483101561138e57823582529183019190830190611375565b979650505050505050565b600082601f8301126113aa57600080fd5b813567ffffffffffffffff8111156113c4576113c46112d2565b6113d7601f8201601f19166020016112e8565b8181528460208386010111156113ec57600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a0868803121561142157600080fd5b853561142c8161120d565b9450602086013561143c8161120d565b9350604086013567ffffffffffffffff8082111561145957600080fd5b61146589838a01611319565b9450606088013591508082111561147b57600080fd5b61148789838a01611319565b9350608088013591508082111561149d57600080fd5b506114aa88828901611399565b9150509295509295909350565b600080600080600060a086880312156114cf57600080fd5b85356114da8161120d565b945060208601356114ea8161120d565b93506040860135925060608601359150608086013567ffffffffffffffff81111561151457600080fd5b6114aa88828901611399565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6020808252601e908201527f6f6e6c79206e6f6e20636f6e747261637473206f7220617070726f7665640000604082015260600190565b6001600160a01b0394851681529290931660208301526040820152606081019190915260a06080820181905260009082015260c00190565b600080604083850312156115d757600080fd5b82516115e28161120d565b6020939093015192949293505050565b634e487b7160e01b600052601160045260246000fd5b60006001600160801b038083168185168183048111821515161561162e5761162e6115f2565b02949350505050565b60006001600160801b038084168061165f57634e487b7160e01b600052601260045260246000fd5b92169190910492915050565b600061ffff83811690831681811015611686576116866115f2565b039392505050565b6000828210156116a0576116a06115f2565b500390565b6000825160005b818110156116c657602081860181015185830152016116ac565b818111156116d5576000828501525b509190910192915050565b6000602082840312156116f257600080fd5b815180151581146110c057600080fdfea26469706673582212207e58acab0c7b8c7ceb5f7011f1fc9fdac3a187aac1ca83c8273776fd2741a34864736f6c63430008090033","linkReferences":{},"deployedLinkReferences":{}}')},d3fd:function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"ArtabiaERC1155","sourceName":"contracts/tokens/ArtabiaERC1155.sol","abi":[{"inputs":[{"internalType":"address[]","name":"marketplaceAddresses","type":"address[]"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"MarketplaceOrderCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"values","type":"uint256[]"}],"name":"TransferBatch","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"TransferSingle","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"value","type":"string"},{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"}],"name":"URI","type":"event"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"}],"name":"balanceOfBatch","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_tokenQty","type":"uint256"},{"internalType":"uint8","name":"_royaltyPercentage","type":"uint8"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_tokenQty","type":"uint256"},{"internalType":"uint8","name":"_royaltyPercentage","type":"uint8"},{"internalType":"uint128","name":"_endsAt","type":"uint128"}],"name":"mintAndCreateAuction","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_tokenQty","type":"uint256"},{"internalType":"uint8","name":"_royaltyPercentage","type":"uint8"}],"name":"mintAndCreateListing","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_tokenQty","type":"uint256"},{"internalType":"uint8","name":"_royaltyPercentage","type":"uint8"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"mintAndCreateOrder","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_salePrice","type":"uint256"}],"name":"royaltyInfo","outputs":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"royaltyAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeBatchTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"uri","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}],"bytecode":"0x60806040523480156200001157600080fd5b5060405162001f0238038062001f02833981016040819052620000349162000293565b60405180606001604052806028815260200162001eda6028913981816200005b81620001a1565b5060005b8151811015620000cb5760016003600084848151811062000084576200008462000365565b6020908102919091018101516001600160a01b03168252810191909152604001600020805460ff191691151591909117905580620000c2816200037b565b9150506200005f565b50505080600081518110620000e457620000e462000365565b6020026020010151600760006101000a8154816001600160a01b0302191690836001600160a01b031602179055508060018151811062000128576200012862000365565b6020026020010151600860006101000a8154816001600160a01b0302191690836001600160a01b03160217905550806002815181106200016c576200016c62000365565b6020026020010151600960006101000a8154816001600160a01b0302191690836001600160a01b0316021790555050620003e2565b8051620001b6906002906020840190620001ba565b5050565b828054620001c890620003a5565b90600052602060002090601f016020900481019282620001ec576000855562000237565b82601f106200020757805160ff191683800117855562000237565b8280016001018555821562000237579182015b82811115620002375782518255916020019190600101906200021a565b506200024592915062000249565b5090565b5b808211156200024557600081556001016200024a565b634e487b7160e01b600052604160045260246000fd5b80516001600160a01b03811681146200028e57600080fd5b919050565b60006020808385031215620002a757600080fd5b82516001600160401b0380821115620002bf57600080fd5b818501915085601f830112620002d457600080fd5b815181811115620002e957620002e962000260565b8060051b604051601f19603f8301168101818110858211171562000311576200031162000260565b6040529182528482019250838101850191888311156200033057600080fd5b938501935b828510156200035957620003498562000276565b8452938501939285019262000335565b98975050505050505050565b634e487b7160e01b600052603260045260246000fd5b60006000198214156200039e57634e487b7160e01b600052601160045260246000fd5b5060010190565b600181811c90821680620003ba57607f821691505b60208210811415620003dc57634e487b7160e01b600052602260045260246000fd5b50919050565b611ae880620003f26000396000f3fe608060405234801561001057600080fd5b50600436106100ce5760003560e01c80632eb2c2d61161008c578063a22cb46511610066578063a22cb465146101dc578063df87483b146101ef578063e985e9c514610202578063f242432a1461021557600080fd5b80632eb2c2d6146101965780634e1273f4146101a95780636573175c146101c957600080fd5b8062fdd58e146100d357806301ffc9a7146100f957806305b6cb4f1461011c5780630e89341c14610131578063181913b0146101515780632a55205a14610164575b600080fd5b6100e66100e1366004611172565b610228565b6040519081526020015b60405180910390f35b61010c6101073660046111b5565b6102bf565b60405190151581526020016100f0565b61012f61012a3660046111e3565b6102ea565b005b61014461013f366004611218565b6103b8565b6040516100f0919061127e565b6100e661015f366004611291565b61044c565b6101776101723660046112ce565b610550565b604080516001600160a01b0390931683526020830191909152016100f0565b61012f6101a436600461143c565b61059b565b6101bc6101b73660046114e6565b610632565b6040516100f091906115ec565b6100e66101d73660046111e3565b61075c565b61012f6101ea3660046115ff565b610857565b6100e66101fd36600461163b565b61092e565b61010c61021036600461168f565b6109a8565b61012f6102233660046116c2565b6109fb565b60006001600160a01b0383166102995760405162461bcd60e51b815260206004820152602b60248201527f455243313135353a2062616c616e636520717565727920666f7220746865207a60448201526a65726f206164647265737360a81b60648201526084015b60405180910390fd5b506000908152602081815260408083206001600160a01b03949094168352929052205490565b60006001600160e01b0319821663152a902d60e11b14806102e457506102e482610a82565b92915050565b333b156103095760405162461bcd60e51b815260040161029090611727565b60328160ff16111561035d5760405162461bcd60e51b815260206004820152601a60248201527f726f79616c74792070657263656e7461676520746f6f206269670000000000006044820152606401610290565b61037833848460405180602001604052806000815250610ad2565b600092835260056020908152604080852080546001600160a01b031916331790556006909152909220805460ff90931660ff199093169290921790915550565b6060600280546103c790611753565b80601f01602080910402602001604051908101604052809291908181526020018280546103f390611753565b80156104405780601f1061041557610100808354040283529160200191610440565b820191906000526020600020905b81548152906001019060200180831161042357829003601f168201915b50505050509050919050565b6000333b1561046d5760405162461bcd60e51b815260040161029090611727565b6104788585856102ea565b6007546040516337b2970d60e11b81523060048201526024810187905260448101869052606481018490526000916001600160a01b031690636f652e1a906084015b602060405180830381600087803b1580156104d457600080fd5b505af11580156104e8573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061050c919061178e565b90507f8d5109a871014c1ff071f645201b046f4be83fcabaff41299435c4dde9b68bf78160405161053f91815260200190565b60405180910390a195945050505050565b600082815260056020908152604080832054600690925282205482916001600160a01b0316906064906105869060ff16866117bd565b61059091906117dc565b915091509250929050565b6001600160a01b0385163314806105b757506105b785336109a8565b61061e5760405162461bcd60e51b815260206004820152603260248201527f455243313135353a207472616e736665722063616c6c6572206973206e6f74206044820152711bdddb995c881b9bdc88185c1c1c9bdd995960721b6064820152608401610290565b61062b8585858585610bdc565b5050505050565b606081518351146106975760405162461bcd60e51b815260206004820152602960248201527f455243313135353a206163636f756e747320616e6420696473206c656e677468604482015268040dad2e6dac2e8c6d60bb1b6064820152608401610290565b6000835167ffffffffffffffff8111156106b3576106b36112f0565b6040519080825280602002602001820160405280156106dc578160200160208202803683370190505b50905060005b845181101561075457610727858281518110610700576107006117fe565b602002602001015185838151811061071a5761071a6117fe565b6020026020010151610228565b828281518110610739576107396117fe565b602090810291909101015261074d81611814565b90506106e2565b509392505050565b6000333b1561077d5760405162461bcd60e51b815260040161029090611727565b6107888484846102ea565b60085460405163123c062b60e11b815230600482015260248101869052604481018590526000916001600160a01b0316906324780c5690606401602060405180830381600087803b1580156107dc57600080fd5b505af11580156107f0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610814919061178e565b90507f8d5109a871014c1ff071f645201b046f4be83fcabaff41299435c4dde9b68bf78160405161084791815260200190565b60405180910390a1949350505050565b6001600160a01b0382163314156108c25760405162461bcd60e51b815260206004820152602960248201527f455243313135353a2073657474696e6720617070726f76616c20737461747573604482015268103337b91039b2b63360b91b6064820152608401610290565b3360008181526004602090815260408083206001600160a01b03871680855290835292819020805460ff191686151590811790915590519081529192917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050565b6000333b1561094f5760405162461bcd60e51b815260040161029090611727565b61095a8585856102ea565b60095460405163a65662b360e01b815230600482015260248101879052604481018690526001600160801b03841660648201526000916001600160a01b03169063a65662b3906084016104ba565b6001600160a01b03811660009081526003602052604081205460ff16806109f457506001600160a01b0380841660009081526004602090815260408083209386168352929052205460ff165b9392505050565b6001600160a01b038516331480610a175750610a1785336109a8565b610a755760405162461bcd60e51b815260206004820152602960248201527f455243313135353a2063616c6c6572206973206e6f74206f776e6572206e6f7260448201526808185c1c1c9bdd995960ba1b6064820152608401610290565b61062b8585858585610db9565b60006001600160e01b03198216636cdb3d1360e11b1480610ab357506001600160e01b031982166303a24d0760e21b145b806102e457506301ffc9a760e01b6001600160e01b03198316146102e4565b6001600160a01b038416610b325760405162461bcd60e51b815260206004820152602160248201527f455243313135353a206d696e7420746f20746865207a65726f206164647265736044820152607360f81b6064820152608401610290565b33610b4c81600087610b4388610ed6565b61062b88610ed6565b6000848152602081815260408083206001600160a01b038916845290915281208054859290610b7c90849061182f565b909155505060408051858152602081018590526001600160a01b0380881692600092918516917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a461062b81600087878787610f21565b8151835114610c3e5760405162461bcd60e51b815260206004820152602860248201527f455243313135353a2069647320616e6420616d6f756e7473206c656e677468206044820152670dad2e6dac2e8c6d60c31b6064820152608401610290565b6001600160a01b038416610c645760405162461bcd60e51b815260040161029090611847565b3360005b8451811015610d4b576000858281518110610c8557610c856117fe565b602002602001015190506000858381518110610ca357610ca36117fe565b602090810291909101810151600084815280835260408082206001600160a01b038e168352909352919091205490915081811015610cf35760405162461bcd60e51b81526004016102909061188c565b6000838152602081815260408083206001600160a01b038e8116855292528083208585039055908b16825281208054849290610d3090849061182f565b9250508190555050505080610d4490611814565b9050610c68565b50846001600160a01b0316866001600160a01b0316826001600160a01b03167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8787604051610d9b9291906118d6565b60405180910390a4610db181878787878761108c565b505050505050565b6001600160a01b038416610ddf5760405162461bcd60e51b815260040161029090611847565b33610def818787610b4388610ed6565b6000848152602081815260408083206001600160a01b038a16845290915290205483811015610e305760405162461bcd60e51b81526004016102909061188c565b6000858152602081815260408083206001600160a01b038b8116855292528083208785039055908816825281208054869290610e6d90849061182f565b909155505060408051868152602081018690526001600160a01b03808916928a821692918616917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a4610ecd828888888888610f21565b50505050505050565b60408051600180825281830190925260609160009190602080830190803683370190505090508281600081518110610f1057610f106117fe565b602090810291909101015292915050565b6001600160a01b0384163b15610db15760405163f23a6e6160e01b81526001600160a01b0385169063f23a6e6190610f659089908990889088908890600401611904565b602060405180830381600087803b158015610f7f57600080fd5b505af1925050508015610faf575060408051601f3d908101601f19168201909252610fac91810190611949565b60015b61105c57610fbb611966565b806308c379a01415610ff55750610fd0611982565b80610fdb5750610ff7565b8060405162461bcd60e51b8152600401610290919061127e565b505b60405162461bcd60e51b815260206004820152603460248201527f455243313135353a207472616e7366657220746f206e6f6e20455243313135356044820152732932b1b2b4bb32b91034b6b83632b6b2b73a32b960611b6064820152608401610290565b6001600160e01b0319811663f23a6e6160e01b14610ecd5760405162461bcd60e51b815260040161029090611a0c565b6001600160a01b0384163b15610db15760405163bc197c8160e01b81526001600160a01b0385169063bc197c81906110d09089908990889088908890600401611a54565b602060405180830381600087803b1580156110ea57600080fd5b505af192505050801561111a575060408051601f3d908101601f1916820190925261111791810190611949565b60015b61112657610fbb611966565b6001600160e01b0319811663bc197c8160e01b14610ecd5760405162461bcd60e51b815260040161029090611a0c565b80356001600160a01b038116811461116d57600080fd5b919050565b6000806040838503121561118557600080fd5b61118e83611156565b946020939093013593505050565b6001600160e01b0319811681146111b257600080fd5b50565b6000602082840312156111c757600080fd5b81356109f48161119c565b803560ff8116811461116d57600080fd5b6000806000606084860312156111f857600080fd5b833592506020840135915061120f604085016111d2565b90509250925092565b60006020828403121561122a57600080fd5b5035919050565b6000815180845260005b818110156112575760208185018101518683018201520161123b565b81811115611269576000602083870101525b50601f01601f19169290920160200192915050565b6020815260006109f46020830184611231565b600080600080608085870312156112a757600080fd5b84359350602085013592506112be604086016111d2565b9396929550929360600135925050565b600080604083850312156112e157600080fd5b50508035926020909101359150565b634e487b7160e01b600052604160045260246000fd5b601f8201601f1916810167ffffffffffffffff8111828210171561132c5761132c6112f0565b6040525050565b600067ffffffffffffffff82111561134d5761134d6112f0565b5060051b60200190565b600082601f83011261136857600080fd5b8135602061137582611333565b6040516113828282611306565b83815260059390931b85018201928281019150868411156113a257600080fd5b8286015b848110156113bd57803583529183019183016113a6565b509695505050505050565b600082601f8301126113d957600080fd5b813567ffffffffffffffff8111156113f3576113f36112f0565b60405161140a601f8301601f191660200182611306565b81815284602083860101111561141f57600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a0868803121561145457600080fd5b61145d86611156565b945061146b60208701611156565b9350604086013567ffffffffffffffff8082111561148857600080fd5b61149489838a01611357565b945060608801359150808211156114aa57600080fd5b6114b689838a01611357565b935060808801359150808211156114cc57600080fd5b506114d9888289016113c8565b9150509295509295909350565b600080604083850312156114f957600080fd5b823567ffffffffffffffff8082111561151157600080fd5b818501915085601f83011261152557600080fd5b8135602061153282611333565b60405161153f8282611306565b83815260059390931b850182019282810191508984111561155f57600080fd5b948201945b838610156115845761157586611156565b82529482019490820190611564565b9650508601359250508082111561159a57600080fd5b506115a785828601611357565b9150509250929050565b600081518084526020808501945080840160005b838110156115e1578151875295820195908201906001016115c5565b509495945050505050565b6020815260006109f460208301846115b1565b6000806040838503121561161257600080fd5b61161b83611156565b91506020830135801515811461163057600080fd5b809150509250929050565b6000806000806080858703121561165157600080fd5b8435935060208501359250611668604086016111d2565b915060608501356001600160801b038116811461168457600080fd5b939692955090935050565b600080604083850312156116a257600080fd5b6116ab83611156565b91506116b960208401611156565b90509250929050565b600080600080600060a086880312156116da57600080fd5b6116e386611156565b94506116f160208701611156565b93506040860135925060608601359150608086013567ffffffffffffffff81111561171b57600080fd5b6114d9888289016113c8565b6020808252601290820152716f6e6c79206e6f6e20636f6e74726163747360701b604082015260600190565b600181811c9082168061176757607f821691505b6020821081141561178857634e487b7160e01b600052602260045260246000fd5b50919050565b6000602082840312156117a057600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b60008160001904831182151516156117d7576117d76117a7565b500290565b6000826117f957634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052603260045260246000fd5b6000600019821415611828576118286117a7565b5060010190565b60008219821115611842576118426117a7565b500190565b60208082526025908201527f455243313135353a207472616e7366657220746f20746865207a65726f206164604082015264647265737360d81b606082015260800190565b6020808252602a908201527f455243313135353a20696e73756666696369656e742062616c616e636520666f60408201526939103a3930b739b332b960b11b606082015260800190565b6040815260006118e960408301856115b1565b82810360208401526118fb81856115b1565b95945050505050565b6001600160a01b03868116825285166020820152604081018490526060810183905260a06080820181905260009061193e90830184611231565b979650505050505050565b60006020828403121561195b57600080fd5b81516109f48161119c565b600060033d111561197f5760046000803e5060005160e01c5b90565b600060443d10156119905790565b6040516003193d81016004833e81513d67ffffffffffffffff81602484011181841117156119c057505050505090565b82850191508151818111156119d85750505050505090565b843d87010160208285010111156119f25750505050505090565b611a0160208286010187611306565b509095945050505050565b60208082526028908201527f455243313135353a204552433131353552656365697665722072656a656374656040820152676420746f6b656e7360c01b606082015260800190565b6001600160a01b0386811682528516602082015260a060408201819052600090611a80908301866115b1565b8281036060840152611a9281866115b1565b90508281036080840152611aa68185611231565b9897505050505050505056fea2646970667358221220bb3766601255e35b671bf78cc274390c94ffd7eeb06a5c940ddd58e70767a5fe64736f6c63430008090033687474703a2f2f6c6f63616c686f73743a333030302f6d657461646174612f7b69647d2e6a736f6e","deployedBytecode":"0x608060405234801561001057600080fd5b50600436106100ce5760003560e01c80632eb2c2d61161008c578063a22cb46511610066578063a22cb465146101dc578063df87483b146101ef578063e985e9c514610202578063f242432a1461021557600080fd5b80632eb2c2d6146101965780634e1273f4146101a95780636573175c146101c957600080fd5b8062fdd58e146100d357806301ffc9a7146100f957806305b6cb4f1461011c5780630e89341c14610131578063181913b0146101515780632a55205a14610164575b600080fd5b6100e66100e1366004611172565b610228565b6040519081526020015b60405180910390f35b61010c6101073660046111b5565b6102bf565b60405190151581526020016100f0565b61012f61012a3660046111e3565b6102ea565b005b61014461013f366004611218565b6103b8565b6040516100f0919061127e565b6100e661015f366004611291565b61044c565b6101776101723660046112ce565b610550565b604080516001600160a01b0390931683526020830191909152016100f0565b61012f6101a436600461143c565b61059b565b6101bc6101b73660046114e6565b610632565b6040516100f091906115ec565b6100e66101d73660046111e3565b61075c565b61012f6101ea3660046115ff565b610857565b6100e66101fd36600461163b565b61092e565b61010c61021036600461168f565b6109a8565b61012f6102233660046116c2565b6109fb565b60006001600160a01b0383166102995760405162461bcd60e51b815260206004820152602b60248201527f455243313135353a2062616c616e636520717565727920666f7220746865207a60448201526a65726f206164647265737360a81b60648201526084015b60405180910390fd5b506000908152602081815260408083206001600160a01b03949094168352929052205490565b60006001600160e01b0319821663152a902d60e11b14806102e457506102e482610a82565b92915050565b333b156103095760405162461bcd60e51b815260040161029090611727565b60328160ff16111561035d5760405162461bcd60e51b815260206004820152601a60248201527f726f79616c74792070657263656e7461676520746f6f206269670000000000006044820152606401610290565b61037833848460405180602001604052806000815250610ad2565b600092835260056020908152604080852080546001600160a01b031916331790556006909152909220805460ff90931660ff199093169290921790915550565b6060600280546103c790611753565b80601f01602080910402602001604051908101604052809291908181526020018280546103f390611753565b80156104405780601f1061041557610100808354040283529160200191610440565b820191906000526020600020905b81548152906001019060200180831161042357829003601f168201915b50505050509050919050565b6000333b1561046d5760405162461bcd60e51b815260040161029090611727565b6104788585856102ea565b6007546040516337b2970d60e11b81523060048201526024810187905260448101869052606481018490526000916001600160a01b031690636f652e1a906084015b602060405180830381600087803b1580156104d457600080fd5b505af11580156104e8573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061050c919061178e565b90507f8d5109a871014c1ff071f645201b046f4be83fcabaff41299435c4dde9b68bf78160405161053f91815260200190565b60405180910390a195945050505050565b600082815260056020908152604080832054600690925282205482916001600160a01b0316906064906105869060ff16866117bd565b61059091906117dc565b915091509250929050565b6001600160a01b0385163314806105b757506105b785336109a8565b61061e5760405162461bcd60e51b815260206004820152603260248201527f455243313135353a207472616e736665722063616c6c6572206973206e6f74206044820152711bdddb995c881b9bdc88185c1c1c9bdd995960721b6064820152608401610290565b61062b8585858585610bdc565b5050505050565b606081518351146106975760405162461bcd60e51b815260206004820152602960248201527f455243313135353a206163636f756e747320616e6420696473206c656e677468604482015268040dad2e6dac2e8c6d60bb1b6064820152608401610290565b6000835167ffffffffffffffff8111156106b3576106b36112f0565b6040519080825280602002602001820160405280156106dc578160200160208202803683370190505b50905060005b845181101561075457610727858281518110610700576107006117fe565b602002602001015185838151811061071a5761071a6117fe565b6020026020010151610228565b828281518110610739576107396117fe565b602090810291909101015261074d81611814565b90506106e2565b509392505050565b6000333b1561077d5760405162461bcd60e51b815260040161029090611727565b6107888484846102ea565b60085460405163123c062b60e11b815230600482015260248101869052604481018590526000916001600160a01b0316906324780c5690606401602060405180830381600087803b1580156107dc57600080fd5b505af11580156107f0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610814919061178e565b90507f8d5109a871014c1ff071f645201b046f4be83fcabaff41299435c4dde9b68bf78160405161084791815260200190565b60405180910390a1949350505050565b6001600160a01b0382163314156108c25760405162461bcd60e51b815260206004820152602960248201527f455243313135353a2073657474696e6720617070726f76616c20737461747573604482015268103337b91039b2b63360b91b6064820152608401610290565b3360008181526004602090815260408083206001600160a01b03871680855290835292819020805460ff191686151590811790915590519081529192917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050565b6000333b1561094f5760405162461bcd60e51b815260040161029090611727565b61095a8585856102ea565b60095460405163a65662b360e01b815230600482015260248101879052604481018690526001600160801b03841660648201526000916001600160a01b03169063a65662b3906084016104ba565b6001600160a01b03811660009081526003602052604081205460ff16806109f457506001600160a01b0380841660009081526004602090815260408083209386168352929052205460ff165b9392505050565b6001600160a01b038516331480610a175750610a1785336109a8565b610a755760405162461bcd60e51b815260206004820152602960248201527f455243313135353a2063616c6c6572206973206e6f74206f776e6572206e6f7260448201526808185c1c1c9bdd995960ba1b6064820152608401610290565b61062b8585858585610db9565b60006001600160e01b03198216636cdb3d1360e11b1480610ab357506001600160e01b031982166303a24d0760e21b145b806102e457506301ffc9a760e01b6001600160e01b03198316146102e4565b6001600160a01b038416610b325760405162461bcd60e51b815260206004820152602160248201527f455243313135353a206d696e7420746f20746865207a65726f206164647265736044820152607360f81b6064820152608401610290565b33610b4c81600087610b4388610ed6565b61062b88610ed6565b6000848152602081815260408083206001600160a01b038916845290915281208054859290610b7c90849061182f565b909155505060408051858152602081018590526001600160a01b0380881692600092918516917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a461062b81600087878787610f21565b8151835114610c3e5760405162461bcd60e51b815260206004820152602860248201527f455243313135353a2069647320616e6420616d6f756e7473206c656e677468206044820152670dad2e6dac2e8c6d60c31b6064820152608401610290565b6001600160a01b038416610c645760405162461bcd60e51b815260040161029090611847565b3360005b8451811015610d4b576000858281518110610c8557610c856117fe565b602002602001015190506000858381518110610ca357610ca36117fe565b602090810291909101810151600084815280835260408082206001600160a01b038e168352909352919091205490915081811015610cf35760405162461bcd60e51b81526004016102909061188c565b6000838152602081815260408083206001600160a01b038e8116855292528083208585039055908b16825281208054849290610d3090849061182f565b9250508190555050505080610d4490611814565b9050610c68565b50846001600160a01b0316866001600160a01b0316826001600160a01b03167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8787604051610d9b9291906118d6565b60405180910390a4610db181878787878761108c565b505050505050565b6001600160a01b038416610ddf5760405162461bcd60e51b815260040161029090611847565b33610def818787610b4388610ed6565b6000848152602081815260408083206001600160a01b038a16845290915290205483811015610e305760405162461bcd60e51b81526004016102909061188c565b6000858152602081815260408083206001600160a01b038b8116855292528083208785039055908816825281208054869290610e6d90849061182f565b909155505060408051868152602081018690526001600160a01b03808916928a821692918616917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a4610ecd828888888888610f21565b50505050505050565b60408051600180825281830190925260609160009190602080830190803683370190505090508281600081518110610f1057610f106117fe565b602090810291909101015292915050565b6001600160a01b0384163b15610db15760405163f23a6e6160e01b81526001600160a01b0385169063f23a6e6190610f659089908990889088908890600401611904565b602060405180830381600087803b158015610f7f57600080fd5b505af1925050508015610faf575060408051601f3d908101601f19168201909252610fac91810190611949565b60015b61105c57610fbb611966565b806308c379a01415610ff55750610fd0611982565b80610fdb5750610ff7565b8060405162461bcd60e51b8152600401610290919061127e565b505b60405162461bcd60e51b815260206004820152603460248201527f455243313135353a207472616e7366657220746f206e6f6e20455243313135356044820152732932b1b2b4bb32b91034b6b83632b6b2b73a32b960611b6064820152608401610290565b6001600160e01b0319811663f23a6e6160e01b14610ecd5760405162461bcd60e51b815260040161029090611a0c565b6001600160a01b0384163b15610db15760405163bc197c8160e01b81526001600160a01b0385169063bc197c81906110d09089908990889088908890600401611a54565b602060405180830381600087803b1580156110ea57600080fd5b505af192505050801561111a575060408051601f3d908101601f1916820190925261111791810190611949565b60015b61112657610fbb611966565b6001600160e01b0319811663bc197c8160e01b14610ecd5760405162461bcd60e51b815260040161029090611a0c565b80356001600160a01b038116811461116d57600080fd5b919050565b6000806040838503121561118557600080fd5b61118e83611156565b946020939093013593505050565b6001600160e01b0319811681146111b257600080fd5b50565b6000602082840312156111c757600080fd5b81356109f48161119c565b803560ff8116811461116d57600080fd5b6000806000606084860312156111f857600080fd5b833592506020840135915061120f604085016111d2565b90509250925092565b60006020828403121561122a57600080fd5b5035919050565b6000815180845260005b818110156112575760208185018101518683018201520161123b565b81811115611269576000602083870101525b50601f01601f19169290920160200192915050565b6020815260006109f46020830184611231565b600080600080608085870312156112a757600080fd5b84359350602085013592506112be604086016111d2565b9396929550929360600135925050565b600080604083850312156112e157600080fd5b50508035926020909101359150565b634e487b7160e01b600052604160045260246000fd5b601f8201601f1916810167ffffffffffffffff8111828210171561132c5761132c6112f0565b6040525050565b600067ffffffffffffffff82111561134d5761134d6112f0565b5060051b60200190565b600082601f83011261136857600080fd5b8135602061137582611333565b6040516113828282611306565b83815260059390931b85018201928281019150868411156113a257600080fd5b8286015b848110156113bd57803583529183019183016113a6565b509695505050505050565b600082601f8301126113d957600080fd5b813567ffffffffffffffff8111156113f3576113f36112f0565b60405161140a601f8301601f191660200182611306565b81815284602083860101111561141f57600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a0868803121561145457600080fd5b61145d86611156565b945061146b60208701611156565b9350604086013567ffffffffffffffff8082111561148857600080fd5b61149489838a01611357565b945060608801359150808211156114aa57600080fd5b6114b689838a01611357565b935060808801359150808211156114cc57600080fd5b506114d9888289016113c8565b9150509295509295909350565b600080604083850312156114f957600080fd5b823567ffffffffffffffff8082111561151157600080fd5b818501915085601f83011261152557600080fd5b8135602061153282611333565b60405161153f8282611306565b83815260059390931b850182019282810191508984111561155f57600080fd5b948201945b838610156115845761157586611156565b82529482019490820190611564565b9650508601359250508082111561159a57600080fd5b506115a785828601611357565b9150509250929050565b600081518084526020808501945080840160005b838110156115e1578151875295820195908201906001016115c5565b509495945050505050565b6020815260006109f460208301846115b1565b6000806040838503121561161257600080fd5b61161b83611156565b91506020830135801515811461163057600080fd5b809150509250929050565b6000806000806080858703121561165157600080fd5b8435935060208501359250611668604086016111d2565b915060608501356001600160801b038116811461168457600080fd5b939692955090935050565b600080604083850312156116a257600080fd5b6116ab83611156565b91506116b960208401611156565b90509250929050565b600080600080600060a086880312156116da57600080fd5b6116e386611156565b94506116f160208701611156565b93506040860135925060608601359150608086013567ffffffffffffffff81111561171b57600080fd5b6114d9888289016113c8565b6020808252601290820152716f6e6c79206e6f6e20636f6e74726163747360701b604082015260600190565b600181811c9082168061176757607f821691505b6020821081141561178857634e487b7160e01b600052602260045260246000fd5b50919050565b6000602082840312156117a057600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b60008160001904831182151516156117d7576117d76117a7565b500290565b6000826117f957634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052603260045260246000fd5b6000600019821415611828576118286117a7565b5060010190565b60008219821115611842576118426117a7565b500190565b60208082526025908201527f455243313135353a207472616e7366657220746f20746865207a65726f206164604082015264647265737360d81b606082015260800190565b6020808252602a908201527f455243313135353a20696e73756666696369656e742062616c616e636520666f60408201526939103a3930b739b332b960b11b606082015260800190565b6040815260006118e960408301856115b1565b82810360208401526118fb81856115b1565b95945050505050565b6001600160a01b03868116825285166020820152604081018490526060810183905260a06080820181905260009061193e90830184611231565b979650505050505050565b60006020828403121561195b57600080fd5b81516109f48161119c565b600060033d111561197f5760046000803e5060005160e01c5b90565b600060443d10156119905790565b6040516003193d81016004833e81513d67ffffffffffffffff81602484011181841117156119c057505050505090565b82850191508151818111156119d85750505050505090565b843d87010160208285010111156119f25750505050505090565b611a0160208286010187611306565b509095945050505050565b60208082526028908201527f455243313135353a204552433131353552656365697665722072656a656374656040820152676420746f6b656e7360c01b606082015260800190565b6001600160a01b0386811682528516602082015260a060408201819052600090611a80908301866115b1565b8281036060840152611a9281866115b1565b90508281036080840152611aa68185611231565b9897505050505050505056fea2646970667358221220bb3766601255e35b671bf78cc274390c94ffd7eeb06a5c940ddd58e70767a5fe64736f6c63430008090033","linkReferences":{},"deployedLinkReferences":{}}')},d550:function(e,t,n){},d843:function(e,t,n){},dc42:function(e,t){function n(e){return e.events.MarketplaceOrderCreated.returnValues.id}e.exports=n},dc90:function(e,t,n){},e0ae:function(e,t,n){var r=n("ded3").default,a=n("c973").default,i=n("970b").default,o=n("5bc3").default;n("96cf"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("d81d");var s=n("d260"),c=s.abi,u=n("a92c"),l=function(){"use strict";function e(t){i(this,e),this.contractAddress=t}return o(e,[{key:"_connect",value:function(e,t,n){this.web3=e,this.contract=new e.eth.Contract(c,this.contractAddress,{from:t,gasPrice:n})}},{key:"isConnected",value:function(){return Boolean(this.web3)}},{key:"getAuctionHighestBid",value:function(e){return this.contract.methods.auctions(e).call().then((function(e){return e.bid}))}},{key:"createAuction",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n,r,a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.createAuction(t,n,r.toString(),Math.floor(a/1e3).toString()).send();case 4:return i=e.sent,e.abrupt("return",i.events.AuctionCreated.returnValues.id);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"getAuction",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.auctions(t).call();case 4:if(n=e.sent,"0x0000000000000000000000000000000000000000"!==n.owner){e.next=7;break}return e.abrupt("return",Promise.resolve(null));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAuctionBids",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.getPastEvents("AuctionBidPlaced",{fromBlock:"earliest",filter:{id:t}}).then(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=r,e.t1=r({},t.returnValues),e.t2={},e.t3=Date,e.next=6,i.web3.eth.getBlock(t.blockNumber).then((function(e){return 1e3*e.timestamp}));case 6:return e.t4=e.sent,e.t5=new e.t3(e.t4),e.t6={time:e.t5},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t6));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"bidOnAuction",value:function(e,t){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.bidOnAuction(e).send({value:this.web3.utils.toWei(t,"ether")})}},{key:"bidOnAuctionGasEstimation",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.contract.methods.bidOnAuction(t).estimateGas({value:this.web3.utils.toWei(n,"ether")}).then((function(e){return e.toString()}));case 2:return r=e.sent,e.next=5,u();case 5:return a=e.sent,i=a.gasPrice,o=a.waitTime,s=this.web3.utils.fromWei(new this.web3.utils.BN(r).mul(new this.web3.utils.BN(i)),"ether"),e.abrupt("return",{price:"".concat(n," ETH"),txFees:"".concat(s," ETH"),totalPrice:"".concat(new this.web3.utils.BN(n).add(new this.web3.utils.BN(s))," ETH"),waitTime:"".concat(o," minutes")});case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"claimAuction",value:function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.abrupt("return",this.contract.methods.claimAuction(t).send());case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.isIntegrationClass=!0,e.exports=l},e347:function(e,t,n){e.exports=n.p+"img/logo.0758ec9a.svg"},e428:function(e){e.exports=JSON.parse("{}")},f2e4:function(e,t,n){var r=n("ded3").default,a=n("c973").default,i=n("970b").default,o=n("5bc3").default;n("96cf"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("d81d");var s=n("6786"),c=s.abi,u=n("a92c"),l=function(){"use strict";function e(t){i(this,e),this.contractAddress=t}return o(e,[{key:"_connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x000000000000000000000000000000000000",n=arguments.length>2?arguments[2]:void 0;this.web3=e,this.contract=new e.eth.Contract(c,this.contractAddress,{from:t,gasPrice:n})}},{key:"isConnected",value:function(){return Boolean(this.web3)}},{key:"getAuctionHighestBid",value:function(e){return this.contract.methods.auctions(e).call().then((function(e){return e.bid}))}},{key:"createAuction",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.createAuction(t,n,Math.floor(r/1e3).toString()).send();case 4:return a=e.sent,e.abrupt("return",a.events.AuctionCreated.returnValues.id);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getAuction",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.auctions(t).call();case 4:if(n=e.sent,"0x0000000000000000000000000000000000000000"!==n.owner){e.next=7;break}return e.abrupt("return",Promise.resolve(null));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAuctionBids",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.getPastEvents("AuctionBidPlaced",{fromBlock:"earliest",filter:{id:t}}).then(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=r,e.t1=r({},t.returnValues),e.t2={},e.t3=Date,e.next=6,i.web3.eth.getBlock(t.blockNumber).then((function(e){return 1e3*e.timestamp}));case 6:return e.t4=e.sent,e.t5=new e.t3(e.t4),e.t6={time:e.t5},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t6));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"bidOnAuction",value:function(e,t){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.bidOnAuction(e).send({value:this.web3.utils.toWei(t,"ether")})}},{key:"bidOnAuctionGasEstimation",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.contract.methods.bidOnAuction(t).estimateGas({value:this.web3.utils.toWei(n,"ether")}).then((function(e){return e.toString()}));case 2:return r=e.sent,e.next=5,u();case 5:return a=e.sent,i=a.gasPrice,o=a.waitTime,s=this.web3.utils.fromWei(new this.web3.utils.BN(r).mul(new this.web3.utils.BN(i)),"ether"),e.abrupt("return",{price:"".concat(n," ETH"),txFees:"".concat(s," ETH"),totalPrice:"".concat(new this.web3.utils.BN(n).add(new this.web3.utils.BN(s))," ETH"),waitTime:"".concat(o," minutes")});case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"claimAuction",value:function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.abrupt("return",this.contract.methods.claimAuction(t).send());case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.isIntegrationClass=!0,e.exports=l},f356:function(e,t,n){e.exports=n.p+"img/bg-pattern.2430dbc3.png"},f484:function(e){e.exports=JSON.parse("{}")},f85a:function(e,t,n){var r=n("c973").default,a=n("970b").default,i=n("5bc3").default;n("96cf"),n("d3b7"),n("25f0");var o=n("720e"),s=o.abi,c=n("a92c"),u=function(){"use strict";function e(t){a(this,e),this.contractAddress=t}return i(e,[{key:"_connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x000000000000000000000000000000000000",n=arguments.length>2?arguments[2]:void 0;this.web3=e,this.contract=new e.eth.Contract(s,this.contractAddress,{from:t,gasPrice:n})}},{key:"isConnected",value:function(){return Boolean(this.web3)}},{key:"_getOrderPrice",value:function(e){return this.contract.methods.orders(e).call().then((function(e){return e.price}))}},{key:"createOrder",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.createOrder(t,n,this.web3.utils.toWei(r.toString(),"ether")).send();case 4:return a=e.sent,e.abrupt("return",a.events.OrderCreated.returnValues.id);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getOrder",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.orders(t).call();case 4:if(n=e.sent,"0x0000000000000000000000000000000000000000"!==n.owner){e.next=7;break}return e.abrupt("return",Promise.resolve(null));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeOrder",value:function(e){if(!this.isConnected())throw new Error("Not connected to the blockchain");return this.contract.methods.removeOrder(e).send()}},{key:"buyOrder",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}throw new Error("Not connected to the blockchain");case 2:return e.next=4,this.contract.methods.orders(t).call().then((function(e){return e.price}));case 4:return n=e.sent,e.abrupt("return",this.contract.methods.buyOrder(t).send({value:n}));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"buyOrderGasEstimation",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._getOrderPrice(t);case 2:return n=e.sent,e.next=5,this.contract.methods.buyOrder(t).estimateGas({value:n}).then((function(e){return e.toString()}));case 5:return r=e.sent,e.next=8,c();case 8:return a=e.sent,i=a.gasPrice,o=a.waitTime,s=this.web3.utils.fromWei(new this.web3.utils.BN(r).mul(new this.web3.utils.BN(i)),"ether"),e.abrupt("return",{price:"".concat(n," ETH"),txFees:"".concat(s," ETH"),totalPrice:"".concat(new this.web3.utils.BN(n).add(new this.web3.utils.BN(s))," ETH"),waitTime:"".concat(o," minutes")});case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();u.isIntegrationClass=!0,e.exports=u},feb3:function(e,t,n){"use strict";n("6116")}});
//# sourceMappingURL=app.f68520de.js.map